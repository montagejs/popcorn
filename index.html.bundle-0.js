BUNDLE=[["index.html.bundle-1-0.js"]],!function(e,t){"function"==typeof define&&define.amd?define("montage",[],t):"object"==typeof module&&module.exports?module.exports=t(require,exports,module):e.Montage=t({},{},{})}(this,function(e,t,n){"use strict";function r(e){var t=e.indexOf("[");return t>0?e.substr(0,t):e}var i=eval,o=i("this"),a=t;o.global=o;var s={makeResolve:function(){try{var e="http://example.org",t="/test.html",n=new URL(t,e).href;if(!n||n!==e+t)throw new Error("NotSupported");return function(e,t){return new URL(t,e).href}}catch(r){var i=/^[\w\-]+:/,o=document.querySelector("head"),a=o.querySelector("base"),s=document.createElement("base"),l=document.createElement("a"),u=!1;return a?u=!0:a=document.createElement("base"),s.href="",function(e,t){var n;if(u||o.appendChild(a),e=String(e),i.test(e)===!1)throw new Error("Can't resolve from a relative location: "+JSON.stringify(e)+" "+JSON.stringify(t));u&&(n=a.href),a.href=e,l.href=t;var r=l.href;return u?a.href=n:o.removeChild(a),r}}},load:function(e,t){var n=document.createElement("script");n.src=e,n.onload=function(){t&&t(null,n),n.parentNode.removeChild(n)},n.onerror=function(){t&&t(new Error("Can't load script "+JSON.stringify(e)),n),n.parentNode.removeChild(n)},document.getElementsByTagName("head")[0].appendChild(n)},getParams:function(){var e,t,n,r,i,o,a;if(!this._params){this._params={};var s=document.getElementsByTagName("script");for(e=0;e<s.length;e++)if(r=s[e],i=!1,r.src&&(n=r.src.match(/^(.*)montage.js(?:[\?\.]|$)/i))&&(this._params.montageLocation=n[1],i=!0),r.hasAttribute("data-montage-location")&&(this._params.montageLocation=r.getAttribute("data-montage-location"),i=!0),i){if(r.dataset)for(a in r.dataset)r.dataset.hasOwnProperty(a)&&(this._params[a]=r.dataset[a]);else if(r.attributes){var l=/^data-(.*)$/,u=/-([a-z])/g,c=function(e,t){return t.toUpperCase()};for(t=0;t<r.attributes.length;t++)o=r.attributes[t],n=o.name.match(l),n&&(this._params[n[1].replace(u,c)]=o.value)}r.parentNode.removeChild(r);break}}return this._params},bootstrap:function(e){function t(){u&&l&&e(l,c,h)}function n(){document.removeEventListener("DOMContentLoaded",n,!0),u=!0;var e=document.documentElement;e.classList?e.classList.add("montage-app-bootstrapping"):e.className=e.className+" montage-app-bootstrapping",document._montageTiming=document._montageTiming||{},document._montageTiming.bootstrappingStartTime=Date.now(),t()}function r(e){if(!g[e]&&v[e]){var t=g[e]={};g[e]=v[e](r,t)||t}return g[e]}function i(){h=r("mini-url"),c=r("promise"),l=r("require"),delete o.bootstrap,t()}function a(e,t){m=m||d(o.location,p.montageLocation),s.load(d(o.location,e),function(n,r){n?s.load(d(m,e),t):t&&t(null,r)})}var l,u,c,h,p=this.getParams(),d=this.makeResolve();/interactive|complete/.test(document.readyState)?n():document.addEventListener("DOMContentLoaded",n,!0);var f={require:"node_modules/mr/require.js","require/browser":"node_modules/mr/browser.js",promise:"node_modules/bluebird/js/browser/bluebird.min.js"},v={},g={};o.bootstrap=function(e,t){v[e]=t,delete f[e];for(var n in f)if(f.hasOwnProperty(n))return;i()};var m;"undefined"==typeof o.BUNDLE?a(f.promise,function(){delete f.promise,o.bootstrap("bluebird",function(e,t){return o.Promise}),o.bootstrap("promise",function(e,t){return o.Promise});for(var e in f)f.hasOwnProperty(e)&&a(f[e])}):(o.nativePromise=o.Promise,Object.defineProperty(o,"Promise",{configurable:!0,set:function(e){Object.defineProperty(o,"Promise",{value:e}),o.bootstrap("bluebird",function(e,t){return o.Promise}),o.bootstrap("promise",function(e,t){return o.Promise})}})),o.bootstrap("mini-url",function(e,t){t.resolve=d})},initMontage:function(e,n,r){for(var i,a=["core/core","core/event/event-manager","core/serialization/deserializer/montage-reviver","core/logger"],s=e("core/promise").Promise,l=[],u=0;i=a[u];u++)l.push(e.deepLoad(i));return s.all(l).then(function(){for(var i,s=0;i=a[s];s++)e(i);var l,u=(e("core/core").Montage,e("core/event/event-manager").EventManager,e("core/event/event-manager").defaultEventManager),c=e("core/serialization/deserializer/montage-deserializer").MontageDeserializer,h=e("core/serialization/deserializer/montage-reviver").MontageReviver;e("core/logger").logger,t.MontageDeserializer=c,t.Require.delegate=t,"function"==typeof o.montageWillLoad&&o.montageWillLoad();var p,d,f=n.packageDescription.applicationPrototype;return f?(p=h.parseObjectLocationId(f),d=n.async(p.moduleId)):d=e.async("core/application"),d.then(function(e){var t=e[p?p.objectName:"Application"];return l=new t,u.application=l,l.eventManager=u,l._load(n,function(){r.module&&n.async(r.module),"function"==typeof o.montageDidLoad&&o.montageDidLoad(),window.MontageElement&&MontageElement.ready(n,l,h)})})})}};t.MJSONCompilerFactory=function(e,t,n,r,i,o){if(n.exports.hasOwnProperty("montageObject"))throw new Error("using reserved word as property name, 'montageObject' at: "+n.location);if(!n.deserializer){a.MontageDeserializer||(a.MontageDeserializer=e("montage/core/serialization/deserializer/montage-deserializer").MontageDeserializer);var s,l=new a.MontageDeserializer,u=e.config.requireForId(n.id);if(n.deserializer=l,l.init(n.text,u,void 0,n,!0),s=l.deserializeObject(),n.exports.montageObject&&n.exports.montageObject!==s)throw new Error("Final deserialized object is different than one set on module "+n.location);n.exports.montageObject||(n.exports.montageObject=s),n.exports?Object.assign(n.exports,n.parsedText):n.exports=n.parsedText,n.deserializer=null,n.text=null}},t.parseMJSONDependencies=function(e){for(var t,n,i=Object.keys(e),o=0,a=[];t=i[o];)n=e[t],n.hasOwnProperty("prototype")?(a.push(r(n.prototype)),"montage/core/meta/object-descriptor-reference"===a[a.length-1]&&a.push(n.properties.valueReference.objectDescriptorModule["%"])):n.hasOwnProperty("object")&&a.push(r(n.object)),o++;return a};var l=".meta",u=".mjson",c=".mjson.load.js";return t.Compiler=function(e,n){return function(r){if(r.exports||r.factory||"string"!=typeof r.text||"object"==typeof r.exports)return r;var i=r.location,o=i&&(i.endsWith(u)||i.endsWith(c)||i.endsWith(l));if(o){if("object"!=typeof r.exports&&"string"==typeof r.text){try{r.parsedText=JSON.parse(r.text)}catch(s){if(!(s instanceof SyntaxError))throw s;console.error("SyntaxError parsing JSON at "+i),e.lint(r)}if(r.parsedText.montageObject)throw new Error("using reserved word as property name, 'montageObject' at: "+i)}return r.dependencies=a.parseMJSONDependencies(r.parsedText),r.factory=t.MJSONCompilerFactory,r}var h=n(r);return h}},t.initMontageCustomElement=function(){function e(e){var t=function(){return Reflect.construct(HTMLElement,[],t)};return Object.setPrototypeOf(t.prototype,(e||HTMLElement).prototype),Object.setPrototypeOf(t,e||HTMLElement),t}function t(t,r){if(!customElements.get(t)){var i=e(n);i.componentConstructor=r.constructor,i.observedAttributes=r.observedAttributes,customElements.define(t,i)}}if("undefined"!=typeof window.customElements&&"undefined"!=typeof window.Reflect){var n=e();n.pendingCustomElements=new Map,n.define=function(e,n,r){r&&"object"==typeof r?r.constructor=n:r={constructor:n},this.require?t(e,r):this.pendingCustomElements.set(e,r)},n.ready=function(e,r,i){n.prototype.findProxyForElement=i.findProxyForElement,this.application=r,this.require=e,this.pendingCustomElements.forEach(function(e,n){t(n,e)}),this.pendingCustomElements.clear()},Object.defineProperties(n.prototype,{require:{get:function(){return n.require},configurable:!1},application:{get:function(){return n.application},configurable:!1},componentConstructor:{get:function(){return this.constructor.componentConstructor},configurable:!1},observedAttributes:{get:function(){return this.constructor.observedAttributes},configurable:!1}}),n.prototype.connectedCallback=function(){if(!this._instance){var e=this,t=this.instantiateComponent();return this.findParentComponent().then(function(n){e._instance=t,n.addChildComponent(t),t._canDrawOutsideDocument=!0,t.needsDraw=!0})}},n.prototype.disconnectedCallback=function(){},n.prototype.findParentComponent=function(){for(var e,t,n=this.application.eventManager,r=this;null!==(e=r.parentNode)&&!(t=n.eventHandlerForElement(e));)r=e;return Promise.resolve(t)||this.getRootComponent()},n.prototype.getRootComponent=function(){return n.rootComponentPromise||(n.rootComponentPromise=this.require.async("montage/ui/component").then(function(e){return e.__root__})),n.rootComponentPromise},n.prototype.instantiateComponent=function(){var e=new this.componentConstructor;return this.bootstrapComponent(e),e.element=document.createElement("div"),e},n.prototype.bootstrapComponent=function(e){var t=this.attachShadow({mode:"open"}),n=e.enterDocument,r=e.templateDidLoad,i=this.findProxyForElement(this);if(i){var o,a,s=this.observedAttributes,l=this;if(s&&(a=s.length))for(var u=0;u<a;u++)o=s[u],e.defineBinding(o,{"<->":""+o,source:i})}this.application.eventManager.registerTargetForActivation(t),e.templateDidLoad=function(){var n=e.getResources();n&&(l.injectResourcesWithinCustomElement(n.styles,t),l.injectResourcesWithinCustomElement(n.scripts,t)),this.templateDidLoad=r,"function"==typeof this.templateDidLoad&&this.templateDidLoad()},e.enterDocument=function(e){t.appendChild(this.element),this.enterDocument=n,"function"==typeof this.enterDocument&&this.enterDocument(e)}},n.prototype.injectResourcesWithinCustomElement=function(e,t){if(e&&e.length)for(var n=0,r=e.length;n<r;n++)t.appendChild(e[n])},o.MontageElement=n}},t.initMontage=function(){var e=t.getPlatform();e.bootstrap(function(n,r,i){var a=e.getParams(),l={location:n.getLocation()};t.Require=n;var u=i.resolve(l.location,a.montageLocation),c=i.resolve(l.location,a["package"]||"."),h=a.applicationHash;if("object"==typeof o.BUNDLE){var p={},d=function(e){if(!p[e]){var t=p[e]={},n=new r(function(e,n){t.resolve=e,t.reject=n});return t.promise=n,t}return p[e]};o.bundleLoaded=function(e){d(e).resolve()};var f={},v=new r(function(e,t){f.resolve=e,f.reject=t});f.promise=v,l.preloaded=f.promise;var g=r.resolve();o.BUNDLE.forEach(function(e){g=g.then(function(){return r.all(e.map(function(e){return s.load(e),d(e).promise}))})}),f.resolve(g.then(function(){delete o.BUNDLE,delete o.bundleLoaded}))}var m;if("remoteTrigger"in a){window.postMessage({type:"montageReady"},"*");var _=new r(function(e){var t=function(n){if(a.remoteTrigger===n.origin&&(n.source===window||n.source===window.parent))switch(n.data.type){case"montageInit":window.removeEventListener("message",t),e([n.data.location,n.data.injections]);break;case"isMontageReady":window.postMessage({type:"montageReady"},"*")}};window.addEventListener("message",t)});m=_.spread(function(e,t){var r=n.loadPackage({location:e,hash:h},l);return t&&(r=r.then(function(n){e=i.resolve(e,".");var r,o,a=t.packageDescriptions,s=t.packageDescriptionLocations,l=t.mappings,u=t.dependencies;if(a)for(o=a.length,r=0;r<o;r++)n.injectPackageDescription(a[r].location,a[r].description);if(s)for(o=s.length,r=0;r<o;r++)n.injectPackageDescriptionLocation(s[r].location,s[r].descriptionLocation);if(l)for(o=l.length,r=0;r<o;r++)n.injectMapping(l[r].dependency,l[r].name);if(u)for(o=u.length,r=0;r<o;r++)n.injectDependency(u[r].name,u[r].version);return n})),r})}else{if("autoPackage"in a)n.injectPackageDescription(c,{dependencies:{montage:"*"}},l);else if(".json"===c.slice(c.length-5)){var y=c;c=i.resolve(c,"."),n.injectPackageDescriptionLocation(c,y,l)}m=n.loadPackage({location:c,hash:h},l)}return m.then(function(t){return t.loadPackage({location:u,hash:a.montageHash}).then(function(n){return n.inject("core/mini-url",i),n.inject("core/promise",{Promise:r}),l.lint=function(e){n.async("core/jshint").then(function(t){t.JSHINT(e.text)||(console.warn("JSHint Error: "+e.location),t.JSHINT.errors.forEach(function(e){e&&(console.warn("Problem at line "+e.line+" character "+e.character+": "+e.reason),e.evidence&&console.warn("    "+e.evidence))}))})},o.require=o.mr=t,e.initMontage(n,t,a)})}).done()})},t.getPlatform=function(){if("undefined"!=typeof window&&window&&window.document)return s;if("undefined"!=typeof process)return e("./node.js");throw new Error("Platform not supported.")},"undefined"!=typeof window?o.__MONTAGE_LOADED__?console.warn("Montage already loaded!"):(o.__MONTAGE_LOADED__=!0,t.initMontage(),t.initMontageCustomElement()):t.getPlatform(),t}),!function(e){if("undefined"!=typeof bootstrap)"undefined"!=typeof window?bootstrap("require",function(t,n){var r=t("promise"),i=t("mini-url");e(n,r,i),t("require/browser")}):bootstrap("require",function(t,n){var r=t("promise").Promise,i=t("mini-url");e(n,r,i)});else{if("undefined"==typeof process)throw new Error("Can't support require on this platform");var t=require("bluebird"),n=require("url");e(exports,t,n),require("./node")}}(function(e,t,n){"use strict";function r(e){var t;return(t=m.get(e))||(t=g.exec(e),t=t?t[1]:e,m.set(e,t)),t}function i(e,t){var n=t.get(e);return n||(n=function(n,r){var i;return t.has(n)?i=t.get(n):(i=e(n,r),t.set(n,i)),i},t.set(e,n)),n}function o(e,t,n){var r=e.length,i=String(t),o=i.length,a=r;void 0!==n&&(a=n?Number(n):0,a!==a&&(a=0));var s=Math.min(Math.max(a,0),r),l=s-o;if(l<0)return!1;for(var u=-1;++u<o;)if(e.charCodeAt(l+u)!==i.charCodeAt(u))return!1;return!0}function a(e,t,n){t===w||t===j||(t===E?n.length&&n.pop():n.push(t))}function s(e,t){if(e===w&&t===w)return w;var n,r,i=_.get(e)||_.set(e,i=new p)&&i||i;if(!(i.has(t)&&e in i.get(t))){e=String(e);var o=y.get(e)||y.set(e,o=e.split(O))&&o||o,s=y.get(t)||y.set(t,s=t.split(O))&&s||s,l=a;if(o.length&&o[0]===j||o[0]===E)for(n=0,r=s.length-1;n<r;n++)l(s,s[n],b);for(n=0,r=o.length;n<r;n++)l(o,o[n],b);i.get(t)||i.set(t,new p),i.get(t).set(e,b.join(O)),b.length=0}return i.get(t).get(e)}function l(e,t,n){for(var r,i=t.split("/"),o=C,a=null,s=0;n&&n.dependencies;)e in n.dependencies&&(a=o),s+=2,r=i[s],o+=r,o+=D,n=n.dependencies[r];return a&&(a+=e),a}function u(t,r,i){var o,a;if(r=r||{},"string"==typeof t&&(t={location:t}),t.main?t.location=r.mainPackageLocation:t.name&&(r.registry&&r.registry.has(t.name)?t.location=r.registry.get(t.name):r.packageLock?(o=r.location.slice(r.mainPackageLocation.length-1),a=l(t.name,o,r.packageLock),a&&(t.location=n.resolve(r.mainPackageLocation,a))):!t.location&&r.packagesDirectory&&(t.location=n.resolve(r.packagesDirectory,t.name+"/"))),!t.location)return t;if(P.test(t.location)||(t.location+="/"),!e.isAbsolute(t.location)){if(!r.location)throw new Error("Dependency locations must be fully qualified: "+JSON.stringify(t));t.location=n.resolve(r.location,t.location)}return t.name&&r.registry.set(t.name,t.location),t}function c(e,t){if(e)for(var n,r=0,i=Object.keys(e);n=i[r];r++)t[n]||(t[n]={name:n,version:e[n]})}function h(t,i,o){P.test(t)||(t+="/");var a=Object.create(o);a.name=i.name,a.location=t||e.getLocation(),a.packageDescription=i,a.useScriptInjection=i.useScriptInjection,void 0!==i.production&&(a.production=i.production);var l=a.modules=a.modules||{},h=a.registry;void 0===a.name||h.has(a.name)||h.set(a.name,a.location);var p,d=i.overlay||{};if("string"==typeof i.browser)d.browser={redirects:{"":i.browser}};else if("object"==typeof i.browser){var f,v,g=i.browser,m=Object.keys(g);for(d.browser={redirects:{}},p=d.browser.redirects,v=0;f=m[v];v++)g[f]!==!1&&(p[f]=g[f])}var _,y,b,w;y=a.overlays=a.overlays||e.overlays;for(var O=0,j=y.length;O<j;O++)if(_=d[b=y[O]])for(w in _)_.hasOwnProperty(w)&&(i[w]=_[w]);if(delete i.overlay,a.packagesDirectory=n.resolve(t,"node_modules/"),i.main=i.main||"index",l[""]={id:"",redirect:r(s(i.main,"")),location:a.location},p=i.redirects,void 0!==p)for(w in p)p.hasOwnProperty(w)&&(l[w]={id:w,redirect:r(s(p[w],w)),location:n.resolve(t,w)});var E=i.mappings||{};c(i.dependencies,E),a.production||c(i.devDependencies,E);for(var C=0,D=Object.keys(E);w=D[C];C++)E[w]=u(E[w],a,w);return a.mappings=E,a}var p,d=eval,f=d("this");f.Map?p=f.Map:(p=function(){this._content=Object.create(null)},p.prototype.constructor=p,p.prototype.set=function(e,t){return this._content[e]=t,this},p.prototype.get=function(e){return this.hasOwnProperty.call(this._content,e)?this._content[e]:null},p.prototype.has=function(e){return e in this._content});var v=function(){};v.prototype.id=null,v.prototype.display=null,v.prototype.require=null,v.prototype.factory=void 0,v.prototype.exports=void 0,v.prototype.redirect=void 0,v.prototype.location=null,v.prototype.directory=null,v.prototype.injected=!1,v.prototype.mappingRedirect=void 0,v.prototype.type=null,v.prototype.text=void 0,v.prototype.dependees=null,v.prototype.extraDependencies=void 0,v.prototype.uuid=null;var g=/^(.*)\.js$/,m=new p,_=new p,y=new p,b=[],w="",O="/",j=".",E="..",C="node_modules/",D="/node_modules/",P=/\/$/,T=/^[a-z]+$/;e.makeRequire=function(o){function a(e){var t=T.test(e)?e:e.toLowerCase();if(!(t in y)){var n=y[t]=new v;n.id=e,n.display=o.name||o.location,n.display+="#",n.display+=e,n.require=m}return y[t]}function l(e,t){var r,i,s=a(e),l=c(e);l?(r=o.mappings[l],e.length>l.length?(i=e.slice(l.length+1),s.location=n.resolve(r.location,i),"undefined"==typeof r.mappingRequire?o.loadPackage(r,o).then(function(e){r.mappingRequire=e,e.inject(i,t)}):r.mappingRequire.inject(i,t)):s.location=r.location):s.location=n.resolve(o.location,e),s.exports=t,s.directory=n.resolve(s.location,"./"),s.injected=!0,s.redirect=void 0,s.mappingRedirect=void 0,s.error=void 0}function c(e){var t,n,r=o.mappings,i=Object.keys(r),a=i.length;for(t=0;t<a;t++)if(n=i[t],e===n||0===e.indexOf(n)&&"/"===e.charAt(n.length))return n}function h(e,n,i){return i=i||Object.create(null),e in i?null:(i[e]=!0,b(e,n).then(function(){var n,o,l,u=a(e),c=u.dependencies,p=e,d=i;if(c&&c.length>0)for(var f=0;o=c[f];f++)(l=h(r(s(o,p)),p,d))&&(n?n.push?n.push(l):n=[n,l]:n=l);return n?void 0===n.push?n:t.all(n):null},function(t){a(e).error=t}))}function d(e,t){var r=a(e);if(r.id!==e)throw new Error("Can't require module "+JSON.stringify(r.id)+" by alternate spelling "+JSON.stringify(e));if(r.error){var i=new Error("Can't require module "+JSON.stringify(r.id)+" via "+JSON.stringify(t)+" because "+r.error.message);throw i.cause=r.error,i}if(void 0!==r.redirect)return d(r.redirect,t);if(void 0!==r.mappingRedirect)return r.mappingRequire(r.mappingRedirect,t);if(void 0!==r.exports)return r.exports;if(void 0===r.factory)throw new Error("Can't require module "+JSON.stringify(e)+" via "+JSON.stringify(t));r.directory=n.resolve(r.location,"./"),r.exports={};var s;try{s=o.executeCompiler(r.factory,_(e),r.exports,r)}catch(l){throw r.exports=void 0,l}return void 0!==s&&(r.exports=s),r.exports}function f(e,t,n){var r=o.location;if(t.location===r)return e;var i=!!n;if(n=n||new p,n.has(r))return null;n.set(r,!0);for(var a in o.mappings){var s=o.mappings[a];if(r=s.location,o.hasPackage(r)){var l=o.getPackage(r),u=l.identify(e,t,n);if(null!==u)return""===u?a:(a+="/",a+=u)}}if(i)return null;throw new Error("Can't identify "+e+" from "+t.location)}function g(t){var n=function(e){var n=r(s(e,t));return d(n,t)};n.viaId=t,n.async=function(e){var i=r(s(e,t));return h(i,t).then(function(){return n(i)})},n.resolve=function(e){return r(s(e,t))},n.getModule=a,n.getModuleDescriptor=a,n.load=b,n.deepLoad=h,n.loadPackage=function(t,n){return n?e.loadPackage(t,n):o.loadPackage(t,o)},n.hasPackage=function(e){return o.hasPackage(e)},n.getPackage=function(e){return o.getPackage(e)},n.isMainPackage=function(){return n.location===o.mainPackageLocation},n.injectPackageDescription=function(t,n){e.injectPackageDescription(t,n,o)},n.injectPackageDescriptionLocation=function(t,n){e.injectPackageDescriptionLocation(t,n,o)},n.injectMapping=function(e,t){e=u(e,o,t),t=t||e.name,o.mappings[t]=e},n.injectDependency=function(e){n.injectMapping({name:e},e)},n.identify=f,n.inject=l;for(var i=o.exposedConfigs,c=0,p=i.length;c<p;c++)n[i[c]]=o[i[c]];return n.config=o,n.read=o.read,n}var m,_;o=o||{},o.cache=o.cache||new p,o.rootLocation=n.resolve(o.rootLocation||e.getLocation(),"./"),o.location=n.resolve(o.location||o.rootLocation,"./"),o.paths=o.paths||[o.location],o.mappings=o.mappings||{},o.exposedConfigs=o.exposedConfigs||e.exposedConfigs,o.moduleTypes=o.moduleTypes||["html","meta","mjson"],o.makeLoader=o.makeLoader||e.makeLoader,o.load=o.load||o.makeLoader(o),o.makeCompiler=o.makeCompiler||e.makeCompiler,o.executeCompiler=o.executeCompiler||e.executeCompiler,o.compile=o.compile||o.makeCompiler(o),o.parseDependencies=o.parseDependencies||e.parseDependencies,o.read=o.read||e.read,o.strategy=o.strategy||"nested",o.requireById=o.requireById||new p;var y=o.modules=o.modules||Object.create(null),b=i(function(e,n){var r=a(e);return t["try"](function(){if(void 0===r.factory&&void 0===r.exports&&void 0===r.redirect)return o.load(e,r)}).then(function(){return o.compile(r).then(function(){void 0!==r.redirect&&(r.dependencies=r.dependencies||[],r.dependencies.push(r.redirect)),void 0!==r.extraDependencies&&(r.dependencies=r.dependencies||[],Array.prototype.push.apply(r.dependencies,r.extraDependencies))})})},o.cache);return o.requireForId=_=i(g,o.requireById),m=g("")},e.injectPackageDescription=function(e,n,r){var i=r.descriptions=r.descriptions||{};i[e]=t.resolve(n)},e.injectLoadedPackageDescription=function(t,n,r,i){var o,a=h(t,n,r);return"function"==typeof i?o=i:(e.delegate&&e.delegate.willCreatePackage&&(o=e.delegate.willCreatePackage(t,n,a)),o||(o=e.makeRequire(a),e.delegate&&e.delegate.didCreatePackage&&e.delegate.didCreatePackage(a))),r.packages[t]=o,o},e.injectPackageDescriptionLocation=function(e,t,n){var r=n.descriptionLocations=n.descriptionLocations||{};r[e]=t},e.loadPackageDescription=function(e,t){var n,r,i=e.location;return n=t.descriptions=t.descriptions||{},void 0!==n[i]?n[i]:(r=L(i,e,t),n[i]=r,r.then(function(t){return n[e.location]=r,t}),n[i]=r)};var x=[115,101,108,117,100,111,109,95,101,100,111,110],k=x.length,A=47,S=function(e){var t,n,r=e.length-1,i=r,o=0,a=0;for(t=r;t>=0&&a<2;--t)n=e.charCodeAt(t),n===A?(o===k?a++:0===a&&(i=t+1),o=0):o!==-1&&(x[o]===n?++o:o=-1);return 2===a?e.substring(0,t+k+3)+e.substring(i):null},L=function(t,r,i){var o,a;o=i.descriptionLocations=i.descriptionLocations||{},a=o[t]?o[t]:n.resolve(t,"package.json");var s;return e.delegate&&"function"==typeof e.delegate.requireWillLoadPackageDescriptionAtLocation&&(s=e.delegate.requireWillLoadPackageDescriptionAtLocation(a,r,i)),s||(s=(i.read||e.read)(a)),s.then(function(e){r.location=t;try{return JSON.parse(e)}catch(n){throw n.message="Loading package description at '"+t+"' failed cause: "+n.message+" in "+JSON.stringify(a),n}},function(e){var n=S(t);if(n)return L(n,r,i);throw e})};e.loadPackageLock=function(t,r){r=r||{};var i=r.read||e.read,o=n.resolve(t.location,"package-lock.json");return i(o).then(function(e){try{return JSON.parse(e)}catch(n){throw n.message="Unable to parse package-lock.json at '"+t.location+"'",n}},function(){return null})},e.loadPackage=function(t,r,i){if(r=r||{location:n.resolve(e.getLocation(),t)},t=u(t,r),!t.location)throw new Error("Can't find dependency: "+JSON.stringify(t));var o=t.location;r=Object.create(r||null);var a=r.loadingPackages=r.loadingPackages||{},s=r.packages={},l=r.registry=r.registry||new p;r.mainPackageLocation=r.mainPackageLocation||o,r.hasPackage=function(e){if(!e)return!1;if(e=u(e,r),!e.location)return!1;var t=e.location;return!!s[t]},r.getPackage=function(e){if(e=u(e,r),!e.location)throw new Error("Can't find dependency: "+JSON.stringify(e)+" from "+r.location);var t=e.location;if(!s[t])throw a[t]?new Error("Dependency has not finished loading: "+JSON.stringify(e)):new Error("Dependency was not loaded: "+JSON.stringify(e));return s[t]},r.loadPackage=function(t,n){if(t=u(t,n),!t.location)throw new Error("Can't find dependency: "+JSON.stringify(t)+" from "+r.location);var i=t.location;return a[i]||(a[i]=e.loadPackageDescription(t,r).then(function(n){var o=e.injectLoadedPackageDescription(t.location,n,r),s=i!==t.location;return s&&(a[t.location]=a[i],r.packages[i]=r.packages[t.location]),o})),a[i]};var c;return c="object"==typeof i?e.injectLoadedPackageDescription(o,i,r):r.preloaded?r.loadPackage(t):e.loadPackageLock(t,r).then(function(e){return e&&(r.packageLock=e),r.loadPackage(t)}),"function"==typeof c.then?c=c.then(function(e){return e.registry=l,e}):c.registry=l,c.location=o,c.async=function(e,t){return c.then(function(n){return n.async(e,t)})},c},e.resolve=s;var M=/\.([^\/\.]+)$/;e.extension=function(e){var t=M.exec(e);if(t)return t[1]};var F=/^[\w\-]+:/;e.isAbsolute=function(e){return F.test(e)};var R=/(?:^|[^\w\$_.])require\s*\(\s*["']([^"']*)["']\s*\)/g,z=/\/\/(.*)$/gm,I=/\/\*([\s\S]*?)\*\//g;e.parseDependencies=function(e){e=e.replace(z,"").replace(I,"");for(var t,n=[];null!==(t=R.exec(e));)n.push(t[1]);return n},e.DependenciesCompiler=function(t,n){return function(r){return r.dependencies||void 0===r.text||(r.dependencies=t.parseDependencies(r.text)),n(r),r&&!r.dependencies&&(r.text||r.factory?r.dependencies=e.parseDependencies(r.text||r.factory):r.dependencies=[]),r}};var N=/^#!/,B="//#!";e.ShebangCompiler=function(e,t){return function(e){e.text&&(e.text=e.text.replace(N,B)),t(e)}},e.LintCompiler=function(e,n){return function(r){try{n(r)}catch(i){throw i.message=i.message+" in "+r.location,console.log(i),e.lint&&t.resolve().then(function(){e.lint(r)}),i}}},e.exposedConfigs=["paths","mappings","location","packageDescription","packages","modules"];var W;W="undefined"!=typeof window?function(t){return e.SerializationCompiler(t,e.TemplateCompiler(t,e.JsonCompiler(t,e.DependenciesCompiler(t,e.DelegateCompiler(t,e.LintCompiler(t,e.Compiler(t)))))))}:function(t){return e.SerializationCompiler(t,e.TemplateCompiler(t,e.JsonCompiler(t,e.ShebangCompiler(t,e.DependenciesCompiler(t,e.DelegateCompiler(t,e.LintCompiler(t,e.Compiler(t))))))))},e.makeCompiler=function(e){return function(n){return t.resolve(W(e)(n))}},e.DelegateCompiler=function(t,n){return e.delegate&&"function"==typeof e.delegate.Compiler?e.delegate.Compiler(t,n):function(e){var t=n(e);return t}},e.JsonCompiler=function(e,t){var n=/\.json$/;return function(e){var r=(e.location||"").match(n);if(r)return"object"!=typeof e.exports&&"string"==typeof e.text&&(e.exports=JSON.parse(e.text)),e;var i=t(e);return i}};var V=/(.*\/)?(?=[^\/]+)/,q=".html",U=".html.load.js";e.TemplateCompiler=function(e,t){return function(e){var n=e.location;if(n){if(o(n,q)||o(n,U)){var r=n.match(V);if(r)return e.dependencies=e.dependencies||[],e.exports={directory:r[1],content:e.text},e}t(e)}}};var H=function(e,t,n,r){return this.require=e,this.module=t,this.property=n,void 0!==typeof r&&(this.isInstance=r),this};H.prototype={get moduleId(){return this.module},get objectName(){return this.property},get aliases(){return this._aliases||(this._aliases=[this.property])},_aliases:null,isInstance:!1};var G="_montage_metadata",X=/((.*)\.reel)\/\2$/,Y=function(e,t){return t};e.executeCompiler=function(e,t,r,i){var o;return i.directory=n.resolve(i.location,"./"),i.filename=n.resolve(i.location,i.location),i.exports=r||{},o=e.call(f,t,r,i,f,i.filename,i.directory)},e.SerializationCompiler=function(e,t){return function(n){if(t(n),n.factory){var r=n.factory;return n.factory=function(t,n,i){var o;try{o=e.executeCompiler(r,t,n,i)}catch(a){if(!(a instanceof SyntaxError))throw a;e.lint(i)}if(o)return o;var s,l,u,c=Object.keys(n);for(s=0,u;u=c[s];s++)(l=n[u])instanceof Object&&(l.hasOwnProperty(G)&&!l[G].isInstance?l[G].aliases.push(u):Object.isSealed(l)||(l[G]=new H(t,i.id.replace(X,Y),u,"function"!=typeof l)))},n}}},e.MappingsLoader=function(t,n){return t.mappings=t.mappings||{},t.name=t.name,function(r,i){function o(e){var n=r.slice(c.length+1);return t.mappings[c].mappingRequire=e,i.mappingRedirect=n,i.mappingRequire=e,e.deepLoad(n,t.location)}if(e.isAbsolute(r))return n(r,i);var a=t.mappings,s=Object.keys(a),l=s.length;void 0!==t.name&&0===r.indexOf(t.name)&&"/"===r.charAt(t.name.length)&&console.warn("Package reflexive module ignored:",r);var u,c;for(u=0;u<l;u++)if(c=s[u],r===c||0===r.indexOf(c)&&"/"===r.charAt(c.length))return t.loadPackage(a[c],t).then(o);return n(r,i)}},e.LocationLoader=function(t,r){function i(t,o){var a,s,l=t,u=i.config,c=e.extension(t);return(!c||"js"!==c&&"json"!==c&&u.moduleTypes.indexOf(c)===-1)&&(l+=".js"),a=o.location=n.resolve(u.location,l),u.delegate&&u.delegate.packageWillLoadModuleAtLocation&&(s=u.delegate.packageWillLoadModuleAtLocation(o,a)),s?s:r(a,o)}return i.config=t,i},e.MemoizedLoader=function(e,t){return i(t,e.cache)};var $=/([^\/]+)\.reel$/,J=".reel";e.ReelLoader=function(e,t){return function(e,n){return o(e,J)?(n.redirect=e,n.redirect+=O,n.redirect+=$.exec(e)[1],n):t(e,n)}}}),String.prototype.endsWith||(String.prototype.endsWith=function(e,t){return(void 0===t||t>this.length)&&(t=this.length),this.substring(t-e.length,t)===e}),bootstrap("require/browser",function(e){function t(e){var n=e.target,r=n.module;200===n.status||0===n.status&&n.responseText?(r&&(r.type=c,r.text=n.responseText,r.location=n.url),n.resolve(n.responseText),t.xhrPool.push(n)):n.onerror(e)}function n(e){var t=e.target,r=t.url;r.indexOf(f)===r.length-3&&r.indexOf(d)!==r.length-9?(t.url=t.url.replace(f,d),t.module&&(t.module.location=t.url),t.open(l,t.url,!0),t.send(null)):(t.reject(new Error("Can't XHR "+JSON.stringify(r))),n.xhrPool.push(t),t.abort(),t.url=null,t.module=null)}function r(e,t){var n=r.xhrPool.pop();n||(n=new r.XMLHttpRequest,n.overrideMimeType&&n.overrideMimeType(u),n.onload=r.onload,n.onerror=r.onerror,n.promiseHandler=function(e,t){n.resolve=e,n.reject=t}),n.url=e,n.module=t,n.open(l,e,!0);var i=new a(n.promiseHandler);return n.send(null),i}var i,o=e("require"),a=e("promise"),s=e("mini-url"),l="GET",u="application/javascript",c="javascript",h=eval;h("this"),o.getLocation=function(){if(!i){var e=document.querySelector("head > base");i=e?e.href:window.location,i=s.resolve(i,".")}return i},o.overlays=["window","browser","montage"];var p=[];t.xhrPool=p;var d="/index.js",f=".js";n.xhrPool=p,o.read=r,r.xhrPool=p,r.XMLHttpRequest=XMLHttpRequest,r.onload=t,r.onerror=n;var v="__",g="_",m="(function ",_="(require, exports, module, global) {",y="//*/\n})\n//# sourceURL=",b=[m,void 0,_,void 0,y,void 0],w=/[^\w\d]/g;o.Compiler=function(e){return function(t){if(t.location&&(t.location.endsWith(".meta")||t.location.endsWith(".mjson")))return t;if(t.factory||void 0===t.text)return t;if(e.useScriptInjection)throw new Error("Can't use eval.");b[1]=[v,t.require.config.name,g,t.id].join("").replace(w,g),b[3]=t.text,b[5]=t.location,t.factory=h(b.join("")),t.factory.displayName=b[1],t.text=b[1]=b[3]=b[5]=null}},o.XhrLoader=function(e){return function(t,n){return e.read(t,n).then(function(e){n.type=c,n.text=e,n.location=t})}};var O={},j=function(e,t){var n=O[e]=O[e]||{};if(!n[t]){var r;n[t]=new a(function(e,t){r=e}),n[t].resolve=r}return n[t]},E=function(e,t,n){var r=o.delegate&&o.delegate.loadScript||o.loadScript;n&&n.isPending()?n.then(function(){t.isPending()&&r(e)}):t.isPending()&&r(e)};montageDefine=function(e,t,n){j(e,t).resolve(n)},o.loadScript=function(e){var t=document.createElement("script");t.onload=function(){t.parentNode.removeChild(t)},t.onerror=function(e){t.parentNode.removeChild(t)},t.src=e,t.defer=!0,document.getElementsByTagName("head")[0].appendChild(t)},o.ScriptLoader=function(e){var t=e.packageDescription.hash;return function(n,r){return a["try"](function(){if(O[t]&&O[t][r.id])return O[t][r.id];/\.js$/.test(n)?n=n.replace(/\.js$/,".load.js"):n+=".load.js";var i=j(t,r.id);return E(n,i,e.preloaded),i}).then(function(e){delete O[t][r.id];for(var i in e)r[i]=e[i];r.location=n,r.directory=s.resolve(n,".")})}};var C=o.loadPackageDescription;o.loadPackageDescription=function(e,t){if(e.hash){var n=j(e.hash,"package.json"),r=s.resolve(e.location,"package.json.load.js");return E(r,n,t.preloaded),n.get("exports")}return C(e,t)},o.makeLoader=function(e){var t;return t=e.useScriptInjection?o.ScriptLoader:o.XhrLoader,o.ReelLoader(e,o.MappingsLoader(e,o.LocationLoader(e,o.MemoizedLoader(e,t(e)))))}}),!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{
var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.Promise=e()}}(function(){return function e(t,n,r){function i(a,s){if(!n[a]){if(!t[a]){var l="function"==typeof _dereq_&&_dereq_;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){var n=t[a][1][e];return i(n?n:e)},c,c.exports,e,t,n,r)}return n[a].exports}for(var o="function"==typeof _dereq_&&_dereq_,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,t,n){"use strict";t.exports=function(e){function t(e){var t=new n(e),r=t.promise();return t.setHowMany(1),t.setUnwrap(),t.init(),r}var n=e._SomePromiseArray;e.any=function(e){return t(e)},e.prototype.any=function(){return t(this)}}},{}],2:[function(e,t,n){"use strict";function r(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new p(16),this._normalQueue=new p(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var e=this;this.drainQueues=function(){e._drainQueues()},this._schedule=h}function i(e,t,n){this._lateQueue.push(e,t,n),this._queueTick()}function o(e,t,n){this._normalQueue.push(e,t,n),this._queueTick()}function a(e){this._normalQueue._pushOne(e),this._queueTick()}function s(e){for(;e.length()>0;)l(e)}function l(e){var t=e.shift();if("function"!=typeof t)t._settlePromises();else{var n=e.shift(),r=e.shift();t.call(n,r)}}var u;try{throw new Error}catch(c){u=c}var h=e("./schedule"),p=e("./queue"),d=e("./util");r.prototype.setScheduler=function(e){var t=this._schedule;return this._schedule=e,this._customScheduler=!0,t},r.prototype.hasCustomScheduler=function(){return this._customScheduler},r.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},r.prototype.disableTrampolineIfNecessary=function(){d.hasDevTools&&(this._trampolineEnabled=!1)},r.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},r.prototype.fatalError=function(e,t){t?(process.stderr.write("Fatal "+(e instanceof Error?e.stack:e)+"\n"),process.exit(2)):this.throwLater(e)},r.prototype.throwLater=function(e,t){if(1===arguments.length&&(t=e,e=function(){throw t}),"undefined"!=typeof setTimeout)setTimeout(function(){e(t)},0);else try{this._schedule(function(){e(t)})}catch(n){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},d.hasDevTools?(r.prototype.invokeLater=function(e,t,n){this._trampolineEnabled?i.call(this,e,t,n):this._schedule(function(){setTimeout(function(){e.call(t,n)},100)})},r.prototype.invoke=function(e,t,n){this._trampolineEnabled?o.call(this,e,t,n):this._schedule(function(){e.call(t,n)})},r.prototype.settlePromises=function(e){this._trampolineEnabled?a.call(this,e):this._schedule(function(){e._settlePromises()})}):(r.prototype.invokeLater=i,r.prototype.invoke=o,r.prototype.settlePromises=a),r.prototype._drainQueues=function(){s(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,s(this._lateQueue)},r.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},r.prototype._reset=function(){this._isTickUsed=!1},t.exports=r,t.exports.firstLineError=u},{"./queue":26,"./schedule":29,"./util":36}],3:[function(e,t,n){"use strict";t.exports=function(e,t,n,r){var i=!1,o=function(e,t){this._reject(t)},a=function(e,t){t.promiseRejectionQueued=!0,t.bindingPromise._then(o,o,null,this,e)},s=function(e,t){0===(50397184&this._bitField)&&this._resolveCallback(t.target)},l=function(e,t){t.promiseRejectionQueued||this._reject(e)};e.prototype.bind=function(o){i||(i=!0,e.prototype._propagateFrom=r.propagateFromFunction(),e.prototype._boundValue=r.boundValueFunction());var u=n(o),c=new e(t);c._propagateFrom(this,1);var h=this._target();if(c._setBoundTo(u),u instanceof e){var p={promiseRejectionQueued:!1,promise:c,target:h,bindingPromise:u};h._then(t,a,void 0,c,p),u._then(s,l,void 0,c,p),c._setOnCancel(u)}else c._resolveCallback(h);return c},e.prototype._setBoundTo=function(e){void 0!==e?(this._bitField=2097152|this._bitField,this._boundTo=e):this._bitField=-2097153&this._bitField},e.prototype._isBound=function(){return 2097152===(2097152&this._bitField)},e.bind=function(t,n){return e.resolve(n).bind(t)}}},{}],4:[function(e,t,n){"use strict";function r(){try{Promise===o&&(Promise=i)}catch(e){}return o}var i;"undefined"!=typeof Promise&&(i=Promise);var o=e("./promise")();o.noConflict=r,t.exports=o},{"./promise":22}],5:[function(e,t,n){"use strict";var r=Object.create;if(r){var i=r(null),o=r(null);i[" size"]=o[" size"]=0}t.exports=function(t){function n(e,n){var r;if(null!=e&&(r=e[n]),"function"!=typeof r){var i="Object "+s.classString(e)+" has no method '"+s.toString(n)+"'";throw new t.TypeError(i)}return r}function r(e){var t=this.pop(),r=n(e,t);return r.apply(e,this)}function i(e){return e[this]}function o(e){var t=+this;return 0>t&&(t=Math.max(0,t+e.length)),e[t]}var a,s=e("./util"),l=s.canEvaluate;s.isIdentifier,t.prototype.call=function(e){var t=[].slice.call(arguments,1);return t.push(e),this._then(r,void 0,void 0,t,void 0)},t.prototype.get=function(e){var t,n="number"==typeof e;if(n)t=o;else if(l){var r=a(e);t=null!==r?r:i}else t=i;return this._then(t,void 0,void 0,e,void 0)}}},{"./util":36}],6:[function(e,t,n){"use strict";t.exports=function(t,n,r,i){var o=e("./util"),a=o.tryCatch,s=o.errorObj,l=t._async;t.prototype["break"]=t.prototype.cancel=function(){if(!i.cancellation())return this._warn("cancellation is disabled");for(var e=this,t=e;e._isCancellable();){if(!e._cancelBy(t)){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}var n=e._cancellationParent;if(null==n||!n._isCancellable()){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}e._isFollowing()&&e._followee().cancel(),e._setWillBeCancelled(),t=e,e=n}},t.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},t.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},t.prototype._cancelBy=function(e){return e===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},t.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},t.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),l.invoke(this._cancelPromises,this,void 0))},t.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},t.prototype._unsetOnCancel=function(){this._onCancelField=void 0},t.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},t.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},t.prototype._doInvokeOnCancel=function(e,t){if(o.isArray(e))for(var n=0;n<e.length;++n)this._doInvokeOnCancel(e[n],t);else if(void 0!==e)if("function"==typeof e){if(!t){var r=a(e).call(this._boundValue());r===s&&(this._attachExtraTrace(r.e),l.throwLater(r.e))}}else e._resultCancelled(this)},t.prototype._invokeOnCancel=function(){var e=this._onCancel();this._unsetOnCancel(),l.invoke(this._doInvokeOnCancel,this,e)},t.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},t.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(e,t,n){"use strict";t.exports=function(t){function n(e,n,s){return function(l){var u=s._boundValue();e:for(var c=0;c<e.length;++c){var h=e[c];if(h===Error||null!=h&&h.prototype instanceof Error){if(l instanceof h)return o(n).call(u,l)}else if("function"==typeof h){var p=o(h).call(u,l);if(p===a)return p;if(p)return o(n).call(u,l)}else if(r.isObject(l)){for(var d=i(h),f=0;f<d.length;++f){var v=d[f];if(h[v]!=l[v])continue e}return o(n).call(u,l)}}return t}}var r=e("./util"),i=e("./es5").keys,o=r.tryCatch,a=r.errorObj;return n}},{"./es5":13,"./util":36}],8:[function(e,t,n){"use strict";t.exports=function(e){function t(){this._trace=new t.CapturedTrace(r())}function n(){return i?new t:void 0}function r(){var e=o.length-1;return e>=0?o[e]:void 0}var i=!1,o=[];return e.prototype._promiseCreated=function(){},e.prototype._pushContext=function(){},e.prototype._popContext=function(){return null},e._peekContext=e.prototype._peekContext=function(){},t.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,o.push(this._trace))},t.prototype._popContext=function(){if(void 0!==this._trace){var e=o.pop(),t=e._promiseCreated;return e._promiseCreated=null,t}return null},t.CapturedTrace=null,t.create=n,t.deactivateLongStackTraces=function(){},t.activateLongStackTraces=function(){var n=e.prototype._pushContext,o=e.prototype._popContext,a=e._peekContext,s=e.prototype._peekContext,l=e.prototype._promiseCreated;t.deactivateLongStackTraces=function(){e.prototype._pushContext=n,e.prototype._popContext=o,e._peekContext=a,e.prototype._peekContext=s,e.prototype._promiseCreated=l,i=!1},i=!0,e.prototype._pushContext=t.prototype._pushContext,e.prototype._popContext=t.prototype._popContext,e._peekContext=e.prototype._peekContext=r,e.prototype._promiseCreated=function(){var e=this._peekContext();e&&null==e._promiseCreated&&(e._promiseCreated=this)}},t}},{}],9:[function(e,t,n){"use strict";t.exports=function(t,n){function r(e,t){return{promise:t}}function i(){return!1}function o(e,t,n){var r=this;try{e(t,n,function(e){if("function"!=typeof e)throw new TypeError("onCancel must be a function, got: "+N.toString(e));r._attachCancellationCallback(e)})}catch(i){return i}}function a(e){if(!this._isCancellable())return this;var t=this._onCancel();void 0!==t?N.isArray(t)?t.push(e):this._setOnCancel([t,e]):this._setOnCancel(e)}function s(){return this._onCancelField}function l(e){this._onCancelField=e}function u(){this._cancellationParent=void 0,this._onCancelField=void 0}function c(e,t){if(0!==(1&t)){this._cancellationParent=e;var n=e._branchesRemainingToCancel;void 0===n&&(n=0),e._branchesRemainingToCancel=n+1}0!==(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)}function h(e,t){0!==(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)}function p(){var e=this._boundTo;return void 0!==e&&e instanceof t?e.isFulfilled()?e.value():void 0:e}function d(){this._trace=new S(this._peekContext())}function f(e,t){if(W(e)){var n=this._trace;if(void 0!==n&&t&&(n=n._parent),void 0!==n)n.attachExtraTrace(e);else if(!e.__stackCleaned__){var r=E(e);N.notEnumerableProp(e,"stack",r.message+"\n"+r.stack.join("\n")),N.notEnumerableProp(e,"__stackCleaned__",!0)}}}function v(){this._trace=void 0}function g(e,t,n,r,i){if(void 0===e&&null!==t&&K){if(void 0!==i&&i._returnedNonUndefined())return;if(0===(65535&r._bitField))return;n&&(n+=" ");var o="",a="";if(t._trace){for(var s=t._trace.stack.split("\n"),l=O(s),u=l.length-1;u>=0;--u){var c=l[u];if(!q.test(c)){var h=c.match(U);h&&(o="at "+h[1]+":"+h[2]+":"+h[3]+" ");break}}if(l.length>0)for(var p=l[0],u=0;u<s.length;++u)if(s[u]===p){u>0&&(a="\n"+s[u-1]);break}}var d="a promise was created in a "+n+"handler "+o+"but was not returned from it, see http://goo.gl/rRqMUw"+a;r._warn(d,!0,t)}}function m(e,t){var n=e+" is deprecated and will be removed in a future version.";return t&&(n+=" Use "+t+" instead."),_(n)}function _(e,n,r){if(se.warnings){var i,o=new I(e);if(n)r._attachExtraTrace(o);else if(se.longStackTraces&&(i=t._peekContext()))i.attachExtraTrace(o);else{var a=E(o);o.stack=a.message+"\n"+a.stack.join("\n")}ne("warning",o)||C(o,"",!0)}}function y(e,t){for(var n=0;n<t.length-1;++n)t[n].push("From previous event:"),t[n]=t[n].join("\n");return n<t.length&&(t[n]=t[n].join("\n")),e+"\n"+t.join("\n")}function b(e){for(var t=0;t<e.length;++t)(0===e[t].length||t+1<e.length&&e[t][0]===e[t+1][0])&&(e.splice(t,1),t--)}function w(e){for(var t=e[0],n=1;n<e.length;++n){for(var r=e[n],i=t.length-1,o=t[i],a=-1,s=r.length-1;s>=0;--s)if(r[s]===o){a=s;break}for(var s=a;s>=0;--s){var l=r[s];if(t[i]!==l)break;t.pop(),i--}t=r}}function O(e){for(var t=[],n=0;n<e.length;++n){var r=e[n],i="    (No stack trace)"===r||H.test(r),o=i&&ie(r);i&&!o&&(X&&" "!==r.charAt(0)&&(r="    "+r),t.push(r))}return t}function j(e){for(var t=e.stack.replace(/\s+$/g,"").split("\n"),n=0;n<t.length;++n){var r=t[n];if("    (No stack trace)"===r||H.test(r))break}return n>0&&"SyntaxError"!=e.name&&(t=t.slice(n)),t}function E(e){var t=e.stack,n=e.toString();return t="string"==typeof t&&t.length>0?j(e):["    (No stack trace)"],{message:n,stack:"SyntaxError"==e.name?t:O(t)}}function C(e,t,n){if("undefined"!=typeof console){var r;if(N.isObject(e)){var i=e.stack;r=t+G(i,e)}else r=t+String(e);"function"==typeof F?F(r,n):("function"==typeof console.log||"object"==typeof console.log)&&console.log(r)}}function D(e,t,n,r){var i=!1;try{"function"==typeof t&&(i=!0,"rejectionHandled"===e?t(r):t(n,r))}catch(o){z.throwLater(o)}"unhandledRejection"===e?ne(e,n,r)||i||C(n,"Unhandled rejection "):ne(e,r)}function P(e){var t;if("function"==typeof e)t="[function "+(e.name||"anonymous")+"]";else{t=e&&"function"==typeof e.toString?e.toString():N.toString(e);var n=/\[object [a-zA-Z0-9$_]+\]/;if(n.test(t))try{var r=JSON.stringify(e);t=r}catch(i){}0===t.length&&(t="(empty array)")}return"(<"+T(t)+">, no stack trace)"}function T(e){var t=41;return e.length<t?e:e.substr(0,t-3)+"..."}function x(){return"function"==typeof ae}function k(e){var t=e.match(oe);return t?{fileName:t[1],line:parseInt(t[2],10)}:void 0}function A(e,t){if(x()){for(var n,r,i=(e.stack||"").split("\n"),o=(t.stack||"").split("\n"),a=-1,s=-1,l=0;l<i.length;++l){var u=k(i[l]);if(u){n=u.fileName,a=u.line;break}}for(var l=0;l<o.length;++l){var u=k(o[l]);if(u){r=u.fileName,s=u.line;break}}0>a||0>s||!n||!r||n!==r||a>=s||(ie=function(e){if(V.test(e))return!0;var t=k(e);return!!(t&&t.fileName===n&&a<=t.line&&t.line<=s)})}}function S(e){this._parent=e,this._promisesCreated=0;var t=this._length=1+(void 0===e?0:e._length);ae(this,S),t>32&&this.uncycle()}var L,M,F,R=t._getDomain,z=t._async,I=e("./errors").Warning,N=e("./util"),B=e("./es5"),W=N.canAttachTrace,V=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,q=/\((?:timers\.js):\d+:\d+\)/,U=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,H=null,G=null,X=!1,Y=!(0==N.env("BLUEBIRD_DEBUG")||!N.env("BLUEBIRD_DEBUG")&&"development"!==N.env("NODE_ENV")),$=!(0==N.env("BLUEBIRD_WARNINGS")||!Y&&!N.env("BLUEBIRD_WARNINGS")),J=!(0==N.env("BLUEBIRD_LONG_STACK_TRACES")||!Y&&!N.env("BLUEBIRD_LONG_STACK_TRACES")),K=0!=N.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&($||!!N.env("BLUEBIRD_W_FORGOTTEN_RETURN"));t.prototype.suppressUnhandledRejections=function(){var e=this._target();e._bitField=-1048577&e._bitField|524288},t.prototype._ensurePossibleRejectionHandled=function(){if(0===(524288&this._bitField)){this._setRejectionIsUnhandled();var e=this;setTimeout(function(){e._notifyUnhandledRejection()},1)}},t.prototype._notifyUnhandledRejectionIsHandled=function(){D("rejectionHandled",L,void 0,this)},t.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},t.prototype._returnedNonUndefined=function(){return 0!==(268435456&this._bitField)},t.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var e=this._settledValue();this._setUnhandledRejectionIsNotified(),D("unhandledRejection",M,e,this)}},t.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},t.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},t.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},t.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},t.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},t.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},t.prototype._warn=function(e,t,n){return _(e,t,n||this)},t.onPossiblyUnhandledRejection=function(e){var t=R();M="function"==typeof e?null===t?e:N.domainBind(t,e):void 0},t.onUnhandledRejectionHandled=function(e){var t=R();L="function"==typeof e?null===t?e:N.domainBind(t,e):void 0};var Z=function(){};t.longStackTraces=function(){if(z.haveItemsQueued()&&!se.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!se.longStackTraces&&x()){var e=t.prototype._captureStackTrace,r=t.prototype._attachExtraTrace,i=t.prototype._dereferenceTrace;se.longStackTraces=!0,Z=function(){if(z.haveItemsQueued()&&!se.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");t.prototype._captureStackTrace=e,t.prototype._attachExtraTrace=r,t.prototype._dereferenceTrace=i,n.deactivateLongStackTraces(),z.enableTrampoline(),se.longStackTraces=!1},t.prototype._captureStackTrace=d,t.prototype._attachExtraTrace=f,t.prototype._dereferenceTrace=v,n.activateLongStackTraces(),z.disableTrampolineIfNecessary()}},t.hasLongStackTraces=function(){return se.longStackTraces&&x()};var Q=function(){try{if("function"==typeof CustomEvent){var e=new CustomEvent("CustomEvent");return N.global.dispatchEvent(e),function(e,t){var n={detail:t,cancelable:!0};B.defineProperty(n,"promise",{value:t.promise}),B.defineProperty(n,"reason",{value:t.reason});var r=new CustomEvent(e.toLowerCase(),n);return!N.global.dispatchEvent(r)}}if("function"==typeof Event){var e=new Event("CustomEvent");return N.global.dispatchEvent(e),function(e,t){var n=new Event(e.toLowerCase(),{cancelable:!0});return n.detail=t,B.defineProperty(n,"promise",{value:t.promise}),B.defineProperty(n,"reason",{value:t.reason}),!N.global.dispatchEvent(n)}}var e=document.createEvent("CustomEvent");return e.initCustomEvent("testingtheevent",!1,!0,{}),N.global.dispatchEvent(e),function(e,t){var n=document.createEvent("CustomEvent");return n.initCustomEvent(e.toLowerCase(),!1,!0,t),!N.global.dispatchEvent(n)}}catch(t){}return function(){return!1}}(),ee=function(){return N.isNode?function(){return process.emit.apply(process,arguments)}:N.global?function(e){var t="on"+e.toLowerCase(),n=N.global[t];return!!n&&(n.apply(N.global,[].slice.call(arguments,1)),!0)}:function(){return!1}}(),te={promiseCreated:r,promiseFulfilled:r,promiseRejected:r,promiseResolved:r,promiseCancelled:r,promiseChained:function(e,t,n){return{promise:t,child:n}},warning:function(e,t){return{warning:t}},unhandledRejection:function(e,t,n){return{reason:t,promise:n}},rejectionHandled:r},ne=function(e){var t=!1;try{t=ee.apply(null,arguments)}catch(n){z.throwLater(n),t=!0}var r=!1;try{r=Q(e,te[e].apply(null,arguments))}catch(n){z.throwLater(n),r=!0}return r||t};t.config=function(e){if(e=Object(e),"longStackTraces"in e&&(e.longStackTraces?t.longStackTraces():!e.longStackTraces&&t.hasLongStackTraces()&&Z()),"warnings"in e){var n=e.warnings;se.warnings=!!n,K=se.warnings,N.isObject(n)&&"wForgottenReturn"in n&&(K=!!n.wForgottenReturn)}if("cancellation"in e&&e.cancellation&&!se.cancellation){if(z.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");t.prototype._clearCancellationData=u,t.prototype._propagateFrom=c,t.prototype._onCancel=s,t.prototype._setOnCancel=l,t.prototype._attachCancellationCallback=a,t.prototype._execute=o,re=c,se.cancellation=!0}return"monitoring"in e&&(e.monitoring&&!se.monitoring?(se.monitoring=!0,t.prototype._fireEvent=ne):!e.monitoring&&se.monitoring&&(se.monitoring=!1,t.prototype._fireEvent=i)),t},t.prototype._fireEvent=i,t.prototype._execute=function(e,t,n){try{e(t,n)}catch(r){return r}},t.prototype._onCancel=function(){},t.prototype._setOnCancel=function(e){},t.prototype._attachCancellationCallback=function(e){},t.prototype._captureStackTrace=function(){},t.prototype._attachExtraTrace=function(){},t.prototype._dereferenceTrace=function(){},t.prototype._clearCancellationData=function(){},t.prototype._propagateFrom=function(e,t){};var re=h,ie=function(){return!1},oe=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;N.inherits(S,Error),n.CapturedTrace=S,S.prototype.uncycle=function(){var e=this._length;if(!(2>e)){for(var t=[],n={},r=0,i=this;void 0!==i;++r)t.push(i),i=i._parent;e=this._length=r;for(var r=e-1;r>=0;--r){var o=t[r].stack;void 0===n[o]&&(n[o]=r)}for(var r=0;e>r;++r){var a=t[r].stack,s=n[a];if(void 0!==s&&s!==r){s>0&&(t[s-1]._parent=void 0,t[s-1]._length=1),t[r]._parent=void 0,t[r]._length=1;var l=r>0?t[r-1]:this;e-1>s?(l._parent=t[s+1],l._parent.uncycle(),l._length=l._parent._length+1):(l._parent=void 0,l._length=1);for(var u=l._length+1,c=r-2;c>=0;--c)t[c]._length=u,u++;return}}}},S.prototype.attachExtraTrace=function(e){if(!e.__stackCleaned__){this.uncycle();for(var t=E(e),n=t.message,r=[t.stack],i=this;void 0!==i;)r.push(O(i.stack.split("\n"))),i=i._parent;w(r),b(r),N.notEnumerableProp(e,"stack",y(n,r)),N.notEnumerableProp(e,"__stackCleaned__",!0)}};var ae=function(){var e=/^\s*at\s*/,t=function(e,t){return"string"==typeof e?e:void 0!==t.name&&void 0!==t.message?t.toString():P(t)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,H=e,G=t;var n=Error.captureStackTrace;return ie=function(e){return V.test(e)},function(e,t){Error.stackTraceLimit+=6,n(e,t),Error.stackTraceLimit-=6}}var r=new Error;if("string"==typeof r.stack&&r.stack.split("\n")[0].indexOf("stackDetection@")>=0)return H=/@/,G=t,X=!0,function(e){e.stack=(new Error).stack};var i;try{throw new Error}catch(o){i="stack"in o}return"stack"in r||!i||"number"!=typeof Error.stackTraceLimit?(G=function(e,t){return"string"==typeof e?e:"object"!=typeof t&&"function"!=typeof t||void 0===t.name||void 0===t.message?P(t):t.toString()},null):(H=e,G=t,function(e){Error.stackTraceLimit+=6;try{throw new Error}catch(t){e.stack=t.stack}Error.stackTraceLimit-=6})}([]);"undefined"!=typeof console&&"undefined"!=typeof console.warn&&(F=function(e){console.warn(e)},N.isNode&&process.stderr.isTTY?F=function(e,t){var n=t?"[33m":"[31m";console.warn(n+e+"[0m\n")}:N.isNode||"string"!=typeof(new Error).stack||(F=function(e,t){console.warn("%c"+e,t?"color: darkorange":"color: red")}));var se={warnings:$,longStackTraces:!1,cancellation:!1,monitoring:!1};return J&&t.longStackTraces(),{longStackTraces:function(){return se.longStackTraces},warnings:function(){return se.warnings},cancellation:function(){return se.cancellation},monitoring:function(){return se.monitoring},propagateFromFunction:function(){return re},boundValueFunction:function(){return p},checkForgottenReturns:g,setBounds:A,warn:_,deprecated:m,CapturedTrace:S,fireDomEvent:Q,fireGlobalEvent:ee}}},{"./errors":12,"./es5":13,"./util":36}],10:[function(e,t,n){"use strict";t.exports=function(e){function t(){return this.value}function n(){throw this.reason}e.prototype["return"]=e.prototype.thenReturn=function(n){return n instanceof e&&n.suppressUnhandledRejections(),this._then(t,void 0,void 0,{value:n},void 0)},e.prototype["throw"]=e.prototype.thenThrow=function(e){return this._then(n,void 0,void 0,{reason:e},void 0)},e.prototype.catchThrow=function(e){if(arguments.length<=1)return this._then(void 0,n,void 0,{reason:e},void 0);var t=arguments[1],r=function(){throw t};return this.caught(e,r)},e.prototype.catchReturn=function(n){if(arguments.length<=1)return n instanceof e&&n.suppressUnhandledRejections(),this._then(void 0,t,void 0,{value:n},void 0);var r=arguments[1];r instanceof e&&r.suppressUnhandledRejections();var i=function(){return r};return this.caught(n,i)}}},{}],11:[function(e,t,n){"use strict";t.exports=function(e,t){function n(){return o(this)}function r(e,n){return i(e,n,t,t)}var i=e.reduce,o=e.all;e.prototype.each=function(e){return i(this,e,t,0)._then(n,void 0,void 0,this,void 0)},e.prototype.mapSeries=function(e){return i(this,e,t,t)},e.each=function(e,r){return i(e,r,t,0)._then(n,void 0,void 0,e,void 0)},e.mapSeries=r}},{}],12:[function(e,t,n){"use strict";function r(e,t){function n(r){return this instanceof n?(h(this,"message","string"==typeof r?r:t),h(this,"name",e),void(Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this))):new n(r)}return c(n,Error),n}function i(e){return this instanceof i?(h(this,"name","OperationalError"),h(this,"message",e),this.cause=e,this.isOperational=!0,void(e instanceof Error?(h(this,"message",e.message),h(this,"stack",e.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor))):new i(e)}var o,a,s=e("./es5"),l=s.freeze,u=e("./util"),c=u.inherits,h=u.notEnumerableProp,p=r("Warning","warning"),d=r("CancellationError","cancellation error"),f=r("TimeoutError","timeout error"),v=r("AggregateError","aggregate error");try{o=TypeError,a=RangeError}catch(g){o=r("TypeError","type error"),a=r("RangeError","range error")}for(var m="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),_=0;_<m.length;++_)"function"==typeof Array.prototype[m[_]]&&(v.prototype[m[_]]=Array.prototype[m[_]]);s.defineProperty(v.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),v.prototype.isOperational=!0;var y=0;v.prototype.toString=function(){var e=Array(4*y+1).join(" "),t="\n"+e+"AggregateError of:\n";y++,e=Array(4*y+1).join(" ");for(var n=0;n<this.length;++n){for(var r=this[n]===this?"[Circular AggregateError]":this[n]+"",i=r.split("\n"),o=0;o<i.length;++o)i[o]=e+i[o];r=i.join("\n"),t+=r+"\n"}return y--,t},c(i,Error);var b=Error.__BluebirdErrorTypes__;b||(b=l({CancellationError:d,TimeoutError:f,OperationalError:i,RejectionError:i,AggregateError:v}),s.defineProperty(Error,"__BluebirdErrorTypes__",{value:b,writable:!1,enumerable:!1,configurable:!1})),t.exports={Error:Error,TypeError:o,RangeError:a,CancellationError:b.CancellationError,OperationalError:b.OperationalError,TimeoutError:b.TimeoutError,AggregateError:b.AggregateError,Warning:p}},{"./es5":13,"./util":36}],13:[function(e,t,n){var r=function(){"use strict";return void 0===this}();if(r)t.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:r,propertyIsWritable:function(e,t){var n=Object.getOwnPropertyDescriptor(e,t);return!(n&&!n.writable&&!n.set)}};else{var i={}.hasOwnProperty,o={}.toString,a={}.constructor.prototype,s=function(e){var t=[];for(var n in e)i.call(e,n)&&t.push(n);return t},l=function(e,t){return{value:e[t]}},u=function(e,t,n){return e[t]=n.value,e},c=function(e){return e},h=function(e){try{return Object(e).constructor.prototype}catch(t){return a}},p=function(e){try{return"[object Array]"===o.call(e)}catch(t){return!1}};t.exports={isArray:p,keys:s,names:s,defineProperty:u,getDescriptor:l,freeze:c,getPrototypeOf:h,isES5:r,propertyIsWritable:function(){return!0}}}},{}],14:[function(e,t,n){"use strict";t.exports=function(e,t){var n=e.map;e.prototype.filter=function(e,r){return n(this,e,r,t)},e.filter=function(e,r,i){return n(e,r,i,t)}}},{}],15:[function(e,t,n){"use strict";t.exports=function(t,n,r){function i(e,t,n){this.promise=e,this.type=t,this.handler=n,this.called=!1,this.cancelPromise=null}function o(e){this.finallyHandler=e}function a(e,t){return null!=e.cancelPromise&&(arguments.length>1?e.cancelPromise._reject(t):e.cancelPromise._cancel(),e.cancelPromise=null,!0)}function s(){return u.call(this,this.promise._target()._settledValue())}function l(e){return a(this,e)?void 0:(p.e=e,p)}function u(e){var i=this.promise,u=this.handler;if(!this.called){this.called=!0;var c=this.isFinallyHandler()?u.call(i._boundValue()):u.call(i._boundValue(),e);if(c===r)return c;if(void 0!==c){i._setReturnedNonUndefined();var d=n(c,i);if(d instanceof t){if(null!=this.cancelPromise){if(d._isCancelled()){var f=new h("late cancellation observer");return i._attachExtraTrace(f),p.e=f,p}d.isPending()&&d._attachCancellationCallback(new o(this))}return d._then(s,l,void 0,this,void 0)}}}return i.isRejected()?(a(this),p.e=e,p):(a(this),e)}var c=e("./util"),h=t.CancellationError,p=c.errorObj,d=e("./catch_filter")(r);return i.prototype.isFinallyHandler=function(){return 0===this.type},o.prototype._resultCancelled=function(){a(this.finallyHandler)},t.prototype._passThrough=function(e,t,n,r){return"function"!=typeof e?this.then():this._then(n,r,void 0,new i(this,t,e),void 0)},t.prototype.lastly=t.prototype["finally"]=function(e){return this._passThrough(e,0,u,u)},t.prototype.tap=function(e){return this._passThrough(e,1,u)},t.prototype.tapCatch=function(e){var n=arguments.length;if(1===n)return this._passThrough(e,1,void 0,u);var r,i=new Array(n-1),o=0;for(r=0;n-1>r;++r){var a=arguments[r];if(!c.isObject(a))return t.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+c.classString(a)));i[o++]=a}i.length=o;var s=arguments[r];return this._passThrough(d(i,s,this),1,void 0,u)},i}},{"./catch_filter":7,"./util":36}],16:[function(e,t,n){"use strict";t.exports=function(t,n,r,i,o,a){function s(e,n,r){for(var o=0;o<n.length;++o){r._pushContext();var a=d(n[o])(e);if(r._popContext(),a===p){r._pushContext();var s=t.reject(p.e);return r._popContext(),s}var l=i(a,r);if(l instanceof t)return l}return null}function l(e,n,i,o){if(a.cancellation()){var s=new t(r),l=this._finallyPromise=new t(r);this._promise=s.lastly(function(){return l}),s._captureStackTrace(),s._setOnCancel(this)}else{var u=this._promise=new t(r);u._captureStackTrace()}this._stack=o,this._generatorFunction=e,this._receiver=n,this._generator=void 0,this._yieldHandlers="function"==typeof i?[i].concat(f):f,this._yieldedPromise=null,this._cancellationPhase=!1}var u=e("./errors"),c=u.TypeError,h=e("./util"),p=h.errorObj,d=h.tryCatch,f=[];h.inherits(l,o),l.prototype._isResolved=function(){return null===this._promise},l.prototype._cleanup=function(){this._promise=this._generator=null,a.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},l.prototype._promiseCancelled=function(){if(!this._isResolved()){var e,n="undefined"!=typeof this._generator["return"];if(n)this._promise._pushContext(),e=d(this._generator["return"]).call(this._generator,void 0),this._promise._popContext();else{var r=new t.CancellationError("generator .return() sentinel");t.coroutine.returnSentinel=r,this._promise._attachExtraTrace(r),this._promise._pushContext(),e=d(this._generator["throw"]).call(this._generator,r),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(e)}},l.prototype._promiseFulfilled=function(e){this._yieldedPromise=null,this._promise._pushContext();var t=d(this._generator.next).call(this._generator,e);this._promise._popContext(),this._continue(t)},l.prototype._promiseRejected=function(e){this._yieldedPromise=null,this._promise._attachExtraTrace(e),this._promise._pushContext();var t=d(this._generator["throw"]).call(this._generator,e);this._promise._popContext(),this._continue(t)},l.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof t){var e=this._yieldedPromise;this._yieldedPromise=null,e.cancel()}},l.prototype.promise=function(){return this._promise},l.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},l.prototype._continue=function(e){var n=this._promise;if(e===p)return this._cleanup(),this._cancellationPhase?n.cancel():n._rejectCallback(e.e,!1);var r=e.value;if(e.done===!0)return this._cleanup(),this._cancellationPhase?n.cancel():n._resolveCallback(r);var o=i(r,this._promise);if(!(o instanceof t)&&(o=s(o,this._yieldHandlers,this._promise),null===o))return void this._promiseRejected(new c("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",String(r))+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")));
o=o._target();var a=o._bitField;0===(50397184&a)?(this._yieldedPromise=o,o._proxy(this,null)):0!==(33554432&a)?t._async.invoke(this._promiseFulfilled,this,o._value()):0!==(16777216&a)?t._async.invoke(this._promiseRejected,this,o._reason()):this._promiseCancelled()},t.coroutine=function(e,t){if("function"!=typeof e)throw new c("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var n=Object(t).yieldHandler,r=l,i=(new Error).stack;return function(){var t=e.apply(this,arguments),o=new r((void 0),(void 0),n,i),a=o.promise();return o._generator=t,o._promiseFulfilled(void 0),a}},t.coroutine.addYieldHandler=function(e){if("function"!=typeof e)throw new c("expecting a function but got "+h.classString(e));f.push(e)},t.spawn=function(e){if(a.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof e)return n("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var r=new l(e,this),i=r.promise();return r._run(t.spawn),i}}},{"./errors":12,"./util":36}],17:[function(e,t,n){"use strict";t.exports=function(t,n,r,i,o,a){var s=e("./util");s.canEvaluate,s.tryCatch,s.errorObj,t.join=function(){var e,t=arguments.length-1;if(t>0&&"function"==typeof arguments[t]){e=arguments[t];var r}var i=[].slice.call(arguments);e&&i.pop();var r=new n(i).promise();return void 0!==e?r.spread(e):r}}},{"./util":36}],18:[function(e,t,n){"use strict";t.exports=function(t,n,r,i,o,a){function s(e,t,n,r){this.constructor$(e),this._promise._captureStackTrace();var i=u();this._callback=null===i?t:c.domainBind(i,t),this._preservedValues=r===o?new Array(this.length()):null,this._limit=n,this._inFlight=0,this._queue=[],d.invoke(this._asyncInit,this,void 0)}function l(e,n,i,o){if("function"!=typeof n)return r("expecting a function but got "+c.classString(n));var a=0;if(void 0!==i){if("object"!=typeof i||null===i)return t.reject(new TypeError("options argument must be an object but it is "+c.classString(i)));if("number"!=typeof i.concurrency)return t.reject(new TypeError("'concurrency' must be a number but it is "+c.classString(i.concurrency)));a=i.concurrency}return a="number"==typeof a&&isFinite(a)&&a>=1?a:0,new s(e,n,a,o).promise()}var u=t._getDomain,c=e("./util"),h=c.tryCatch,p=c.errorObj,d=t._async;c.inherits(s,n),s.prototype._asyncInit=function(){this._init$(void 0,-2)},s.prototype._init=function(){},s.prototype._promiseFulfilled=function(e,n){var r=this._values,o=this.length(),s=this._preservedValues,l=this._limit;if(0>n){if(n=-1*n-1,r[n]=e,l>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(l>=1&&this._inFlight>=l)return r[n]=e,this._queue.push(n),!1;null!==s&&(s[n]=e);var u=this._promise,c=this._callback,d=u._boundValue();u._pushContext();var f=h(c).call(d,e,n,o),v=u._popContext();if(a.checkForgottenReturns(f,v,null!==s?"Promise.filter":"Promise.map",u),f===p)return this._reject(f.e),!0;var g=i(f,this._promise);if(g instanceof t){g=g._target();var m=g._bitField;if(0===(50397184&m))return l>=1&&this._inFlight++,r[n]=g,g._proxy(this,-1*(n+1)),!1;if(0===(33554432&m))return 0!==(16777216&m)?(this._reject(g._reason()),!0):(this._cancel(),!0);f=g._value()}r[n]=f}var _=++this._totalResolved;return _>=o&&(null!==s?this._filter(r,s):this._resolve(r),!0)},s.prototype._drainQueue=function(){for(var e=this._queue,t=this._limit,n=this._values;e.length>0&&this._inFlight<t;){if(this._isResolved())return;var r=e.pop();this._promiseFulfilled(n[r],r)}},s.prototype._filter=function(e,t){for(var n=t.length,r=new Array(n),i=0,o=0;n>o;++o)e[o]&&(r[i++]=t[o]);r.length=i,this._resolve(r)},s.prototype.preservedValues=function(){return this._preservedValues},t.prototype.map=function(e,t){return l(this,e,t,null)},t.map=function(e,t,n,r){return l(e,t,n,r)}}},{"./util":36}],19:[function(e,t,n){"use strict";t.exports=function(t,n,r,i,o){var a=e("./util"),s=a.tryCatch;t.method=function(e){if("function"!=typeof e)throw new t.TypeError("expecting a function but got "+a.classString(e));return function(){var r=new t(n);r._captureStackTrace(),r._pushContext();var i=s(e).apply(this,arguments),a=r._popContext();return o.checkForgottenReturns(i,a,"Promise.method",r),r._resolveFromSyncValue(i),r}},t.attempt=t["try"]=function(e){if("function"!=typeof e)return i("expecting a function but got "+a.classString(e));var r=new t(n);r._captureStackTrace(),r._pushContext();var l;if(arguments.length>1){o.deprecated("calling Promise.try with more than 1 argument");var u=arguments[1],c=arguments[2];l=a.isArray(u)?s(e).apply(c,u):s(e).call(c,u)}else l=s(e)();var h=r._popContext();return o.checkForgottenReturns(l,h,"Promise.try",r),r._resolveFromSyncValue(l),r},t.prototype._resolveFromSyncValue=function(e){e===a.errorObj?this._rejectCallback(e.e,!1):this._resolveCallback(e,!0)}}},{"./util":36}],20:[function(e,t,n){"use strict";function r(e){return e instanceof Error&&c.getPrototypeOf(e)===Error.prototype}function i(e){var t;if(r(e)){t=new u(e),t.name=e.name,t.message=e.message,t.stack=e.stack;for(var n=c.keys(e),i=0;i<n.length;++i){var o=n[i];h.test(o)||(t[o]=e[o])}return t}return a.markAsOriginatingFromRejection(e),e}function o(e,t){return function(n,r){if(null!==e){if(n){var o=i(s(n));e._attachExtraTrace(o),e._reject(o)}else if(t){var a=[].slice.call(arguments,1);e._fulfill(a)}else e._fulfill(r);e=null}}}var a=e("./util"),s=a.maybeWrapAsError,l=e("./errors"),u=l.OperationalError,c=e("./es5"),h=/^(?:name|message|stack|cause)$/;t.exports=o},{"./errors":12,"./es5":13,"./util":36}],21:[function(e,t,n){"use strict";t.exports=function(t){function n(e,t){var n=this;if(!o.isArray(e))return r.call(n,e,t);var i=s(t).apply(n._boundValue(),[null].concat(e));i===l&&a.throwLater(i.e)}function r(e,t){var n=this,r=n._boundValue(),i=void 0===e?s(t).call(r,null):s(t).call(r,null,e);i===l&&a.throwLater(i.e)}function i(e,t){var n=this;if(!e){var r=new Error(e+"");r.cause=e,e=r}var i=s(t).call(n._boundValue(),e);i===l&&a.throwLater(i.e)}var o=e("./util"),a=t._async,s=o.tryCatch,l=o.errorObj;t.prototype.asCallback=t.prototype.nodeify=function(e,t){if("function"==typeof e){var o=r;void 0!==t&&Object(t).spread&&(o=n),this._then(o,i,void 0,this,e)}return this}}},{"./util":36}],22:[function(e,t,n){"use strict";t.exports=function(){function n(){}function r(e,t){if(null==e||e.constructor!==i)throw new _("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n");if("function"!=typeof t)throw new _("expecting a function but got "+d.classString(t))}function i(e){e!==b&&r(this,e),this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(e),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function o(e){this.promise._resolveCallback(e)}function a(e){this.promise._rejectCallback(e,!1)}function s(e){var t=new i(b);t._fulfillmentHandler0=e,t._rejectionHandler0=e,t._promise0=e,t._receiver0=e}var l,u=function(){return new _("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},c=function(){return new i.PromiseInspection(this._target())},h=function(e){return i.reject(new _(e))},p={},d=e("./util");l=d.isNode?function(){var e=process.domain;return void 0===e&&(e=null),e}:function(){return null},d.notEnumerableProp(i,"_getDomain",l);var f=e("./es5"),v=e("./async"),g=new v;f.defineProperty(i,"_async",{value:g});var m=e("./errors"),_=i.TypeError=m.TypeError;i.RangeError=m.RangeError;var y=i.CancellationError=m.CancellationError;i.TimeoutError=m.TimeoutError,i.OperationalError=m.OperationalError,i.RejectionError=m.OperationalError,i.AggregateError=m.AggregateError;var b=function(){},w={},O={},j=e("./thenables")(i,b),E=e("./promise_array")(i,b,j,h,n),C=e("./context")(i),D=C.create,P=e("./debuggability")(i,C),T=(P.CapturedTrace,e("./finally")(i,j,O)),x=e("./catch_filter")(O),k=e("./nodeback"),A=d.errorObj,S=d.tryCatch;return i.prototype.toString=function(){return"[object Promise]"},i.prototype.caught=i.prototype["catch"]=function(e){var t=arguments.length;if(t>1){var n,r=new Array(t-1),i=0;for(n=0;t-1>n;++n){var o=arguments[n];if(!d.isObject(o))return h("Catch statement predicate: expecting an object but got "+d.classString(o));r[i++]=o}if(r.length=i,e=arguments[n],"function"!=typeof e)throw new _("The last argument to .catch() must be a function, got "+d.toString(e));return this.then(void 0,x(r,e,this))}return this.then(void 0,e)},i.prototype.reflect=function(){return this._then(c,c,void 0,this,void 0)},i.prototype.then=function(e,t){if(P.warnings()&&arguments.length>0&&"function"!=typeof e&&"function"!=typeof t){var n=".then() only accepts functions but was passed: "+d.classString(e);arguments.length>1&&(n+=", "+d.classString(t)),this._warn(n)}return this._then(e,t,void 0,void 0,void 0)},i.prototype.done=function(e,t){var n=this._then(e,t,void 0,void 0,void 0);n._setIsFinal()},i.prototype.spread=function(e){return"function"!=typeof e?h("expecting a function but got "+d.classString(e)):this.all()._then(e,void 0,void 0,w,void 0)},i.prototype.toJSON=function(){var e={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(e.fulfillmentValue=this.value(),e.isFulfilled=!0):this.isRejected()&&(e.rejectionReason=this.reason(),e.isRejected=!0),e},i.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new E(this).promise()},i.prototype.error=function(e){return this.caught(d.originatesFromRejection,e)},i.getNewLibraryCopy=t.exports,i.is=function(e){return e instanceof i},i.fromNode=i.fromCallback=function(e){var t=new i(b);t._captureStackTrace();var n=arguments.length>1&&!!Object(arguments[1]).multiArgs,r=S(e)(k(t,n));return r===A&&t._rejectCallback(r.e,!0),t._isFateSealed()||t._setAsyncGuaranteed(),t},i.all=function(e){return new E(e).promise()},i.cast=function(e){var t=j(e);return t instanceof i||(t=new i(b),t._captureStackTrace(),t._setFulfilled(),t._rejectionHandler0=e),t},i.resolve=i.fulfilled=i.cast,i.reject=i.rejected=function(e){var t=new i(b);return t._captureStackTrace(),t._rejectCallback(e,!0),t},i.setScheduler=function(e){if("function"!=typeof e)throw new _("expecting a function but got "+d.classString(e));return g.setScheduler(e)},i.prototype._then=function(e,t,n,r,o){var a=void 0!==o,s=a?o:new i(b),u=this._target(),c=u._bitField;a||(s._propagateFrom(this,3),s._captureStackTrace(),void 0===r&&0!==(2097152&this._bitField)&&(r=0!==(50397184&c)?this._boundValue():u===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,s));var h=l();if(0!==(50397184&c)){var p,f,v=u._settlePromiseCtx;0!==(33554432&c)?(f=u._rejectionHandler0,p=e):0!==(16777216&c)?(f=u._fulfillmentHandler0,p=t,u._unsetRejectionIsUnhandled()):(v=u._settlePromiseLateCancellationObserver,f=new y("late cancellation observer"),u._attachExtraTrace(f),p=t),g.invoke(v,u,{handler:null===h?p:"function"==typeof p&&d.domainBind(h,p),promise:s,receiver:r,value:f})}else u._addCallbacks(e,t,s,r,h);return s},i.prototype._length=function(){return 65535&this._bitField},i.prototype._isFateSealed=function(){return 0!==(117506048&this._bitField)},i.prototype._isFollowing=function(){return 67108864===(67108864&this._bitField)},i.prototype._setLength=function(e){this._bitField=-65536&this._bitField|65535&e},i.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},i.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},i.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},i.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},i.prototype._isFinal=function(){return(4194304&this._bitField)>0},i.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},i.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},i.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},i.prototype._setAsyncGuaranteed=function(){g.hasCustomScheduler()||(this._bitField=134217728|this._bitField)},i.prototype._receiverAt=function(e){var t=0===e?this._receiver0:this[4*e-4+3];return t===p?void 0:void 0===t&&this._isBound()?this._boundValue():t},i.prototype._promiseAt=function(e){return this[4*e-4+2]},i.prototype._fulfillmentHandlerAt=function(e){return this[4*e-4+0]},i.prototype._rejectionHandlerAt=function(e){return this[4*e-4+1]},i.prototype._boundValue=function(){},i.prototype._migrateCallback0=function(e){var t=(e._bitField,e._fulfillmentHandler0),n=e._rejectionHandler0,r=e._promise0,i=e._receiverAt(0);void 0===i&&(i=p),this._addCallbacks(t,n,r,i,null)},i.prototype._migrateCallbackAt=function(e,t){var n=e._fulfillmentHandlerAt(t),r=e._rejectionHandlerAt(t),i=e._promiseAt(t),o=e._receiverAt(t);void 0===o&&(o=p),this._addCallbacks(n,r,i,o,null)},i.prototype._addCallbacks=function(e,t,n,r,i){var o=this._length();if(o>=65531&&(o=0,this._setLength(0)),0===o)this._promise0=n,this._receiver0=r,"function"==typeof e&&(this._fulfillmentHandler0=null===i?e:d.domainBind(i,e)),"function"==typeof t&&(this._rejectionHandler0=null===i?t:d.domainBind(i,t));else{var a=4*o-4;this[a+2]=n,this[a+3]=r,"function"==typeof e&&(this[a+0]=null===i?e:d.domainBind(i,e)),"function"==typeof t&&(this[a+1]=null===i?t:d.domainBind(i,t))}return this._setLength(o+1),o},i.prototype._proxy=function(e,t){this._addCallbacks(void 0,void 0,t,e,null)},i.prototype._resolveCallback=function(e,t){if(0===(117506048&this._bitField)){if(e===this)return this._rejectCallback(u(),!1);var n=j(e,this);if(!(n instanceof i))return this._fulfill(e);t&&this._propagateFrom(n,2);var r=n._target();if(r===this)return void this._reject(u());var o=r._bitField;if(0===(50397184&o)){var a=this._length();a>0&&r._migrateCallback0(this);for(var s=1;a>s;++s)r._migrateCallbackAt(this,s);this._setFollowing(),this._setLength(0),this._setFollowee(r)}else if(0!==(33554432&o))this._fulfill(r._value());else if(0!==(16777216&o))this._reject(r._reason());else{var l=new y("late cancellation observer");r._attachExtraTrace(l),this._reject(l)}}},i.prototype._rejectCallback=function(e,t,n){var r=d.ensureErrorObject(e),i=r===e;if(!i&&!n&&P.warnings()){var o="a promise was rejected with a non-error: "+d.classString(e);this._warn(o,!0)}this._attachExtraTrace(r,!!t&&i),this._reject(e)},i.prototype._resolveFromExecutor=function(e){if(e!==b){var t=this;this._captureStackTrace(),this._pushContext();var n=!0,r=this._execute(e,function(e){t._resolveCallback(e)},function(e){t._rejectCallback(e,n)});n=!1,this._popContext(),void 0!==r&&t._rejectCallback(r,!0)}},i.prototype._settlePromiseFromHandler=function(e,t,n,r){var i=r._bitField;if(0===(65536&i)){r._pushContext();var o;t===w?n&&"number"==typeof n.length?o=S(e).apply(this._boundValue(),n):(o=A,o.e=new _("cannot .spread() a non-array: "+d.classString(n))):o=S(e).call(t,n);var a=r._popContext();i=r._bitField,0===(65536&i)&&(o===O?r._reject(n):o===A?r._rejectCallback(o.e,!1):(P.checkForgottenReturns(o,a,"",r,this),r._resolveCallback(o)))}},i.prototype._target=function(){for(var e=this;e._isFollowing();)e=e._followee();return e},i.prototype._followee=function(){return this._rejectionHandler0},i.prototype._setFollowee=function(e){this._rejectionHandler0=e},i.prototype._settlePromise=function(e,t,r,o){var a=e instanceof i,s=this._bitField,l=0!==(134217728&s);0!==(65536&s)?(a&&e._invokeInternalOnCancel(),r instanceof T&&r.isFinallyHandler()?(r.cancelPromise=e,S(t).call(r,o)===A&&e._reject(A.e)):t===c?e._fulfill(c.call(r)):r instanceof n?r._promiseCancelled(e):a||e instanceof E?e._cancel():r.cancel()):"function"==typeof t?a?(l&&e._setAsyncGuaranteed(),this._settlePromiseFromHandler(t,r,o,e)):t.call(r,o,e):r instanceof n?r._isResolved()||(0!==(33554432&s)?r._promiseFulfilled(o,e):r._promiseRejected(o,e)):a&&(l&&e._setAsyncGuaranteed(),0!==(33554432&s)?e._fulfill(o):e._reject(o))},i.prototype._settlePromiseLateCancellationObserver=function(e){var t=e.handler,n=e.promise,r=e.receiver,o=e.value;"function"==typeof t?n instanceof i?this._settlePromiseFromHandler(t,r,o,n):t.call(r,o,n):n instanceof i&&n._reject(o)},i.prototype._settlePromiseCtx=function(e){this._settlePromise(e.promise,e.handler,e.receiver,e.value)},i.prototype._settlePromise0=function(e,t,n){var r=this._promise0,i=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(r,e,i,t)},i.prototype._clearCallbackDataAtIndex=function(e){var t=4*e-4;this[t+2]=this[t+3]=this[t+0]=this[t+1]=void 0},i.prototype._fulfill=function(e){var t=this._bitField;if(!((117506048&t)>>>16)){if(e===this){var n=u();return this._attachExtraTrace(n),this._reject(n)}this._setFulfilled(),this._rejectionHandler0=e,(65535&t)>0&&(0!==(134217728&t)?this._settlePromises():g.settlePromises(this),this._dereferenceTrace())}},i.prototype._reject=function(e){var t=this._bitField;if(!((117506048&t)>>>16))return this._setRejected(),this._fulfillmentHandler0=e,this._isFinal()?g.fatalError(e,d.isNode):void((65535&t)>0?g.settlePromises(this):this._ensurePossibleRejectionHandled())},i.prototype._fulfillPromises=function(e,t){for(var n=1;e>n;n++){var r=this._fulfillmentHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,t)}},i.prototype._rejectPromises=function(e,t){for(var n=1;e>n;n++){var r=this._rejectionHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,t)}},i.prototype._settlePromises=function(){var e=this._bitField,t=65535&e;if(t>0){if(0!==(16842752&e)){var n=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,n,e),this._rejectPromises(t,n)}else{var r=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,r,e),this._fulfillPromises(t,r)}this._setLength(0)}this._clearCancellationData()},i.prototype._settledValue=function(){var e=this._bitField;return 0!==(33554432&e)?this._rejectionHandler0:0!==(16777216&e)?this._fulfillmentHandler0:void 0},"undefined"!=typeof Symbol&&Symbol.toStringTag&&f.defineProperty(i.prototype,Symbol.toStringTag,{get:function(){return"Object"}}),i.defer=i.pending=function(){P.deprecated("Promise.defer","new Promise");var e=new i(b);return{promise:e,resolve:o,reject:a}},d.notEnumerableProp(i,"_makeSelfResolutionError",u),e("./method")(i,b,j,h,P),e("./bind")(i,b,j,P),e("./cancel")(i,E,h,P),e("./direct_resolve")(i),e("./synchronous_inspection")(i),e("./join")(i,E,j,b,g,l),i.Promise=i,i.version="3.5.5",e("./call_get.js")(i),e("./generators.js")(i,h,b,j,n,P),e("./map.js")(i,E,h,j,b,P),e("./nodeify.js")(i),e("./promisify.js")(i,b),e("./props.js")(i,E,j,h),e("./race.js")(i,b,j,h),e("./reduce.js")(i,E,h,j,b,P),e("./settle.js")(i,E,P),e("./some.js")(i,E,h),e("./timers.js")(i,b,P),e("./using.js")(i,h,j,D,b,P),e("./any.js")(i),e("./each.js")(i,b),e("./filter.js")(i,b),d.toFastProperties(i),d.toFastProperties(i.prototype),s({a:1}),s({b:2}),s({c:3}),s(1),s(function(){}),s(void 0),s(!1),s(new i(b)),P.setBounds(v.firstLineError,d.lastLineError),i}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36}],23:[function(e,t,n){"use strict";t.exports=function(t,n,r,i,o){function a(e){switch(e){case-2:return[];case-3:return{};case-6:return new Map}}function s(e){var r=this._promise=new t(n);e instanceof t&&r._propagateFrom(e,3),r._setOnCancel(this),this._values=e,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var l=e("./util");return l.isArray,l.inherits(s,o),s.prototype.length=function(){return this._length},s.prototype.promise=function(){return this._promise},s.prototype._init=function u(e,n){var o=r(this._values,this._promise);if(o instanceof t){o=o._target();var s=o._bitField;if(this._values=o,0===(50397184&s))return this._promise._setAsyncGuaranteed(),o._then(u,this._reject,void 0,this,n);if(0===(33554432&s))return 0!==(16777216&s)?this._reject(o._reason()):this._cancel();o=o._value()}if(o=l.asArray(o),null===o){var c=i("expecting an array or an iterable object but got "+l.classString(o)).reason();return void this._promise._rejectCallback(c,!1)}return 0===o.length?void(-5===n?this._resolveEmptyArray():this._resolve(a(n))):void this._iterate(o)},s.prototype._iterate=function(e){var n=this.getActualLength(e.length);this._length=n,this._values=this.shouldCopyValues()?new Array(n):this._values;for(var i=this._promise,o=!1,a=null,s=0;n>s;++s){var l=r(e[s],i);l instanceof t?(l=l._target(),a=l._bitField):a=null,o?null!==a&&l.suppressUnhandledRejections():null!==a?0===(50397184&a)?(l._proxy(this,s),this._values[s]=l):o=0!==(33554432&a)?this._promiseFulfilled(l._value(),s):0!==(16777216&a)?this._promiseRejected(l._reason(),s):this._promiseCancelled(s):o=this._promiseFulfilled(l,s)}o||i._setAsyncGuaranteed()},s.prototype._isResolved=function(){return null===this._values},s.prototype._resolve=function(e){this._values=null,this._promise._fulfill(e)},s.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},s.prototype._reject=function(e){this._values=null,this._promise._rejectCallback(e,!1)},s.prototype._promiseFulfilled=function(e,t){this._values[t]=e;var n=++this._totalResolved;return n>=this._length&&(this._resolve(this._values),!0)},s.prototype._promiseCancelled=function(){return this._cancel(),!0},s.prototype._promiseRejected=function(e){return this._totalResolved++,this._reject(e),!0},s.prototype._resultCancelled=function(){if(!this._isResolved()){var e=this._values;if(this._cancel(),e instanceof t)e.cancel();else for(var n=0;n<e.length;++n)e[n]instanceof t&&e[n].cancel()}},s.prototype.shouldCopyValues=function(){return!0},s.prototype.getActualLength=function(e){return e},s}},{"./util":36}],24:[function(e,t,n){"use strict";t.exports=function(t,n){function r(e){return!O.test(e)}function i(e){try{return e.__isPromisified__===!0}catch(t){return!1}}function o(e,t,n){var r=d.getDataPropertyOrDefault(e,t+n,b);return!!r&&i(r)}function a(e,t,n){for(var r=0;r<e.length;r+=2){var i=e[r];if(n.test(i))for(var o=i.replace(n,""),a=0;a<e.length;a+=2)if(e[a]===o)throw new _("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",t))}}function s(e,t,n,r){for(var s=d.inheritedDataKeys(e),l=[],u=0;u<s.length;++u){var c=s[u],h=e[c],p=r===j||j(c,h,e);"function"!=typeof h||i(h)||o(e,c,t)||!r(c,h,e,p)||l.push(c,h)}return a(l,t,n),l}function l(e,r,i,o,a,s){function l(){var i=r;r===p&&(i=this);var o=new t(n);o._captureStackTrace();var a="string"==typeof c&&this!==u?this[c]:e,l=f(o,s);try{a.apply(i,v(arguments,l))}catch(h){o._rejectCallback(g(h),!0,!0)}return o._isFateSealed()||o._setAsyncGuaranteed(),o}var u=function(){return this}(),c=e;return"string"==typeof c&&(e=o),d.notEnumerableProp(l,"__isPromisified__",!0),l}function u(e,t,n,r,i){for(var o=new RegExp(E(t)+"$"),a=s(e,t,o,n),l=0,u=a.length;u>l;l+=2){var c=a[l],h=a[l+1],f=c+t;if(r===C)e[f]=C(c,p,c,h,t,i);else{var v=r(h,function(){return C(c,p,c,h,t,i)});d.notEnumerableProp(v,"__isPromisified__",!0),e[f]=v}}return d.toFastProperties(e),e}function c(e,t,n){return C(e,t,void 0,e,null,n)}var h,p={},d=e("./util"),f=e("./nodeback"),v=d.withAppended,g=d.maybeWrapAsError,m=d.canEvaluate,_=e("./errors").TypeError,y="Async",b={__isPromisified__:!0},w=["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"],O=new RegExp("^(?:"+w.join("|")+")$"),j=function(e){return d.isIdentifier(e)&&"_"!==e.charAt(0)&&"constructor"!==e},E=function(e){return e.replace(/([$])/,"\\$")},C=m?h:l;t.promisify=function(e,t){if("function"!=typeof e)throw new _("expecting a function but got "+d.classString(e));if(i(e))return e;t=Object(t);var n=void 0===t.context?p:t.context,o=!!t.multiArgs,a=c(e,n,o);return d.copyDescriptors(e,a,r),a},t.promisifyAll=function(e,t){if("function"!=typeof e&&"object"!=typeof e)throw new _("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");t=Object(t);var n=!!t.multiArgs,r=t.suffix;"string"!=typeof r&&(r=y);var i=t.filter;"function"!=typeof i&&(i=j);var o=t.promisifier;if("function"!=typeof o&&(o=C),!d.isIdentifier(r))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var a=d.inheritedDataKeys(e),s=0;s<a.length;++s){var l=e[a[s]];"constructor"!==a[s]&&d.isClass(l)&&(u(l.prototype,r,i,o,n),u(l,r,i,o,n))}return u(e,r,i,o,n)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(e,t,n){"use strict";t.exports=function(t,n,r,i){function o(e){var t,n=!1;if(void 0!==s&&e instanceof s)t=h(e),n=!0;else{var r=c.keys(e),i=r.length;t=new Array(2*i);for(var o=0;i>o;++o){var a=r[o];t[o]=e[a],t[o+i]=a}}this.constructor$(t),this._isMap=n,this._init$(void 0,n?-6:-3)}function a(e){var n,a=r(e);return u(a)?(n=a instanceof t?a._then(t.props,void 0,void 0,void 0,void 0):new o(a).promise(),a instanceof t&&n._propagateFrom(a,2),n):i("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}var s,l=e("./util"),u=l.isObject,c=e("./es5");"function"==typeof Map&&(s=Map);var h=function(){function e(e,r){this[t]=e,this[t+n]=r,t++}var t=0,n=0;return function(r){n=r.size,t=0;var i=new Array(2*r.size);return r.forEach(e,i),i}}(),p=function(e){for(var t=new s,n=e.length/2|0,r=0;n>r;++r){var i=e[n+r],o=e[r];t.set(i,o)}return t};l.inherits(o,n),o.prototype._init=function(){},o.prototype._promiseFulfilled=function(e,t){this._values[t]=e;var n=++this._totalResolved;if(n>=this._length){var r;if(this._isMap)r=p(this._values);else{r={};for(var i=this.length(),o=0,a=this.length();a>o;++o)r[this._values[o+i]]=this._values[o]}return this._resolve(r),!0}return!1},o.prototype.shouldCopyValues=function(){return!1},o.prototype.getActualLength=function(e){return e>>1},t.prototype.props=function(){return a(this)},t.props=function(e){return a(e)}}},{"./es5":13,"./util":36}],26:[function(e,t,n){"use strict";function r(e,t,n,r,i){for(var o=0;i>o;++o)n[o+r]=e[o+t],e[o+t]=void 0}function i(e){this._capacity=e,this._length=0,this._front=0}i.prototype._willBeOverCapacity=function(e){return this._capacity<e},i.prototype._pushOne=function(e){var t=this.length();this._checkCapacity(t+1);var n=this._front+t&this._capacity-1;this[n]=e,this._length=t+1},i.prototype.push=function(e,t,n){var r=this.length()+3;if(this._willBeOverCapacity(r))return this._pushOne(e),this._pushOne(t),void this._pushOne(n);var i=this._front+r-3;this._checkCapacity(r);var o=this._capacity-1;this[i+0&o]=e,this[i+1&o]=t,this[i+2&o]=n,this._length=r},i.prototype.shift=function(){var e=this._front,t=this[e];return this[e]=void 0,this._front=e+1&this._capacity-1,this._length--,t},i.prototype.length=function(){return this._length},i.prototype._checkCapacity=function(e){this._capacity<e&&this._resizeTo(this._capacity<<1)},i.prototype._resizeTo=function(e){var t=this._capacity;this._capacity=e;var n=this._front,i=this._length,o=n+i&t-1;r(this,0,this,t,o)},t.exports=i},{}],27:[function(e,t,n){"use strict";t.exports=function(t,n,r,i){function o(e,o){var l=r(e);if(l instanceof t)return s(l);if(e=a.asArray(e),null===e)return i("expecting an array or an iterable object but got "+a.classString(e));var u=new t(n);void 0!==o&&u._propagateFrom(o,3);for(var c=u._fulfill,h=u._reject,p=0,d=e.length;d>p;++p){var f=e[p];(void 0!==f||p in e)&&t.cast(f)._then(c,h,void 0,u,null)}return u}var a=e("./util"),s=function(e){return e.then(function(t){return o(t,e)})};t.race=function(e){return o(e,void 0)},t.prototype.race=function(){return o(this,void 0)}}},{"./util":36}],28:[function(e,t,n){"use strict";t.exports=function(t,n,r,i,o,a){function s(e,n,r,i){this.constructor$(e);var a=p();this._fn=null===a?n:d.domainBind(a,n),void 0!==r&&(r=t.resolve(r),r._attachCancellationCallback(this)),this._initialValue=r,this._currentCancellable=null,i===o?this._eachValues=Array(this._length):0===i?this._eachValues=null:this._eachValues=void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function l(e,t){this.isFulfilled()?t._resolve(e):t._reject(e)}function u(e,t,n,i){if("function"!=typeof t)return r("expecting a function but got "+d.classString(t));var o=new s(e,t,n,i);return o.promise()}function c(e){this.accum=e,this.array._gotAccum(e);var n=i(this.value,this.array._promise);return n instanceof t?(this.array._currentCancellable=n,n._then(h,void 0,void 0,this,void 0)):h.call(this,n)}function h(e){var n=this.array,r=n._promise,i=f(n._fn);r._pushContext();var o;o=void 0!==n._eachValues?i.call(r._boundValue(),e,this.index,this.length):i.call(r._boundValue(),this.accum,e,this.index,this.length),o instanceof t&&(n._currentCancellable=o);var s=r._popContext();return a.checkForgottenReturns(o,s,void 0!==n._eachValues?"Promise.each":"Promise.reduce",r),o}var p=t._getDomain,d=e("./util"),f=d.tryCatch;d.inherits(s,n),s.prototype._gotAccum=function(e){void 0!==this._eachValues&&null!==this._eachValues&&e!==o&&this._eachValues.push(e)},s.prototype._eachComplete=function(e){return null!==this._eachValues&&this._eachValues.push(e),this._eachValues},s.prototype._init=function(){},s.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},s.prototype.shouldCopyValues=function(){return!1},s.prototype._resolve=function(e){this._promise._resolveCallback(e),this._values=null},s.prototype._resultCancelled=function(e){return e===this._initialValue?this._cancel():void(this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof t&&this._currentCancellable.cancel(),this._initialValue instanceof t&&this._initialValue.cancel()))},s.prototype._iterate=function(e){this._values=e;var n,r,i=e.length;if(void 0!==this._initialValue?(n=this._initialValue,r=0):(n=t.resolve(e[0]),r=1),this._currentCancellable=n,!n.isRejected())for(;i>r;++r){var o={accum:null,value:e[r],index:r,length:i,array:this};n=n._then(c,void 0,void 0,o,void 0)}void 0!==this._eachValues&&(n=n._then(this._eachComplete,void 0,void 0,this,void 0)),n._then(l,l,void 0,n,this)},t.prototype.reduce=function(e,t){return u(this,e,t,null)},t.reduce=function(e,t,n,r){return u(e,t,n,r)}}},{"./util":36}],29:[function(e,t,n){"use strict";var r,i=e("./util"),o=function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")},a=i.getNativePromise();if(i.isNode&&"undefined"==typeof MutationObserver){var s=global.setImmediate,l=process.nextTick;r=i.isRecentNode?function(e){s.call(global,e)}:function(e){l.call(process,e)}}else if("function"==typeof a&&"function"==typeof a.resolve){var u=a.resolve();r=function(e){u.then(e)}}else r="undefined"!=typeof MutationObserver&&("undefined"==typeof window||!window.navigator||!window.navigator.standalone&&!window.cordova)&&"classList"in document.documentElement?function(){var e=document.createElement("div"),t={attributes:!0},n=!1,r=document.createElement("div"),i=new MutationObserver(function(){e.classList.toggle("foo"),n=!1});i.observe(r,t);var o=function(){n||(n=!0,r.classList.toggle("foo"))};return function(n){var r=new MutationObserver(function(){r.disconnect(),n()});r.observe(e,t),o()}}():"undefined"!=typeof setImmediate?function(e){setImmediate(e)}:"undefined"!=typeof setTimeout?function(e){setTimeout(e,0)}:o;t.exports=r},{"./util":36}],30:[function(e,t,n){"use strict";t.exports=function(t,n,r){function i(e){this.constructor$(e)}var o=t.PromiseInspection,a=e("./util");a.inherits(i,n),i.prototype._promiseResolved=function(e,t){this._values[e]=t;var n=++this._totalResolved;return n>=this._length&&(this._resolve(this._values),
!0)},i.prototype._promiseFulfilled=function(e,t){var n=new o;return n._bitField=33554432,n._settledValueField=e,this._promiseResolved(t,n)},i.prototype._promiseRejected=function(e,t){var n=new o;return n._bitField=16777216,n._settledValueField=e,this._promiseResolved(t,n)},t.settle=function(e){return r.deprecated(".settle()",".reflect()"),new i(e).promise()},t.prototype.settle=function(){return t.settle(this)}}},{"./util":36}],31:[function(e,t,n){"use strict";t.exports=function(t,n,r){function i(e){this.constructor$(e),this._howMany=0,this._unwrap=!1,this._initialized=!1}function o(e,t){if((0|t)!==t||0>t)return r("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var n=new i(e),o=n.promise();return n.setHowMany(t),n.init(),o}var a=e("./util"),s=e("./errors").RangeError,l=e("./errors").AggregateError,u=a.isArray,c={};a.inherits(i,n),i.prototype._init=function(){if(this._initialized){if(0===this._howMany)return void this._resolve([]);this._init$(void 0,-5);var e=u(this._values);!this._isResolved()&&e&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},i.prototype.init=function(){this._initialized=!0,this._init()},i.prototype.setUnwrap=function(){this._unwrap=!0},i.prototype.howMany=function(){return this._howMany},i.prototype.setHowMany=function(e){this._howMany=e},i.prototype._promiseFulfilled=function(e){return this._addFulfilled(e),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},i.prototype._promiseRejected=function(e){return this._addRejected(e),this._checkOutcome()},i.prototype._promiseCancelled=function(){return this._values instanceof t||null==this._values?this._cancel():(this._addRejected(c),this._checkOutcome())},i.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var e=new l,t=this.length();t<this._values.length;++t)this._values[t]!==c&&e.push(this._values[t]);return e.length>0?this._reject(e):this._cancel(),!0}return!1},i.prototype._fulfilled=function(){return this._totalResolved},i.prototype._rejected=function(){return this._values.length-this.length()},i.prototype._addRejected=function(e){this._values.push(e)},i.prototype._addFulfilled=function(e){this._values[this._totalResolved++]=e},i.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},i.prototype._getRangeError=function(e){var t="Input array must contain at least "+this._howMany+" items but contains only "+e+" items";return new s(t)},i.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},t.some=function(e,t){return o(e,t)},t.prototype.some=function(e){return o(this,e)},t._SomePromiseArray=i}},{"./errors":12,"./util":36}],32:[function(e,t,n){"use strict";t.exports=function(e){function t(e){void 0!==e?(e=e._target(),this._bitField=e._bitField,this._settledValueField=e._isFateSealed()?e._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}t.prototype._settledValue=function(){return this._settledValueField};var n=t.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},r=t.prototype.error=t.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},i=t.prototype.isFulfilled=function(){return 0!==(33554432&this._bitField)},o=t.prototype.isRejected=function(){return 0!==(16777216&this._bitField)},a=t.prototype.isPending=function(){return 0===(50397184&this._bitField)},s=t.prototype.isResolved=function(){return 0!==(50331648&this._bitField)};t.prototype.isCancelled=function(){return 0!==(8454144&this._bitField)},e.prototype.__isCancelled=function(){return 65536===(65536&this._bitField)},e.prototype._isCancelled=function(){return this._target().__isCancelled()},e.prototype.isCancelled=function(){return 0!==(8454144&this._target()._bitField)},e.prototype.isPending=function(){return a.call(this._target())},e.prototype.isRejected=function(){return o.call(this._target())},e.prototype.isFulfilled=function(){return i.call(this._target())},e.prototype.isResolved=function(){return s.call(this._target())},e.prototype.value=function(){return n.call(this._target())},e.prototype.reason=function(){var e=this._target();return e._unsetRejectionIsUnhandled(),r.call(e)},e.prototype._value=function(){return this._settledValue()},e.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},e.PromiseInspection=t}},{}],33:[function(e,t,n){"use strict";t.exports=function(t,n){function r(e,r){if(c(e)){if(e instanceof t)return e;var i=o(e);if(i===u){r&&r._pushContext();var l=t.reject(i.e);return r&&r._popContext(),l}if("function"==typeof i){if(a(e)){var l=new t(n);return e._then(l._fulfill,l._reject,void 0,l,null),l}return s(e,i,r)}}return e}function i(e){return e.then}function o(e){try{return i(e)}catch(t){return u.e=t,u}}function a(e){try{return h.call(e,"_promise0")}catch(t){return!1}}function s(e,r,i){function o(e){s&&(s._resolveCallback(e),s=null)}function a(e){s&&(s._rejectCallback(e,h,!0),s=null)}var s=new t(n),c=s;i&&i._pushContext(),s._captureStackTrace(),i&&i._popContext();var h=!0,p=l.tryCatch(r).call(e,o,a);return h=!1,s&&p===u&&(s._rejectCallback(p.e,!0,!0),s=null),c}var l=e("./util"),u=l.errorObj,c=l.isObject,h={}.hasOwnProperty;return r}},{"./util":36}],34:[function(e,t,n){"use strict";t.exports=function(t,n,r){function i(e){this.handle=e}function o(e){return clearTimeout(this.handle),e}function a(e){throw clearTimeout(this.handle),e}var s=e("./util"),l=t.TimeoutError;i.prototype._resultCancelled=function(){clearTimeout(this.handle)};var u=function(e){return c(+this).thenReturn(e)},c=t.delay=function(e,o){var a,s;return void 0!==o?(a=t.resolve(o)._then(u,null,null,e,void 0),r.cancellation()&&o instanceof t&&a._setOnCancel(o)):(a=new t(n),s=setTimeout(function(){a._fulfill()},+e),r.cancellation()&&a._setOnCancel(new i(s)),a._captureStackTrace()),a._setAsyncGuaranteed(),a};t.prototype.delay=function(e){return c(e,this)};var h=function(e,t,n){var r;r="string"!=typeof t?t instanceof Error?t:new l("operation timed out"):new l(t),s.markAsOriginatingFromRejection(r),e._attachExtraTrace(r),e._reject(r),null!=n&&n.cancel()};t.prototype.timeout=function(e,t){e=+e;var n,s,l=new i(setTimeout(function(){n.isPending()&&h(n,t,s)},e));return r.cancellation()?(s=this.then(),n=s._then(o,a,void 0,l,void 0),n._setOnCancel(l)):n=this._then(o,a,void 0,l,void 0),n}}},{"./util":36}],35:[function(e,t,n){"use strict";t.exports=function(t,n,r,i,o,a){function s(e){setTimeout(function(){throw e},0)}function l(e){var t=r(e);return t!==e&&"function"==typeof e._isDisposable&&"function"==typeof e._getDisposer&&e._isDisposable()&&t._setDisposable(e._getDisposer()),t}function u(e,n){function i(){if(a>=u)return c._fulfill();var o=l(e[a++]);if(o instanceof t&&o._isDisposable()){try{o=r(o._getDisposer().tryDispose(n),e.promise)}catch(h){return s(h)}if(o instanceof t)return o._then(i,s,null,null,null)}i()}var a=0,u=e.length,c=new t(o);return i(),c}function c(e,t,n){this._data=e,this._promise=t,this._context=n}function h(e,t,n){this.constructor$(e,t,n)}function p(e){return c.isDisposer(e)?(this.resources[this.index]._setDisposable(e),e.promise()):e}function d(e){this.length=e,this.promise=null,this[e-1]=null}var f=e("./util"),v=e("./errors").TypeError,g=e("./util").inherits,m=f.errorObj,_=f.tryCatch,y={};c.prototype.data=function(){return this._data},c.prototype.promise=function(){return this._promise},c.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():y},c.prototype.tryDispose=function(e){var t=this.resource(),n=this._context;void 0!==n&&n._pushContext();var r=t!==y?this.doDispose(t,e):null;return void 0!==n&&n._popContext(),this._promise._unsetDisposable(),this._data=null,r},c.isDisposer=function(e){return null!=e&&"function"==typeof e.resource&&"function"==typeof e.tryDispose},g(h,c),h.prototype.doDispose=function(e,t){var n=this.data();return n.call(e,e,t)},d.prototype._resultCancelled=function(){for(var e=this.length,n=0;e>n;++n){var r=this[n];r instanceof t&&r.cancel()}},t.using=function(){var e=arguments.length;if(2>e)return n("you must pass at least 2 arguments to Promise.using");var i=arguments[e-1];if("function"!=typeof i)return n("expecting a function but got "+f.classString(i));var o,s=!0;2===e&&Array.isArray(arguments[0])?(o=arguments[0],e=o.length,s=!1):(o=arguments,e--);for(var l=new d(e),h=0;e>h;++h){var v=o[h];if(c.isDisposer(v)){var g=v;v=v.promise(),v._setDisposable(g)}else{var y=r(v);y instanceof t&&(v=y._then(p,null,null,{resources:l,index:h},void 0))}l[h]=v}for(var b=new Array(l.length),h=0;h<b.length;++h)b[h]=t.resolve(l[h]).reflect();var w=t.all(b).then(function(e){for(var t=0;t<e.length;++t){var n=e[t];if(n.isRejected())return m.e=n.error(),m;if(!n.isFulfilled())return void w.cancel();e[t]=n.value()}O._pushContext(),i=_(i);var r=s?i.apply(void 0,e):i(e),o=O._popContext();return a.checkForgottenReturns(r,o,"Promise.using",O),r}),O=w.lastly(function(){var e=new t.PromiseInspection(w);return u(l,e)});return l.promise=O,O._setOnCancel(l),O},t.prototype._setDisposable=function(e){this._bitField=131072|this._bitField,this._disposer=e},t.prototype._isDisposable=function(){return(131072&this._bitField)>0},t.prototype._getDisposer=function(){return this._disposer},t.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField,this._disposer=void 0},t.prototype.disposer=function(e){if("function"==typeof e)return new h(e,this,i());throw new v}}},{"./errors":12,"./util":36}],36:[function(e,t,n){"use strict";function r(){try{var e=D;return D=null,e.apply(this,arguments)}catch(t){return x.e=t,x}}function i(e){return D=e,r}function o(e){return null==e||e===!0||e===!1||"string"==typeof e||"number"==typeof e}function a(e){return"function"==typeof e||"object"==typeof e&&null!==e}function s(e){return o(e)?new Error(g(e)):e}function l(e,t){var n,r=e.length,i=new Array(r+1);for(n=0;r>n;++n)i[n]=e[n];return i[n]=t,i}function u(e,t,n){if(!P.isES5)return{}.hasOwnProperty.call(e,t)?e[t]:void 0;var r=Object.getOwnPropertyDescriptor(e,t);return null!=r?null==r.get&&null==r.set?r.value:n:void 0}function c(e,t,n){if(o(e))return e;var r={value:n,configurable:!0,enumerable:!1,writable:!0};return P.defineProperty(e,t,r),e}function h(e){throw e}function p(e){try{if("function"==typeof e){var t=P.names(e.prototype),n=P.isES5&&t.length>1,r=t.length>0&&!(1===t.length&&"constructor"===t[0]),i=L.test(e+"")&&P.names(e).length>0;if(n||r||i)return!0}return!1}catch(o){return!1}}function d(e){function t(){}function n(){return typeof r.foo}t.prototype=e;var r=new t;return n(),n(),e}function f(e){return M.test(e)}function v(e,t,n){for(var r=new Array(e),i=0;e>i;++i)r[i]=t+i+n;return r}function g(e){try{return e+""}catch(t){return"[no string representation]"}}function m(e){return e instanceof Error||null!==e&&"object"==typeof e&&"string"==typeof e.message&&"string"==typeof e.name}function _(e){try{c(e,"isOperational",!0)}catch(t){}}function y(e){return null!=e&&(e instanceof Error.__BluebirdErrorTypes__.OperationalError||e.isOperational===!0)}function b(e){return m(e)&&P.propertyIsWritable(e,"stack")}function w(e){return{}.toString.call(e)}function O(e,t,n){for(var r=P.names(e),i=0;i<r.length;++i){var o=r[i];if(n(o))try{P.defineProperty(t,o,P.getDescriptor(e,o))}catch(a){}}}function j(e){return N?process.env[e]:void 0}function E(){if("function"==typeof Promise)try{var e=new Promise(function(){});if("[object Promise]"==={}.toString.call(e))return Promise}catch(t){}}function C(e,t){return e.bind(t)}var D,P=e("./es5"),T="undefined"==typeof navigator,x={e:{}},k="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:void 0!==this?this:null,A=function(e,t){function n(){this.constructor=e,this.constructor$=t;for(var n in t.prototype)r.call(t.prototype,n)&&"$"!==n.charAt(n.length-1)&&(this[n+"$"]=t.prototype[n])}var r={}.hasOwnProperty;return n.prototype=t.prototype,e.prototype=new n,e.prototype},S=function(){var e=[Array.prototype,Object.prototype,Function.prototype],t=function(t){for(var n=0;n<e.length;++n)if(e[n]===t)return!0;return!1};if(P.isES5){var n=Object.getOwnPropertyNames;return function(e){for(var r=[],i=Object.create(null);null!=e&&!t(e);){var o;try{o=n(e)}catch(a){return r}for(var s=0;s<o.length;++s){var l=o[s];if(!i[l]){i[l]=!0;var u=Object.getOwnPropertyDescriptor(e,l);null!=u&&null==u.get&&null==u.set&&r.push(l)}}e=P.getPrototypeOf(e)}return r}}var r={}.hasOwnProperty;return function(n){if(t(n))return[];var i=[];e:for(var o in n)if(r.call(n,o))i.push(o);else{for(var a=0;a<e.length;++a)if(r.call(e[a],o))continue e;i.push(o)}return i}}(),L=/this\s*\.\s*\S+\s*=/,M=/^[a-z$_][a-z$_0-9]*$/i,F=function(){return"stack"in new Error?function(e){return b(e)?e:new Error(g(e))}:function(e){if(b(e))return e;try{throw new Error(g(e))}catch(t){return t}}}(),R=function(e){return P.isArray(e)?e:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var z="function"==typeof Array.from?function(e){return Array.from(e)}:function(e){for(var t,n=[],r=e[Symbol.iterator]();!(t=r.next()).done;)n.push(t.value);return n};R=function(e){return P.isArray(e)?e:null!=e&&"function"==typeof e[Symbol.iterator]?z(e):null}}var I="undefined"!=typeof process&&"[object process]"===w(process).toLowerCase(),N="undefined"!=typeof process&&"undefined"!=typeof process.env,B={isClass:p,isIdentifier:f,inheritedDataKeys:S,getDataPropertyOrDefault:u,thrower:h,isArray:P.isArray,asArray:R,notEnumerableProp:c,isPrimitive:o,isObject:a,isError:m,canEvaluate:T,errorObj:x,tryCatch:i,inherits:A,withAppended:l,maybeWrapAsError:s,toFastProperties:d,filledRange:v,toString:g,canAttachTrace:b,ensureErrorObject:F,originatesFromRejection:y,markAsOriginatingFromRejection:_,classString:w,copyDescriptors:O,hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:I,hasEnvVariables:N,env:j,global:k,getNativePromise:E,domainBind:C};B.isRecentNode=B.isNode&&function(){var e;return process.versions&&process.versions.node?e=process.versions.node.split(".").map(Number):process.version&&(e=process.version.split(".").map(Number)),0===e[0]&&e[1]>10||e[0]>0}(),B.isNode&&B.toFastProperties(process);try{throw new Error}catch(W){B.lastLineError=W}t.exports=B},{"./es5":13}]},{},[4])(4)}),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise),montageDefine("0e99770","package.json",{exports:{name:"Popcorn",version:"1.0.0",description:"Popcorn is a movie discovery application made using MontageJS",license:"BSD-3-Clause",author:"Montage Studio, inc. (http://montagestudio.com/)",repository:{type:"git",url:"https://github.com/montagejs/popcorn.git"},production:!0,appcache:{exclude:["**/manifest.appcache","**/ui/**/*","**/core/**/*","**/*.json","**/node_modules/**/*"]},manifest:!0,dependencies:{digit:"montagejs/digit#master",montage:"montagejs/montage#master","query-params":"0.0.1",url:"^0.11.0"},devDependencies:{jshint:"^2.9.5",minit:"^0.5.7","montage-testing":"~0.5.1",mop:"montagejs/mop#master"},scripts:{lint:"jshint .",build:"mop .",start:"minit serve","start:dist":"minit serve -r dist",publish:"git checkout gh-pages && git subtree push --prefix dist origin gh-pages"},excludes:["**/**/mocha.css","dist","builds"],bundle:["ui/main.reel"],main:"index",hash:"0e99770",mappings:{digit:{name:"digit",hash:"0909117",location:"packages/digit@0909117/"},montage:{name:"montage",hash:"64d2e12",location:"packages/montage@64d2e12/"},"query-params":{name:"query-params",hash:"05211a3",location:"packages/query-params@05211a3/"},url:{name:"url",hash:"3e7ed46",location:"packages/url@3e7ed46/"}},useScriptInjection:!0}}),montageDefine("64d2e12","package.json",{exports:{name:"montage",version:"18.0.0",description:"Build your next application with a browser based platform that really gets the web.",license:"BSD-3-Clause",repository:{type:"git",url:"https://github.com/montagejs/montage.git"},main:"core/core",engines:{node:">=10.16.2",npm:">=6.9.0"},production:!0,dependencies:{bluebird:"~3.5.5",collections:"~5.1.x",frb:"~4.0.x",htmlparser2:"~3.0.5","q-io":"^1.13.3",mr:"montagejs/mr#master","weak-map":"^1.0.5","lodash.kebabcase":"^4.1.1","lodash.camelcase":"^4.3.0","lodash.trim":"^4.5.1","lodash.snakecase":"^4.1.1","proxy-polyfill":"~0.1.7"},devDependencies:{concurrently:"^3.4.0","http-server":"^0.10.0",xhr2:"^0.1.4","jasmine-console-reporter":"^1.2.7","jasmine-core":"^2.5.2",jshint:"^2.9.5",karma:"^4.2.0","karma-chrome-launcher":"^3.0.0","karma-coverage":"^1.1.2","karma-firefox-launcher":"^1.2.0","karma-ie-launcher":"^1.0.0","karma-jasmine":"^2.0.1","karma-phantomjs-launcher":"^1.0.4","karma-safari-launcher":"^1.0.0","montage-testing":"git://github.com/montagejs/montage-testing.git#master","mop-integration":"git://github.com/montagejs/mop-integration.git#master",open:"0.0.5"},scripts:{test:"node test/run-node.js",jsdoc:"jsdoc -c jsdoc.json","start:demo":'concurrently "http-server -p 8084" "open http://localhost:8084/demo/"',integration:"MONTAGE_VERSION=${MONTAGE_VERSION:=./} MOP_VERSION=${MOP_VERSION:=#master} node node_modules/mop-integration/integration",lint:"jshint .","test:karma":"karma start --no-auto-watch --single-run","test:karma-travis":"karma start --no-auto-watch --single-run --browsers=Chrome_travis_ci","test:karma-firefox":"karma start --no-auto-watch --single-run --browsers=Firefox","test:karma-chrome":"karma start --no-auto-watch --single-run --browsers=Chrome","test:karma-debug":"karma start --auto-watch --no-single-run --browsers=PhantomJS_debug","test:karma-dev":"karma start --auto-watch --no-single-run --capture","test:jasmine":'concurrently "http-server -p 8085" "open http://localhost:8085/test/run.html"'},exclude:["demo","report","doc","test","tools"],_resolved:"",_integrity:"",_from:"montage@github:montagejs/montage#master",redirects:{montage:"core/core"},mappings:{mr:{name:"mr",hash:"7a6ebf2",location:"../mr@7a6ebf2/"},bluebird:{name:"bluebird",hash:"020234c",location:"../bluebird@020234c/"},collections:{name:"collections",hash:"c2ad217",location:"../collections@c2ad217/"},frb:{name:"frb",hash:"f610e91",location:"../frb@f610e91/"},htmlparser2:{name:"htmlparser2",hash:"b2c6b9c",location:"../htmlparser2@b2c6b9c/"},"q-io":{name:"q-io",hash:"99f03e0",location:"../q-io@99f03e0/"},"weak-map":{name:"weak-map",hash:"62c9bb4",location:"../weak-map@62c9bb4/"},"lodash.kebabcase":{name:"lodash.kebabcase",hash:"4acd5ac",location:"../lodash.kebabcase@4acd5ac/"},"lodash.camelcase":{name:"lodash.camelcase",hash:"05dc941",location:"../lodash.camelcase@05dc941/"},"lodash.trim":{name:"lodash.trim",hash:"0f9bc00",location:"../lodash.trim@0f9bc00/"},"lodash.snakecase":{name:"lodash.snakecase",hash:"0dd0cfb",location:"../lodash.snakecase@0dd0cfb/"},"proxy-polyfill":{name:"proxy-polyfill",hash:"f7560f2",location:"../proxy-polyfill@f7560f2/"}},hash:"64d2e12",useScriptInjection:!0}}),montageDefine("020234c","package.json",{exports:{name:"bluebird",description:"Full featured Promises/A+ implementation with exceptionally good performance",version:"3.5.5",keywords:["promise","performance","promises","promises-a","promises-aplus","async","await","deferred","deferreds","future","flow control","dsl","fluent interface"],scripts:{lint:"node scripts/jshint.js",test:"node --expose-gc tools/test.js",istanbul:"istanbul",prepublish:"npm run generate-browser-core && npm run generate-browser-full","generate-browser-full":"node tools/build.js --no-clean --no-debug --release --browser --minify","generate-browser-core":"node tools/build.js --features=core --no-debug --release --zalgo --browser --minify && mv js/browser/bluebird.js js/browser/bluebird.core.js && mv js/browser/bluebird.min.js js/browser/bluebird.core.min.js"},homepage:"https://github.com/petkaantonov/bluebird",repository:{type:"git",url:"git://github.com/petkaantonov/bluebird.git"},bugs:{url:"http://github.com/petkaantonov/bluebird/issues"},license:"MIT",author:{name:"Petka Antonov",email:"petka_antonov@hotmail.com",url:"http://github.com/petkaantonov/"},devDependencies:{acorn:"^6.0.2","acorn-walk":"^6.1.0",baconjs:"^0.7.43",bluebird:"^2.9.2","body-parser":"^1.10.2",browserify:"^8.1.1","cli-table":"~0.3.1",co:"^4.2.0","cross-spawn":"^0.2.3",glob:"^4.3.2","grunt-saucelabs":"~8.4.1",highland:"^2.3.0",istanbul:"^0.3.5",jshint:"^2.6.0","jshint-stylish":"~0.2.0",kefir:"^2.4.1",mkdirp:"~0.5.0",mocha:"~2.1",open:"~0.0.5",optimist:"~0.6.1",rimraf:"~2.2.6",rx:"^2.3.25","serve-static":"^1.7.1",sinon:"~1.7.3","uglify-js":"~2.4.16"},readmeFilename:"README.md",main:"./js/release/bluebird.js",webpack:"./js/release/bluebird.js",browser:"./js/browser/bluebird.js",files:["js/browser","js/release","LICENSE"],_resolved:"https://registry.npmjs.org/bluebird/-/bluebird-3.5.5.tgz",_integrity:"sha512-5am6HnnfN+urzt4yfg7IgTbotDjIT/u8AJpEt0sIU9FtXfVeezXAPKswrG+xKUCOYAINpSdgZVDU6QFh+cuH3w==",_from:"bluebird@3.5.5",hash:"020234c",mappings:{},production:!0,useScriptInjection:!0}}),montageDefine("c2ad217","package.json",{exports:{name:"collections",version:"5.1.12",description:"data structures with idiomatic JavaScript collection interfaces",homepage:"http://www.collectionsjs.com",author:"Kris Kowal <kris@cixar.com> (http://github.com/kriskowal)",main:"collections",contributors:[{name:"Benoit Marchant"},{name:"Harold Thetiot"}],keywords:["collections","data structures","observable","list","set","map","splay"],bugs:{mail:"kris@cixar.com",url:"http://github.com/montagejs/collections/issues"},license:"BSD-3-Clause",licenses:[{type:"MIT",url:"https://raw.github.com/montagejs/collections/master/LICENSE.md"}],repository:{type:"git",url:"http://github.com/montagejs/collections.git"},dependencies:{"weak-map":"~1.0.x"},devDependencies:{mr:"git://github.com/montagejs/mr#master",browserify:"^14.5.0",concurrently:"^3.4.0","http-server":"^0.9.0","jasmine-console-reporter":"^1.2.7","jasmine-core":"^2.5.2",karma:"^1.5.0","karma-chrome-launcher":"^2.0.0","karma-coverage":"^1.1.1","karma-firefox-launcher":"^1.0.1","karma-jasmine":"^1.1.0","karma-phantomjs-launcher":"^1.0.2","montage-testing":"git://github.com/montagejs/montage-testing#master","mop-integration":"git://github.com/montagejs/mop-integration.git#master",open:"0.0.5","uglify-js":"^3.2.2"},scripts:{test:"node test/run-node.js",build:"npm run build:browserify","build:browserify":"browserify -r . -s collections > collections.min.js","build:uglifyjs":"uglifyjs collections.min.js -c > collections.min.js",integration:"mop-integration","test:karma":"karma start --no-auto-watch --single-run","test:karma-firefox":"karma start --no-auto-watch --single-run --browsers=Firefox","test:karma-chrome":"karma start --no-auto-watch --single-run --browsers=Chrome","test:karma-debug":"karma start --auto-watch --no-single-run --browsers=PhantomJS_debug","test:karma-dev":"karma start --auto-watch --no-single-run --capture","test:jasmine":'concurrently "http-server -a localhost -p 8085" "open http://localhost:8085/test/run.html"',"preversion:bower":'sed \'s/"version": "[^,]*"/"version": "\'$npm_package_version\'"/\' bower.json  > output &&  mv output bower.json',version:"npm run preversion:bower && git add -A bower.json"},_resolved:"https://registry.npmjs.org/collections/-/collections-5.1.12.tgz",_integrity:"sha512-7WV0gdGlQFHjB//+/5JW4CdMnOlf7fWMMeM3EWvuao7RbK0MeFS01bZOgWmIH5DHDejSutf455QUZ56ZjjROXw==",_from:"collections@5.1.12",hash:"c2ad217",mappings:{"weak-map":{name:"weak-map",hash:"62c9bb4",location:"../weak-map@62c9bb4/"}},production:!0,useScriptInjection:!0}}),montageDefine("f7560f2","package.json",{exports:{name:"proxy-polyfill",version:"0.1.7",description:"Polyfill for the Proxy object",main:"proxy.js",repository:{type:"git",url:"git+https://github.com/GoogleChrome/proxy-polyfill.git"},keywords:["polyfill","html5","proxy","es6"],author:"The Chromium Authors",license:"Apache-2.0",bugs:{url:"https://github.com/GoogleChrome/proxy-polyfill/issues"},homepage:"https://github.com/GoogleChrome/proxy-polyfill#readme",_resolved:"https://registry.npmjs.org/proxy-polyfill/-/proxy-polyfill-0.1.7.tgz",_integrity:"sha1-HAb+ELC2BueSaOFNRSiVLmQDbTk=",_from:"proxy-polyfill@0.1.7",hash:"f7560f2",mappings:{},production:!0,useScriptInjection:!0}}),montageDefine("f610e91","package.json",{exports:{name:"frb",version:"4.0.3",description:"Functional reactive bindings",keywords:["functional","reactive","bindings","observe","change"],author:"Kris Kowal <kris@cixar.com> (http://github.com/kriskowal/)",contributors:["Kris Kowal <kris@cixar.com> (http://github.com/kriskowal/)","Benoit Marchant <benoit@montagestudio.com> (http://github.com/marchant/)"],bugs:{mail:"benoit@montagestudio.com",url:"http://github.com/montagejs/frb/issues"},licenses:[{type:"MIT",url:"http://github.com/montagejs/frb/raw/master/LICENSE.md"}],license:"BSD-3-Clause",repository:{type:"git",url:"http://github.com/montagejs/frb.git"},main:"bindings",dependencies:{collections:"^5.1.3"},devDependencies:{"jasmine-node":"montagestudio/jasmine-node#master","memwatch-next":"^0.3.0",pegjs:"git://github.com/dmajda/pegjs.git"},scripts:{test:"jasmine-node spec","build-parser":"pegjs --allowed-start-rules expression,sheet grammar.pegjs"},_resolved:"https://registry.npmjs.org/frb/-/frb-4.0.3.tgz",_integrity:"sha1-Hbgnwfv4mG/lRop0Z7NT5cP6u0w=",_from:"frb@4.0.3",hash:"f610e91",mappings:{collections:{name:"collections",hash:"c2ad217",location:"../collections@c2ad217/"}},production:!0,useScriptInjection:!0}}),montageDefine("05dc941","package.json",{exports:{name:"lodash.camelcase",version:"4.3.0",description:"The lodash method `_.camelCase` exported as a module.",homepage:"https://lodash.com/",icon:"https://lodash.com/icon.svg",license:"MIT",keywords:"lodash-modularized, camelcase",author:"John-David Dalton <john.david.dalton@gmail.com> (http://allyoucanleet.com/)",contributors:["John-David Dalton <john.david.dalton@gmail.com> (http://allyoucanleet.com/)","Blaine Bublitz <blaine.bublitz@gmail.com> (https://github.com/phated)","Mathias Bynens <mathias@qiwi.be> (https://mathiasbynens.be/)"],repository:"lodash/lodash",scripts:{test:'echo "See https://travis-ci.org/lodash/lodash-cli for testing details."'},_resolved:"https://registry.npmjs.org/lodash.camelcase/-/lodash.camelcase-4.3.0.tgz",_integrity:"sha1-soqmKIorn8ZRA1x3EfZathkDMaY=",_from:"lodash.camelcase@4.3.0",main:"index",hash:"05dc941",mappings:{},production:!0,useScriptInjection:!0}}),montageDefine("4acd5ac","package.json",{exports:{name:"lodash.kebabcase",version:"4.1.1",description:"The lodash method `_.kebabCase` exported as a module.",homepage:"https://lodash.com/",icon:"https://lodash.com/icon.svg",license:"MIT",keywords:"lodash-modularized, kebabcase",author:"John-David Dalton <john.david.dalton@gmail.com> (http://allyoucanleet.com/)",contributors:["John-David Dalton <john.david.dalton@gmail.com> (http://allyoucanleet.com/)","Blaine Bublitz <blaine.bublitz@gmail.com> (https://github.com/phated)","Mathias Bynens <mathias@qiwi.be> (https://mathiasbynens.be/)"],repository:"lodash/lodash",scripts:{test:'echo "See https://travis-ci.org/lodash/lodash-cli for testing details."'},_resolved:"https://registry.npmjs.org/lodash.kebabcase/-/lodash.kebabcase-4.1.1.tgz",_integrity:"sha1-hImxyw0p/4gZXM7KRI/21swpXDY=",_from:"lodash.kebabcase@4.1.1",main:"index",hash:"4acd5ac",mappings:{},production:!0,useScriptInjection:!0}}),montageDefine("62c9bb4","package.json",{exports:{name:"weak-map",version:"1.0.5",description:"A WeakMap shim for Node.js and browsers",main:"weak-map.js",repository:{type:"git",url:"git://github.com/drses/weak-map.git"},keywords:["weakmap","weak-map","weak","map","collections","es6"],author:"Mark Miller <erights@gmail.com>",maintainer:"Kris Kowal <kris@cixar.com>",license:"Apache 2.0",bugs:{url:"https://github.com/drses/weak-map/issues"},files:["weak-map.js"],scripts:{test:"npm run test:native; npm run test:shim","test:phantom":"","test:shim":"node test/index.js","test:native":"node --harmony_collections test/index.js"},devDependencies:{jasminum:"^2.0.1"},_resolved:"https://registry.npmjs.org/weak-map/-/weak-map-1.0.5.tgz",_integrity:"sha1-eWkVhNmGB/UHC9O3CkDmuyLkAes=",_from:"weak-map@1.0.5",hash:"62c9bb4",mappings:{},production:!0,useScriptInjection:!0}}),montageDefine("0e99770","index.html",{text:'<!DOCTYPE html><html manifest=manifest.appcache><head><link rel=manifest href=./manifest.json><meta http-equiv=Content-Type content="text/html; charset=utf-8"><meta name=viewport content="initial-scale=1,maximum-scale=1,user-scalable=0,minimal-ui"><meta name=mobile-web-app-capable content=yes><meta name=apple-mobile-web-app-capable content=yes><link rel=apple-touch-icon-precomposed sizes=152x152 href=assets/icons/apple-touch-icon-152x152-precomposed.png><link rel=apple-touch-icon-precomposed sizes=120x120 href=assets/icons/apple-touch-icon-120x120-precomposed.png><link rel=apple-touch-icon-precomposed sizes=76x76 href=assets/icons/apple-touch-icon-76x76-precomposed.png><link rel=apple-touch-icon-precomposed href=assets/icons/apple-touch-icon-precomposed.png><link rel=icon sizes=196x196 href=assets/icons/apple-touch-icon.png><title>Montage Popcorn</title><link rel=preload href=assets/style/style.css as=style><style>*{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-user-drag:none;-moz-user-drag:none;-ms-user-drag:none;user-drag:none;-moz-box-sizing:border-box;-ms-box-sizing:border-box;box-sizing:border-box}body{background:#000;overflow:hidden}#montage-app-bootstrapper{padding-top:200px;color:#fff;text-align:center;font:30px/1.8em "Lucida Grande",Lucida,Verdana,sans-serif}.logo-bootstrapper{height:30px}.montage-app-bootstrapping #montage-app-bootstrapper{display:block}#montage-app-loader{text-align:center;color:#777;font:20px/1.8em "Lucida Grande",Lucida,Verdana,sans-serif}.montage-app-loading #montage-app-bootstrapper,.montage-app-loading #montage-app-loader{display:block}.main{visibility:hidden}.montage-app-loaded .main{visibility:visible}</style><script src=packages/montage@64d2e12/montage.js></script><script type=text/montage-serialization>{"owner":{"prototype":"montage/ui/montage-studio-loader.reel","values":{"minimumLoadingDuration":6000}},"localizer":{"object":"montage/core/localizer[defaultLocalizer]"}}</script></head><body><div class=loading>Loading</div></body></html>'}),montageDefine("64d2e12","core/core",{dependencies:["collections/shim","./shim/object","./shim/array","./extras/object","./extras/date","./extras/element","./extras/function","./extras/map","./extras/regexp","./extras/string","./extras/set","./extras/weak-map","proxy-polyfill/proxy.min","collections/map","collections/weak-map","collections/set","collections/listen/property-changes","frb","frb/parse","frb/evaluate","frb/assign","frb/bind","frb/compile-observer","frb/scope","frb/observers","./promise","./serialization/bindings"],factory:function(e,t,n){function r(e,t,n){var i=n||(t===w?B:m+t+g);return e!==Object.prototype?e.hasOwnProperty(i)?e[i]:Object.defineProperty(e,i,{enumerable:!1,configurable:!1,writable:!0,value:Object.create(r(Object.getPrototypeOf(e),t,i))})[i]:(W.has(t)||W.set(t,{}),W.get(t))}function i(e){var t=V.get(e);return t||V.set(e,t=new v),t}function o(e,t,n){var r,a,s,l=x,u=Object.getOwnPropertyDescriptor(e,t);if(u)if(typeof u.value===O&&typeof n.value===O)for(l["delete"](u.value),r=i(u.value),a=r.values();s=a.next().value;)l["delete"](s);else{if(typeof u.get===O&&typeof n.get===O)for(l["delete"](u.get),r=i(u.get),a=r.values();s=a.next().value;)l["delete"](s);if(typeof u.set===O&&typeof n.set===O)for(l["delete"](u.set),r=i(u.set),a=r.values();s=a.next().value;)l["delete"](s)}if(r=k.get(e))for(a=r.values();s=a.next().value;)o(s,t,n)}function a(e){var t=k.get(e);
return t||k.set(e,t=new v),t}function s(e,t,n,r,i,o,s){var l,u,c,h,p,d,f,v,g,m,_=global.Object,y=i,b=o,w=s;for(f=g=n?t:t.prototype;!m&&null!==g;){if(d){if(h=_.getOwnPropertyDescriptor(g,d)){if(h.hasOwnProperty("value")){p=h.value,m=!0;break}if(b&&h.hasOwnProperty("get")){p=h.get,m=!0;break}if(w&&h.hasOwnProperty("set")){p=h.set,m=!0;break}}}else for(l=r?(q[0]=r)&&q:_.getOwnPropertyNames(g),u=0;c=l[u];u++)if(h=_.getOwnPropertyDescriptor(g,c))if(p=h.value,void 0!==p&&null!==p){if(p===e||p.deprecatedFunction===e){d=c,y=!0;break}}else{if(p=h.get,void 0!==p&&null!==p&&(p===e||p.deprecatedFunction===e)){d=c,b=!0;break}if(p=h.set,void 0!==p&&null!==p&&(p===e||p.deprecatedFunction===e)){d=c,w=!0;break}}v=g,(g=_.getPrototypeOf(g))&&a(g).add(v)}return m&&typeof p===O?p:Function.noop}function l(e,t,n,r,o){if(e||t){var a=x.get(e);if(!a){var l=typeof this===O;a=s(e,l?this:this.constructor,l,t,n,r,o),a&&(x.set(e,a),i(a).add(e))}return a}}function u(){var e=u&&u.caller?u.caller:arguments.callee.caller,t=l.call(this,e);return t?t.apply(this,arguments):void 0}function c(e){var t=c&&c.caller?c.caller:arguments.callee.caller,n=l.call(this,t,e,!0,!1,!1);return n?n.bind(this):Function.noop}function h(e){var t=h&&h.caller?h.caller:arguments.callee.caller,n=l.call(this,t,e,!1,!0,!1);return n?n.bind(this):Function.noop}function p(e){var t=p&&p.caller?p.caller:arguments.callee.caller,n=l.call(this,t,e,!1,!1,!0);return n?n.bind(this):Function.noop}e("collections/shim"),e("./shim/object"),e("./shim/array"),e("./extras/object"),e("./extras/date"),e("./extras/element"),e("./extras/function"),e("./extras/map"),e("./extras/regexp"),e("./extras/string"),e("./extras/set"),e("./extras/weak-map"),e("proxy-polyfill/proxy.min");var d=e("collections/map"),f=e("collections/weak-map"),v=e("collections/set"),g="AttributeProperties",m="_",_="__proto__",y="value",b="enumerable",w="serializable",O="function",j=95,E=Array.prototype,C=Object.prototype,D=C.hasOwnProperty,P={get:void 0,set:void 0,configurable:!1,enumerable:!1},T={value:void 0,configurable:!1,enumerable:!1,writable:!1},x=new f,k=new f;if(!Object.create.name){var A=/^[\S\s]*?function\s*/,S=/[\s\(\/][\S\s]+$/;Object.defineProperty(Function.prototype,"name",{get:function(){var e="";return this===Function||this===Function.prototype.constructor?e="Function":this!==Function.prototype&&(e=(""+this).replace(A,"").replace(S,"")),e}})}var L=t.Montage=function(){},M={}.__proto__===Object.prototype,F={_montage_metadata:1,__state__:1,_hasUserDefinedConstructor:1};if(L.defineValueProperty=function oe(e,t,n,r,i,o){oe.template.value=n,oe.template.configurable=r,oe.template.enumerable=i,oe.template.writable=o,this.defineProperty(e,t,oe.template)},L.defineValueProperty.template=T,L.defineAccessorProperty=function ae(e,t,n,r,i,o){ae.template.get=n,ae.template.set=r,ae.template.configurable=i,ae.template.enumerable=o,this.defineProperty(e,t,ae.template)},L.defineAccessorProperty.template=P,T.value=!1,Object.defineProperty(L,"_hasUserDefinedConstructor",T),T.value=function(e,t){var n,r,i,o,a,s,l,u=this,c="undefined"==typeof this.specialize;if(e=e||Object.empty,t=t||Object.empty,e.constructor&&e.constructor.value?(n=e.constructor.value,n._hasUserDefinedConstructor=!0):this._hasUserDefinedConstructor?n=function(){return this["super"]()||this}:(n=function(){return this},n.name=this.name+"Specialized"),M)n.__proto__=u;else{for(i=Object.getOwnPropertyNames(u),s=0,l=i.length;s<l;s++)o=i[s],F.hasOwnProperty(o)||(a=Object.getOwnPropertyDescriptor(n,o),a&&!a.configurable||L.defineProperty(n,o,Object.getOwnPropertyDescriptor(u,o)));n.__constructorProto__=u,L.defineProperty(n,"isPrototypeOf",{value:function(e){for(var t;null!==e;){if(t=Object.getPrototypeOf(e),t===this)return!0;e=t}return!1},enumerable:!1})}if(r=Object.create(this.prototype),c){for(i=Object.getOwnPropertyNames(L),s=0,l=i.length;s<l;s++)o=i[s],a=Object.getOwnPropertyDescriptor(n,o),a&&!a.configurable||L.defineProperty(n,o,Object.getOwnPropertyDescriptor(L,o));for(i=Object.getOwnPropertyNames(L.prototype),s=0,l=i.length;s<l;s++)o=i[s],a=Object.getOwnPropertyDescriptor(n,o),a&&!a.configurable||L.defineProperty(r,o,Object.getOwnPropertyDescriptor(L.prototype,o))}return"objectDescriptor"in e&&L.defineProperty(n,"objectDescriptor",e.objectDescriptor),"blueprint"in e&&L.defineProperty(n,"blueprint",e.blueprint),"objectDescriptorModuleId"in e&&L.defineProperty(n,"objectDescriptorModuleId",e.objectDescriptorModuleId),"blueprintModuleId"in e&&L.defineProperty(n,"blueprintModuleId",e.blueprintModuleId),L.defineProperties(r,e,!0),L.defineProperties(n,t,!0),L.defineProperty(n,"__isConstructor__",{value:!0,enumerable:!1}),n.prototype=r,L.defineValueProperty(r,"constructor",n,!0,!1,!0),L.defineValueProperty(n,"constructor",n,!0,!1,!0),n},T.writable=!1,T.configurable=!0,T.enumerable=!1,Object.defineProperty(L,"specialize",T),!M){var R=Object.getPrototypeOf;Object.getPrototypeOf=function(e){return typeof e===O&&e.__constructorProto__?e.__constructorProto__:R.apply(Object,arguments)}}var z={enumerable:!0,configurable:!0,serializable:!0},I={writable:!0,enumerable:!0,configurable:!0,serializable:"reference"},N={writable:!0,enumerable:!1,configurable:!0},B="_serializableAttributeProperties";Object.defineProperty(L.prototype,B,{enumerable:!1,configurable:!1,writable:!0,value:{}});var W=new d,V=new d;T.writable=T.configurable=T.enumerable=!1,T.value=function(e,t,n,i){if("object"!=typeof e&&typeof e!==O||null===e)throw new TypeError("Object must be an object, not '"+e+"'");var a=y in n;if(_ in n)n.__proto__=a?typeof n.value===O?N:I:z;else{var s;s=a?typeof n.value===O?N:I:z;for(var l in s)D.call(s,l)&&(l in n||(n[l]=s[l]))}return D.call(n,b)||t.charCodeAt(0)!==j||(n.enumerable=!1),D.call(n,w)||(n.enumerable?n.get&&!n.set?n.serializable=!1:n.writable===!1&&(n.serializable=!1):n.serializable=!1),w in n&&(r(e,w)[t]=n.serializable),i||o(e,t,n),Object.defineProperty(e,t,n)},Object.defineProperty(L,"defineProperty",T),Object.defineProperty(L,"defineProperties",{value:function(e,t,n){if("object"!=typeof t||null===t)throw new TypeError("Properties must be an object, not '"+t+"'");for(var r,i=Object.getOwnPropertyNames(t),o=0;r=i[o];o++)"_bindingDescriptors"!==r&&this.defineProperty(e,r,t[r],n);return e}}),L.defineProperty(L,"didCreate",{value:Function.noop});var q=[];L.defineProperty(L,"super",{value:u,enumerable:!1}),L.defineProperty(L.prototype,"super",{value:u,enumerable:!1}),L.defineProperty(L,"superForValue",{value:c,enumerable:!1}),L.defineProperty(L.prototype,"superForValue",{value:c,enumerable:!1}),L.defineProperty(L,"superForGet",{value:h,enumerable:!1}),L.defineProperty(L.prototype,"superForGet",{value:h,enumerable:!1}),L.defineProperty(L,"superForSet",{value:p,enumerable:!1}),L.defineProperty(L.prototype,"superForSet",{value:p,enumerable:!1}),L.defineProperty(L,"getSerializablePropertyNames",{value:function(e){var t,n=r(e,w);if(n){t=[];for(var i in n)n[i]&&t.push(i);return t}return Array.empty}}),L.defineProperty(L,"getPropertyAttribute",{value:function(e,t,n){var i=r(e,n);if(i)return i[t]}}),L.defineProperty(L,"getPropertyAttributes",{value:function(e,t){var n,i=r(e,t);if(i){n={};for(var o in i)D.call(i,o)?n[o]=i[o]:n[o]=i[o];return n}}});var U={isInstance:{value:!0}},H={objectName:{value:"Function"},isInstance:{value:!0}};Object.defineProperty(L.prototype,"_montage_metadata",{enumerable:!1,writable:!0,value:void 0}),L.defineProperty(L,"getInfoForObject",{value:function(e){var t,n;if(D.call(e,"_montage_metadata")&&e._montage_metadata)return e._montage_metadata;if(t=e._montage_metadata||e.constructor&&e.constructor._montage_metadata||null,n=e.constructor===Function?H:U,e===Object.prototype)return Object.create(t,n);try{return e.constructor===Object?Object.defineProperty(e,"_montage_metadata",{enumerable:!1,writable:!0,value:Object.create(t,n)})._montage_metadata:("_montage_metadata"in e.constructor.prototype||hasOwnProperty.call(e.constructor.prototype,"_montage_metadata")||Object.defineProperty(e.constructor.prototype,"_montage_metadata",{enumerable:!1,writable:!0,value:void 0}),(e._montage_metadata=Object.create(t,n))||e._montage_metadata)}catch(r){return e._montage_metadata=Object.create(t,n)}}}),L.defineProperty(L,"identifier",{value:null,serializable:!0}),L.defineProperty(L.prototype,"identifier",{value:null,serializable:!0}),L.defineProperty(L.prototype,"version",{value:1,serializable:!1}),L.defineProperty(L.prototype,"equals",{value:function(e){return!!e&&(this===e||this.uuid&&this.uuid===e.uuid)}}),L.defineProperty(L,"equals",{value:L.prototype.equals}),L.defineProperty(L.prototype,"callDelegateMethod",{value:function(e){var t,n=this.delegate;if(n){var r=this.identifier+e.toCapitalized();if("string"==typeof this.identifier&&typeof n[r]===O?t=n[r]:typeof n[e]===O&&(t=n[e]),t)return 2===arguments.length?t.call(n,arguments[1]):3===arguments.length?t.call(n,arguments[1],arguments[2]):4===arguments.length?t.call(n,arguments[1],arguments[2],arguments[3]):5===arguments.length?t.call(n,arguments[1],arguments[2],arguments[3],arguments[4]):(E.shift.call(arguments),t.apply(n,arguments))}}});var G=e("collections/listen/property-changes");Object.addEach(L,G.prototype),Object.addEach(L.prototype,G.prototype);var X=t.Bindings=e("frb"),Y={defineBinding:{value:function(e,t,n){return X.defineBinding(this,e,t,n)}},defineBindings:{value:function(e,t){return X.defineBindings(this,e,t)}},cancelBinding:{value:function(e){return X.cancelBinding(this,e)}},cancelBindings:{value:function(){return X.cancelBindings(this)}},getBinding:{value:function(e){return X.getBinding(this,e)}},getBindings:{value:function(){return X.getBindings(this)}}};L.defineProperties(L,Y),L.defineProperties(L.prototype,Y);var $=e("frb/parse"),J=e("frb/evaluate"),K=e("frb/assign"),Z=(e("frb/bind"),e("frb/compile-observer")),Q=e("frb/scope"),ee=e("frb/observers"),te=ee.autoCancelPrevious,ne=function(){return this._willChangeListeners=null,this._changeListeners=null,this};Object.defineProperties(ne.prototype,{_willChangeListeners:{value:null,writable:!0},willChangeListeners:{get:function(){return this._willChangeListeners||(this._willChangeListeners=new d)}},_changeListeners:{value:null,writable:!0},changeListeners:{get:function(){return this._changeListeners||(this._changeListeners=new d)}}});var re=new f,ie={getPath:{value:function(e,t,n,r){return J(e,this,t||this,n,r)}},setPath:{value:function(e,t,n,r,i){return K(this,e,t,n||this,r,i)}},observePath:{value:function(e,t){var n=$(e),r=Z(n);return r(te(t),new Q(this))}},addRangeAtPathChangeListener:{value:function(e,t,n,r,i,o){function a(e,r,i){if(t[n])t[n](e,r,i);else{if(!t.call)throw new Error("Can't dispatch range change to "+t);t.call(null,e,r,i)}}n=n||"handleRangeChange";var s=[];return this.addPathChangeListener(e,function(e){return e&&e.toArray&&e.addRangeChangeListener?(a(e.toArray(),s.toArray(),0),s=e,e.addRangeChangeListener(a)):(e=[],a(e,s,0),void(s=e))},void 0,void 0,r,i,o)}},getPathChangeDescriptors:{value:function(){return re.has(this)||re.set(this,new d),re.get(this)}},getPathChangeDescriptor:{value:function(e,t,n){var r=L.getPathChangeDescriptors.call(this);return r.has(e)||r.set(e,new ne),r=r.get(e),r=n?r.willChangeListeners:r.changeListeners,r.has(t)||r.set(t,{path:e,handler:t,beforeChange:n,cancel:Function.noop}),r.get(t)}},addPathChangeListener:{value:function(e,t,n,r,i,o,a){var s=this;t=t||Function.noop;var l=L.getPathChangeDescriptor.call(this,e,t,r);l.cancel();var u,c,h,p=$(e);if(t===Function.noop)h=function(t){if(c)throw new Error("Path change handler needs a handler because it emits new values when the source changes: "+JSON.stringify(e));c=!0,u=t};else if(n)h=function(r){return t[n].call(t,r,e,s)};else if(t.handlePathChange)h=function(n){return t.handlePathChange.call(t,n,e,s)};else{if(typeof t!==O)throw new Error("Can't recognize handler type: "+t+". Must be function or delegate implementing handlePathChange.");h=function(n){return t.call(s,n,e,s)}}var d=Z(p),f=new Q(this);f.beforeChange=r,f.parameters=i,f.document=o,f.components=a;var v=d(te(h),f);return l.cancel=v,c?u:v}},removePathChangeListener:{value:function(e,t,n){t=t||Function.noop;var r=L.getPathChangeDescriptors.call(this),i=n?"willChangeListeners":"changeListeners",o=r.get(e);if(!o)throw new Error("Can't find "+i+" for "+JSON.stringify(e));var a=o[i];if(!a.has(t))throw new Error("Can't find "+i+" for "+JSON.stringify(e));var s=a.get(t);s.cancel(),a["delete"](t),0===o.willChangeListeners.size&&0===o.changeListeners.size&&r["delete"](e),r.size<1&&re["delete"](this)}},addBeforePathChangeListener:{value:function(e,t,n,r,i,o){return L.addPathChangeListener.call(this,e,t,n,!0,r,i,o)}},removeBeforePathChangeListener:{value:function(e,t,n){return L.removePathChangeListener.call(this,e,t,!0)}}};L.defineProperties(L,ie),L.defineProperties(L.prototype,ie),t._objectDescriptorModuleIdDescriptor={serializable:!1,enumerable:!1,get:function(){var e=L.getInfoForObject(this),t=e&&!e.isInstance?this:this.constructor;if(!Object.getOwnPropertyDescriptor(t,"_objectDescriptorModuleId")||!t._objectDescriptorModuleId){e=L.getInfoForObject(t);var n=e.moduleId,r=n.lastIndexOf("/"),i=n.lastIndexOf(".");r=r===-1?0:r+1,i=i===-1?n.length:i,i=i<r?n.length:i,L.defineProperty(t,"_objectDescriptorModuleId",{enumerable:!1,value:n.slice(0,i)+".mjson"})}return t._objectDescriptorModuleId}},t._blueprintModuleIdDescriptor={serializable:!1,enumerable:!1,get:function(){var e=L.getInfoForObject(this),t=e&&!e.isInstance?this:this.constructor;if(!Object.getOwnPropertyDescriptor(t,"_objectDescriptorModuleId")||!t._objectDescriptorModuleId){e=L.getInfoForObject(t);var n=e.moduleId,r=n.lastIndexOf("/"),i=n.lastIndexOf(".");r=r===-1?0:r+1,i=i===-1?n.length:i,i=i<r?n.length:i,L.defineProperty(t,"_objectDescriptorModuleId",{enumerable:!1,value:n.slice(0,i)+".meta"})}return t._objectDescriptorModuleId}},t._objectDescriptorDescriptor={serializable:!1,enumerable:!1,get:function(){var n=L.getInfoForObject(this),r=n&&!n.isInstance?this:this.constructor;if(!Object.getOwnPropertyDescriptor(r,"_objectDescriptor")||!r._objectDescriptor){var i=r.objectDescriptorModuleId||r.blueprintModuleId;if(!i)throw new TypeError("ObjectDescriptor moduleId undefined for the module '"+JSON.stringify(r)+"'");t._objectDescriptorDescriptor.ObjectDescriptorModulePromise||(t._objectDescriptorDescriptor.ObjectDescriptorModulePromise=e.async("./meta/module-object-descriptor").get("ModuleObjectDescriptor")),n=L.getInfoForObject(r),L.defineProperty(r,"_objectDescriptor",{enumerable:!1,value:t._objectDescriptorDescriptor.ObjectDescriptorModulePromise.then(function(e){return e.getObjectDescriptorWithModuleId(i,n.require)["catch"](function(t){if(t.message.indexOf("Can't XHR")!==-1)return e.createDefaultObjectDescriptorForObject(r).then(function(e){return e});throw t})})})}return r._objectDescriptor},set:function(t){var n,r=L.getInfoForObject(this),i=r&&!r.isInstance?this:this.constructor;if(null===t)n=null;else{if(typeof t.then===O)throw new TypeError("Object descriptor should not be a promise");t.objectDescriptorInstanceModule=i.objectDescriptorModule,n=e("./promise").Promise.resolve(t)}L.defineProperty(i,"_objectDescriptor",{enumerable:!1,value:n})}},t._blueprintDescriptor=t._objectDescriptorDescriptor,e("./serialization/bindings")}}),montageDefine("64d2e12","core/event/event-manager",{dependencies:["../core","./mutable-event","../serialization/serializer/montage-serializer","../serialization/deserializer/montage-deserializer","collections/map","collections/weak-map","../environment"],factory:function(e,t,n){var r,i=e("../core").Montage,o=e("./mutable-event").MutableEvent,a=e("../serialization/serializer/montage-serializer").MontageSerializer,s=e("../serialization/deserializer/montage-deserializer").MontageDeserializer,l=e("collections/map"),u=e("collections/weak-map"),c=e("../environment").currentEnvironment;"undefined"!=typeof document&&"undefined"!=typeof window&&"undefined"!=typeof Event&&"function"!=typeof CustomEvent&&(CustomEvent=function(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n},CustomEvent.prototype=Event.prototype,window.CustomEvent=CustomEvent),"undefined"!=typeof document&&"undefined"!=typeof window&&"undefined"==typeof Touch&&"ontouchstart"in window&&(Touch=function(){},function(){var e;document.addEventListener("touchstart",e=function t(e){window.Touch=e.touches[0].constructor,document.nativeRemoveEventListener?document.nativeRemoveEventListener("touchstart",t,!0):document.removeEventListener("touchstart",t,!0),r&&r.isStoringPointerEvents&&(r.isStoringPointerEvents=!1,r.isStoringPointerEvents=!0)},!0)}(),window.Touch=Touch);var h=i.specialize({_identifier:{enumerable:!1,writable:!0,value:null},initWithIdentifier:{value:function(e){return this._identifier=e,this}},clearCache:{value:function(){return this._data=this._x=this._y=this._speed=this._angle=null,this}},_data:{enumerable:!1,writable:!0,value:null},_x:{enumerable:!1,writable:!0,value:null},_y:{enumerable:!1,writable:!0,value:null},_speed:{enumerable:!1,writable:!0,value:null},_angle:{enumerable:!1,writable:!0,value:null},x:{get:function(){return null===this._x&&(null===this._data&&(this._data=r._getPointerVelocityData(this._identifier)),this._x=r._calculatePointerVelocity(this._data.time,this._data.x)),this._x},set:function(){}},y:{get:function(){return null===this._y&&(null===this._data&&(this._data=r._getPointerVelocityData(this._identifier)),this._y=r._calculatePointerVelocity(this._data.time,this._data.y)),this._y},set:function(){}},speed:{get:function(){return null===this._speed&&(this._speed=Math.sqrt(this.x*this.x+this.y*this.y)),this._speed},set:function(){}},angle:{get:function(){return null===this._angle&&(this._angle=Math.atan2(this.y,this.x)),this._angle},set:function(){}}}),p=(i.specialize({constructor:{value:function(e){return this.data=new Array(32),this.velocity={velocity:(new h).initWithIdentifier(e)},this}},data:{enumerable:!1,writable:!0,value:null},size:{enumerable:!1,writable:!0,value:0},pos:{enumerable:!1,writable:!0,value:0},velocity:{enumerable:!1,writable:!0,value:0}}),i.specialize({constructor:{value:function(e,t,n){return this.clientX=e,this.clientY=t,this.timeStamp=n,this}},clientX:{enumerable:!1,writable:!0,value:null},clientY:{enumerable:!1,writable:!0,value:0},timeStamp:{enumerable:!1,writable:!0,value:0}}),function(e,t,n,r,i){var o,a,s,l,u,c,h;for(h=n.keys();s=h.next().value;)if(l=n.get(s),u=l&&l.get(t),Array.isArray(u)&&u.length>0)for(o=0,a=u.length;o<a;o++)c=u[o],r.push({type:s,listener:e.addObjectReference(c),capture:i});else u&&r.push({type:s,listener:e.addObjectReference(u),capture:i})});a.defineSerializationUnit("listeners",function(e,t){var n=r,i=[];if(p(e,t,n._registeredCaptureEventListeners,i,!0),p(e,t,n._registeredBubbleEventListeners,i,!1),i.length>0)return i}),s.defineDeserializationUnit("listeners",function(e,t,n){for(var r,i=0;r=n[i];i++)t.addEventListener(r.type,r.listener,r.capture)});var d=t.EventManager=i.specialize({constructor:{value:function(){return this._trackingTouchStartList=new l,this._trackingTouchEndList=new l,this._findActiveTargetMap=new l,this._eventPathForTargetMap=new l,this._claimedPointers=new l,this._registeredCaptureEventListeners=new l,this._registeredBubbleEventListeners=new l,this._observedTarget_byEventType_=Object.create(null),this._currentDispatchedTargetListeners=new l,this._elementEventHandlerByElement=new u,this.environment=c,this._trackingTouchTimeoutIDs=new l,this}},spliceOne:{value:function(e,t){var n=e.length;if(n){for(;t<n;)e[t]=e[t+1],t++;e.length--}}},eventDefinitions:{value:{abort:{bubbles:!1,cancelable:!1},beforeunload:{bubbles:!1},blur:{bubbles:!1,cancelable:!1},change:{bubbles:!0,cancelable:!1},click:{bubbles:!0,cancelable:!0},close:{bubbles:!1,cancelable:!1},compositionend:{bubbles:!0,cancelable:!1},compositionstart:{bubbles:!0,cancelable:!0},compositionupdate:{bubbles:!0,cancelable:!1},contextmenu:{bubbles:!0,cancelable:!0},copy:{bubbles:!0,cancelable:!0},cut:{bubbles:!0,cancelable:!0},dblclick:{bubbles:!0,cancelable:!1},DOMActivate:{bubbles:!0,cancelable:!0,deprecated:!0},DOMMouseScroll:{bubbles:!0},drag:{bubbles:!0,cancelable:!0},dragend:{bubbles:!0,cancelable:!1},dragenter:{bubbles:!0,cancelable:!0},dragleave:{bubbles:!0,cancelable:!1},dragover:{bubbles:!0,cancelable:!0},dragstart:{bubbles:!0,cancelable:!0},drop:{bubbles:!0,cancelable:!0},error:{bubbles:function(e){return!(XMLHttpRequest.prototype.isPrototypeOf(e)||e.tagName&&"VIDEO"===e.tagName.toUpperCase()||e.tagName&&"AUDIO"===e.tagName.toUpperCase())},cancelable:!1},focus:{bubbles:!1,cancelable:!1},focusin:{bubbles:!0,cancelable:!1},focusout:{bubbles:!0,cancelable:!1},input:{bubbles:!0,cancelable:!1},keydown:{bubbles:!0,cancelable:!1},keypress:{bubbles:!0,cancelable:!1},keyup:{bubbles:!0,cancelable:!1},load:{bubbles:!1,cancelable:!1},loadend:{bubbles:!1,cancelable:!1},loadstart:{bubbles:!1,cancelable:!1},message:{bubbles:!1,cancelable:!1},mousedown:{bubbles:!0,cancelable:!0},mouseenter:{bubbles:!1,cancelable:!1},mouseleave:{bubbles:!1,cancelable:!1},mousemove:{bubbles:!0,cancelable:!0},mouseout:{bubbles:!0,cancelable:!0},mouseover:{bubbles:!0,cancelable:!0},mouseup:{bubbles:!0,cancelable:!0},mousewheel:{bubbles:!0},orientationchange:{bubbles:!1},paste:{bubbles:!0,cancelable:!0},progress:{bubbles:!1,cancelable:!1},reset:{bubbles:!0,cancelable:!1},resize:{bubbles:!1,cancelable:!1},scroll:{bubbles:function(e){return!!e.defaultView},cancelable:!1},select:{bubbles:!0,cancelable:!1},submit:{bubbles:!0,cancelable:!0},touchcancel:{bubbles:!0,cancelable:!1},touchend:{bubbles:!0,cancelable:!0},touchmove:{bubbles:!0,cancelable:!0},touchstart:{bubbles:!0,cancelable:!0},unload:{bubbles:!1,cancelable:!1},wheel:{bubbles:!0,cancelable:!0},pointerdown:{bubbles:!0,cancelable:!0},pointerup:{bubbles:!0,cancelable:!0},pointerenter:{bubbles:!1,cancelable:!0},pointercancel:{bubbles:!0,cancelable:!0},pointerout:{bubbles:!0,cancelable:!0},pointerover:{bubbles:!0,cancelable:!0},pointerleave:{bubbles:!1,cancelable:!0},pointermove:{bubbles:!0,cancelable:!0},MSPointerDown:{bubbles:!0,cancelable:!0},MSPointerMove:{bubbles:!0,cancelable:!0},MSPointerUp:{bubbles:!0,cancelable:!0},MSPointerOver:{bubbles:!0,cancelable:!0},MSPointerOut:{bubbles:!0,cancelable:!0},MSPointerHover:{bubbles:!0,cancelable:!0}}},_DOMPasteboardElement:{value:null,enumerable:!1},_delegate:{value:null,enumerable:!1},delegate:{enumerable:!1,get:function(){return this._delegate},set:function(e){this._delegate=e}},_application:{value:null,enumerable:!1},application:{enumerable:!1,get:function(){return this._application},set:function(e){this._application=e}},_registeredWindows:{value:null,enumerable:!1},_windowsAwaitingFinalRegistration:{value:new u,enumerable:!1},initWithWindow:{enumerable:!1,value:function(e){if(this._registeredWindows)throw"EventManager has already been initialized";return this.registerWindow(e),this}},registerWindow:{enumerable:!1,value:function(e){if(e.defaultEventManager&&e.defaultEventManager!==this)throw Error("EventManager cannot register a window already registered to another EventManager");if(this._registeredWindows&&this._registeredWindows.indexOf(e)>=0)throw new Error("EventManager cannot register a window more than once");if(this._registeredWindows||(this._registeredWindows=[]),!this._windowsAwaitingFinalRegistration.has(e)){if(e.EventTarget&&(e.EventTarget.prototype.nativeAddEventListener=e.EventTarget.prototype.addEventListener),e.Element.prototype.nativeAddEventListener=e.Element.prototype.addEventListener,Object.defineProperty(e,"nativeAddEventListener",{configurable:!0,value:e.addEventListener}),e.document.nativeAddEventListener=e.document.addEventListener,e.XMLHttpRequest.prototype.nativeAddEventListener=e.XMLHttpRequest.prototype.addEventListener,e.DocumentFragment&&(e.DocumentFragment.prototype.nativeAddEventListener=e.DocumentFragment.prototype.addEventListener),e.ShadowRoot&&(e.ShadowRoot.prototype.nativeAddEventListener=e.ShadowRoot.prototype.addEventListener),e.Worker&&(e.Worker.prototype.nativeAddEventListener=e.Worker.prototype.addEventListener),e.MediaController&&(e.MediaController.prototype.nativeAddEventListener=e.MediaController.prototype.addEventListener),e.EventTarget&&(e.EventTarget.prototype.nativeRemoveEventListener=e.EventTarget.prototype.removeEventListener),e.Element.prototype.nativeRemoveEventListener=e.Element.prototype.removeEventListener,Object.defineProperty(e,"nativeRemoveEventListener",{configurable:!0,value:e.removeEventListener}),e.document.nativeRemoveEventListener=e.document.removeEventListener,e.XMLHttpRequest.prototype.nativeRemoveEventListener=e.XMLHttpRequest.prototype.removeEventListener,e.DocumentFragment&&(e.DocumentFragment.prototype.nativeRemoveEventListener=e.DocumentFragment.prototype.removeEventListener),e.ShadowRoot&&(e.ShadowRoot.prototype.nativeRemoveEventListener=e.ShadowRoot.prototype.removeEventListener),e.Worker&&(e.Worker.prototype.nativeRemoveEventListener=e.Worker.prototype.removeEventListener),e.MediaController&&(e.MediaController.prototype.nativeRemoveEventListener=e.MediaController.prototype.removeEventListener),Object.defineProperty(e,"addEventListener",{configurable:!0,value:e.XMLHttpRequest.prototype.addEventListener=e.Element.prototype.addEventListener=e.document.addEventListener=function(t,n,r){return e.defaultEventManager.registerEventListener(this,t,n,!!r)}}),e.EventTarget&&(e.EventTarget.prototype.addEventListener=e.addEventListener),e.Worker&&(e.Worker.prototype.addEventListener=e.addEventListener),e.MediaController&&(e.MediaController.prototype.addEventListener=e.addEventListener),Object.defineProperty(e,"removeEventListener",{configurable:!0,value:e.XMLHttpRequest.prototype.removeEventListener=e.Element.prototype.removeEventListener=e.document.removeEventListener=function(t,n,r){return e.defaultEventManager.unregisterEventListener(this,t,n,!!r)}}),e.EventTarget&&(e.EventTarget.prototype.removeEventListener=e.removeEventListener),e.Worker&&(e.Worker.prototype.removeEventListener=e.removeEventListener),e.MediaController&&(e.MediaController.prototype.removeEventListener=e.removeEventListener),e.HTMLDivElement.prototype.addEventListener!==e.Element.prototype.nativeAddEventListener&&e.HTMLElement&&"addEventListener"in e.HTMLElement.prototype){var n,o,a=Object.getOwnPropertyNames(e),s=0,l=a.length;for(s;s<l;s++)n=a[s],n.match(/^HTML\w*Element$/)&&"function"==typeof n&&(o=n.prototype,o.nativeAddEventListener=o.addEventListener,o.addEventListener=e.Element.prototype.addEventListener,o.nativeRemoveEventListener=o.removeEventListener,o.removeEventListener=e.Element.prototype.removeEventListener)}i.defineProperty(e.Element.prototype,"component",{get:function(){return r._elementEventHandlerByElement.get(this)},enumerable:!1}),r=e.defaultEventManager=t.defaultEventManager=this,this._registeredWindows.push(e),this._windowsAwaitingFinalRegistration.set(e,e),/loaded|complete|interactive/.test(e.document.readyState)?this._finalizeWindowRegistration(e):e.document.addEventListener("DOMContentLoaded",this,!0),this._evaluateShouldDispatchEventCondition()}}},_finalizeWindowRegistration:{enumerable:!1,value:function(e){if(!this._windowsAwaitingFinalRegistration.has(e))throw"EventManager wasn't expecting to register this window";this._windowsAwaitingFinalRegistration["delete"](e),this._listenToWindow(e)}},unregisterWindow:{enumerable:!1,value:function(e){if(this._registeredWindows.indexOf(e)<0)throw"EventManager cannot unregister an unregistered window";if(this._registeredWindows=this._registeredWindows.filter(function(t){return e!==t}),delete e.defaultEventManager,e.EventTarget&&(e.EventTarget.prototype.addEventListener=e.EventTarget.prototype.nativeAddEventListener),e.Element.prototype.addEventListener=e.Element.prototype.nativeAddEventListener,Object.defineProperty(e,"addEventListener",{configurable:!0,value:e.nativeAddEventListener}),e.document.addEventListener=e.document.nativeAddEventListener,e.XMLHttpRequest.prototype.addEventListener=e.XMLHttpRequest.prototype.nativeAddEventListener,e.Worker&&(e.Worker.prototype.addEventListener=e.Worker.prototype.nativeAddEventListener),e.EventTarget&&(e.EventTarget.prototype.removeEventListener=e.EventTarget.prototype.nativeRemoveEventListener),e.Element.prototype.removeEventListener=e.Element.prototype.nativeRemoveEventListener,Object.defineProperty(e,"removeEventListener",{configurable:!0,value:e.nativeRemoveEventListener}),e.document.removeEventListener=e.document.nativeRemoveEventListener,e.XMLHttpRequest.prototype.removeEventListener=e.XMLHttpRequest.prototype.nativeRemoveEventListener,e.Worker&&(e.Worker.prototype.removeEventListener=e.Worker.prototype.nativeRemoveEventListener),e.HTMLDivElement.prototype.nativeAddEventListener!==e.Element.prototype.addEventListener&&e.HTMLElement&&"addEventListener"in e.HTMLElement.prototype&&e.Components&&e.Components.interfaces){var t,n;for(t in Components.interfaces)t.match(/^nsIDOMHTML\w*Element$/)&&(t=t.replace(/^nsIDOM/,""),(t=window[t])&&(n=t.prototype,n.addEventListener=n.nativeAddEventListener,delete n.nativeAddEventListener,n.removeEventListener=n.nativeRemoveEventListener,delete n.nativeRemoveEventListener))}e.EventTarget&&delete e.EventTarget.prototype.nativeAddEventListener,delete e.Element.prototype.nativeAddEventListener,delete e.nativeAddEventListener,delete e.document.nativeAddEventListener,delete e.XMLHttpRequest.prototype.nativeAddEventListener,e.Worker&&delete e.Worker.prototype.nativeAddEventListener,e.EventTarget&&delete e.EventTarget.prototype.nativeRemoveEventListener,delete e.Element.prototype.nativeRemoveEventListener,delete e.nativeRemoveEventListener,delete e.document.nativeRemoveEventListener,delete e.XMLHttpRequest.prototype.nativeRemoveEventListener,e.Worker&&delete e.Worker.prototype.nativeRemoveEventListener,delete e.Element.prototype.component,this._stopListeningToWindow(e)}},unregisterWindows:{enumerable:!1,value:function(){this._registeredWindows.forEach(this.unregisterWindow)}},registeredEventListeners:{enumerable:!1,value:{}},registeredEventListenersForEventType_:{value:function(e){var t=this._registeredCaptureEventListeners.get(e),n=this._registeredBubbleEventListeners.get(e),r=null;return t&&t.forEach(function(e,t,n){e&&e.length>0&&(r=r||[],e.forEach(function(e){r.push(e)}))}),n&&n.forEach(function(e,t,n){e&&e.length>0&&(r=r||[],e.forEach(function(e){r.push(e)}))}),r}},registeredEventListenersForEventType_onTarget_:{enumerable:!1,value:function(e,t){var n,r=this._registeredCaptureEventListeners.get(e),i=this._registeredBubbleEventListeners.get(e),o=null;return e&&t&&(r||i)?(n=r?r.get(t):null,n&&(o||(o=n)),n=i?i.get(t):null,n&&(o=o?o.union(n):n),o):null}},registeredEventListenersForEventType_onTarget_phase_:{enumerable:!1,value:function(e,t,n){return t?this._registeredEventListenersForEventType_onTarget_registeredEventListeners_(e,t,n?this._registeredCaptureEventListeners:this._registeredBubbleEventListeners):null}},_registeredEventListenersForEventType_onTarget_registeredEventListeners_:{value:function(e,t,n){var r=n.get(e);return r?r.get(t):null},enumerable:!1},registeredEventListenersOnTarget_:{value:function(e){var t,n,r,i=this._registeredCaptureEventListeners,o=this._registeredBubbleEventListeners,a=[];for(r=i.keys();t=r.next().value;)n=i.get(t),n.has(e)&&a.push(t);for(r=o.keys();t=r.next().value;)n=o.get(t),n.has(e)&&a.push(t);return a}},_registeredCaptureEventListeners:{value:null},_registeredBubbleEventListeners:{value:null},registerEventListener:{enumerable:!1,value:function(e,t,n,r){var i;return i=this._registerEventListener(e,t,n,r?this._registeredCaptureEventListeners:this._registeredBubbleEventListeners)}},_registerEventListener:{enumerable:!1,value:function(e,t,n,r){var i,o=r.get(t),a=!1,s=!1;return o?o.has(e)?(i=o.get(e),Array.isArray(i)?i.indexOf(n)!==-1?s=!0:(i.push(n),s=!0):(i!==n&&(i=[i,n],o.set(e,i)),s=!0)):(o.set(e,n),a=!0):(r.set(t,o=new l),o.set(e,n),a=!0,
s=!0),a&&"function"==typeof e.nativeAddEventListener&&this._observeTarget_forEventType_(e,t),s}},unregisterEventListener:{enumerable:!1,value:function(e,t,n,r){return r?this._unregisterEventListener(e,t,n,this._registeredCaptureEventListeners,this._registeredBubbleEventListeners):this._unregisterEventListener(e,t,n,this._registeredBubbleEventListeners,this._registeredCaptureEventListeners)}},_unregisterEventListener:{enumerable:!1,value:function(e,t,n,r,i){var o,a,s=r.get(t);if(s&&(o=s.get(e)))return o===n?(s.set(e,null),void this._unregisterTargetForEventTypeIfNeeded(e,t,o,r,i)):void(Array.isArray(o)&&o.indexOf(n)!==-1&&(this._currentDispatchedTargetListeners.has(o)?(a=this._currentDispatchedTargetListeners.get(o),a||this._currentDispatchedTargetListeners.set(o,a=new l),a.set(n,!0)):(this.spliceOne(o,o.indexOf(n)),this._unregisterTargetForEventTypeIfNeeded(e,t,o,r,i))))}},_unregisterTargetForEventTypeIfNeeded:{value:function(e,t,n,r,i){if(!Array.isArray(n)||0===n.length){var o=r.get(t),a=i.get(t);o["delete"](e),0===o.size&&(!a||a&&0===a.size)&&this._stopObservingTarget_forEventType_(e,t)}}},actualDOMTargetForEventTypeOnTarget:{value:function(e,t){if(t.nativeAddEventListener){if(t.defaultView)return t;var n,r=this.eventDefinitions[e];if(!r)return t;if(n="function"==typeof r.bubbles?r.bubbles(t):r.bubbles){var i;return t.screen?t.document:(i=this.shawdowRootFromNode(t))?i:t.ownerDocument}return t}return null}},shawdowRootFromNode:{value:function(e){if(window.ShadowRoot)for(;e;){if("[object ShadowRoot]"===e.toString())return e;e=e.parentNode}}},_observedTarget_byEventType_:{value:null},_passiveEvents:{enumerable:!1,value:["scroll"]},isPassiveEventType:{enumerable:!1,value:function(e){return this._passiveEvents.indexOf(e)!==-1}},_observeTarget_forEventType_:{enumerable:!1,value:function(e,t){var n;if((n=this.actualDOMTargetForEventTypeOnTarget(t,e))&&(!this._observedTarget_byEventType_[t]||!this._observedTarget_byEventType_[t].has(n))){this._observedTarget_byEventType_[t]||(this._observedTarget_byEventType_[t]=new l),this._observedTarget_byEventType_[t].set(n,this);var r=this.isPassiveEventType(t),i=!r||{passive:!0};n.nativeAddEventListener(t,this,i)}}},_stopObservingTarget_forEventType_:{enumerable:!1,value:function(e,t){var n;n=this.actualDOMTargetForEventTypeOnTarget(t,e),n&&(this._observedTarget_byEventType_[t]["delete"](n),n.nativeRemoveEventListener(t,this,!0))}},_activationHandler:{enumerable:!0,value:null},_listenToWindow:{enumerable:!1,value:function(e){if(!this._activationHandler){var t=this;this._activationHandler=function(e){var n,r=e.type,i="mouseenter"!==r&&"pointerenter"!==r;if(e.changedTouches){n=e.changedTouches.length;for(var o=0;o<n;o++)t._prepareComponentsForActivation(e.changedTouches[o].target,i)}else t._prepareComponentsForActivation(e.target,i)}}if(this.registerTargetForActivation(e),this.application){var n,r=this.registeredEventListenersOnTarget_(this.application);for(n in r)r.hasOwnProperty(n)&&this._observeTarget_forEventType_(e,n)}}},registerTargetForActivation:{value:function(e){var t=e instanceof Window?e.document:e;window.PointerEvent?(e.nativeAddEventListener("pointerdown",this._activationHandler,!0),t.nativeAddEventListener("pointerenter",this._activationHandler,!0)):window.MSPointerEvent&&window.navigator.msPointerEnabled?(e.nativeAddEventListener("MSPointerDown",this._activationHandler,!0),t.nativeAddEventListener("mouseenter",this._activationHandler,!0)):(e.nativeAddEventListener("touchstart",this._activationHandler,!0),e.nativeAddEventListener("mousedown",this._activationHandler,!0),t.nativeAddEventListener("mouseenter",this._activationHandler,!0)),e.nativeAddEventListener("focus",this._activationHandler,!0)}},_stopListeningToWindow:{enumerable:!1,value:function(e){var t,n,r=this.registeredEventListenersOnTarget_(this.application),i=this.registeredEventListenersOnTarget_(e);for(t in r)r.hasOwnProperty(t)&&this._stopObservingTarget_forEventType_(e,t);for(t in i)i.hasOwnProperty(t)&&this._stopObservingTarget_forEventType_(e,t);(n=this._listeningWindowOnTouchCancel.indexOf(e))>-1&&this.spliceOne(this._listeningWindowOnTouchCancel,n)}},_resetRegisteredEventListeners:{enumerable:!1,value:function(e){var t,n,r,i,o,a=this;for(i in e)if(e.hasOwnProperty(i)&&(o=e.get(i),o&&o.length>0))for(t=0,n=o.length;t<n;t++)r=o[t],a._stopObservingTarget_forEventType_(r,i)}},reset:{enumerable:!1,value:function(){this._resetRegisteredEventListeners(this._registeredCaptureEventListeners),this._resetRegisteredEventListeners(this._registeredBubbleEventListeners),this._claimedPointers=new l,this._registeredCaptureEventListeners=new l,this._registeredBubbleEventListeners=new l}},unload:{enumerable:!1,value:function(){this._stopListening()}},_bubbleMethodNameByEventType_:{value:new l},_bubbleMethodNameByEventTypeIdentifier_:{value:new l},methodNameForBubblePhaseOfEventType:{enumerable:!1,value:function(e,t,n,r){var i;return t?(i=this._bubbleMethodNameByEventTypeIdentifier_.get(e)||this._bubbleMethodNameByEventTypeIdentifier_.set(e,new l).get(e),i.get(t)||i.set(t,"handle"+(r||t.toCapitalized())+(n||e.toCapitalized())).get(t)):this._bubbleMethodNameByEventType_.get(e)||this._bubbleMethodNameByEventType_.set(e,"handle"+(n||e.toCapitalized())).get(e)}},_captureMethodNameByEventType_:{value:new l},_catptureMethodNameByEventTypeIdentifier_:{value:new l},methodNameForCapturePhaseOfEventType:{enumerable:!1,value:function(e,t,n,r){var i;return t?(i=this._catptureMethodNameByEventTypeIdentifier_.get(e)||this._catptureMethodNameByEventTypeIdentifier_.set(e,new l).get(e),i.get(t)||i.set(t,"capture"+(r||t.toCapitalized())+(n||e.toCapitalized())).get(t)):this._captureMethodNameByEventType_.get(e)||this._captureMethodNameByEventType_.set(e,"capture"+(n||e.toCapitalized())).get(e)}},_claimedPointers:{enumerable:!1,value:null},componentClaimingPointer:{value:function(e){return this._claimedPointers.get(e)}},isPointerClaimedByComponent:{value:function(e,t){if(!t)throw"Must specify a valid component to see if it claims the specified pointer, '"+t+"' is not valid.";return this._claimedPointers.get(e)===t}},claimPointer:{value:function(e,t){if(!e&&0!==e)throw"Must specify a valid pointer to claim, '"+e+"' is not valid.";if(!t)throw"Must specify a valid component to claim a pointer, '"+t+"' is not valid.";var n=this._claimedPointers.get(e);return n===t||(n?!!n.surrenderPointer(e,t)&&(this._claimedPointers.set(e,t),!0):(this._claimedPointers.set(e,t),!0))}},forfeitPointer:{value:function(e,t){if(t!==this._claimedPointers.get(e))throw"Not allowed to forfeit pointer '"+e+"' claimed by another component";this._claimedPointers["delete"](e)}},forfeitAllPointers:{value:function(e){for(var t,n,r=this._claimedPointers.keys();t=r.next().value;)n=this._claimedPointers.get(t),e===n&&this._claimedPointers["delete"](t)}},_isStoringPointerEvents:{enumerable:!1,value:!1},isStoringPointerEvents:{enumerable:!0,get:function(){return this._isStoringPointerEvents},set:function(e){e===!0?this._isStoringPointerEvents||(this._isStoringPointerEvents=!0,"undefined"!=typeof PointerEvent||"undefined"!=typeof MSPointerEvent&&"undefined"!=typeof navigator&&navigator.msPointerEnabled?Object.defineProperty(o.prototype,"velocity",{get:function(){return r.pointerMotion(this.pointerId).velocity}}):"undefined"!=typeof Touch&&Object.defineProperty(Touch.prototype,"velocity",{get:function(){return r.pointerMotion(this.identifier).velocity}})):(this._isStoringPointerEvents=!1,this._pointerStorage.memory={},this._isMouseDragging=!1)}},_isStoringMouseEventsWhileDraggingOnly:{enumerable:!1,value:!0},isStoringMouseEventsWhileDraggingOnly:{enumerable:!0,get:function(){return this._isStoringMouseEventsWhileDraggingOnly},set:function(e){this._isStoringMouseEventsWhileDraggingOnly=e===!0}},_isMouseDragging:{enumerable:!1,value:!1},_pointerStorage:{enumerable:!1,value:{memory:{},velocity:{},add:function(e,t){this.memory[e]||(this.memory[e]={data:new Array(32),size:0,pos:0}),this.memory[e].data[this.memory[e].pos]=t,this.memory[e].size<this.memory[e].data.length&&this.memory[e].size++,this.memory[e].pos=(this.memory[e].pos+1)%this.memory[e].data.length},remove:function(e){delete this.memory[e]},clear:function(e){this.memory[e]&&(this.memory[e].size=0)},getMemory:function(e){return this.memory[e]},isStored:function(e){return this.memory[e]&&this.memory[e].size>0},storeEvent:function(e){var t=c.isBrowserSupportPointerEvents,n=e instanceof o?e._event:e,i=n.pointerType;if(t&&("mouse"===i||window.MSPointerEvent&&i===window.MSPointerEvent.MSPOINTER_TYPE_MOUSE)||!t&&n instanceof MouseEvent)switch(e.type){case"pointerdown":case"MSPointerDown":case"mousedown":r._isMouseDragging=!0;case"pointermove":case"MSPointerMove":case"mousemove":r._isStoringMouseEventsWhileDraggingOnly?r._isMouseDragging&&this._storeMouse(e):this._storeMouse(e);break;case"pointerup":case"MSPointerUp":case"mouseup":this._storeMouse(e)}else if(t&&("touch"===i||window.MSPointerEvent&&i===window.MSPointerEvent.MSPOINTER_TYPE_TOUCH)||void 0!==window.TouchEvent&&!t&&n instanceof TouchEvent)switch(n.type){case"pointerdown":case"MSPointerDown":case"pointermove":case"MSPointerMove":case"pointerup":case"MSPointerUp":this._storeTouch(n.pointerId,n.clientX,n.clientY,n.timeStamp);break;case"touchstart":case"touchmove":this._storeTouches(n.touches,n.timeStamp);break;case"touchend":this._storeTouches(n.changedTouches,n.timeStamp)}},removeEvent:function(e){var t=c.isBrowserSupportPointerEvents,n=e instanceof o?e._event:e;if(t&&("mouse"===e.pointerType||window.MSPointerEvent&&e.pointerType===window.MSPointerEvent.MSPOINTER_TYPE_MOUSE)||!t&&n instanceof MouseEvent)"mouseup"!==e.type&&"pointerup"!==e.type&&"MSPointerUp"!==e.type||(r._isMouseDragging=!1,r._isStoringMouseEventsWhileDraggingOnly&&this.clear("mouse"));else if((t&&("touch"===e.pointerType||window.MSPointerEvent&&e.pointerType===window.MSPointerEvent.MSPOINTER_TYPE_TOUCH)||void 0!==window.TouchEvent&&!t&&n instanceof TouchEvent)&&("touchend"===e.type||"pointerup"===e.type||"MSPointerUp"===e.type))if(e.changedTouches)for(var i,a=0,s=e.changedTouches;i=s[a];a++)this.remove(i.identifier);else this.remove(e.pointerId)},_storeMouse:function(e){this.add("mouse",{clientX:e.clientX,clientY:e.clientY,timeStamp:e.timeStamp}),Object.defineProperty(e,"velocity",{get:function(){return r.pointerMotion("mouse").velocity}})},_storeTouches:function(e,t){for(var n,r=0;n=e[r];r++)this._storeTouch(n.identifier,n.clientX,n.clientY,t)},_storeTouch:function(e,t,n,r){this.add(e,{clientX:t,clientY:n,timeStamp:r})}}},_getPointerVelocityData:{enumerable:!1,value:function(e){var t,n,i,o,a,s,l,u,c,h=0,p=!0,d={x:[],y:[],time:[]};for(t=r._pointerStorage.getMemory(e),n=t.data.length,i=t.data[(t.pos-1+n)%n],o=a=s=i.timeStamp,l=i.clientX,u=i.clientY;p&&a>o-350&&h<t.size;)i=t.data[(t.pos-h-1+n)%n],a=i.timeStamp,c=l*l+u*u,c>2&&s-a<=50?(d.x.push(i.clientX),d.y.push(i.clientY),d.time.push(a),s=a,l=i.clientX,u=i.clientY,h++):p=!1;return d}},_fitPointerCurve:{enumerable:!1,value:function(e,t){var n,r,i,o,a,s,l,u,c,h,p,d,f,v,g,m,_,y,b,w,O,j,E,C,D,P,T,x,k,A,S,L,M,F,R,z,I,N,B=1e-4,W=t.length;do{for(p=d=f=v=g=m=y=b=w=O=j=E=D=P=T=x=k=A=L=M=F=R=z=I=0,h=0;h<W;h++)a=t[h],s=a.t,u=s*s,c=u*s,l=a.v,_=B*(6*(u-s)-c+2),C=6*B*(c-2*u+s),S=6*B*(u-c),N=2*B*c,m+=_*_,E+=C*C,A+=S*S,I+=N*N,p+=l*_,y+=l*C,D+=l*S,L+=l*N,f-=_,w-=C,T-=S,F-=N,d-=_*s,b-=C*s,P-=S*s,M-=N*s,v-=_*u,O-=C*u,x-=S*u,R-=N*u,g-=_*c,j-=C*c,k-=S*c,z-=N*c;B*=2}while(0===m||0===E||0===A||0===I);for(s=B/m,p*=s,d*=3*s,f*=s,v*=3*s,g*=s,s=B/E,y*=s,b*=3*s,w*=s,O*=3*s,j*=s,s=B/A,D*=s,P*=3*s,T*=s,x*=3*s,k*=s,s=B/I,L*=s,M*=3*s,F*=s,R*=3*s,z*=s,m=e[0],E=e[1],A=e[2],I=e[3],n=3*(E-A)+I-m,r=m+A-2*E,i=E-m,o=m,h=0;h<20;h++)s=p+o*f+i*d+r*v+n*g,m+=s,o+=s,n-=s,r+=s,i-=s,s=y+o*w+i*b+r*O+n*j,E+=s,n+=3*s,r-=s+s,i+=s,s=D+o*T+i*P+r*x+n*k,A+=s,n-=3*s,r+=s,s=L+o*F+i*M+r*R+n*z,I+=s,n+=s;e[0]=m,e[1]=E,e[2]=A,e[3]=I}},_pointerBezierValue:{enumerable:!1,value:function(e,t){var n=1-e;return n*n*n*t[0]+3*n*n*e*t[1]+3*n*e*e*t[2]+e*e*e*t[3]}},_calculatePointerVelocity:{enumerable:!1,value:function(e,t){var n,r,i=e.length,o=e[0],a=e[0],s=0;for(r=1;r<i;r++)e[r]<o&&(o=e[r],s=r);if(n=a-o){if(i>5){var l,u,c,h=[];for(r=0;r<i;r++)h[r]={v:t[r],t:(e[r]-o)/n};return l=h[s].v,u=h[0].v,c=[l,(2*l+u)/3,(l+2*u)/3,u],this._fitPointerCurve(c,h),5e3*(this._pointerBezierValue(.8,c)-this._pointerBezierValue(.6,c))/n}return i>1?1e3*(t[0]-t[s])/n:0}return 0}},pointerMotion:{value:function(e){return r._pointerStorage.isStored(e)?{velocity:(new h).initWithIdentifier(e)}:void 0}},monitorDOMModificationInEventHandling:{value:!1},domModificationEventHandler:{value:i.specialize({handleEvent:{value:function(e){throw"DOM Modified"}},captureDOMSubtreeModified:{value:function(e){throw"DOMSubtreeModified"}},captureDOMAttrModified:{value:function(e){throw"DOMAttrModified"}},captureDOMCharacterDataModified:{value:function(e){throw"DOMCharacterDataModified"}}})},_trackingTouchStartList:{value:null},_trackingTouchEndList:{value:null},_trackingTouchTimeoutIDs:{value:null},_wouldTouchTriggerSimulatedEvent:{value:function(e){switch(e.type){case"touchstart":case"touchend":return!0;default:return!1}}},_couldEventBeSimulated:{value:function(e){switch(e.type){case"mousedown":case"mouseup":case"click":return!0;default:return!1}}},_listeningWindowOnTouchCancel:{value:[]},_findWindowFromEvent:{value:function(e){var t,n=e.target;return n&&(t=n instanceof Window?n:n.defaultView instanceof Window?n.defaultView:n.ownerDocument&&n.ownerDocument.defaultView?n.ownerDocument.defaultView:null),t}},_isWindowListeningOnTouchCancel:{value:function(e){return this._registeredWindows.indexOf(e)>-1&&this._listeningWindowOnTouchCancel.indexOf(e)>-1}},_listenToTouchCancelIfNeeded:{value:function(e){var t=this._findWindowFromEvent(e);if(t&&!this._isWindowListeningOnTouchCancel(t)){var n=this;t.addEventListener("touchcancel",function(e){for(var t,r=e.changedTouches,i=n._trackingTouchStartList,o=0,a=r.length;o<a;o++)t=r[o].identifier,i.has(t)&&i["delete"](t)},!0),this._listeningWindowOnTouchCancel.push(t)}}},_blocksEmulatedEvents:{value:!0},blocksEmulatedEvents:{get:function(){return this._blocksEmulatedEvents},set:function(e){e!==this._blocksEmulatedEvents&&(this._blocksEmulatedEvents=e,this._evaluateShouldDispatchEventCondition())}},_shouldDispatchEventCondition:{value:void 0},_evaluateShouldDispatchEventCondition:{value:function(){this._shouldDispatchEventCondition=this.blocksEmulatedEvents&&!window.PointerEvent&&!(window.MSPointerEvent&&window.navigator.msPointerEnabled)}},_shouldDispatchEvent:{value:function(e){if(this._shouldDispatchEventCondition){if(this.environment.isIOSDevice&&this.environment.isWKWebView){if(0===e.timeStamp)return!1;if(this._couldEventBeSimulated(e)&&!e.hasOwnProperty("movementX"))return!1}if(this.environment.isAndroidDevice&&this._couldEventBeSimulated(e))return!1;if(this._wouldTouchTriggerSimulatedEvent(e)){var t=e.changedTouches;this._listenToTouchCancelIfNeeded(e);for(var n=0,r=t.length;n<r;n++)this._trackTouch(e,t[n])}else if(this._couldEventBeSimulated(e))return!this._isEmulatedEvent(e)}return!0}},_trackTouch:{value:function(e,t){var n=this._trackingTouchTimeoutIDs,r=this._trackingTouchStartList,i=this._trackingTouchEndList,o=t.identifier;if(t.timeStamp=e.timeStamp,"touchstart"===e.type){var a=n.get(o);a&&(clearTimeout(a),n["delete"](o)),r.set(o,t)}else n.set(o,setTimeout(function(){i["delete"](o),delete n[o]},400)),r["delete"](o),i.set(o,t)}},_isEmulatedEvent:{value:function(e){var t=this._findEmulatedEventIdentifierWithEventAndTrackingTouchList(e,this._trackingTouchStartList)>-1;if(!t){var n=this._trackingTouchEndList,r=this._findEmulatedEventIdentifierWithEventAndTrackingTouchList(e,n);if((t=r>-1)&&"click"===e.type){var i=this._trackingTouchTimeoutIDs,o=i.get(r);o&&(clearTimeout(o),n["delete"](r),i["delete"](r))}}return t}},_emulatedEventTimestampThreshold:{value:20},_emulatedEventRadiusThreshold:{value:20},_findEmulatedEventIdentifierWithEventAndTrackingTouchList:{value:function(e,t){var n,r,i,o=e.target,a=-1;for(i=t.keys();n=i.next().value;)if(r=t.get(n),r.target===o||this._couldEmulatedEventHaveWrongTarget(r,e,this._emulatedEventRadiusThreshold,this._emulatedEventTimestampThreshold)){a=n;break}return a}},_couldEmulatedEventHaveWrongTarget:{value:function(e,t,n,r){if(t.timeStamp-e.timeStamp<=r){var i=e.clientX-t.clientX,o=e.clientY-t.clientY;return i*i+o*o<=n*n}return!1}},_currentDispatchedTargetListeners:{value:null},_processCurrentDispatchedTargetListenersToRemove:{value:function(e,t,n,r){var i,o,a=this._currentDispatchedTargetListeners.get(r);a&&a.size>0&&(r.removeObjects(a),i=n?this._registeredCaptureEventListeners:this._registeredBubbleEventListeners,o=n?this._registeredBubbleEventListeners:this._registeredCaptureEventListeners,this._unregisterTargetForEventTypeIfNeeded(e,t,r,i,o))}},handleEvent:{enumerable:!1,value:function(e){if(!(window.MontageElement&&e.target instanceof MontageElement||e instanceof UIEvent&&!this._shouldDispatchEvent(e))){this.monitorDOMModificationInEventHandling&&(document.body.addEventListener("DOMSubtreeModified",this.domModificationEventHandler,!0),document.body.addEventListener("DOMAttrModified",this.domModificationEventHandler,!0),document.body.addEventListener("DOMCharacterDataModified",this.domModificationEventHandler,!0));var t,n,r,i,a,s,l,u,c,h,p,d,f,v,g=e.type,m=g.toCapitalized(),_=e.bubbles,y=this._currentDispatchedTargetListeners,b=this._registeredCaptureEventListeners,w=this._registeredBubbleEventListeners;for("DOMContentLoaded"===g&&(t=e.target.defaultView,t&&this._windowsAwaitingFinalRegistration.has(t)&&(this._finalizeWindowRegistration(t),e.target.removeEventListener("DOMContentLoaded",this,!0))),f="boolean"!=typeof e.propagationStopped?o.fromEvent(e):e,v=f.target,l=Element.isElement(v)||v instanceof Document||v===window?this._eventPathForDomTarget(v):this._eventPathForTarget(v),v.identifier?(d=v.identifier.toCapitalized(),h=this.methodNameForCapturePhaseOfEventType(g,v.identifier,m,d),p=this.methodNameForBubblePhaseOfEventType(g,v.identifier,m,d)):(h=null,p=null),u=this.methodNameForCapturePhaseOfEventType(g,null,m),c=this.methodNameForBubblePhaseOfEventType(g,null,m),this.delegate&&"function"==typeof this.delegate.willDistributeEvent&&this.delegate.willDistributeEvent(f),this._isStoringPointerEvents&&this._pointerStorage.storeEvent(f),f.eventPhase=Event.CAPTURING_PHASE,n=l.length-1;!f.propagationStopped&&(i=l[n]);n--)if(f.currentTarget=i,a=this._registeredEventListenersForEventType_onTarget_registeredEventListeners_(g,i,b))if(Array.isArray(a)){for(r=0,y.set(a,null);(s=a[r++])&&!f.immediatePropagationStopped;)this._invokeTargetListenerForEvent(i,s,f,h,u);this._processCurrentDispatchedTargetListenersToRemove(i,g,!0,a),y["delete"](a)}else this._invokeTargetListenerForEvent(i,a,f,h,u);if(!f.propagationStopped){if(f.eventPhase=Event.AT_TARGET,f.currentTarget=i=v,a=this._registeredEventListenersForEventType_onTarget_registeredEventListeners_(g,i,b))if(Array.isArray(a)){for(r=0,y.set(a,null);(s=a[r++])&&!f.immediatePropagationStopped;)this._invokeTargetListenerForEvent(i,s,f,h,u);this._processCurrentDispatchedTargetListenersToRemove(i,g,!0,a),y["delete"](a)}else this._invokeTargetListenerForEvent(i,a,f,h,u);if(a=this._registeredEventListenersForEventType_onTarget_registeredEventListeners_(g,i,w))if(Array.isArray(a)){for(r=0,y.set(a,null);(s=a[r++])&&!f.immediatePropagationStopped;)this._invokeTargetListenerForEvent(i,s,f,p,c);this._processCurrentDispatchedTargetListenersToRemove(i,g,!1,a),y["delete"](a)}else this._invokeTargetListenerForEvent(i,a,f,p,c)}for(f.eventPhase=Event.BUBBLING_PHASE,n=0;_&&!f.propagationStopped&&(i=l[n]);n++)if(f.currentTarget=i,a=this._registeredEventListenersForEventType_onTarget_registeredEventListeners_(g,i,w))if(Array.isArray(a)){for(r=0,y.set(a,null);(s=a[r++])&&!f.immediatePropagationStopped;)this._invokeTargetListenerForEvent(i,s,f,p,c);this._processCurrentDispatchedTargetListenersToRemove(i,g,!1,a),y["delete"](a)}else this._invokeTargetListenerForEvent(i,a,f,p,c);f.eventPhase=Event.NONE,f.currentTarget=null,this._isStoringPointerEvents&&this._pointerStorage.removeEvent(e),this.monitorDOMModificationInEventHandling&&(document.body.removeEventListener("DOMSubtreeModified",this.domModificationEventHandler,!0),document.body.removeEventListener("DOMAttrModified",this.domModificationEventHandler,!0),document.body.removeEventListener("DOMCharacterDataModified",this.domModificationEventHandler,!0))}}},_invokeTargetListenerForEvent:{value:function(e,t,n,r,i){var o="function";typeof t===o?t.call(e,n):r&&typeof t[r]===o?t[r](n):typeof t[i]===o?t[i](n):typeof t.handleEvent===o&&t.handleEvent(n)}},_prepareComponentsForActivation:{value:function(e,t){var n,r,i=e,o=i&&i.defaultView?i.defaultView:window,a=o.document?o.document:document,s=!1,l=null;do switch(i&&(r=this.eventHandlerForElement(i),r&&(s||(s=!0,l=this._findActiveTarget(r)),r.preparedForActivationEvents||r._prepareForActivationEvents())),n=i,i){case o:i=null;break;case a:i=o;break;case a.documentElement:i=a;break;default:i=i.parentNode}while(i&&n!==i);t&&(this.activeTarget=l)}},_findActiveTargetMap:{value:void 0},_findActiveTarget:{value:function(e){var t=null,n=this._findActiveTargetMap;for(n.clear();!t&&e&&!n.has(e);)n.set(e,!0),e.acceptsActiveTarget?t=e:e=e.nextTarget;return t}},_eventPathForTargetMap:{value:void 0},_eventPathForTarget:{enumerable:!1,value:function(e){if(!e)return[];var t=e,n=this.application,r=[],i=this._eventPathForTargetMap;i.clear(),i.set(e,!0);do i.has(t)||(r.push(t),i.set(t,!0)),t=t.nextTarget,t&&!i.has(t)||(t=n),t&&i.has(t)&&(t=null);while(t);return r}},_eventPathForDomTarget:{enumerable:!1,value:function(e){if(!e)return[];var t,n=e,r=n&&n.defaultView?n.defaultView:window,i=r.document?r.document:document,o=this.application,a=[];do switch(n!==e&&a.push(n),t=n,n){case o:n=n.parentApplication,n&&(o=n);break;case r:n=o;break;case i:n=r;break;case i.documentElement:n=i;break;default:n=n.parentNode,n||(n=o)}while(n&&t!==n);return a}},_elementEventHandlerByElement:{enumerable:!1,value:null},registerEventHandlerForElement:{enumerable:!1,value:function(e,t){var n=this.eventHandlerForElement(t);n&&this.unregisterEventHandlerForElement(t),this._elementEventHandlerByElement.set(t,e)}},unregisterEventHandlerForElement:{enumerable:!1,value:function(e){this._elementEventHandlerByElement["delete"](e)}},eventHandlerForElement:{enumerable:!1,value:function(e){return this._elementEventHandlerByElement.get(e)}},_activeTarget:{value:null},activeTarget:{get:function(){return this._activeTarget||this.application},set:function(e){e||(e=this.application),e===this._activeTarget||this.activeTarget&&!this.activeTarget.surrendersActiveTarget(e)||e&&(e.willBecomeActiveTarget(this.activeTarget),this._activeTarget=e,e.didBecomeActiveTarget())}}});Object.defineProperty(t,"defaultEventManager",{get:function(){return"undefined"==typeof r&&(r=new d,"undefined"!=typeof window&&r.initWithWindow(window)),r}})}}),montageDefine("64d2e12","core/serialization/deserializer/montage-reviver",{dependencies:["../../core","./values-deserializer","./self-deserializer","./unit-deserializer","../../module-reference","../alias","../bindings","../../promise","../../deprecate","../../converter/camel-case-converter","../../converter/kebab-case-converter","../../shim/string"],factory:function(e,t,n){var r=e("../../core").Montage,i=e("./values-deserializer").ValuesDeserializer,o=e("./self-deserializer").SelfDeserializer,a=e("./unit-deserializer").UnitDeserializer,s=e("../../module-reference").ModuleReference,l=e("../alias").Alias,u=e("../bindings"),c=e("../../promise").Promise,h=e("../../deprecate"),p=e("../../converter/camel-case-converter").singleton,d=e("../../converter/kebab-case-converter").singleton,f="=",v="<-",g="<->";e("../../shim/string");var m=new WeakMap,_=new Map,y=["dispatchEvent","addEventListener","firstElementChild","firstChild","getAttribute","getAttributeNames","getAttributeNode","getElementsByClassName","getElementsByTagName"],b=r.specialize({_require:{value:null},_objectRequires:{value:null},init:{value:function(e,t){if("function"!=typeof e)throw new Error("Function 'require' missing.");if("string"!=typeof e.location)throw new Error("Function 'require' location is missing");if("object"!=typeof t&&"undefined"!=typeof t)throw new Error("Parameter 'objectRequires' should be an object.");return this._require=e,this._objectRequires=t,this}},getModuleDescriptor:{value:function(e,t){for(var r=e.getModuleDescriptor(e.resolve(t));void 0!==r.redirect;)r=e.getModuleDescriptor(n.redirect);return void 0!==r.mappingRedirect?this.getExports(r.mappingRequire,r.mappingRedirect):r}},getModule:{value:function(e,t){var n,r,i=this._objectRequires;n=i&&t in i?i[t]:this._require;try{r=n(e)}catch(o){r||!e.endsWith(".mjson")&&!e.endsWith(".meta")||(r=this.getModuleDescriptor(n,e).text),r||(r=n.async(e))}return r}}}),w=t.MontageReviver=r.specialize({moduleLoader:{value:null},init:{value:function(e,t,n,r,i){return this.moduleLoader=(new b).init(e,t),this._require=e,this._deserializer=n,this._isSync=r,this._locationId=i,this}},_isSync:{value:!1},_locationId:{value:null},getTypeOf:{value:function(e){var t=typeof e;if(null===e)return"null";if(Array.isArray(e))return"array";if("object"===t&&1===Object.keys(e).length){if("@"in e)return"reference";if("/"in e)return"regexp";if("#"in e)return"Element";if("%"in e)return"Module";if(v in e||g in e||f in e)return"binding"}return t}},_checkLabel:{value:function(e,t){return t&&":"!==e[0]?new Error('Aliases can only be defined in template values (start with a colon (:)), "'+e+'".'):t||":"!==e[0]?void 0:new Error('Only aliases are allowed as template values (start with a colon (:), "'+e+'".')}},setProxyForDatasetOnElement:{value:function(e,t){var n=e.dataset;if(null!==Object.getPrototypeOf(n)){var r,i,o=Object.keys(n),a=Object.create(null);if(Proxy.prototype){i=t.values?Object.keys(t.values):Object.keys(t.properties).concat(Object.keys(t.bindings)),o=o.concat(i.filter(function(e){return e.startsWith("dataset.")}));for(var s=0,l=o.length;s<l;s++)r=o[s],n[r]?a[r]=n[r]:a[r.replace(/^dataset\./,"")]=void 0}Object.defineProperty(e,"dataset",{value:new Proxy(a,{set:function(t,r,i){return t[r]=i,n[r]=i,e.nativeSetAttribute(_.get(r)||_.set(r,"data-"+d.convert(r)).get(r),i),!0},get:function(e,t){return e[t]}})})}}},setProxyOnElement:{value:function(e,t){if(!m.has(e)){var n=Object.create(null);if(Proxy.prototype){var r,i;for(i in e)e.hasOwnProperty(i)&&(n[i]=void 0);r=t.values?Object.keys(t.values):Object.keys(t.properties).concat(Object.keys(t.bindings));for(var o=0,a=r.length;o<a;o++)i=r[o],i in e||i.indexOf(".")!==-1||(n[i]=void 0)}m.set(e,new Proxy(n,{set:function(t,n,r){return n in Object.getPrototypeOf(e)||void 0===Object.getOwnPropertyDescriptor(e,n)&&Object.defineProperty(e,n,{set:function(r){t[n]=r,null===r||void 0===r?e.removeAttribute(n):e.nativeSetAttribute(n,r)},get:function(){return t[n]}}),t[n]!==r&&(e[n]=r),!0},get:function(t,n){var r=t[n]||e[n];return"function"==typeof r&&y.indexOf(n)!==-1?r.bind(t[n]?t:e):r}}))}return m.get(e)}},wrapSetAttributeForElement:{value:function(e){if(e.setAttribute===e.nativeSetAttribute){var t=m.get(e);e.setAttribute=function(n,r){var i;n.startsWith("data-")?(i=p.convert(n.replace("data-","")),t.dataset[i]=r):(i=p.convert(n),t[i]=r),e.nativeSetAttribute(n,r)}}}},reviveRootObject:{value:function(e,t,n){var r,i,o="alias"in e;if(r=this._checkLabel(n,o))throw r;if(e["debugger"]&&console.debug("set a breakpoint here"),"value"in e){if(t.hasUserObject(n))return i=t.getUserObject(n),t.setObjectLabel(i,n),i;var a=this.getTypeOf(e.value),s=this.reviveValue(e.value,t,n),l=this.reviveObjectLiteral(e,t,void 0,w._unitNames);if(t.setObjectLabel(s,n),"Element"===a){if(!c.is(s)){var u=this.setProxyOnElement(s,e);this.setProxyForDatasetOnElement(s,e),this.wrapSetAttributeForElement(s),t.setBindingsToDeserialize(u,l),this.deserializeMontageObjectValues(u,l.values||l.properties,t),t.setUnitsToDeserialize(u,l,w._unitNames)}}else"object"===a&&(t.setBindingsToDeserialize(s,l),this.deserializeMontageObjectValues(s,l.values||l.properties,t),t.setUnitsToDeserialize(s,l,w._unitNames));return s}return 0===Object.keys(e).length?t.hasUserObject(n)?(i=t.getUserObject(n),t.setObjectLabel(i,n),i):this.reviveExternalObject(e,t,n):"alias"in e?this.reviveAlias(e,t,n):this.reviveMontageObject(e,t,n)}},reviveElement:{value:function(e,t,n){var r=e["#"],i=t.getElementById(r);if(i)return n&&t.setObjectLabel(i,n),i;throw new Error("Element with id '"+r+"' was not found.")}},reviveModule:{value:function(e,t,n){var r=e["%"],i=t.getRequire();r=i.resolve(r);var o=i.getModuleDescriptor(r);return(new s).initWithIdAndRequire(o.id,o.require)}},reviveAlias:{value:function(e,t,n){var r=new l;return r.value=e.alias,t.setObjectLabel(r,n),r}},reviveMontageObject:{value:function(e,t,n){var r,i,o,a=this,s=e.prototype||e.object,l=!(!s||!s.endsWith(".mjson")&&!s.endsWith(".meta"));if(global[s]&&"function"==typeof global[s]?(r=global,o=s):s&&(i=w.parseObjectLocationId(s),r=this.moduleLoader.getModule(i.moduleId,n),o=i.objectName),this._isSync||!l||c.is(r)||r.montageObject||(r=t._require.async(i.moduleId)),c.is(r)){if(this._isSync)throw new Error("Tried to revive montage object with label "+n+" synchronously but the module was not loaded: "+JSON.stringify(e));return r.then(function(r){return a.instantiateObject(r,i,e,o,t,n)},function(t){throw t.stack&&console.error(t.stack),new Error('Error deserializing "'+n+'" when loading module "'+i.moduleId+"' from '"+e.prototype+"' cause: "+t.message)})}return this.instantiateObject(r,i,e,o,t,n)}},instantiateObject:{value:function(e,t,n,r,i,o){var a;return a=this.getMontageObject(n,e,r,i,o),i.setObjectLabel(a,o),this.instantiateMontageObject(n,a,r,i,o)}},_getMJSONObject:{value:function(e,t){var n=t._require.getModuleDescriptor(t._require.resolve(e)),r=this._deserializer.constructor.moduleContexts.get(n);return!r&&n.mappingRequire&&(n=n.mappingRequire.getModuleDescriptor(n.mappingRedirect),r=this._deserializer.constructor.moduleContexts.get(n)),r?r.getObject("root"):null}},getMontageObject:{value:function(e,t,n,r,i){var o,a;if(r.hasUserObject(i))return r.getUserObject(i);if("prototype"in e){if(a=e.prototype,a&&(a.endsWith(".mjson")||a.endsWith(".meta")))o=Object.create(this._getMJSONObject(a,r));else{if(!(n in t))throw new Error('Error deserializing "'+i+'": object named "'+n+'" was not found in "'+e.prototype+'". Available objects are: '+Object.keys(t)+".");o=t[n],o="function"==typeof o?new o:Object.create(o)}return o.isDeserializing=!0,o}if("object"in e){if(a=e.object,a.endsWith(".json"))return t;if(a&&(a.endsWith(".mjson")||a.endsWith(".meta")))return o=this._getMJSONObject(a,r),o.isDeserializing=!0,o;if(!(n in t))throw new Error('Error deserializing "'+i+'": object named "'+o+"' was not found given '"+a+"'");return t[n]}throw new Error("Error deserializing "+JSON.stringify(e)+', might need "prototype" or "object" on label '+JSON.stringify(i))}},instantiateMontageObject:{value:function(e,t,n,r,i){var o,a=this;return null!==t&&void 0!==t&&(t.isDeserializing=!0),e.bindings&&h.deprecationWarningOnce("'bindings' block is deprecated, use 'values' instead"),e.properties&&h.deprecationWarningOnce("'properties' block is deprecated, use 'values' instead"),r.setBindingsToDeserialize(t,e),o=this.reviveObjectLiteral(e,r,void 0,void 0,t),c.is(o)?o.then(function(e){return a.deserializeMontageObject(e,t,r,i)}):this.deserializeMontageObject(o,t,r,i)}},deserializeMontageObject:{value:function(e,t,n,r){return n.setUnitsToDeserialize(t,e,w._unitNames),t}},deserializeMontageObjectProperties:{value:h.deprecateMethod(void 0,function(e,t,n){return this.deserializeMontageObjectValues(e,t,n)},"deserializeMontageObjectProperties","deserializeMontageObjectValues")},deserializeMontageObjectValues:{value:function(e,t,n){var r;if("function"==typeof e.deserializeProperties||"function"==typeof e.deserializeValues){var o=(new i).initWithReviverAndObjects(this,n);r=e.deserializeValues?e.deserializeValues(o):e.deserializeProperties(o);
}else for(var a in t)e[a]=t[a];return r}},didReviveObjects:{value:function(e){this._deserializeUnits(e),this._invokeDeserializedFromSerialization(e)}},_invokeDeserializedFromSerialization:{value:function(e){var t,n=e._objects;for(var r in n)t=n[r],null!==t&&void 0!==t&&delete t.isDeserializing,e.hasUserObject(r)||t&&"function"==typeof t.deserializedFromSerialization&&t.deserializedFromSerialization(r)}},_deserializePropertyValues:{value:function(e){var t,n,r,i=e._objects,o=e._serialization;for(r in i)(t=i[r])&&(n=o[r],this.deserializeMontageObject(n,t,e,r))}},_deserializeBindings:{value:function(e){var t,n=e.getBindingsToDeserialize(),r=new a;if(n)for(var i=0,o=n.length;i<o;i++)t=n[i],u.deserializeObjectBindings(r.initWithContext(e),t.object,t.bindings)}},_deserializeObjectUnit:{value:function(e,t,n,r){var i,o,a=n.unitNames;for(i=0;o=a[i];i++)this._deserializeObjectUnitNamed(e,t,o,n,r,i)}},_deserializeObjectUnitNamed:{value:function(e,t,n,r,i,o){var s,l,u,c,h,p=r||e.unitsToDeserialize.get(t);p&&(s=p.objectDesc,l=p.unitNames,u=o||l.indexOf(n),c=i||new a,(o||u!==-1)&&(h=s.prototype||s.object,"isMJSON"in p||(p.isMJSON=h&&(h.endsWith(".mjson")||h.endsWith(".meta"))),("values"===n&&!p.isMJSON||n in p.objectDesc)&&(c.initWithContext(e),w._unitRevivers.get(n)(c,t,s[n],p))))}},_deserializeMJSONDependencyUnits:{value:function(e){var t,n,r,i,o,a,s=this._deserializer,l=e._require;if(s&&(t=s.constructor,n=e._mjsonDependencies,r=n?n.values():void 0,n))for(;i=r.next().value;)n["delete"](i),a=l.getModuleDescriptor(l.resolve(i)),o=t.moduleContexts.get(a),!o&&a.mappingRequire&&(a=a.mappingRequire.getModuleDescriptor(a.mappingRedirect),o=t.moduleContexts.get(a)),o&&o._reviver._deserializeUnits(o)}},_deserializeUnits:{value:function(e){this._deserializeMJSONDependencyUnits(e);var t,n,r,i=e.unitsToDeserialize;if(i.size>0)for(t=i.keys(),n=new a;r=t.next().value;)this._deserializeObjectUnit(e,r,i.get(r),n),i["delete"](r)}},_createAssignValueFunction:{value:function(e,t){return function(n){e[t]=n}}},getCustomObjectTypeOf:{writable:!0,value:function(){}},reviveValue:{value:function(e,t,n){var r,i=this.getTypeOf(e);if(r="string"===i||"number"===i||"boolean"===i||"null"===i||"undefined"===i?this.reviveNativeValue(e,t,n):"regexp"===i?this.reviveRegExp(e,t,n):"reference"===i?this.reviveObjectReference(e,t,n):"array"===i?this.reviveArray(e,t,n):"object"===i?this.reviveObjectLiteral(e,t,n):"Element"===i?this.reviveElement(e,t,n):"binding"===i?e:this._callReviveMethod("revive"+i,e,t,n),this._isSync&&c.is(r))throw new Error("Unable to revive value with label "+n+" synchronously: "+e);return r}},reviveNativeValue:{value:function(e,t,n){return n&&t.setObjectLabel(e,n),e}},reviveObjectLiteral:{value:function(e,t,n,r){var i,o,a,s,l=t.propertyToReviveForObjectLiteralValue(e),u=l.values();for(n&&t.setObjectLabel(e,n);a=u.next().value;)if(!r||r.indexOf(a)>-1){if((s=e[a])===e)return e;i=this.reviveValue(s,t),c.is(i)?(o||(o=[])).push(i.then(this._createAssignValueFunction(e,a))):s!==i&&(e[a]=i),l["delete"](a)}return!o||o&&0===o.length?e:c.all(o).then(function(){return e})}},reviveRegExp:{value:function(e,t,n){var r=e["/"],i=new RegExp(r.source,r.flags);return n&&t.setObjectLabel(i,n),i}},reviveObjectReference:{value:function(e,t,n){var r=e["@"],i=t.getObject(r);return i}},reviveArray:{value:function(e,t,n){var r,i=[];n&&t.setObjectLabel(e,n);for(var o=0,a=e.length;o<a;o++)r=this.reviveValue(e[o],t),c.is(r)?i.push(r.then(this._createAssignValueFunction(e,o))):e[o]=r;return 0===i.length?e:c.all(i).then(function(){return e})}},reviveExternalObject:{value:function(e,t,n){throw new Error("External object '"+n+"' not found in user objects.")}},_callReviveMethod:{value:function(e,t,n,r){return this[e](t,n,r)}}},{_unitRevivers:{value:new Map},_unitNames:{value:[]},_findObjectNameRegExp:{value:/([^\/]+?)(\.reel)?$/},_toCamelCaseRegExp:{value:/(?:^|-)([^-])/g},_replaceToCamelCase:{value:function(e,t){return t.toUpperCase()}},_locationDescCache:{value:new Map},customObjectRevivers:{value:new Map},parseObjectLocationId:{value:function(e){return this._locationDescCache.get(e)||this.createObjectLocationDesc(e)}},createObjectLocationDesc:{value:function(e){var t,n,r=e.indexOf("[");r>0?(t=e.substr(0,r),n=e.slice(r+1,-1)):(t=e,this._findObjectNameRegExp.test(e),n=RegExp.$1.replace(this._toCamelCaseRegExp,this._replaceToCamelCase));var i={moduleId:t,objectName:n};return this._locationDescCache.set(e,i),i}},defineUnitReviver:{value:function(e,t){this._unitRevivers.set(e,t),this._unitNames.push(e)}},getTypeOf:{value:function(e){return this.prototype.getTypeOf.call(this,e)}},addCustomObjectReviver:{value:function(e){var t=this.customObjectRevivers;for(var n in e)if("getTypeOf"!==n&&"function"==typeof e[n]&&"revive"===n.substr(0,5)){if("undefined"!=typeof t.get(n))return new Error("Reviver '"+n+"' is already registered.");t.set(n,e[n].bind(e))}this.prototype.getCustomObjectTypeOf=this.makeGetCustomObjectTypeOf(e.getTypeOf)}},resetCustomObjectRevivers:{value:function(){this.customObjectRevivers.clear(),this.prototype.getCustomObjectTypeOf=function(){}}},makeGetCustomObjectTypeOf:{value:function(e){var t=this.prototype.getCustomObjectTypeOf;return function(n){return e(n)||t(n)}}}});w.findProxyForElement=function(e){return m.get(e)},w.defineUnitReviver("values",function(e,t,n,r){var i,a=e.context,s=r.objectDesc;if("function"==typeof t.deserializeSelf){var l=new o;if(l.isSync=a.isSync,l.initWithObjectAndObjectDescriptorAndContextAndUnitNames(t,s,a,w._unitNames),i=(i||t).deserializeSelf(l),"undefined"!=typeof i&&i!==t){var u,c=a._objects;for(u in c)if(c[u]===t){a.setObjectLabel(i,u);break}}}else n&&a._reviver.deserializeMontageObjectValues(t,s.values||s.properties,a)}),"undefined"!=typeof t&&(t.MontageReviver=w)}}),montageDefine("64d2e12","core/logger",{dependencies:["./extras/console","./core"],factory:function(e,t,n){function r(e){var t,n=r.caller.caller;return t=n.name,""===t&&(t="anonymous"),t}function i(e){if(e.getHours){var t=e.getHours(),n=e.getMinutes(),r=e.getSeconds();return(1===t.length?"0"+t:t)+":"+(1===n.length?"0"+n:n)+":"+(1===r.length?"0"+r:r)+"."+e.getMilliseconds()}}function o(e){var t=function(e){return this._color=e,this},n=function(t){return function(){return e.color(u[t])}};for(var r in u)u.hasOwnProperty(r)&&(t[r]=n(r));e.color=t}var a=e("./extras/console").console,s=e("./core").Montage,l=t.loggers={},u={base03:"#002b36",base02:"#073642",base01:"#586e75",base00:"#657b83",base0:"#839496",base1:"#93a1a1",base2:"#eee8d5",base3:"#fdf6e3",yellow:"#b58900",orange:"#cb4b16",red:"#dc322f",magenta:"#d33682",violet:"#6c71c4",blue:"#268bd2",cyan:"#2aa198",green:"#859900"},c=t.Logger=s.specialize({constructor:{value:function(){this.debug=Function.noop,this.error=Function.noop,o(this)}},init:{value:function(e,t,n){var r;return this.name=e,this._onStateChange=t,this._storeState=!n,this._storeState&&"undefined"!=typeof localStorage&&(r=localStorage.getItem("_montage_logger_"+e),r&&(this.isDebug="true"===r)),t&&this._onStateChange("true"===r),this.isError=!0,this}},name:{value:null},_buffer:{value:null},buffer:{get:function(){return this._buffer||(this._buffer=[])}},buffered:{value:!1},flush:{value:function(){var e,t,n=this.buffer;for(t=0;e=n[t];t++)this._formattedLog(e);this.buffer.length=0}},isDebug:{get:function(){return this.debug!==Function.noop},set:function(e){e?this.debug=this._consoleLogMontage:this.debug=Function.noop}},isError:{get:function(){return this.error!==Function.noop},set:function(e){e?this.error=this._consoleLogMontage:this.error=Function.noop}},_consoleLogMontage:{value:function(){var e=arguments[0],t=e._montage_metadata;new Date,t?(Array.prototype.shift.call(arguments),Array.prototype.unshift.call(arguments,t.objectName+"."+r(e)+"()"),this.buffered?this.buffer.push(arguments):this._formattedLog(arguments)):this.buffered?this.buffer.push(arguments):this._formattedLog(arguments)}},_formattedLog:{value:function(e){var n=e[0];t.colors.isDebug&&"string"==typeof n&&Array.prototype.splice.call(e,0,1,"%c"+n,this._logCss),a.log.apply(a,e)}},__logCss:{value:null},_logCss:{get:function(){return null===this.__logCss&&(this.__logCss="",this._color?this.__logCss+="color:"+this._color+";":this.__logCss+="color:black;"),this.__logCss}},debug:{value:null},error:{value:null},toTimeString:{value:i},_storeState:{value:null},_onStateChange:{value:null}});t.logger=function(e,t,n){var r;return(r=l[e])||(r=(new c).init(e,t,n),s.defineProperty(l,e,{value:r})),r},t.colors=t.logger("colors");var h=s.specialize({init:{value:function(){return document.nativeAddEventListener?(document.nativeAddEventListener("keyup",this,!1),document.nativeAddEventListener("keydown",this,!1)):(document.addEventListener("keyup",this,!1),document.addEventListener("keydown",this,!1)),this}},inspectorElement:{value:null},m_dontRemove:{value:null},titleHeader:{value:null},shown:{value:!1},isCtrl:{value:!1},isAlt:{value:!1},keyup:{value:function(e){17===e.which&&(this.isCtrl=!1),18===e.which&&(this.isAlt=!1)}},keydown:{value:function(e){if(17===e.which&&(this.isCtrl=!0),18===e.which&&(this.isAlt=!0),76===e.which&&this.isCtrl===!0&&this.isAlt===!0)return this.shown?this.hideInspector():this.showInspector(),!1}},change:{value:function(e){var t=e.target.checked,n=e.target.value,r=l[n];r.isDebug=t,r._onStateChange&&r._onStateChange(t),r._storeState&&"undefined"!=typeof localStorage&&localStorage.setItem("_montage_logger_"+n,t)}},mouseup:{value:function(e){this.hideInspector()}},showInspector:{value:function(){if(!this.inspectorElement){var e,t,n,r,i,o,a,s,u,c,h,p=0;for(this.m_dontRemove=document.getElementsByTagName("body")[0],this.inspectorElement=document.createElement("div"),this.inspectorElement.id="_montage_logger_inspector",t=document.createElement("div"),this.inspectorElement.appendChild(t),r=document.createElement("div"),t.appendChild(r),n=document.createElement("h1"),n.className="_montage_logger_inspector-title",n.textContent="Logger Inspector",this.titleHeader=n,r.appendChild(n),u=Object.keys(l),p=0;e=l[u[p]];p++)i=document.createElement("label"),o=document.createElement("input"),h=document.createElement("span"),i.className="_montage_logger_inspector-content",h.textContent=e.name,i.appendChild(o),i.appendChild(h),o.value=e.name,o.type="checkbox",o.checked=!!e.isDebug,s="_montage_logger_"+e.name,e._storeState&&"undefined"!=typeof localStorage&&(a=localStorage.getItem(s),a||localStorage.setItem(s,e.isDebug)),r.appendChild(i);c=document.createElement("style");var d="#_montage_logger_inspector {";d+="    border: 1px solid rgba(15,15,15,0.4);",d+="    position: fixed;",d+="    right: 25px;",d+="    top: 25px;",d+="    -webkit-border-radius: 5px;",d+="    color: #dddddd;",d+='    font: 10px "Lucida Grande","Lucida Sans", sans;',d+="    background:-webkit-gradient(linear, left top, left bottom, from(rgba(15,15,15,0.75)), to(rgba(15,15,15,0.95)) );",d+="    -webkit-box-shadow: 0 0 15px rgba(0,0,0,.3);",d+="    width: 250px;",d+="}",d+="#_montage_logger_inspector div {",d+="    -webkit-border-radius: 5px;",d+="    background: -webkit-gradient(radial, 100 -60, 0, 125 -50, 125, from(rgba(255,255,255,0.00)), to(rgba(0,0,0,.2)), color-stop(1, rgba(0,0,0,.2)));",d+="}",d+="#_montage_logger_inspector div div {",d+="    background: -webkit-gradient(linear, left top, left bottom, from(rgba(255,255,255,0.2)), to(rgba(0,0,0,.1)), color-stop(0.33, rgba(255,255,255,.01)), color-stop(0.33, rgba(50,50,50,1)) );",d+="    padding: 7px 10px;",d+="    -webkit-border-radius: 3px;",d+="    overflow-x: hidden;",d+="}",d+="._montage_logger_inspector-title {",d+="    color: rgba(255,255,255,0.9);",d+="    font-size: 13px;",d+="    margin: 0 0 11px 0;",d+="    padding: 0 0 0 5px;",d+="}",d+="._montage_logger_inspector-content {",d+="    padding: 0 0 0 20px;",d+="    margin: 0;",d+="    display: block;",d+="}",c.textContent=d,document.head.appendChild(c)}this.shown=!0,this.m_dontRemove.appendChild(this.inspectorElement),this.titleHeader.nativeAddEventListener("mouseup",this,!1),this.inspectorElement.nativeAddEventListener("change",this,!1)}},hideInspector:{value:function(){document.getElementById("_montage_logger_inspector")&&(this.shown=!1,this.m_dontRemove.removeChild(this.inspectorElement),this.titleHeader.nativeRemoveEventListener("mouseup",this,!1),this.inspectorElement.nativeRemoveEventListener("change",this,!1))}},handleEvent:{enumerable:!1,value:function(e){this[e.type]&&this[e.type](e)}}});"undefined"!=typeof window&&(window.loggers=l,"undefined"!=typeof localStorage&&(new h).init())}}),montageDefine("64d2e12","core/serialization/deserializer/values-deserializer",{dependencies:["../../core","../../deprecate"],factory:function(e,t,n){var r=e("../../core").Montage,i=e("../../deprecate"),o=r.specialize({_object:{value:null},_objectDescriptor:{value:null},_context:{value:null},initWithObjectAndObjectDescriptorAndContext:{value:function(e,t,n){return this._object=e,this._objectDescriptor=t,this._context=n,this}},get:{value:function(e){return this._objectDescriptor.values?this._objectDescriptor.values[e]:this._objectDescriptor.properties?this._objectDescriptor.properties[e]:void 0}},deserializeProperties:{value:i.deprecateMethod(void 0,function(e){return this.deserializeValues(e)},"deserializeProperties","deserializeValues")},deserializeValues:{value:function(e){var t,n=this._object,i=this._objectDescriptor.values||this._objectDescriptor.properties;if(i){e||(e=r.getSerializablePropertyNames(n));for(var o=0,a=e.length;o<a;o++)t=e[o],n[t]=i[t]}}},getObjectByLabel:{value:function(e){this._context.getObject(e)}}});t.ValuesDeserializer=o}}),montageDefine("64d2e12","core/serialization/deserializer/self-deserializer",{dependencies:["../../core","../../deprecate"],factory:function(e,t,n){var r=e("../../core").Montage,i=e("../../deprecate"),o=r.specialize({_isSync:{value:!1},isSync:{get:function(){return this._isSync},set:function(e){this._isSync=e}},_object:{value:null},_objectDescriptor:{value:null},_context:{value:null},_unitNames:{value:null},_objectUnitNames:{value:null},create:{value:function(){return new this}},initWithObjectAndObjectDescriptorAndContextAndUnitNames:{value:function(e,t,n,r){return this._object=e,this._objectDescriptor=t,this._objectDescriptorValues=t.values||t.properties||t,this._context=n,this._unitNames=r,this}},getProperty:{value:function(e){return this._objectDescriptor.values?this._objectDescriptor.values[e]:this._objectDescriptor.properties?this._objectDescriptor.properties[e]:void 0}},getType:{value:function(){return"prototype"in this._objectDescriptor?"prototype":"object"in this._objectDescriptor?"object":void 0}},getTypeValue:{value:function(){return this._objectDescriptor.prototype||this._objectDescriptor.object}},getObjectByLabel:{value:function(e){return this._context.getObject(e)}},deserializeProperties:{value:i.deprecateMethod(void 0,function(e){return this.deserializeValues(e)},"deserializeProperties","deserializeValues")},deserializeValues:{value:function(e){var t,n=this._object,i=this._objectDescriptor.values||this._objectDescriptor.properties;if(i){e||(e=r.getSerializablePropertyNames(n));for(var o=0,a=e.length;o<a;o++)t=e[o],n[t]=i[t]}}},deserializeUnit:{value:function(e){var t=this._objectUnitNames;t?t.indexOf(e)===-1&&t.push(e):(t=this._objectUnitNames=[e],this._context.setUnitsToDeserialize(this._object,this._objectDescriptor,t))}},deserializeUnits:{value:function(){var e=this._objectUnitNames;if(e)for(var t,n=0;t=e[n];n++)e.indexOf(t)===-1&&e.push(t);else e=this._objectUnitNames=this._unitNames,this._context.setUnitsToDeserialize(this._object,this._objectDescriptor,e)}}});t.SelfDeserializer=o}}),montageDefine("64d2e12","core/serialization/deserializer/unit-deserializer",{dependencies:["../../core"],factory:function(e,t,n){var r=e("../../core").Montage,i=r.specialize({_context:{value:null},create:{value:function(){return new this}},initWithContext:{value:function(e){return this._context=e,this}},context:{get:function(){return this._context}},_templatePropertyRegExp:{value:/^([^:]+)(:.*)$/},isValidTemplatePropertyReference:{value:function(e){var t=this._templatePropertyRegExp.exec(e);if(t){var n=t[1];return!!this._context.hasObject(n)}return!1}},getObjectByLabel:{value:function(e){if(this._context.hasObject(e))return this._context.getObject(e);if(this.isValidTemplatePropertyReference(e))return null;throw new Error("Object with label '"+e+"' was not found.")}}});t.UnitDeserializer=i}}),montageDefine("64d2e12","core/module-reference",{dependencies:["./core"],factory:function(e,t,n){var r=e("./core").Montage;t.ModuleReference=r.specialize({initWithIdAndRequire:{value:function(e,t){if(!e||!t)throw new Error("Module ID and require required");return this.id=e,this.require=t,this}},id:{value:null},require:{value:null},_exports:{value:null},exports:{get:function(){return this._exports?this._exports:this._exports=this.require.async(this.id)}},resolve:{value:function(e){return e.identify(this.id,this.require)}},isModuleReference:{writable:!1,configurable:!1,value:!0}})}}),montageDefine("64d2e12","core/serialization/alias",{dependencies:["../core"],factory:function(e,t,n){var r=e("../core").Montage;t.Alias=r.specialize({_value:{value:null},_aliasRegExp:{value:/@([_a-zA-Z$][0-9_a-zA-Z$]*):([_a-zA-Z$][0-9_a-zA-Z$]*)$/},value:{get:function(){return this._value},set:function(e){var t=this._aliasRegExp.exec(e);if(!t)throw new Error("Invalid alias syntax: "+e);this._value=e,this._componentLabel=t[1],this._propertyName=t[2]}},_componentLabel:{value:null},componentLabel:{get:function(){return this._componentLabel}},_propertyName:{value:null},propertyName:{get:function(){return this._propertyName}},init:{value:function(e){return this.value=e,this}}})}}),montageDefine("64d2e12","core/serialization/bindings",{dependencies:["frb","frb/stringify","frb/assign","frb/evaluate","frb/expand","frb/scope","../serialization/serializer/montage-serializer"],factory:function(e,t,n){var r=e("frb"),i=e("frb/stringify"),o=e("frb/assign"),a=e("frb/evaluate"),s=e("frb/expand"),l=e("frb/scope"),u=e("../serialization/serializer/montage-serializer").MontageSerializer,c="=",h="<-",p="<->",d=t.serializeObjectBindings=function(e,t){for(var n,o,a=r.getBindings(t),u={},c=a.keys();o=c.next().value;){var d=a.get(o),f={};if((!("serializable"in d)||d.serializable)&&d.sourceSyntax){var v,g=d.sourcePath,m=d.sourceSyntax;if(d.source&&d.source!==t){var _=e.getObjectLabel(d.source);v=new l({type:"component",label:_}),v.components=e,m=s(m,v)}v=new l,v.components=e,g=i(m,v),d.twoWay?f[p]=g:f[h]=g,d.converter?f.converter=d.converter:(f.convert=d.convert,f.revert=d.revert),d.trace&&(f.trace=!0),u[o]=f,n=!0}}return n?u:void 0};u.defineSerializationUnit("bindings",d),t.deserializeObjectBindings=function(e,t,n){var i,s,l={components:e};for(i in n){if(s=n[i],"object"!=typeof s){if(i.indexOf(".")===-1)throw new Error("Binding descriptor must be an object, not "+typeof s);s={"=":""+s}}if(c in s){var u=s[c];o(t,i,"string"==typeof u?a(u,t,null,null,e):u,null,null,e)}else r.defineBinding(t,i,s,l)}}}}),montageDefine("64d2e12","core/deprecate",{dependencies:["./core","collections/map"],factory:function(e,t,n){function r(e,t){return t?e+"_"+t:e}var i=e("./core").Montage;Map=e("collections/map");var o=new Map,a=t.deprecationWarning=function(e,t,n){n=n===!0?2:n;var r;if(n&&(r=Error.stackTraceLimit,Error.stackTraceLimit=n),"undefined"!=typeof console&&"function"==typeof console.warn){var i=n?new Error("").stack:"";t?console.warn(e+" is deprecated, use "+t+" instead.",i):console.warn(e,i)}n&&(Error.stackTraceLimit=r)};t.deprecationWarningOnce=function(e,n,i){var a=r(e,n);o.has(a)||(t.deprecationWarning(e,n,i),o.set(a,!0))},t.deprecateMethod=function(e,n,r,i,o){var s=function(){return o?t.deprecationWarningOnce(r,i,3):a(r,i,3),n.apply(e?e:this,arguments)};return s.deprecatedFunction=n,s},t.callDeprecatedFunction=function(e,t,n,r){var o,a,s=Error.stackTraceLimit;return Error.stackTraceLimit=2,"undefined"!=typeof console&&"function"==typeof console.warn&&(o=i.getInfoForObject(e).objectName,r?console.warn(n+" is deprecated, use "+r+" instead.",o):console.warn(n,o)),Error.stackTraceLimit=s,a=Array.prototype.slice.call(arguments,4),t.apply(e?e:this,a)}}}),montageDefine("64d2e12","core/converter/camel-case-converter",{dependencies:["./converter","lodash.camelcase"],factory:function(e,t,n){var r,i=e("./converter").Converter,o=e("lodash.camelcase"),a=t.CamelCaseConverter=i.specialize({constructor:{value:function(){return this.constructor===a?(r||(r=this),r):this}},convert:{value:o}});Object.defineProperty(t,"singleton",{get:function(){return r||(r=new a),r}})}}),montageDefine("64d2e12","core/converter/kebab-case-converter",{dependencies:["./converter","lodash.kebabcase"],factory:function(e,t,n){var r,i=e("./converter").Converter,o=e("lodash.kebabcase"),a=t.KebabCaseConverter=i.specialize({constructor:{value:function(){return this.constructor===a?(r||(r=this),r):this}},convert:{value:o}});Object.defineProperty(t,"singleton",{get:function(){return r||(r=new a),r}})}}),montageDefine("64d2e12","core/shim/string",{dependencies:[],factory:function(e,t,n){String.prototype.startsWith||Object.defineProperty(String.prototype,"startsWith",{value:function(e){return this.length>=e.length&&this.slice(0,e.length)===e},writable:!0,configurable:!0}),String.prototype.endsWith||Object.defineProperty(String.prototype,"endsWith",{value:function(e){var t=this.length,n=e.length;return t>=n&&this.indexOf(e,t-n)!==-1},writable:!0,configurable:!0})}}),montageDefine("64d2e12","core/extras/console",{dependencies:[],factory:function(e,t,n){"undefined"!=typeof window&&(document._montageTiming=document._montageTiming||{},document._montageTiming.loadStartTime=Date.now(),console._groupTime=Object.create(null),console.groupTime=function(e){var t=this._groupTime[e];t||(t={count:0,start:0,sum:0},this._groupTime[e]=t),t.start=performance.now()},console.groupTimeEnd=function(e){var t=performance.now(),n=this._groupTime[e],r=t-n.start;n.count=n.count+1,n.sum=n.sum+r},console.groupTimeAverage=function(e){var t=this._groupTime[e];return t.sum/t.count},console.groupTimeTotal=function(e){var t=this._groupTime[e];return t.sum},console.groupTimeCount=function(e){var t=this._groupTime[e];return t.count}),n.exports.console=global.console}}),montageDefine("64d2e12","core/shim/object",{dependencies:[],factory:function(e,t,n){Object.create||(Object._creator=function r(){this.__proto__=r.prototype},Object.create=function(e,t){return this._creator.prototype=e||Object.prototype,new this._creator},Object.getPrototypeOf=function(e){return e.__proto__}),Object.isSealed||Object.defineProperty(Object,"isSealed",{value:function(){return!1},writable:!0,configurable:!0}),Object.seal||Object.defineProperty(Object,"seal",{value:function(e){return e},writable:!0,configurable:!0}),Object.assign||Object.defineProperty(Object,"assign",{value:function(e,t){var n,r,i,o,a,s;if(void 0===e||null===e)throw new TypeError("Cannot convert undefined or null to object");for(r=1,i=arguments.length;r<i;++r)if(n=arguments[r])for(o=Object.keys(n),a=0,s=o.length;a<s;++a)e[o[a]]=n[o[a]];return e},writable:!0,enumerable:!1,configurable:!0})}}),montageDefine("64d2e12","core/shim/array",{dependencies:[],factory:function(e,t,n){Array.isArray||Object.defineProperty(Array,"isArray",{value:function(e){return"[object Array]"===Object.prototype.toString.call(e)},writable:!0,configurable:!0}),Object.defineProperty(Array.prototype,"compact",{value:function(){for(var e,t=-1,n=-1,r=this.length;++n<r;)this[n]!==e&&(this[++t]=this[n]);this.length=++t},writable:!0,configurable:!0}),Object.defineProperty(Array.prototype,"removeObjects",{value:function(e,t){var n,r,i=-1,o=-1,a=this.length,s=0;if(t=2!==arguments.length||t,"function"==typeof e.has)for(;++o<a;)e.has(this[o])?t&&e["delete"](this[o]):this[++i]=this[o];else if("function"==typeof e.hasOwnProperty)for(;++o<a;)e.hasOwnProperty(this[o])?t&&delete e[this[o]]:this[++i]=this[o];else if("function"==typeof e.indexOf){for(;++o<a;)(r=e.indexOf(this[o]))===-1?this[++i]=this[o]:(e[r]=n,s++);e.length===s?e.length=0:e.compact()}this.length=++i},writable:!0,configurable:!0})}}),montageDefine("64d2e12","core/extras/object",{dependencies:["frb"],factory:function(e,t,n){Object.defineProperty(Object,"getPropertyDescriptor",{value:function(e,t){var n,r=e;do n=Object.getOwnPropertyDescriptor(r,t);while(!n&&(r=r.__proto__||Object.getPrototypeOf(r)));return n},writable:!0,configurable:!0}),Object.defineProperty(Object,"getPrototypeAndDescriptorDefiningProperty",{value:function(e,t){var n,r=e;if(t){do n=Object.getOwnPropertyDescriptor(r,t);while(!n&&(r=r.__proto__||Object.getPrototypeOf(r)));return{prototype:r,propertyDescriptor:n}}},writable:!0,configurable:!0}),Object.defineProperty(Object.prototype,"clear",{value:function(){for(var e=Object.keys(this),t=e.length;t;)t--,delete this[e[t]];return this},writable:!0,configurable:!0}),Object.hasOwnProperty("deleteBinding")===!1&&Object.defineProperty(Object,"deleteBinding",{value:function(t,n){var r=e("frb");r.cancelBinding(t,n)},writable:!0,configurable:!0}),Object.hasOwnProperty("deepFreeze")===!1&&Object.defineProperty(Object,"deepFreeze",{value:function(e){for(var t,n=Object.getOwnPropertyNames(e),r=0,i=n.length;r<i;r++)null!==(t=e[n[r]])&&"object"==typeof t&&Object.deepFreeze(t);return Object.freeze(e)},writable:!0,configurable:!0})}}),montageDefine("64d2e12","core/extras/date",{dependencies:[],factory:function(e,t,n){Object.defineProperty(Date.prototype,"clone",{value:function(){return new Date(this)},writable:!0,configurable:!0})}}),montageDefine("64d2e12","core/extras/element",{dependencies:[],factory:function(e,t,n){"undefined"==typeof Element||Element.isElement||(Object.defineProperty(Element,"isElement",{value:function(e){return!(!e||1!==e.nodeType)},writable:!0,configurable:!0}),Object.defineProperty(Element.prototype,"nativeSetAttribute",{value:Element.prototype.setAttribute,writable:!0,configurable:!0}))}}),montageDefine("64d2e12","core/extras/function",{dependencies:["./object"],factory:function(e,t,n){e("./object"),Object.defineProperty(Function,"identity",{value:function(e){return e},writable:!0,configurable:!0}),Object.defineProperty(Function,"noop",{value:function(){},writable:!0,configurable:!0}),Object.defineProperty(Function,"by",{value:function(e,t){t=t||Object.compare,e=e||Function.identity;var n=function(n,r){return t(e(n),e(r))};return n.compare=t,n.by=e,n},writable:!0,configurable:!0})}}),montageDefine("64d2e12","core/extras/map",{dependencies:[],factory:function(e,t,n){Object.defineProperty(Map.prototype,"deserializeSelf",{value:function(e){var t,n,r,i,o;if(t=e.getProperty("entries"))for(i=0,o=t.length;i<o;i++)this.set(t[i].key,t[i].value);if(!t&&(n=e.getProperty("keys"),r=e.getProperty("values"),n&&r))for(i=0,o=n.length;i<o;i++)this.set(n[i],r[i])},writable:!0,configurable:!0}),Object.defineProperty(Map.prototype,"serializeSelf",{value:function(e){for(var t,n=this.entries(),r=[],i=[];t=n.next().value;)r.push(t[0]),i.push(t[1]);e.setProperty("keys",r),e.setProperty("values",i)},writable:!0,configurable:!0})}}),montageDefine("64d2e12","core/extras/regexp",{dependencies:[],factory:function(e,t,n){if(!RegExp.isRegExp){var r=Object.prototype.toString;Object.defineProperty(RegExp,"isRegExp",{value:function(e){return"[object RegExp]"===r.call(e)},writable:!0,configurable:!0})}}}),montageDefine("64d2e12","core/extras/string",{dependencies:["collections/map"],factory:function(e,t,n){var r=e("collections/map");Object.defineProperty(String.prototype,"equals",{value:function(e){return this.valueOf()===Object.getValueOf(e)},writable:!0,configurable:!0}),Object.defineProperty(String.prototype,"contains",{value:function(e){return this.indexOf(e)!==-1},writable:!0,configurable:!0}),Object.defineProperty(String.prototype,"toCapitalized",{value:function i(){var e;return i.cache.get(String(this))||(i.cache.set(String(this),e=this[0].toUpperCase()+this.slice(1))?e:null)},writable:!0,configurable:!0}),String.prototype.toCapitalized.cache=new r}}),montageDefine("64d2e12","core/extras/set",{dependencies:[],factory:function(e,t,n){Object.defineProperty(Set.prototype,"deserializeSelf",{value:function(e){var t,n,r;if(t=e.getProperty("values"))for(n=0,r=t.length;n<r;n++)this.add(t[n])},writable:!0,configurable:!0}),Object.defineProperty(Set.prototype,"serializeSelf",{value:function(e){for(var t,n=[],r=this.keys();t=r.next().value;)n.push(t);e.setProperty("values",n)},writable:!0,configurable:!0})}}),montageDefine("64d2e12","core/extras/weak-map",{dependencies:[],factory:function(e,t,n){Object.defineProperty(WeakMap.prototype,"deserializeSelf",{value:function(e){var t,n,r,i,o;if(t=e.getProperty("entries"))for(i=0,o=t.length;i<o;i++)this.set(t[i].key,t[i].value);if(!t&&(n=e.getProperty("keys"),r=e.getProperty("values"),n&&r))for(i=0,o=n.length;i<o;i++)this.set(n[i],r[i])},writable:!0,configurable:!0}),Object.defineProperty(WeakMap.prototype,"serializeSelf",{value:function(e){for(var t,n=this.entries(),r=[],i=[];t=n.next().value;)r.push(t[0]),i.push(t[1]);e.setProperty("keys",r),e.setProperty("values",i)},writable:!0,configurable:!0})}}),montageDefine("64d2e12","core/event/mutable-event",{dependencies:["../core"],factory:function(e,t,n){var r=e("../core").Montage,i=function(e,t){return function(){return this.hasOwnProperty(t)?this[t]:this._event[e]}},o=function(e){return function(t){this[e]=t}};if("undefined"!=typeof window){var a={},s=function(e,t){var n="_"+t;r.defineProperty(e,n,{value:void 0}),r.defineProperty(e,t,{get:i(t,n),set:o(n)})};t.MutableEvent=r.specialize({_initPrototypeWithEvent:{value:function(e){var t,n=this.__proto__||Object.getPrototypeOf(this);for(t in e)t in this||Object.getOwnPropertyDescriptor(n,t)||s(this,t);return s(this,"replayed"),this}},_initWithEvent:{value:function(e){return this._event=e,this}},preventDefault:{value:function(){this._event.preventDefault()}},getPreventDefault:{value:function(){return this._event.getPreventDefault?this._event.getPreventDefault():this._event.defaultPrevented}},stopImmediatePropagation:{value:function(){this._event.stopImmediatePropagation(),this.propagationStopped=!0,this.immediatePropagationStopped=!0}},propagationStopped:{value:!1},immediatePropagationStopped:{value:!1},mutable:{value:!0},stopPropagation:{value:function(){this._event.stopPropagation(),this.propagationStopped=!0}},stop:{value:function(){this.preventDefault(),this.stopPropagation()}},_eventPhase:{value:void 0},eventPhase:{get:function(){return void 0!==this._eventPhase?this._eventPhase:this._event.eventPhase},set:function(e){this._eventPhase=e}},_target:{value:void 0},target:{get:function(){return void 0!==this._target?this._target:this._event.target},set:function(e){this._target=e}},_currentTarget:{value:void 0},currentTarget:{get:function(){return void 0!==this._currentTarget?this._currentTarget:this._event.currentTarget},set:function(e){this._currentTarget=e}},_type:{value:void 0},type:{get:function(){return void 0!==this._type?this._type:this._event.type},set:function(e){this._type=e}},_bubbles:{value:void 0},bubbles:{get:function(){return void 0!==this._bubbles?this._bubbles:this._event.bubbles},set:function(e){this._bubbles=e}},touches:{get:function(){return this._event.touches},set:function(e){this._event.touches=e}},changedTouches:{get:function(){return this._event.changedTouches},set:function(e){this._event.changedTouches=e}},targetTouches:{get:function(){return this._event.targetTouches}},_defaultPrevented:{value:void 0},defaultPrevented:{get:function(){return void 0!==this._defaultPrevented?this._defaultPrevented:this._event.defaultPrevented},set:function(e){this._defaultPrevented=e}},_timeStamp:{value:void 0},timeStamp:{get:function(){return void 0!==this._timeStamp?this._timeStamp:this._event.timeStamp},set:function(e){this._timeStamp=e}}},{fromEvent:{value:function(e){var n,r=e.type,i=a[r];return i||(i=function(){},i.prototype=(new t.MutableEvent)._initPrototypeWithEvent(e),a[r]=i),n=new i,n._initWithEvent(e),n}},fromType:{
value:function(e,t,n,r){return this.fromEvent(new CustomEvent(e,{bubbles:t,cancelable:n,detail:r}))}}})}}}),montageDefine("64d2e12","core/serialization/serializer/montage-serializer",{dependencies:["../../core","./montage-malker","./montage-builder","./montage-labeler","./montage-visitor","../../logger"],factory:function(e,t,n){var r=e("../../core").Montage,i=e("./montage-malker").MontageWalker,o=e("./montage-builder").MontageBuilder,a=e("./montage-labeler").MontageLabeler,s=e("./montage-visitor").MontageVisitor,l=(e("../../logger").logger("montage-serializer"),r.specialize({_require:{value:null},_visitor:{value:null},_labeler:{value:null},_builder:{value:null},_serializationIndentation:{value:2},_malker:{value:null},legacyMode:{value:!1},constructor:{value:function(e){this.legacyMode=!!e}},initWithRequire:{value:function(e){return this._require=e,this._builder=new o,this._labeler=new a,this._visitor=(new s).initWithBuilderAndLabelerAndRequireAndUnits(this._builder,this._labeler,this._require,this.constructor._units),this._malker=new i(this._visitor,this.legacyMode),this}},getExternalObjects:{value:function(){return this._visitor.getExternalObjects()}},getExternalElements:{value:function(){return this._visitor.getExternalElements()}},setSerializationIndentation:{value:function(e){this._serializationIndentation=e}},serialize:{value:function(e){var t;this._labeler.initWithObjects(e);for(var n in e)Object.hasOwnProperty.call(e,n)&&this._malker.visit(e[n]);return t=this._formatSerialization(this._builder.getSerialization(this._serializationIndentation))}},serializeObject:{value:function(e){return this.serialize({root:e})}},_formatSerializationBindingsRegExp:{value:/\{\s*("(?:<->?)")\s*:\s*("[^"]+"\s*(?:,\s*"converter"\s*:\s*\{\s*"@"\s*:\s*"[^"]+"\s*\}\s*|,\s*"deferred"\s*:\s*(true|false)\s*)*)\}/gi},_formatSerializationBindingsReplacer:{value:function(e,t,n){return"{"+t+": "+n.replace(/\n\s*/g,"").replace(/,\s*/g,", ")+"}"}},_formatSerializationBindings:{value:function(e){return e.replace(this._formatSerializationBindingsRegExp,this._formatSerializationBindingsReplacer)}},_formatSerializationReferencesRegExp:{value:/\{\s*("[#@]")\s*:\s*("[^"]+")\s*\}/gi},_formatSerializationReferences:{value:function(e){return e.replace(this._formatSerializationReferencesRegExp,"{$1: $2}")}},_formatSerialization:{value:function(e){return this._formatSerializationBindings(this._formatSerializationReferences(e))}}},{_units:{value:Object.create(null)},defineSerializationUnit:{value:function(e,t){this._units[e]=t}},_toCamelCaseRegExp:{value:/(?:^|-)([^-])/g},_replaceToCamelCase:{value:function(e,t){return t.toUpperCase()}},_findObjectNameRegExp:{value:/([^\/]+?)(\.reel)?$/},getDefaultObjectNameForModuleId:{value:function(e){return this._findObjectNameRegExp.test(e),RegExp.$1.replace(this._toCamelCaseRegExp,this._replaceToCamelCase)}}}));t.MontageSerializer=l,t.serialize=function(e,t,n){return new l(n).initWithRequire(t).serializeObject(e)}}}),montageDefine("64d2e12","core/serialization/deserializer/montage-deserializer",{dependencies:["../../core","./montage-interpreter","./montage-reviver","../bindings","collections/map","core/promise","../../deprecate"],factory:function(e,t,n){var r=e("../../core").Montage,i=e("./montage-interpreter").MontageContext,o=e("./montage-reviver").MontageReviver,a=e("../bindings"),s=e("collections/map").Map,l=e("core/promise").Promise,u=e("../../deprecate"),c=t.MontageDeserializer=r.specialize({_serializationString:{value:null},_serialization:{value:null},serialization:{value:{get:function(){return this._serialization}}},init:{value:function(e,t,n,r,i){"string"==typeof e?this._serializationString=e:this._serializationString=JSON.stringify(e),this._require=t,this._module=r;var a=r&&t.location+r.id;return this._locationId=a,this._reviver=(new o).init(t,n,this,i,a),this._isSync=i,this}},_isSync:{value:!1},isSync:{get:function(){return this._isSync}},deserialize:{value:function(e,t){var n,r=this._module&&c.moduleContexts.get(this._module);if(r){if(r._objects.root)return this._isSync?r._objects:l.resolve(r._objects);if(n=new Error('Unable to deserialize because a circular dependency was detected. Module "'+this._locationId+'" has already been loaded but its root could not be resolved.'),this._isSync)throw n;return l.reject(n)}try{var o=JSON.parse(this._serializationString);r=(new i).init(o,this._reviver,e,t,this._require,this._isSync),this._locationId&&c.moduleContexts.set(this._module,r);try{return r.getObjects()}catch(a){if(this._isSync)throw a;return l.reject(a)}}catch(a){if(this._isSync)throw a;return this._formatSerializationSyntaxError(this._serializationString)}}},deserializeObject:{value:function(e){return this._isSync?this.deserialize(e).root:this.deserialize(e).then(function(e){return e.root})}},preloadModules:{value:function(){var e,t,n,r,i,a,s,u,c=JSON.parse(this._serializationString),h=this._reviver,p=h.moduleLoader;if(null!==c)for(t=Object.keys(c),e=0;n=t[e];++e)if(r=c[n],i=r.prototype||r.object){if("string"!=typeof i)throw new Error("Property 'object' of the object with the label '"+n+"' must be a module id");a=o.parseObjectLocationId(i),s=p.getModule(a.moduleId,n),l.is(s)&&(u||(u=[])).push(s)}if(u)return l.all(u)}},getExternalObjectLabels:{value:function(){var e=this._serialization,t=[];for(var n in e)0===Object.keys(e[n]).length&&t.push(n);return t}},_formatSerializationSyntaxError:{value:function(t){var n,r,i,o,a,s="   ",l=this._origin;return e.async("core/jshint").then(function(e){if(e.JSHINT(t))n="Syntax error in the serialization but not able to find it!\n"+t;else{r=e.JSHINT.errors[0],i=t.split("\n"),o=(s+i.length).length,a=r.line-1;for(var u=0,c=i.length;u<c;u++)i[u]=new Array(o-(u+1+"").length+1).join(u===a?">":" ")+(u+1)+" "+i[u];n="Syntax error at line "+r.line+(l?" from "+l:"")+":\n"+r.evidence+"\n"+r.reason+"\n"+i.join("\n")}throw new Error(n)})}},initWithObject:{value:u.deprecateMethod(void 0,function(e,t,n,r,i){return this.init(e,t,n,r,i)},"initWithObject","init")},initWithObjectAndRequire:{value:u.deprecateMethod(void 0,function(e,t,n){return this.init(e,t,n)},"initWithObjectAndRequire","init")}},{getModuleRequire:{value:function(e,t){for(var n=e.resolve(t),r=e.getModuleDescriptor(n);r.redirect||r.mappingRedirect;)r.redirect?n=r.redirect:(e=r.mappingRequire,n=r.mappingRedirect),r=e.getModuleDescriptor(n);return r.require}},_cache:{value:null},moduleContexts:{get:function(){return this._cache||(this._cache=new s),this._cache}}});c.defineDeserializationUnit=function(e,t){o.defineUnitReviver(e,t)},c.defineDeserializationUnit("bindings",a.deserializeObjectBindings),t.deserialize=function(e,t){return(new c).init(e,t).deserializeObject()}}}),montageDefine("64d2e12","core/environment",{dependencies:["./core"],factory:function(e,t,n){var r=e("./core").Montage,i="trident",o="msie",a="unknown",s="crios",l="fxios",u="cros",c="opr",h=t.Environment=r.specialize({constructor:{value:function(e){this.userAgent=e?e:global.navigator?global.navigator.userAgent:""}},_userAgent:{value:null},userAgent:{set:function(e){e=e.toLowerCase(),e!==this._userAgent&&(this._userAgent=e)},get:function(){return this._userAgent}},_device:{value:null},device:{get:function(){if(!this._device){var e=this.userAgent.match(/iphone|ipod|ipad/i);e&&e.length?this._device=e[0]:this._device=a}return this._device}},_supportsPointerEvents:{value:null},supportsPointerEvents:{get:function(){return"boolean"!=typeof this._supportsPointerEvents?this._supportsPointerEvents=!!(global.PointerEvent||global.MSPointerEvent&&global.navigator.msPointerEnabled):this._supportsPointerEvents}},_isIOSDevice:{value:null},isIOSDevice:{get:function(){return"boolean"!=typeof this._isIOSDevice?this._isIOSDevice=/iphone|ipad|ipod/.test(this.device):this._isIOSDevice}},_isAndroidDevice:{value:null},isAndroidDevice:{get:function(){return"boolean"!=typeof this._isAndroidDevice?this._isAndroidDevice=this.platformName===h.Platform.ANDROID:this._isAndroidDevice}},isCordova:{value:!!global.cordova},_isMobileDevice:{value:null},isMobileDevice:{get:function(){return"boolean"!=typeof this._isMobileDevice?this._isMobileDevice=/mobile/gi.test(this.userAgent):this._isMobileDevice}},isAndroidTablet:{get:function(){return this.isAndroidDevice&&!this.isMobileDevice}},_isStandalone:{value:null},isStandalone:{get:function(){return"boolean"!=typeof this._isStandalone?this._isStandalone=!!("standalone"in navigator&&navigator.standalone):this._isStandalone}},_platformName:{value:null},platformName:{get:function(){if("string"!=typeof this._platformName){var e=this.userAgent.match(/android|windows\sphone|windows|macintosh|linux|cros/gi);if(e&&e.length){var t=e[0];t===h.Platform.LINUX&&e[1]===h.Platform.ANDROID?t=h.Platform.ANDROID:t===u&&(t=h.Platform.CHROME_OS),this._platformName=t}else this.isIOSDevice?this._platformName=h.Platform.IOS:this._platformName=a}return this._platformName}},_browserVersion:{value:null},browserVersion:{get:function(){return"string"!=typeof this._browserVersion&&this._analyzeBrowser(),this._browserVersion}},_browserName:{value:null},browserName:{get:function(){return"string"!=typeof this._browserName&&this._analyzeBrowser(),this._browserName}},_isWKWebView:{value:null},isWKWebView:{get:function(){return"boolean"!=typeof this._isWKWebView?this._isWKWebView=this.isIOSDevice&&!!global.indexedDB:this._isWKWebView}},_isUIWebView:{value:null},isUIWebView:{get:function(){return"boolean"!=typeof this._isUIWebView?this._isUIWebView=!this.isWKWebView:this._isUIWebView}},_analyzeBrowser:{value:function(){var e,t=this.userAgent,n="",r="";e=t.indexOf(c)>-1?t.match(/(opr(?=\/))\/?\s*([\d+\.?]+)/i):t.indexOf(h.Browser.EDGE)>-1?t.match(/(edge(?=\/))\/?\s*([\d+\.?]+)/i):t.match(/(opera|chrome|safari|firefox|msie|trident|crios|fxios(?=\/))\/?\s*([\d+\.?]+)/i),e&&e.length>1&&(n=e[1],n===h.Browser.SAFARI?r=t.match(/version\/([\d+\.?]+)/i)[1]:n===h.Browser.CHROME||n===h.Browser.FIREFOX||n===l||n===o||n===h.Browser.OPERA||n===s||n===h.Browser.EDGE?r=e[2]:n===i&&(e=/\brv[ :]+(\d+)/g.exec(t),r=e&&e.length>1?e[1]:""),n===i||n===o?n=h.Browser.IE:n===c?n=h.Browser.OPERA:n===s?n=h.Browser.CHROME:n===l&&(n=h.Browser.FIREFOX)),this._browserName=n,this._browserVersion=r}}},{Device:{value:{IPHONE:"iphone",IPAD:"ipad",IPOD:"ipod"}},Platform:{value:{IOS:"ios",ANDROID:"android",WINDOWS_PHONE:"windows phone",MACINTOSH:"macintosh",WINDOWS:"windows",LINUX:"linux",CHROME_OS:"chrome os"}},Browser:{value:{SAFARI:"safari",FIREFOX:"firefox",CHROME:"chrome",OPERA:"opera",IE:"ie",EDGE:"edge"}}});t.currentEnvironment=new h}}),montageDefine("64d2e12","core/converter/converter",{dependencies:["../core"],factory:function(e,t,n){var r=e("../core"),i=r.Montage,o=r._objectDescriptorModuleIdDescriptor,a=r._objectDescriptorDescriptor,s="[object Number]",l=Object.prototype.toString,u=function(e){return l.call(e)===s};t.isNumber=u;var c=function(e){return e&&"undefined"!=typeof e};t.isDef=c,t.Validator=i.specialize({validate:{value:null}}),t.Converter=i.specialize({allowPartialConversion:{value:!0},convert:{enumerable:!1,value:null},revert:{enumerable:!1,value:null}},{objectDescriptorModuleId:o,objectDescriptor:a})}}),montageDefine("64d2e12","core/serialization/serializer/montage-malker",{dependencies:["../../core"],factory:function(e,t,n){var r=e("../../core").Montage,i=t.MontageWalker=r.specialize({_visitHandler:{value:null},_enteredObjects:{value:null},legacyMode:{value:!1},constructor:{value:function(e,t){this._visitHandler=e,this.legacyMode=!!t,this._enteredObjects={}}},_isObjectEntered:{value:function(e){return Object.hash(e)in this._enteredObjects}},_markObjectAsEntered:{value:function(e){this._enteredObjects[Object.hash(e)]=!0}},visit:{value:function(e,t){this._visitValue(e,t)},enumerable:!0},_getTypeOf:{value:function(e){return Array.isArray(e)?"array":RegExp.isRegExp(e)?"regexp":null===e?"null":"object"==typeof e||"function"==typeof e?this._getObjectType(e):typeof e}},_getObjectType:{value:function(e){var t,n=this._visitHandler;return"function"==typeof n.getTypeOf&&(t=n.getTypeOf(e)),"undefined"==typeof t?typeof e:t}},_visitValue:{value:function(e,t){var n=this._getTypeOf(e);"object"===n?this._visitObject(e,t):"array"===n?this._visitArray(e,t):"regexp"===n?this._visitRegExp(e,t):"number"===n?this._visitNumber(e,t):"string"===n?this._visitString(e,t):"boolean"===n?this._visitBoolean(e,t):"null"===n?this._visitNull(t):"undefined"===n?this._visitUndefined(t):this._visitCustomType(n,e,t)}},_visitCustomType:{value:function(e,t,n){this._callVisitorMethod("visit"+e,t,n)}},_enterCustomObject:{value:function(e,t,n){this._callVisitorMethod("enter"+e,t,n),this._callVisitorMethod("exit"+e,t,n)}},_visitObject:{value:function(e,t){var n;this._isObjectEntered(e)?this._callVisitorMethod("visitObject",e,t):(n=this._callVisitorMethod("willEnterObject",e,t),n!==!1&&(this._markObjectAsEntered(e),this._enterObject(e,t)))}},_enterObject:{value:function(e,t){var n,r=Object.keys(e);this._callVisitorMethod("enterObject",e,t);for(var i=0,o=r.length;i<o;i++)n=r[i],this._visitValue(e[n],n);this._callVisitorMethod("exitObject",e,t)}},_visitArray:{value:function(e,t){var n;this._isObjectEntered(e)?this._callVisitorMethod("visitArray",e,t):(n=this._callVisitorMethod("willEnterArray",e,t),n!==!1&&(this._markObjectAsEntered(e),this._enterArray(e,t)))}},_enterArray:{value:function(e,t){this._callVisitorMethod("enterArray",e,t);for(var n=0,r=e.length;n<r;n++)this._visitValue(e[n],""+n);this._callVisitorMethod("exitArray",e,t)}},_visitRegExp:{value:function(e,t){this._callVisitorMethod("visitRegExp",e,t)}},_visitString:{value:function(e,t){this._callVisitorMethod("visitString",e,t)}},_visitNumber:{value:function(e,t){this._callVisitorMethod("visitNumber",e,t)}},_visitBoolean:{value:function(e,t){this._callVisitorMethod("visitBoolean",e,t)}},_visitNull:{value:function(e){this._callVisitorMethod("visitNull",e)}},_visitUndefined:{value:function(e){this._callVisitorMethod("visitUndefined",e)}},_callVisitorMethod:{value:function(e){var t,n=this._visitHandler;if("function"==typeof n[e])return t=Array.prototype.slice.call(arguments,1),t.unshift(this),n[e].apply(n,t)}}});t.visit=function(e,t,n){var r=new i(t,n);r.visit(e)}}}),montageDefine("64d2e12","core/serialization/serializer/montage-builder",{dependencies:["../../core","./montage-ast"],factory:function(e,t,n){var r=e("../../core").Montage,i=e("./montage-ast"),o=r.specialize({_root:{value:null},_stack:{value:null},_references:{value:null},_placeholderProperty:{value:Object.create(null)},constructor:{value:function(){this.init()}},createElementReference:{value:function(e){return(new i.ElementReference).initWithRootAndId(this._root,e)}},createModuleReference:{value:function(e){return(new i.ModuleReference).initWithRootAndModuleId(this._root,e)}},init:{value:function(){return this._references=Object.create(null),this._root=new i.Root,this._stack=[this._root],this}},cleanup:{value:function(){this._references=null,this._root=null,this._stack=null}},getExternalReferences:{value:function(e,t){var n=this._references,r=this._root,i=[];for(var o in n)r.hasProperty(o)&&r.getProperty(o)!==this._placeholderProperty||i.push(o);return i}},relabelReferences:{value:function(e,t){var n=this._references[e];if(n){n=n.slice(0);for(var r=0,i=n.length;r<i;r++)n[r].value=t}}},_registerReference:{value:function(e){var t=this._references,n=e.value;t[n]?t[n].push(e):t[n]=[e]}},_unregisterReference:{value:function(e){var t,n=e.label,r=this._references[n];if(1===r.length)delete this._references[n];else{if(t=r.indexOf(e),t===-1)throw new Error("Reference '"+n+"' not found in registry.");r.splice(t,1)}}},_createPlaceholdersForReferences:{value:function(){var e=this._references,t=this._root;for(var n in e)Object.hasOwnProperty.call(e,n)&&(t.hasProperty(n)||t.setProperty(n,this._placeholderProperty))}},getSerialization:{value:function(e){return this._createPlaceholdersForReferences(),this._root.serialize(e)}},root:{get:function(){return this._root}},top:{get:function(){return this._stack[0]}},push:{value:function(e){return this._stack.unshift(e)}},pop:{value:function(){return this._stack.shift()}},createObjectLiteral:{value:function(){return new i.ObjectLiteral(this._root,Object.create(null))}},createArray:{value:function(){return new i.ObjectLiteral(this._root,[])}},createObjectReference:{value:function(e){var t=new i.ObjectReference(this._root,e);return this._registerReference(t),t}},createRegExp:{value:function(e){return new i.RegExpObject(this._root,e)}},createString:{value:function(e){return new i.Value(this._root,e)}},createNumber:{value:function(e){return new i.Value(this._root,e)}},createBoolean:{value:function(e){return new i.Value(this._root,e)}},createNull:{value:function(e){return new i.Value(this._root,null)}},createCustomObject:{value:function(){return new i.CustomObject(this._root)}}});t.MontageBuilder=o}}),montageDefine("64d2e12","core/serialization/serializer/montage-labeler",{dependencies:["../../core"],factory:function(e,t,n){var r=e("../../core").Montage;t.MontageLabeler=r.specialize({_labelRegexp:{value:/^[a-zA-Z_$][0-9a-zA-Z_$]*$/},_labels:{value:null},_objectsLabels:{value:null},_objects:{value:null},_INITIAL_LABEL_NUMBER:{value:2},_baseNamesIndex:{value:null},_userDefinedLabels:{value:null},constructor:{value:function(){this._labels=Object.create(null),this._objectsLabels=Object.create(null),this._objects=Object.create(null),this._baseNamesIndex=Object.create(null),this._userDefinedLabels=Object.create(null)}},getTemplatePropertyLabel:{value:function(e){var t=this._getObjectLabel(e);if(":"!==t[0])throw new Error("Template property's labels need to start with a colon (:), (\""+t+'").');return t}},_getObjectLabel:{value:function(e){var t,n=Object.hash(e);return n in this._objectsLabels?Object.hasOwnProperty.call(this._objectsLabels,n)&&(t=this._objectsLabels[n]):(t=this.generateObjectLabel(e),this.setObjectLabel(e,t)),t}},getObjectLabel:{value:function(e){var t=this._getObjectLabel(e);if(":"===t[0])throw new Error('Labels starting with colon (:) can only be used for template values, ("'+t+'").');return t}},getObjectName:{value:function(e){var t,n=e.identifier;return n&&this._labelRegexp.test(n)?t=e.identifier:e&&"object"==typeof e&&"getInfoForObject"in e||"getInfoForObject"in e.constructor?(t=r.getInfoForObject(e).objectName,t=t.toLowerCase()):t=Array.isArray(e)?"array":RegExp.isRegExp(e)?"regexp":typeof e,t}},initWithObjects:{value:function(e){for(var t in e)e.hasOwnProperty(t)&&(this.setObjectLabel(e[t],t),this._userDefinedLabels[t]=!0)}},cleanup:{value:function(){this._labels=null,this._objectsLabels=null,this._objects=null,this._baseNamesIndex=null,this._userDefinedLabels=null}},generateLabel:{value:function(e){var t,n=this._baseNamesIndex[e];do n?(t=e+n,this._baseNamesIndex[e]=n+=1):(t=e,this._baseNamesIndex[e]=n=this._INITIAL_LABEL_NUMBER);while(t in this._labels);return t}},getLabelBaseName:{value:function(e){return e.replace(/\d*$/,"")}},addLabel:{value:function(e){this._labels[e]=!0}},addLabels:{value:function(e){for(var t=0,n=e.length;t<n;t++)this.addLabel(e[t])}},isLabelDefined:{value:function(e){return e in this._labels}},isUserDefinedLabel:{value:function(e){return e in this._userDefinedLabels}},generateObjectLabel:{value:function(e){var t=this.getObjectName(e);return this.generateLabel(t)}},setObjectLabel:{value:function(e,t){if("undefined"!=typeof e){var n=Object.hash(e);this.addLabel(t),this._objectsLabels[n]=t,this._objects[t]=e}}},getObjectByLabel:{value:function(e){return this._objects[e]}}})}}),montageDefine("64d2e12","core/serialization/serializer/montage-visitor",{dependencies:["../../core","./montage-serializer","./values-serializer","./self-serializer","./unit-serializer","../alias","../bindings","../../deprecate"],factory:function(e,t,n){var r=e("../../core").Montage,i=e("./montage-serializer"),o=e("./values-serializer").ValuesSerializer,a=e("./self-serializer").SelfSerializer,s=e("./unit-serializer").UnitSerializer,l=e("../alias").Alias,u=e("../bindings"),c=e("../../deprecate"),h=r.specialize({_MONTAGE_ID_ATTRIBUTE:{value:"data-montage-id"},_require:{value:null},_units:{value:null},_elements:{value:null},builder:{value:null},labeler:{value:null},_objectsSerialization:{value:null},initWithBuilderAndLabelerAndRequireAndUnits:{value:function(e,t,n,r){return this.builder=e,this.labeler=t,this._objectsSerialization=Object.create(null),this._require=n,this._units=r,this._elements=[],this}},getTypeOf:{value:function(e){return e.isModuleReference?"Module":e instanceof l?"Alias":"getInfoForObject"in e||"getInfoForObject"in e.constructor?"MontageObject":e.thisIsAReferenceCreatedByMontageSerializer?"MontageReference":"undefined"!=typeof Element&&Element.isElement(e)?"Element":this._isSerializableNativeObject(e)?"NativeObject":void 0}},_isSerializableNativeObject:{value:function(e){var t=e.constructor.name,n=global[t],r="function"==typeof n,i=r&&"function"==typeof e.serializeSelf;return r&&i}},visitMontageReference:{value:function(e,t,n){this.builder.top.setProperty(n,t.reference)}},visitElement:{value:function(e,t,n){var r,i;if(i=t.getAttribute(this._MONTAGE_ID_ATTRIBUTE),!i)throw new Error("Not possible to serialize a DOM element with no "+this._MONTAGE_ID_ATTRIBUTE+" assigned: "+t.outerHTML);r=this.builder.createElementReference(i),this.storeValue(r,t,n),this._elements.push(t)}},visitModule:{value:function(e,t,n){var r,i;try{i=t.resolve(this._require)}catch(o){throw new Error("Not possible to serialize module reference "+t.id+" from package "+t.require.location+" inside package "+this._require.location)}r=this.builder.createModuleReference(i),this.storeValue(r,t,n)}},visitAlias:{value:function(e,t){var n=this.labeler.getTemplatePropertyLabel(t),r=this.builder.createCustomObject();r.setProperty("alias",t.value),this.builder.top.setProperty(n,r)}},visitMontageObject:{value:function(e,t,n){this.isObjectSerialized(t)?this.serializeReferenceToMontageObject(e,t,n):this.handleMontageObject(e,t,n)}},handleMontageObject:{value:function(e,t,n){var r,i=this.builder.createCustomObject();this.setObjectSerialization(t,i),r=this.serializeMontageObject(e,t,i),r?this.serializeSubstituteObject(e,t,n,i,r):(i.setLabel(this.labeler.getObjectLabel(t)),this.builder.top.setProperty(n,i))}},visitNativeObject:{value:function(e,t,n){this.isObjectSerialized(t)?this.serializeReferenceToMontageObject(e,t,n):this.handleNativeObject(e,t,n)}},handleNativeObject:{value:function(e,t,n){var r,i=this.builder.createCustomObject();this.setObjectSerialization(t,i),r=this.serializeNativeObject(e,t,i),r?this.serializeSubstituteObject(e,t,n,i,r):(i.setLabel(this.labeler.getObjectLabel(t)),this.builder.top.setProperty(n,i))}},serializeReferenceToMontageObject:{value:function(e,t,n){var r=this.labeler.getObjectLabel(t),i=this.builder.createObjectReference(r);this.builder.top.setProperty(n,i)}},serializeSubstituteObject:{value:function(e,t,n,r,i){var o,a,s,l;o=this.labeler.getObjectLabel(t),this.labeler.isUserDefinedLabel(o)?(a=this.labeler.getObjectLabel(i),this.labeler.setObjectLabel(i,o),this.builder.relabelReferences(a,o),l=this.getObjectSerialization(i),l&&(l.setLabel(o),this.labeler.isUserDefinedLabel(a)&&this.builder.createObjectReference(o).setLabel(a)),e.visit(i,n)):(e.visit(i,n),s=this.labeler.getObjectLabel(i),this.labeler.setObjectLabel(t,s),this.builder.relabelReferences(o,s))}},serializeMontageObject:{value:function(e,t,n){var r,i,o=this.builder.createObjectLiteral();return this.setObjectType(t,n),n.setProperty("values",o),this.builder.push(n),"function"==typeof t.serializeSelf?(r=(new a).initWithMalkerAndVisitorAndObject(e,this,t,n),i=t.serializeSelf(r)):(this.setObjectValues(e,t),this.setObjectBindings(e,t),this.setObjectCustomUnits(e,t)),this.builder.pop(),0===o.getPropertyNames().length&&n.clearProperty("values"),i}},serializeNativeObject:{value:function(e,t,n){var r,i,o=this.builder.createObjectLiteral();return n.setProperty("prototype",t.constructor.name),n.setProperty("values",o),this.builder.push(n),r=(new a).initWithMalkerAndVisitorAndObject(e,this,t,n),i=t.serializeSelf(r),this.builder.pop(),0===o.getPropertyNames().length&&n.clearProperty("values"),i}},setObjectType:{value:function(e,t){var n=r.getInfoForObject(e).isInstance,i=this.getObjectLocationId(e),o=this.builder.createString(i);n?t.setProperty("prototype",o):t.setProperty("object",o)}},getObjectModuleId:{value:function(e){var t=r.getInfoForObject(e);return this._require.identify(t.moduleId,t.require)}},getObjectLocationId:{value:function(e){var t,n=this.getObjectModuleId(e),o=r.getInfoForObject(e),a=o.objectName;return t=i.MontageSerializer.getDefaultObjectNameForModuleId(n),t===a?n:n+"["+a+"]"}},setObjectBindings:{value:function(e,t){if(!e.legacyMode){var n=(new s).initWithMalkerAndVisitorAndObject(e,this,t),r=u.serializeObjectBindings(n,t);if(r){var i=this.builder.top.getProperty("values");this.builder.push(i);for(var o in r)this.builder.top.setProperty(o,r[o]);this.builder.pop()}}}},setObjectProperties:{value:c.deprecateMethod(void 0,function(e,t){return this.setObjectValues(e,t)},"setObjectProperties","setObjectValues")},setObjectValues:{value:function(e,t){var n,r=this.builder.top.getProperty("values");this.builder.push(r),"function"==typeof t.serializeProperties||"function"==typeof t.serializeValues?(n=(new o).initWithMalkerAndVisitorAndObject(e,this,t),t.serializeValues?t.serializeValues(n):t.serializeProperties(n)):this.setSerializableObjectValues(e,t),this.builder.pop()}},setSerializableObjectProperties:{value:c.deprecateMethod(void 0,function(e,t){return this.setSerializableObjectValues(e,t)},"setSerializableObjectProperties","setSerializableObjectValues")},setSerializableObjectValues:{value:function(e,t){for(var n,i,o=r.getSerializablePropertyNames(t),a=o.length,s=0;s<a;s++)i=o[s],n=r.getPropertyAttribute(t,i,"serializable"),this.setProperty(e,i,t[i],n)}},hackIsReferenceAllowedForValue:{value:function(e){return"object"==typeof e&&null!==e&&void 0!==e&&!("undefined"!=typeof Element&&Element.isElement(e))}},setProperty:{value:function(e,t,n,r){var i;if("reference"===r&&this.hackIsReferenceAllowedForValue(n)){i=this.labeler.getObjectLabel(n);var o=this.builder.createObjectReference(i);this.builder.top.setProperty(t,o)}else e.visit(n,t)}},setObjectCustomUnits:{value:function(e,t){for(var n in this._units)if(Object.hasOwnProperty.call(this._units,n)){if("bindings"===n&&!e.legacyMode)continue;this.setObjectCustomUnit(e,t,n)}}},setObjectCustomUnit:{value:function(e,t,n){var r,i,o=this._units[n];o&&(i=(new s).initWithMalkerAndVisitorAndObject(e,this,t),r=o(i,t),null!==r&&void 0!==r&&e.visit(r,n))}},getExternalObjects:{value:function(){for(var e,t={},n=this.builder.getExternalReferences(),r=0;e=n[r];r++)t[e]=this.labeler.getObjectByLabel(e);return t}},getExternalElements:{value:function(){return this._elements}},getCustomObjectTypeOf:{value:function(){},writable:!0},isCustomObject:{value:function(e){var t=this.getCustomObjectTypeOf(e);return"string"==typeof t}},setObjectSerialization:{value:function(e,t){this._objectsSerialization[Object.hash(e)]=t}},getObjectSerialization:{value:function(e){return this._objectsSerialization[Object.hash(e)]}},isObjectSerialized:{value:function(e){return Object.hash(e)in this._objectsSerialization}},enterObject:{value:function(e,t,n){var r=this.builder.createObjectLiteral();this.setObjectSerialization(t,r),this.builder.push(r)}},exitObject:{value:function(e,t,n){this.storeValue(this.builder.pop(),t,n)}},visitObject:{value:function(e,t,n){var r=this.labeler.getObjectLabel(t),i=this.builder.createObjectReference(r);this.getObjectSerialization(t).setLabel(r),this.builder.top.setProperty(n,i)}},enterArray:{value:function(e,t,n){var r=this.builder.createArray();this.setObjectSerialization(t,r),this.builder.push(r)}},exitArray:{value:function(e,t,n){this.storeValue(this.builder.pop(),t,n)}},visitArray:{value:function(e,t,n){var r=this.labeler.getObjectLabel(t),i=this.builder.createObjectReference(r);this.getObjectSerialization(t).setLabel(r),this.builder.top.setProperty(n,i)}},visitRegExp:{value:function(e,t,n){this.storeValue(this.builder.createRegExp(t),t,n)}},visitString:{value:function(e,t,n){this.storeValue(this.builder.createString(t),t,n)}},visitNumber:{value:function(e,t,n){this.storeValue(this.builder.createNumber(t),t,n)}},visitBoolean:{value:function(e,t,n){this.storeValue(this.builder.createBoolean(t),t,n)}},visitNull:{value:function(e,t){this.storeValue(this.builder.createNull(),null,t)}},visitCustomObject:{value:function(e,t,n){var r=this.getCustomObjectTypeOf(t),i=h.customObjectVisitors["visit"+r];if(r)return i.call(global,e,this,t,n);throw new Error("Object's type is unknown: "+t)}},storeValue:{value:function(e,t,n){"undefined"==typeof n?e.setLabel(this.labeler.getObjectLabel(t)):this.builder.top.setProperty(n,e)}}},{customObjectVisitors:{value:Object.create(null)},makeGetCustomObjectTypeOf:{value:function(e){var t=this.prototype.getCustomObjectTypeOf;return function(n){return e(n)||t(n)}}},addCustomObjectVisitor:{value:function(e){var t=this.customObjectVisitors;for(var n in e)if(Object.hasOwnProperty.call(e,n)){if("getTypeOf"===n)continue;if("function"==typeof e[n]&&"visit"===n.substr(0,5)){if("undefined"!=typeof t[n])return new Error("Visitor '"+n+"' is already registered.");t[n]=e[n].bind(e)}}this.prototype.getCustomObjectTypeOf=this.makeGetCustomObjectTypeOf(e.getTypeOf)}},resetCustomObjectVisitors:{value:function(){this.customObjectVisitors=Object.create(null),this.prototype.getCustomObjectTypeOf=function(){}}}});t.MontageVisitor=h}}),montageDefine("64d2e12","core/serialization/deserializer/montage-interpreter",{dependencies:["../../core","./montage-reviver","../../promise","../../deprecate","collections/set"],factory:function(e,t,n){var r=e("../../core").Montage,i=e("./montage-reviver").MontageReviver,o=e("../../promise").Promise,a=e("../../deprecate"),s=e("collections/set"),l="=",u="<-",c="<->",h=r.specialize({_require:{value:null},_reviver:{value:null},init:{value:function(e,t){if(a.deprecationWarningOnce("MontageInterpreter","MontageDeserializer"),"function"!=typeof e)throw new Error("Function 'require' missing.");return this._reviver=t,this._require=e,this}},instantiate:{value:function(e,n,r){var i;return i=(new t.MontageContext).init(e,this._reviver,n,r,this._require),i.getObjects()}},preloadModules:{value:function(e){var t,n,r,a,s=this._reviver,l=s.moduleLoader,u=[];for(var c in e)if(e.hasOwnProperty(c)&&(t=e[c],n=t.prototype||t.object)){if("string"!=typeof n)throw new Error("Property 'object' of the object with the label '"+c+"' must be a module id");r=i.parseObjectLocationId(n),a=l.getModule(r.moduleId,c),o.is(a)&&u.push(a)}if(u.length>0)return o.all(u)}}}),p=r.specialize({_ELEMENT_ID_ATTRIBUTE:{value:"data-montage-id"},_ELEMENT_ID_SELECTOR_PREFIX:{value:'*[data-montage-id="'},_ELEMENT_ID_SELECTOR_SUFFIX:{value:'"]'},unitsToDeserialize:{value:null},_mjsonDependencies:{value:null},_element:{value:null},_require:{value:null},_objects:{value:null},_userObjects:{value:null},_serialization:{value:null},_reviver:{value:null},_bindingsToDeserialize:{value:null},constructor:{value:function(){this.unitsToDeserialize=new Map}},init:{value:function(e,t,n,r,i,o){if(this._reviver=t,this._serialization=e,this._objects=Object.create(null),n){this._userObjects=Object.create(null);for(var a in n)this._userObjects[a]=n[a]}return this._element=r,this._require=i,this._isSync=o,this}},_isSync:{value:!1},isSync:{get:function(){return this._isSync}},setObjectLabel:{value:function(e,t){this._objects[t]=e}},getObject:{value:function(e){var t,n,r=this._serialization,i=this._reviver,a=this._objects;if(e in a)return a[e];if(e in r)return t=i.reviveRootObject(r[e],this,e),e in a||(a[e]=t),t;if(n=new Error("Object with label '"+e+"' was not found."),this._isSync)throw n;return o.reject(n)}},getObjects:{value:function(){var e,t,n,r=this,i=this._serialization;if(i){n=Object.keys(i);for(var a,s=0;a=n[s];s++)t=this.getObject(a),o.is(t)&&(e||(e=[])).push(t)}return e&&0!==e.length?o.all(e).then(function(){
return r._invokeDidReviveObjects()}):(t=this._invokeDidReviveObjects(),this._isSync?t:o.is(t)?t:o.resolve(t))}},hasUserObject:{value:function(e){var t=this._userObjects;return!!t&&e in t}},getUserObject:{value:function(e){var t=this._userObjects;if(t)return t[e]}},_invokeDidReviveObjects:{value:function(){var e=this,t=this._reviver;return"function"==typeof t.didReviveObjects?(t.didReviveObjects(this),e._objects):this._objects}},hasObject:{value:function(e){return e in this._serialization}},getRequire:{value:function(){return this._require}},getElement:{value:function(){return this._element}},getElementById:{value:function(e){return this._element.querySelector(this._ELEMENT_ID_SELECTOR_PREFIX+e+this._ELEMENT_ID_SELECTOR_SUFFIX)}},_classifyValuesToDeserialize:{value:function(e,t){var n,r,i,o;if(n=t.properties)t.values=n,delete t.properties;else if(n=t.values){i=Object.keys(n),o=t.bindings||(t.bindings={});for(var a,s=0;a=i[s];s++)r=n[a],("object"==typeof r&&r&&1===Object.keys(r).length&&(u in r||c in r||l in r)||a.indexOf(".")>-1)&&(o[a]=r,delete n[a])}return o}},getBindingsToDeserialize:{value:function(){return this._bindingsToDeserialize}},__propertyToReviveForObjectLiteralValue:{value:void 0},_propertyToReviveForObjectLiteralValue:{get:function(){return this.__propertyToReviveForObjectLiteralValue||(this.__propertyToReviveForObjectLiteralValue=new WeakMap)}},propertyToReviveForObjectLiteralValue:{value:function(e){var t;return(t=this._propertyToReviveForObjectLiteralValue.get(e))||this._propertyToReviveForObjectLiteralValue.set(e,t=new s(Object.keys(e))),t}},_objectDynamicValuesToDeserialize:{value:void 0},_objectValuesToDeserialize:{value:void 0},objectValuesToDeserialize:{get:function(){return this._objectValuesToDeserialize||(this._objectValuesToDeserialize=new Map)}},setBindingsToDeserialize:{value:function(e,t){this._classifyValuesToDeserialize(e,t)}},setUnitsToDeserialize:{value:function(e,t,n){var r=t.prototype||t.object,i=r&&(r.endsWith(".mjson")||r.endsWith(".meta")),o=this.unitsToDeserialize.get(e);if(i&&(this._mjsonDependencies||(this._mjsonDependencies=new s)).add(r),o){if(n!==o.unitNames||o.objectDesc!==t)for(var a,l=o.objectDesc,u=o.unitNames,c=0,h=n.length;c<h;c++)a=n[c],t[a]&&Object.assign(l[a],t[a]),u.has(a)||u.splice(c,0,a)}else this.unitsToDeserialize.set(e,{objectDesc:t,unitNames:n})}}});t.MontageInterpreter=h,t.MontageContext=p}}),montageDefine("64d2e12","core/serialization/serializer/montage-ast",{dependencies:["../../core"],factory:function(e,t,n){var r=e("../../core").Montage,i=(t.Root=r.specialize({constructor:{value:function(){this.object=Object.create(null)}},object:{value:null},setProperty:{value:function(e,t){null!==e&&void 0!==e&&(this.object[e]=t)}},getProperty:{value:function(e){return this.object[e]}},clearProperty:{value:function(e){delete this.object[e]}},hasProperty:{value:function(e){return e in this.object}},serialize:{value:function(e){return JSON.stringify(this,null,e)}},toJSON:{value:function(){var e,t=Object.create(null);for(var n in this.object)Object.hasOwnProperty.call(this.object,n)&&(e=this.object[n],e.toJSON?t[n]=e.toJSON(n,1):t[n]=e);return t}}}),t.Value=r.specialize({root:{value:null},label:{value:null},value:{value:null},constructor:{value:function(e,t){this.root=e,this.value=t}},setLabel:{value:function(e){this.label&&this.root.clearProperty(this.label),this.label=e,this.root.setProperty(e,this)}},getLabel:{value:function(){return this.label}},clearLabel:{value:function(){this.root.clearProperty(this.label),this.label=null}},_getSerializationValue:{value:function(){return this.value}},toJSON:{value:function(e,t){var n=this._getSerializationValue();return 1===t?{value:n}:n}}})),o=(t.ElementReference=i.specialize({initWithRootAndId:{value:function(e,t){return i.call(this,e,t),this}},_getSerializationValue:{value:function(){return{"#":this.value}}}}),t.ModuleReference=i.specialize({initWithRootAndModuleId:{value:function(e,t){return i.call(this,e,t),this}},_getSerializationValue:{value:function(){return{"%":this.value}}}}),t.ObjectReference=i.specialize({constructor:{value:function(e,t){i.call(this,e,t)}},_getSerializationValue:{value:function(){return{"@":this.value}}}})),a=(t.CustomObject=i.specialize({constructor:{value:function(e){i.call(this,e,Object.create(null))}},setProperty:{value:function(e,t){null!==e&&void 0!==e&&(this.value[e]=t)}},getProperty:{value:function(e){return this.value[e]}},clearProperty:{value:function(e){delete this.value[e]}},toJSON:{value:function(e,t){var n,r=this._getSerializationValue();return 1===t?r:(n=new o(this.root,this.label),n.toJSON())}}}),t.ReferenceableValue=i.specialize({constructor:{value:function(e,t){i.call(this,e,t)}},toJSON:{value:function(e,t){var n,r=this._getSerializationValue();return 1===t?{value:r}:this.label?(n=new o(this.root,this.label),n.toJSON()):r}}}));t.ObjectLiteral=a.specialize({constructor:{value:function(e,t){i.call(this,e,t)}},setProperty:{value:function(e,t){null!==e&&void 0!==e&&(this.value[e]=t)}},getProperty:{value:function(e){return this.value[e]}},clearProperty:{value:function(e){delete this.value[e]}},getPropertyNames:{value:function(){return Object.keys(this.value)}}}),t.RegExpObject=a.specialize({constructor:{value:function(e,t){i.call(this,e,t)}},_getSerializationValue:{value:function(){var e=this.value;return{"/":{source:e.source,flags:(e.global?"g":"")+(e.ignoreCase?"i":"")+(e.multiline?"m":"")}}}}})}}),montageDefine("64d2e12","core/serialization/serializer/values-serializer",{dependencies:["../../core"],factory:function(e,t,n){var r=e("../../core").Montage,i={thisIsAReferenceCreatedByMontageSerializer:!0,reference:null},o=r.specialize.call(Object,{_malker:{value:null},_visitor:{value:null},_object:{value:null},initWithMalkerAndVisitorAndObject:{value:function(e,t,n){return this._malker=e,this._visitor=t,this._object=n,this}},addObject:{value:function(e){if("object"==typeof e)return this._malker.visit(e),e}},addObjectReference:{value:function(e){var t=this._visitor.builder,n=this._visitor.labeler,r=n.getObjectLabel(e),o=Object.create(i);return o.reference=t.createReference(r),o}},set:{value:function(e,t,n){this._visitor.setProperty(this._malker,e,t,n)}},setAll:{value:function(){this._visitor.setSerializableObjectValues(this._malker,this._object)}}});t.ValuesSerializer=o}}),montageDefine("64d2e12","core/serialization/serializer/self-serializer",{dependencies:["../../core","../../deprecate"],factory:function(e,t,n){var r=e("../../core").Montage,i=e("../../deprecate"),o=r.specialize.call(Object,{_malker:{value:null},_visitor:{value:null},_object:{value:null},initWithMalkerAndVisitorAndObject:{value:function(e,t,n){return this._malker=e,this._visitor=t,this._object=n,this}},getObjectLabel:{value:function(e){return this._visitor.labeler.getObjectLabel(e)}},addObject:{value:function(e){if("object"==typeof e)return this._malker.visit(e),e}},addObjectReference:{value:function(e){var t=this._visitor.builder,n=this._visitor.labeler,r=n.getObjectLabel(e);return{thisIsAReferenceCreatedByMontageSerializer:!0,reference:t.createObjectReference(r)}}},setProperty:{value:function(e,t,n){var r=this._visitor.builder,i=r.top.getProperty("values");r.push(i),this._visitor.setProperty(this._malker,e,t,n),r.pop()}},setAllProperties:{value:i.deprecateMethod(void 0,function(){return this.setAllValues()},"setAllProperties","setAllValues")},setAllValues:{value:function(){var e=this._visitor.builder,t=e.top.getProperty("values");e.push(t),this._visitor.setSerializableObjectValues(this._malker,this._object),e.pop()}},setUnit:{value:function(e){this._visitor.setObjectCustomUnit(this._malker,this._object,e)}},setAllUnits:{value:function(e){this._visitor.setObjectCustomUnits(this._malker,this._object)}}});t.SelfSerializer=o}}),montageDefine("64d2e12","core/serialization/serializer/unit-serializer",{dependencies:["../../core"],factory:function(e,t,n){var r=e("../../core").Montage,i=r.specialize.call(Object,{_malker:{value:null},_visitor:{value:null},_object:{value:null},initWithMalkerAndVisitorAndObject:{value:function(e,t,n){return this._malker=e,this._visitor=t,this._object=n,this}},getObjectLabel:{value:function(e){return this.addObjectReference(e),this._visitor.labeler.getObjectLabel(e)}},addObject:{value:function(e){if("object"==typeof e)return this._malker.visit(e),e}},addObjectReference:{value:function(e){var t=this._visitor.builder,n=this._visitor.labeler,r=n.getObjectLabel(e);return{thisIsAReferenceCreatedByMontageSerializer:!0,reference:t.createObjectReference(r)}}}});t.UnitSerializer=i}}),montageDefine("64d2e12","core/localizer",{dependencies:["./core","./messageformat","../ui/component","./logger","./serialization/serializer/montage-serializer","./serialization/deserializer/montage-deserializer","./promise","./core","frb/bindings","frb/stringify","frb/expand","collections/map","frb/scope","./messageformat-locale"],factory:function(e,t,n){var r=e("./core").Montage,i=e("./messageformat"),o=e("../ui/component").__root__,a=e("./logger").logger("localizer"),s=e("./serialization/serializer/montage-serializer").MontageSerializer,l=e("./serialization/deserializer/montage-deserializer").MontageDeserializer,u=e("./promise").Promise,c=e("./core").Bindings,h=e("frb/bindings"),p=e("frb/stringify"),d=e("frb/expand"),f=e("collections/map"),v=e("frb/scope");i.locale=e("./messageformat-locale");var g,m="key",_="default",y="montage_locale",b="locale",w="messages",O="manifest.json",j=function(){return""},E=/^[a-zA-Z]+(?:-[a-zA-Z0-9]+)*$/,C=t.Localizer=r.specialize({initWithLocale:{value:function(e){var t;this.storesLocale&&"undefined"!=typeof window&&window.localStorage&&(t=window.localStorage.getItem(y));var n=e||t||window.navigator.userLanguage||window.navigator.language||C.defaultLocale,r=this.callDelegateMethod("localizerWillUseLocale",this,n);return this.locale=r||n,this._isInitialized=!0,this.loadMessages(),this}},initWithLocaleAndDelegate:{value:function(e,t){return this.delegate=t,this.initWithLocale(e)}},storesLocale:{value:!1},component:{value:null},_delegate:{value:null},delegate:{set:function(e){!this._delegate&&e&&"object"==typeof e&&(this._delegate=e)},get:function(){return this._delegate}},_isInitialized:{value:!1},isInitialized:{get:function(){return this._isInitialized}},messageFormat:{serializable:!1,value:null},_messages:{value:null},messages:{get:function(){return this._messages},set:function(e){if(this._messages!==e){if(void 0!==e&&null!==e&&"object"!=typeof e)throw new TypeError(e," is not an object");this._messages=e}}},messagesPromise:{serializable:!1,value:null},_locale:{value:null},locale:{get:function(){return this._locale},set:function(e){if(!E.test(e))throw new TypeError("Language tag '"+e+"' is not valid. It must match http://tools.ietf.org/html/rfc5646 (alphanumeric characters separated by hyphens)");if(this._locale!==e){var t=this._locale;if(this._locale=e,this.messageFormat=new i(e),t&&t!==this._locale){var n=this;this.loadMessages().then(function(){n._dispatchLocaleChange(t)})}if(this.storesLocale&&"undefined"!=typeof window&&window.localStorage)try{window.localStorage.setItem(y,e)}catch(r){}}}},_availableLocales:{value:null},availableLocales:{get:function(){return this._availableLocales?this._availableLocales:(this._availableLocales=this.callDelegateMethod("localizerWillPromiseAvailableLocales",this),this._availableLocales||(this._availableLocales=this._manifest.get("files").get(b).get("files").then(function(e){return Object.keys(e)})),this._availableLocales)}},_require:{value:global.mr},require:{serializable:!1,get:function(){return this._require},set:function(e){this._require!==e&&(this.__manifest=null,this._require=e)}},__manifest:{value:null},_manifest:{depends:["require"],get:function(){var e=this.require;return e.packageDescription.manifest===!0?(this.__manifest||(this.__manifest=e.async(O)),this.__manifest):u.reject(new Error("Package has no manifest. "+e.location+'package.json must contain "manifest": true and '+e.location+O+" must exist"))}},loadMessagesTimeout:{value:5e3},loadMessages:{value:function(e,t){if(!this.require)throw new Error("Cannot load messages as",this,"require is not set");"number"!=typeof e&&(e=this.loadMessagesTimeout),this.messages=null;var n=this,r=this.callDelegateMethod("localizerWillLoadMessages",this);return this.hasOwnProperty("loadMessagesTimeout")&&(e=this.loadMessagesTimeout),r=r?r.timeout(e):this._manifest.timeout(e).then(function(e){return n._loadMessageFiles(e.files)}),this.messagesPromise=r.then(function(e){return n._collapseMessages(e)},function(e){throw console.error("Could not load messages for '"+n.locale+"': "+e),e}).then(function(e){return"function"==typeof t&&t(e),e}),this.messagesPromise}},_loadMessageFiles:{value:function(e){var t=this.require;if(!e)return u.reject(new Error(t.location+O+" does not contain a 'files' property"));var n,r,i,o,s=[];if(!(b in e))return u.reject(new Error("Package does not contain a '"+b+"' directory"));for(n=e[b].files,r=this._locale;""!==r;)n.hasOwnProperty(r)&&(i=n[r].files,(o=w+".js")in i||(o=w+".json")in i?s.push(t.async(b+"/"+r+"/"+o)):a.isDebug&&a.debug(this,"Warning: '"+b+"/"+r+"/' does not contain '"+w+".json' or '"+w+".js'")),r=r.substring(0,r.lastIndexOf("-"));if(!s.length)return u.reject(new Error("Could not find any "+w+".json or "+w+".js files"));var l=u.all(s);if(a.isDebug){var c=this;l=l.then(function(e){return a.debug(c,"loaded "+e.length+" message files"),e})}return l}},_collapseMessages:{value:function(e){for(var t={},n=0,r=e.length;n<r;n++){var i=e[n];for(var o in i)i.hasOwnProperty(o)&&(o in t||(t[o]=i[o]))}return this.messages=t,t}},_compiledMessageCache:{value:Object.create(null)},localizeSync:{value:function(e,t){var n,r,o;if(!e&&!t)throw new Error("Key or default message must be truthy, not "+e+" and "+t);if(this._messages&&e in this._messages){if(n=this._messages[e],r=typeof n,"function"===r)return n;if("object"===r){if(!("message"in n))throw new Error(n,"does not contain a 'message' property");n=n.message}}else n=t;if(n||(console.warn("No message or default message for key '"+e+"'"),n=e),n in this._compiledMessageCache)return this._compiledMessageCache[n];var a=this.messageFormat.parse(n);return a.program&&a.program.statements&&1===a.program.statements.length&&"string"===a.program.statements[0].type?(o=function(){return n},o.toString=o):o=new Function("MessageFormat","return "+this.messageFormat.precompile(a))(i),this._compiledMessageCache[n]=o,o}},localize:{value:function(e,t,n,r){n="undefined"==typeof n||n;var i,o=this;if(this._isInitialized)if(this.messagesPromise){var a=function(){var n=o.localizeSync(e,t);return"function"==typeof r&&r(n),n};i=n?this.messagesPromise.then(a,a):this.messagesPromise.then(a)}else i=u.resolve(this.localizeSync(e,t)),i.then(r);else this.initWithLocale(),i=this.messagesPromise.then(function(){return o.localize(e,t,n,r)});return i}},reset:{value:function(){return this.storesLocale&&"undefined"!=typeof window&&window.localStorage&&window.localStorage.removeItem(y),this.initWithLocale(),this._locale}},_dispatchLocaleChangeAsNeeded:{value:function(e,t){return!(!t||null!==t.localizer&&void 0!==t.localizer&&t.localizer!==this||("function"==typeof t.localizerDidChangeLocale&&t.localizerDidChangeLocale(this,e,this._locale),0))}},_dispatchLocaleChange:{value:function(e,t){if(t||(t=this.component||o,this._dispatchLocaleChangeAsNeeded(e,t))){var n=t._childComponents;if(n)for(var r,i=0;i<n.length;i++)r=n[i],this._dispatchLocaleChangeAsNeeded(e,r)&&r._childComponents&&this._dispatchLocaleChange(e,r)}}}},{defaultLocalizer:{value:function(){return g||(g=new C,g.storesLocale=!0),g}},defaultLocalizerWithDelegate:{value:function(e){return this.defaultLocalizer(),g.delegate=e,g}},defaultLocale:{value:"en"}});Object.defineProperty(t,"defaultLocalizer",{get:function(){return C.defaultLocalizer()}});var D;Object.defineProperty(t,"localize",{get:function(){if(!D){var e=C.defaultLocalizer();D=e.bind(e)}return D}});var P=t.Message=r.specialize({constructor:{value:function(){this.addPathChangeListener("localizer.locale",this,"handleLocaleChange")}},init:{value:function(e,t,n){return e&&(this.key=e),t&&(this.defaultMessage=t),n&&(this.data=n),this}},_localizer:{value:null},localizer:{get:function(){return this._localizer||(this._localizer=C.defaultLocalizer()),this._localizer},set:function(e){this._localizer!==e&&(this._localizer=e,this._localize())}},_key:{value:null},key:{get:function(){return this._key},set:function(e){this._key!==e&&(this._key=e,this._localize())}},_defaultMessage:{value:null},defaultMessage:{get:function(){return this._defaultMessage},set:function(e){this._defaultMessage!==e&&(this._defaultMessage=e,this._localize())}},handleLocaleChange:{value:function(){this._key&&this._localizer&&this._localizer.isInitialized&&this._localize()}},_isLocalizeQueued:{value:!1},_localize:{value:function(){if(!this._isLocalizeQueued){this._isLocalizeQueued=!0;var e=this;this._messageFunction=new u(function(t,n){setTimeout(function(){return e._isLocalizeQueued=!1,e._key||e._defaultMessage?void t(e._localizer.localize(e._key,e._defaultMessage)):void t(j)},0)}),this.localized=this._messageFunction.then(function(t){return e._optimizedMessageCallBack(t)})}}},__messageFunction:{value:null},_messageFunction:{set:function(e){this.__messageFunction=e},get:function(){return this.__messageFunction||(this.__messageFunction=u.resolve(j)),this.__messageFunction}},_data:{value:null},data:{get:function(){return this._data||(this._data=new f,this._data.addMapChangeListener(this,"data")),this._data},set:function(e){if(this._data!==e&&e){this._data?(this.data.removeMapChangeListener(this,"data"),this._data.length&&this._data.clear()):this._data=new f;for(var t in e)e.hasOwnProperty(t)&&this.data.set(t,e[t]);this._data.addMapChangeListener(this,"data"),this.handleDataMapChange()}}},__localizedResolved:{value:""},_localizedDeferred:{value:u.resolve()},localized:{get:function(){return this._localize(),this._localizedDeferred},set:function(e){if(e!==this._localized){var t=this;this._localizedDeferred&&(e=u.resolve(e)),e.then(function(e){return t.__localizedResolved=e}),this._localizedDeferred=e}}},handleDataMapChange:{value:function(e){if(this._key){var t=this;this.localized=this._messageFunction.then(function(e){return t._optimizedMessageCallBack(e)})}}},_optimizedMessageCallBack:{value:function(e){return this._data?e(this.data.toObject()):e()}},serializeSelf:{value:function(e){var t={_bindingDescriptors:this._bindingDescriptors};return t.key=this._key,t.defaultMessage=this._defaultMessage,this._localizer!==C.defaultLocalizer()&&(t.localizer=this._localizer),t}},serializeForLocalizations:{value:function(e){var t,n,r={};n=h.getBindings(this),n&&n.get("key")?(r[m]={},this._serializeBinding(this,r[m],n.get("key"),e)):r[m]=this._key,n&&n.defaultMessage?(r[_]={},this._serializeBinding(this,r[_],n.defaultMessage,e)):r[_]=this._defaultMessage;var i=h.getBindings(this.data);t=this.data.toObject();for(var o in t)!t.hasOwnProperty(o)||i&&i[".get('"+o+"')"]||(r.data=r.data||{},r.data[o]=t[o]);for(var a,s,l=i.keys();s=l.next().value;)a=/\.get\('([^']+)'\)/.exec(s)[1],r.data=r.data||{},r.data[a]={},this._serializeBinding(this.data,r.data[a],i.get(s),e);return r}},_serializeBinding:{value:function(e,t,n,r){if(!("serializable"in n)||n.serializable){var i,o=n.sourceSyntax;if(n.source!==e){var a=r.addObjectReference(n.source);i=new v({type:"component",label:a["@"]}),i.components=r,o=d(o,i)}i=new v,i.components=r;var s=p(o,i);n.twoWay?t["<->"]=s:t["<-"]=s,n.converter?t.converter=n.converter:(t.convert=n.convert,t.revert=n.revert),n.trace&&(t.trace=!0)}}}}),T=function(e,t,n,r,i,o){var a=new P;if(i){var s,l,u,h=a._data=new f;for(s in i)i.hasOwnProperty(s)&&(l=i[s],u=typeof l,"string"===u?h.set(s,l):"object"===u&&c.defineBinding(h,".get('"+s+"')",l,{components:o}));h.addMapChangeListener(a,"data")}"object"==typeof n?c.defineBinding(a,"key",n,{components:o}):a.key=n,"object"==typeof r?c.defineBinding(a,"defaultMessage",r,{components:o}):"string"==typeof r&&(a.defaultMessage=r),c.defineBinding(e,t,{"<-":"__localizedResolved",source:a,serializable:!1})};s.defineSerializationUnit("localizations",function(e,t){var n=h.getBindings(t);if(n){var r;for(var i in n)if(n.hasOwnProperty(i)){var o=n[i];if(P.prototype.isPrototypeOf(o.source)){r||(r={});var a=o.source;r[i]=a.serializeForLocalizations(e)}}return r}}),l.defineDeserializationUnit("localizations",function(e,t,n){var r,i,o;for(var s in n)if(n.hasOwnProperty(s)){if(r=n[s],!(m in r)){console.error("localized property '"+s+"' must contain a key property ("+m+"), in ",n[s]);continue}!a.isDebug||_ in r||a.debug(this,"Warning: localized property '"+s+"' does not contain a default message property ("+_+"), in ",t),i=r[m],o=r[_],T(t,s,i,o,r.data,e)}})}}),montageDefine("64d2e12","ui/montage-studio-loader.reel/montage-studio-loader",{dependencies:["../loader.reel"],factory:function(e,t,n){var r=e("../loader.reel").Loader,i="off",o="ani",a="tri",s=0,l=1,u=2;t.MontageStudioLoader=r.specialize({hasTemplate:{value:!0},_state:{value:null},_shouldRotate:{value:!1},animationInterval:{value:3500},minimumFirstLoadingDuration:{value:6e3},state:{set:function(e){this._state!==e&&(this._state=e)},get:function(){return null===this._state&&(this._state=s),this._state}},enterDocument:{value:function(e){r.prototype.enterDocument.call(this,e),e&&this.startAnimation()}},exitDocument:{value:function(){this.state===l&&this.stopAnimation()}},startAnimation:{value:function(){if(this.state!==u){var e=this;this._animationIntervalTimeoutID=setTimeout(function(){e.state!==u&&(e.state=l,e.needsDraw=!0)},this.animationInterval)}}},stopAnimation:{value:function(){this.state===l&&(this._animationIntervalTimeoutID&&(clearTimeout(this._animationIntervalTimeoutID),this._animationIntervalTimeoutID=null),this.state=u,this.needsDraw=!0)}},draw:{value:function(){if(r.prototype.draw.call(this),this.state===l){this._logoTrianglesElement.classList.remove(i),this._logoWtrianglesElement.classList.remove(i),this._logoSVGContainerElement.classList.add(o),this._logoWtrianglesElement.classList.add(o),this._logoLinesElement.classList.add(i);for(var e=document.getElementsByClassName(a),t="t",n=0;n<e.length;n++)e[n].classList.add(t+(n+1))}else this.state===u&&(this._logoTrianglesElement=null,this._logoWtrianglesElement=null,this._logoSVGContainerElement=null,this._logoWtrianglesElement=null,this._logoLinesElement=null,this.element.classList.add(i))}}})}}),montageDefine("64d2e12","core/messageformat",{dependencies:[],factory:function(e,t,n){function r(e,t){var n;if(e&&t&&(r.locale[e]=t),n=e=e||"en",t=t||r.locale[n=r.Utils.getFallbackLocale(e)],!t)throw new Error("Plural Function not found for locale: "+e);this.pluralFunc=t,this.locale=e,this.fallbackLocale=n}r.locale={en:function(e){return 1===e?"one":"other"}},r.SafeString=function(e){this.string=e},r.SafeString.prototype.toString=function(){return this.string.toString()},r.Utils={numSub:function(e,t,n){return e.replace(/^#|[^\\]#/g,function(e){var r=e&&2===e.length?e.charAt(0):"";return r+'" + (function(){ var x = '+t+';\nif( isNaN(x) ){\nthrow new Error("MessageFormat: `"+lastkey_'+n+'+"` isnt a number.");\n}\nreturn x;\n})() + "'})},escapeExpression:function(e){var t={"\n":"\\n",'"':'\\"'},n=/[\n"]/g,i=/[\n"]/,o=function(e){return t[e]||"&amp;"};return e instanceof r.SafeString?e.toString():null===e||e===!1?"":i.test(e)?e.replace(n,o):e},getFallbackLocale:function(e){for(var t=e.indexOf("-")>=0?"-":"_";!r.locale.hasOwnProperty(e);)if(e=e.substring(0,e.lastIndexOf(t)),0===e.length)return null;return e}};var i=function(){var e={parse:function(e,t){function n(e,t,n){for(var r=e,i=n-e.length,o=0;o<i;o++)r=t+r;return r}function r(e){var t,r,i=e.charCodeAt(0);return i<=255?(r="x",t=2):(r="u",t=4),"\\"+r+n(i.toString(16).toUpperCase(),"0",t)}function i(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/[\x80-\uFFFF]/g,r)+'"'}function o(e){T<k||(T>k&&(k=T,A=[]),A.push(e))}function a(){var t="whitespace@"+T,n=S[t];if(n)return T=n.nextPos,n.result;var r;return null!==e.substr(T).match(/^[   \n\r]/)?(r=e.charAt(T),T++):(r=null,x&&o("[  \\n\\r]")),S[t]={nextPos:T,result:r},r}function s(){var e="_@"+T,t=S[e];if(t)return T=t.nextPos,t.result;var n=x;x=!1;for(var r=T,i=[],s=a();null!==s;)i.push(s),s=a();var l,u=null!==i?function(e){return e.join("")}(i):null;return null!==u?l=u:(l=null,T=r),x=n,x&&null===l&&o("whitespace"),S[e]={nextPos:T,result:l},l}function l(){var t="digits@"+T,n=S[t];if(n)return T=n.nextPos,n.result;var r,i=T;null!==e.substr(T).match(/^[0-9]/)?(r=e.charAt(T),T++):(r=null,x&&o("[0-9]"));var a;if(null!==r)for(a=[];null!==r;)a.push(r),null!==e.substr(T).match(/^[0-9]/)?(r=e.charAt(T),T++):(r=null,x&&o("[0-9]"));else a=null;var s,l=null!==a?function(e){return parseInt(e.join(""),10)}(a):null;return null!==l?s=l:(s=null,T=i),S[t]={nextPos:T,result:s},s}function u(){var t="offsetPattern@"+T,n=S[t];if(n)return T=n.nextPos,n.result;var r,i=T,a=T,u=s();if(null!==u){var c;if("offset"===e.substr(T,6)?(c="offset",T+=6):(c=null,x&&o('"offset"')),null!==c){var h=s();if(null!==h){var p;if(":"===e.substr(T,1)?(p=":",T+=1):(p=null,x&&o('":"')),null!==p){var d=s();if(null!==d){var f=l();if(null!==f){var v=s();null!==v?r=[u,c,h,p,d,f,v]:(r=null,T=a)}else r=null,T=a}else r=null,T=a}else r=null,T=a}else r=null,T=a}else r=null,T=a}else r=null,T=a;var g,m=null!==r?function(e){return e}(r[5]):null;return null!==m?g=m:(g=null,T=i),S[t]={nextPos:T,result:g},g}function c(){var t="id@"+T,n=S[t];if(n)return T=n.nextPos,n.result;var r,i=T,a=T,l=s();if(null!==l){var u;if(null!==e.substr(T).match(/^[a-zA-Z$_]/)?(u=e.charAt(T),T++):(u=null,x&&o("[a-zA-Z$_]")),null!==u){var c,h=[];for(null!==e.substr(T).match(/^[^  \n\r,.+={}]/)?(c=e.charAt(T),T++):(c=null,x&&o("[^   \\n\\r,.+={}]"));null!==c;)h.push(c),null!==e.substr(T).match(/^[^  \n\r,.+={}]/)?(c=e.charAt(T),T++):(c=null,x&&o("[^   \\n\\r,.+={}]"));if(null!==h){var p=s();null!==p?r=[l,u,h,p]:(r=null,T=a)}else r=null,T=a}else r=null,T=a}else r=null,T=a;var d,f=null!==r?function(e,t){return e+(t?t.join(""):"")}(r[1],r[2]):null;return null!==f?d=f:(d=null,T=i),S[t]={nextPos:T,result:d},d}function h(){var t="stringKey@"+T,n=S[t];if(n)return T=n.nextPos,n.result;var r,i=T,a=c(),s=null!==a?function(e){return e}(a):null;null!==s?r=s:(r=null,T=i);var u;if(null!==r)u=r;else{var h,p=T,d=T;"="===e.substr(T,1)?(h="=",T+=1):(h=null,x&&o('"="'));var f;if(null!==h){var v=l();null!==v?f=[h,v]:(f=null,T=d)}else f=null,T=d;var g,m=null!==f?function(e){return e}(f[1]):null;null!==m?g=m:(g=null,T=p),u=null!==g?g:null}return S[t]={nextPos:T,result:u},u}function p(){var t="hexDigit@"+T,n=S[t];if(n)return T=n.nextPos,n.result;var r;return null!==e.substr(T).match(/^[0-9a-fA-F]/)?(r=e.charAt(T),T++):(r=null,x&&o("[0-9a-fA-F]")),S[t]={nextPos:T,result:r},r}function d(){var t="char@"+T,n=S[t];if(n)return T=n.nextPos,n.result;var r,i=T;null!==e.substr(T).match(L)?(r=e.charAt(T),T++):(r=null,x&&o(L));var a,s=null!==r?function(e){return e}(r):null;null!==s?a=s:(a=null,T=i);var l;if(null!==a)l=a;else{var u,c=T;"\\#"===e.substr(T,2)?(u="\\#",T+=2):(u=null,x&&o('"\\\\#"'));var h,d=null!==u?function(){return"\\#"}():null;if(null!==d?h=d:(h=null,T=c),null!==h)l=h;else{var f,v=T;"\\{"===e.substr(T,2)?(f="\\{",T+=2):(f=null,x&&o('"\\\\{"'));var g,m=null!==f?function(){return"{"}():null;if(null!==m?g=m:(g=null,T=v),null!==g)l=g;else{var _,y=T;"\\}"===e.substr(T,2)?(_="\\}",T+=2):(_=null,x&&o('"\\\\}"'));var b,w=null!==_?function(){return"}"}():null;if(null!==w?b=w:(b=null,T=y),null!==b)l=b;else{var O,j=T,E=T;"\\u"===e.substr(T,2)?(O="\\u",T+=2):(O=null,x&&o('"\\\\u"'));var C;if(null!==O){var D=p();if(null!==D){var P=p();if(null!==P){var k=p();if(null!==k){var A=p();null!==A?C=[O,D,P,k,A]:(C=null,T=E)}else C=null,T=E}else C=null,T=E}else C=null,T=E}else C=null,T=E;var M,F=null!==C?function(e,t,n,r){return String.fromCharCode(parseInt("0x"+e+t+n+r))}(C[1],C[2],C[3],C[4]):null;null!==F?M=F:(M=null,T=j),l=null!==M?M:null}}}}return S[t]={nextPos:T,result:l},l}function f(){var e="chars@"+T,t=S[e];if(t)return T=t.nextPos,t.result;var n,r=T,i=d();if(null!==i)for(n=[];null!==i;)n.push(i),i=d();else n=null;var o,a=null!==n?function(e){return e.join("")}(n):null;return null!==a?o=a:(o=null,T=r),S[e]={nextPos:T,result:o},o}function v(){var e="string@"+T,t=S[e];if(t)return T=t.nextPos,t.result;var n,r=T,i=T,o=s();if(null!==o){var a,l,u,c=[],h=T,p=s();for(null!==p?(u=f(),null!==u?(a=s(),null!==a?l=[p,u,a]:(l=null,T=h)):(l=null,T=h)):(l=null,T=h);null!==l;)c.push(l),h=T,p=s(),null!==p?(u=f(),null!==u?(a=s(),null!==a?l=[p,u,a]:(l=null,T=h)):(l=null,T=h)):(l=null,T=h);null!==c?n=[o,c]:(n=null,T=i)}else n=null,T=i;var d,v=null!==n?function(e,t){for(var n=[],r=0;r<t.length;++r)for(var i=0;i<t[r].length;++i)n.push(t[r][i]);return{type:"string",val:e+n.join("")}}(n[0],n[1]):null;return null!==v?d=v:(d=null,T=r),S[e]={nextPos:T,result:d},d}function g(){var t="messageFormatElement@"+T,n=S[t];if(n)return T=n.nextPos,n.result;var r,i=T,a=T,s=c();if(null!==s){var l,u=T;","===e.substr(T,1)?(l=",",T+=1):(l=null,x&&o('","'));var h;if(null!==l){var p=P();null!==p?h=[l,p]:(h=null,T=u)}else h=null,T=u;var d=null!==h?h:"";null!==d?r=[s,d]:(r=null,T=a)}else r=null,T=a;var f,v=null!==r?function(e,t){var n={type:"messageFormatElement",argumentIndex:e};return t&&t.length?n.elementFormat=t[1]:n.output=!0,n}(r[0],r[1]):null;return null!==v?f=v:(f=null,T=i),S[t]={nextPos:T,result:f},f}function m(){var t="messageFormatPatternRight@"+T,n=S[t];if(n)return T=n.nextPos,n.result;var r,i=T,a=T;"{"===e.substr(T,1)?(r="{",T+=1):(r=null,x&&o('"{"'));var l;if(null!==r){var u=s();if(null!==u){var c=g();if(null!==c){var h=s();if(null!==h){var p;if("}"===e.substr(T,1)?(p="}",T+=1):(p=null,x&&o('"}"')),null!==p){var d=v();null!==d?l=[r,u,c,h,p,d]:(l=null,T=a)}else l=null,T=a}else l=null,T=a}else l=null,T=a}else l=null,T=a}else l=null,T=a;var f,m=null!==l?function(e,t){var n=[];return e&&n.push(e),t&&t.val&&n.push(t),{type:"messageFormatPatternRight",statements:n}}(l[2],l[5]):null;return null!==m?f=m:(f=null,T=i),S[t]={nextPos:T,result:f},f}function _(){var e="messageFormatPattern@"+T,t=S[e];if(t)return T=t.nextPos,t.result;var n,r=T,i=T,o=v();if(null!==o){for(var a=[],s=m();null!==s;)a.push(s),s=m();null!==a?n=[o,a]:(n=null,T=i)}else n=null,T=i;var l,u=null!==n?function(e,t){var n=[];e&&e.val&&n.push(e);for(var r in t)t.hasOwnProperty(r)&&n.push(t[r]);return{type:"messageFormatPattern",statements:n}}(n[0],n[1]):null;return null!==u?l=u:(l=null,T=r),S[e]={nextPos:T,result:l},l}function y(){var t="pluralForms@"+T,n=S[t];if(n)return T=n.nextPos,n.result;var r,i=T,a=T,l=s();if(null!==l){var u=h();if(null!==u){var c=s();if(null!==c){var p;if("{"===e.substr(T,1)?(p="{",T+=1):(p=null,x&&o('"{"')),null!==p){var d=s();if(null!==d){var f=_();if(null!==f){var v=s();if(null!==v){var g;"}"===e.substr(T,1)?(g="}",T+=1):(g=null,x&&o('"}"')),null!==g?r=[l,u,c,p,d,f,v,g]:(r=null,T=a)}else r=null,T=a}else r=null,T=a}else r=null,T=a}else r=null,T=a}else r=null,T=a}else r=null,T=a}else r=null,T=a;var m,y=null!==r?function(e,t){return{type:"pluralForms",key:e,val:t}}(r[1],r[5]):null;return null!==y?m=y:(m=null,T=i),S[t]={nextPos:T,result:m},m}function b(){var e="selectFormatPattern@"+T,t=S[e];if(t)return T=t.nextPos,t.result;for(var n=T,r=[],i=y();null!==i;)r.push(i),i=y();var o,a=null!==r?function(e){return{type:"selectFormatPattern",pluralForms:e}}(r):null;return null!==a?o=a:(o=null,T=n),S[e]={nextPos:T,result:o},o}function w(){var e="selectStyle@"+T,t=S[e];if(t)return T=t.nextPos,t.result;var n,r=T,i=b(),o=null!==i?function(e){return{type:"selectStyle",val:e}}(i):null;return null!==o?n=o:(n=null,T=r),S[e]={nextPos:T,result:n},n}function O(){var e="pluralFormatPattern@"+T,t=S[e];if(t)return T=t.nextPos,t.result;var n,r=T,i=T,o=u(),a=null!==o?o:"";if(null!==a){for(var s=[],l=y();null!==l;)s.push(l),l=y();null!==s?n=[a,s]:(n=null,T=i)}else n=null,T=i;var c,h=null!==n?function(e,t){
var n={type:"pluralFormatPattern",pluralForms:t};return e?n.offset=e:n.offset=0,n}(n[0],n[1]):null;return null!==h?c=h:(c=null,T=r),S[e]={nextPos:T,result:c},c}function j(){var e="pluralStyle@"+T,t=S[e];if(t)return T=t.nextPos,t.result;var n,r=T,i=O(),o=null!==i?function(e){return{type:"pluralStyle",val:e}}(i):null;return null!==o?n=o:(n=null,T=r),S[e]={nextPos:T,result:n},n}function E(){var e="start@"+T,t=S[e];if(t)return T=t.nextPos,t.result;var n,r=T,i=_(),o=null!==i?function(e){return{type:"program",program:e}}(i):null;return null!==o?n=o:(n=null,T=r),S[e]={nextPos:T,result:n},n}function C(){function t(e){e.sort();for(var t=null,n=[],r=0;r<e.length;r++)e[r]!==t&&(n.push(e[r]),t=e[r]);switch(n.length){case 0:return"end of input";case 1:return n[0];default:return n.slice(0,n.length-1).join(", ")+" or "+n[n.length-1]}}var n=t(A),r=Math.max(T,k),o=r<e.length?i(e.charAt(r)):"end of input";return"Expected "+n+" but "+o+" found."}function D(){for(var t=1,n=1,r=!1,i=0;i<k;i++){var o=e.charAt(i);"\n"===o?(r||t++,n=1,r=!1):"\r"===o|"\u2028"===o||"\u2029"===o?(t++,n=1,r=!0):(n++,r=!1)}return{line:t,column:n}}var P,T=0,x=!0,k=0,A=[],S={},L="^[^{}\\\0-     \n\r]";new RegExp("/"+L+"/"),P=function(){var t="elementFormat@"+T,n=S[t];if(n)return T=n.nextPos,n.result;var r,i=T,a=T,l=s();if(null!==l){var u;if("plural"===e.substr(T,6)?(u="plural",T+=6):(u=null,x&&o('"plural"')),null!==u){var c=s();if(null!==c){var h;if(","===e.substr(T,1)?(h=",",T+=1):(h=null,x&&o('","')),null!==h){var p=s();if(null!==p){var d=j();if(null!==d){var f=s();null!==f?r=[l,u,c,h,p,d,f]:(r=null,T=a)}else r=null,T=a}else r=null,T=a}else r=null,T=a}else r=null,T=a}else r=null,T=a}else r=null,T=a;var v,g=null!==r?function(e,t){return{type:"elementFormat",key:e,val:t.val}}(r[1],r[5]):null;null!==g?v=g:(v=null,T=i);var m,_;if(null!==v)m=v;else{var y=T,b=T,O=s();if(null!==O){var E;if("select"===e.substr(T,6)?(E="select",T+=6):(E=null,x&&o('"select"')),null!==E){var C=s();if(null!==C){var D;if(","===e.substr(T,1)?(D=",",T+=1):(D=null,x&&o('","')),null!==D){var P=s();if(null!==P){var k=w();if(null!==k){var A=s();null!==A?_=[O,E,C,D,P,k,A]:(_=null,T=b)}else _=null,T=b}else _=null,T=b}else _=null,T=b}else _=null,T=b}else _=null,T=b}else _=null,T=b;var L,M=null!==_?function(e,t){return{type:"elementFormat",key:e,val:t.val}}(_[1],_[5]):null;null!==M?L=M:(L=null,T=y),m=null!==L?L:null}return S[t]={nextPos:T,result:m},m};var M={_:s,"char":d,chars:f,digits:l,elementFormat:P,hexDigit:p,id:c,messageFormatElement:g,messageFormatPattern:_,messageFormatPatternRight:m,offsetPattern:u,pluralFormatPattern:O,pluralForms:y,pluralStyle:j,selectFormatPattern:b,selectStyle:w,start:E,string:v,stringKey:h,whitespace:a};if(void 0!==t){if(void 0===M[t])throw new Error("Invalid rule name: "+i(t)+".")}else t="start";var F=M[t]();if(null===F||T!==e.length){var R=D();throw new this.SyntaxError(C(),R.line,R.column)}return F},toSource:function(){return this._source}};return e.SyntaxError=function(e,t,n){this.name="SyntaxError",this.message=e,this.line=t,this.column=n},e.SyntaxError.prototype=Error.prototype,e}();r.prototype.parse=function(){return i.parse.apply(i,arguments)},r.prototype.precompile=function(e){function t(e,a){a=a||{};var s,l,u,c,h="";switch(e.type){case"program":return t(e.program);case"messageFormatPattern":for(l=0;l<e.statements.length;++l)h+=t(e.statements[l],a);return o.begin+h+o.end;case"messageFormatPatternRight":for(l=0;l<e.statements.length;++l)h+=t(e.statements[l],a);return h;case"messageFormatElement":return a.pf_count=a.pf_count||0,h+='if(!d){\nthrow new Error("MessageFormat: No data passed to function.");\n}\n',e.output?h+='r += d["'+e.argumentIndex+'"];\n':(c="lastkey_"+(a.pf_count+1),h+="var "+c+' = "'+e.argumentIndex+'";\n',h+="var k_"+(a.pf_count+1)+"=d["+c+"];\n",h+=t(e.elementFormat,a)),h;case"elementFormat":return"select"===e.key?(h+=t(e.val,a),h+="r += (pf_"+a.pf_count+"[ k_"+(a.pf_count+1)+" ] || pf_"+a.pf_count+'[ "other" ])( d );\n'):"plural"===e.key&&(h+=t(e.val,a),h+="if ( pf_"+a.pf_count+"[ k_"+(a.pf_count+1)+' + "" ] ) {\n',h+="r += pf_"+a.pf_count+"[ k_"+(a.pf_count+1)+' + "" ]( d ); \n',h+="}\nelse {\n",h+="r += (pf_"+a.pf_count+'[ MessageFormat.locale["'+n.fallbackLocale+'"]( k_'+(a.pf_count+1)+" - off_"+a.pf_count+" ) ] || pf_"+a.pf_count+'[ "other" ] )( d );\n',h+="}\n"),h;case"pluralFormatPattern":for(a.pf_count=a.pf_count||0,h+="var off_"+a.pf_count+" = "+e.offset+";\n",h+="var pf_"+a.pf_count+" = { \n",i=!0,l=0;l<e.pluralForms.length;++l)"other"===e.pluralForms[l].key&&(i=!1),u?h+=",\n":u=1,s=JSON.parse(JSON.stringify(a)),s.pf_count++,h+='"'+e.pluralForms[l].key+'" : '+t(e.pluralForms[l].val,s);if(h+="\n};\n",i)throw new Error("No 'other' form found in pluralFormatPattern "+a.pf_count);return h;case"selectFormatPattern":for(a.pf_count=a.pf_count||0,h+="var off_"+a.pf_count+" = 0;\n",h+="var pf_"+a.pf_count+" = { \n",i=!0,l=0;l<e.pluralForms.length;++l)"other"===e.pluralForms[l].key&&(i=!1),u?h+=",\n":u=1,s=JSON.parse(JSON.stringify(a)),s.pf_count++,h+='"'+e.pluralForms[l].key+'" : '+t(e.pluralForms[l].val,s);if(h+="\n};\n",i)throw new Error("No 'other' form found in selectFormatPattern "+a.pf_count);return h;case"string":return'r += "'+r.Utils.numSub(r.Utils.escapeExpression(e.val),"k_"+a.pf_count+" - off_"+(a.pf_count-1),a.pf_count)+'";\n';default:throw new Error("Bad AST type: "+e.type)}}var n=this,i=!1,o={begin:'function(d){\nvar r = "";\n',end:"return r;\n}"};return t(e)},r.prototype.compile=function(e){return new Function("MessageFormat","return "+this.precompile(this.parse(e)))(r)},n.exports=r}}),montageDefine("64d2e12","ui/component",{dependencies:["../core/core","../core/meta/module-object-descriptor","../core/target","../core/template","../core/document-resources","../core/gate","../core/promise","../core/event/event-manager","../core/serialization/alias","../core/drag/drag-manager","../core/logger","../core/logger","../core/logger","../core/logger","../core/logger","collections/weak-map","collections/map","collections/set","../core/application","../core/core","../core/core"],factory:function(e,t,n){function r(e){return e?e._montage_metadata.objectName+":"+Object.hash(e)+" id: "+e.identifier:"NIL"}var i,o,a=e("../core/core").Montage,s=e("../core/meta/module-object-descriptor").ModuleObjectDescriptor.getObjectDescriptorWithModuleId,l=e("../core/target").Target,u=e("../core/template").Template,c=e("../core/document-resources").DocumentResources,h=e("../core/gate").Gate,p=e("../core/promise").Promise,d=e("../core/event/event-manager").defaultEventManager,f=e("../core/serialization/alias").Alias,v=e("../core/drag/drag-manager").DragManager,g=e("../core/logger").logger("component"),m=e("../core/logger").logger("Drawing performance").color.green(),_=e("../core/logger").logger("drawing list").color.blue(),y=e("../core/logger").logger("drawing needsDraw").color.violet(),b=e("../core/logger").logger("drawing").color.blue(),w=e("collections/weak-map"),O=e("collections/map"),j=e("collections/set"),E="data-montage-le-component",C="data-montage-le-arg",D="data-montage-le-arg-begin",P="data-montage-le-arg-end",T=a.specialize({component:{value:null},fromCssClass:{value:null},cssClass:{value:null},toCssClass:{value:null},hasOneFrameDelay:{value:!1},_animationAndTransitionProperties:{value:["-webkit-animation","-moz-animation","-ms-animation","animation","-webkit-transition","-moz-transition","-ms-transition","transition"]},_emptyArray:{value:[]},_parseComputedStyleTimeValue:{value:function(e){var t,n;if("string"!=typeof e||""===e)return this._emptyArray;for(t=e.replace(/s| /g,"").split(","),n=0;n<t.length;n++)t[n]=+t[n];return t}},_getMaxAnimationTime:{value:function(){var e,t,n,r,i,o,a,s=0;if(this.component&&this.component.element){for(e=global.getComputedStyle(this.component.element),o=0;o<this._animationAndTransitionProperties.length;o++)for(t=this._parseComputedStyleTimeValue(e.getPropertyValue(this._animationAndTransitionProperties[o]+"-duration")),n=this._parseComputedStyleTimeValue(e.getPropertyValue(this._animationAndTransitionProperties[o]+"-delay")),i=Math.max(t.length,n.length),a=0;a<i;a++)r="undefined"==typeof t[a]?t[0]||0:t[a],r+="undefined"==typeof n[a]?n[0]||0:n[a],r>s&&(s=r);s>0&&(s+=.3)}return s}},_onAnimationsCompletedTimeout:{value:null},_cancelOnAnimationsCompletedEvent:{value:function(){clearTimeout(this._onAnimationsCompletedTimeout)}},_onAnimationsCompleted:{value:function(e){var t,n=this._getMaxAnimationTime();return n?(t=this,this._cancelOnAnimationsCompletedEvent(),void(this._onAnimationsCompletedTimeout=setTimeout(function(){e.call(t)},1e3*n))):void e.call(this)}},_needsToMeasureAnimationTimeOnNextDraw:{value:!1},_needsToMeasureAnimationTime:{value:!1},handleDidDraw:{value:function(e){this._needsToMeasureAnimationTimeOnNextDraw?(this.fromCssClass&&this.component.classList.remove(this.fromCssClass),this.cssClass&&this.component.classList.add(this.cssClass),this.toCssClass&&this.component.classList.add(this.toCssClass),this._needsToMeasureAnimationTimeOnNextDraw=!1,this._needsToMeasureAnimationTime=!0,this.component.needsDraw=!0):this._needsToMeasureAnimationTime&&(this._onAnimationsCompleted(function(){this._finishedDeferred&&(this._finishedDeferred.resolve(),this._finishedDeferred=null)}),this.component.removeEventListener("didDraw",this,!1),this._needsToMeasureAnimationTime=!1)}},_finishedDeferred:{value:null},finished:{get:function(){return this._finishedDeferred||(this._finishedDeferred=p.pending()),this._finishedDeferred.promise}},play:{value:function(){this.component&&(this._finishedDeferred&&!this._cancelled||(this._cancelled=!1,this._finishedDeferred=p.pending()),this.component.needsDraw=!0,this.fromCssClass?(this.fromCssClass&&this.component.classList.add(this.fromCssClass),this.cssClass&&this.component.classList.remove(this.cssClass),this.toCssClass&&this.component.classList.remove(this.toCssClass),this._needsToMeasureAnimationTime=!1,this._needsToMeasureAnimationTimeOnNextDraw=!0):this.hasOneFrameDelay?(this._needsToMeasureAnimationTime=!1,this._needsToMeasureAnimationTimeOnNextDraw=!0):(this.cssClass&&this.component.classList.add(this.cssClass),this.toCssClass&&this.component.classList.add(this.toCssClass),this._needsToMeasureAnimationTime=!0,this._needsToMeasureAnimationTimeOnNextDraw=!1),this.component.addEventListener("didDraw",this,!1))}},_cancelled:{value:!1},cancel:{value:function(){this._cancelled=!0,this.fromCssClass&&this.component.classList.remove(this.fromCssClass),this.cssClass&&this.component.classList.remove(this.cssClass),this.toCssClass&&this.component.classList.remove(this.toCssClass),this.component.removeEventListener("didDraw",this,!1),this._finishedDeferred&&this._finishedDeferred.reject()}}}),x=t.Component=l.specialize({DOM_ARG_ATTRIBUTE:{value:"data-arg"},drawListLogger:{value:_},delegate:{value:null},_templateObjects:{serializable:!1,value:null},templateObjects:{serializable:!1,get:function(){return this._templateObjects||(this._templateObjects=Object.create(null)),!this._setupTemplateObjectsCompleted&&this._templateDocumentPart&&this._setupTemplateObjects(this._templateDocumentPart.objects),this._templateObjects},set:function(e){this._templateObjects=e}},getResources:{value:function(){if(!this._setupTemplateObjectsCompleted&&this._templateDocumentPart)return this._templateDocumentPart.template.getResources()._resources}},_nextTarget:{value:null},nextTarget:{get:function(){return this._nextTarget||this.parentComponent},set:function(e){this._nextTarget=e}},_ownerDocumentPart:{value:null},_templateDocumentPart:{value:null},_domArguments:{value:void 0},_domArgumentNames:{value:void 0},canDrawGate:{get:function(){return this._canDrawGate||(this._canDrawGate=(new h).initWithDelegate(this),this._canDrawGate.setField("componentTreeLoaded",!1)),this._canDrawGate},enumerable:!1},_blockDrawGate:{value:null},blockDrawGate:{enumerable:!1,get:function(){return this._blockDrawGate||(this._blockDrawGate=(new h).initWithDelegate(this),this._blockDrawGate.setField("element",!1),this._blockDrawGate.setField("drawRequested",!1)),this._blockDrawGate}},_firstDraw:{enumerable:!1,value:!0},_completedFirstDraw:{enumerable:!1,value:!1},originalElement:{value:null},_element:{enumerable:!1,value:null},element:{get:function(){return this._element},set:function(e){if(null===e||void 0===e)return void console.warn("Tried to set element of ",this," to ",e);if(e.component&&e.component!==this)throw new Error("Element "+e+" is already assigned to another component: "+e.component);if(global._montage_le_flag&&e.setAttribute(E,a.getInfoForObject(this).moduleId),this.isDeserializing)this.eventManager.registerEventHandlerForElement(this,e),this._isTemplateInstantiated?this._templateElement||(this._templateElement=e):(this._element=e,!this.blockDrawGate.value&&this._element&&this.blockDrawGate.setField("element",!0));else{if(!this._firstDraw)return void console.error("Cannot change element of ",this," after it has been set");this.eventManager.registerEventHandlerForElement(this,e),this._element=e,!this.blockDrawGate.value&&this._element&&this.blockDrawGate.setField("element",!0)}this._initializeClassListFromElement(e)}},getElementId:{value:function(){var e=this._element;if(e)return e.getAttribute("data-montage-id")}},_initDomArguments:{value:function(){var e,t,n,r,i=this.element;e=i.querySelectorAll("*["+this.DOM_ARG_ATTRIBUTE+"]"),e.length&&(t={});e:for(var o,a=0;o=e[a];a++){for(r=o;(r=r.parentNode)!==i;)if(r.component)continue e;this._findAndDetachComponents(o),o.parentNode.removeChild(o),n=o.getAttribute(this.DOM_ARG_ATTRIBUTE),o.removeAttribute(this.DOM_ARG_ATTRIBUTE),t[n]=o}this._domArguments=t}},_sharedEmptyArray:{value:[]},getDomArgumentNames:{value:function(){return void 0===this._domArgumentNames&&(this._domArgumentNames=this._domArguments?Object.keys(this._domArguments):this._sharedEmptyArray),this._domArgumentNames}},extractDomArgument:{value:function(e){if(this._domArguments){var t;return t=this._domArguments[e],this._domArguments[e]=null,t}return null}},_getTemplateDomArgument:{value:function(e){var t,n,r,i,o,a,s=this._ownerDocumentPart.template;r=s.getElementById(this.getElementId()),t=r.querySelectorAll("*["+this.DOM_ARG_ATTRIBUTE+"='"+e+"']");e:for(var l,u=0;l=t[u];u++){for(n=l;(n=n.parentNode)!==r;)if(i=s.getElementId(n),i&&(o=s.getSerialization(),a=o.getSerializationLabelsWithElements(i),a.length>0))continue e;return l}}},dragManager:{get:function(){return i||(i=new v).initWithComponent(this.rootComponent)}},getTemplateArgumentElement:{value:function(e){if(this._ownerDocumentPart){var t,n,r,i,o,a=this._ownerDocumentPart.template;return global._montage_le_flag&&(t=this.ownerComponent._montage_metadata.moduleId,o=this._montage_metadata.label),"*"===e?(n=a.getElementById(this.getElementId()),r=a.document.createRange(),r.selectNodeContents(n),i=r.cloneContents(),global._montage_le_flag&&n.children.length>0&&this._leTagStarArgument(t,o,i)):(i=this._getTemplateDomArgument(e).cloneNode(!0),i.removeAttribute(this.DOM_ARG_ATTRIBUTE),global._montage_le_flag&&this._leTagNamedArgument(t,o,i,e)),i}}},getTemplateArgumentSerialization:{value:function(e){var t=this._ownerDocumentPart.template;return t._createSerializationWithElementIds(e)}},resolveTemplateArgumentTemplateProperty:{value:function(e){var t,n,r,i,o=e.indexOf(":"),s=e.slice(0,o),l=e.slice(o),u=this._templateDocumentPart;if(a.getInfoForObject(this).label===s)return u&&(r=u.objects[l]),r instanceof f&&(n=u.objects[r.componentLabel],t=r.value.slice(1),i=n.resolveTemplateArgumentTemplateProperty(t),i||(i=t)),i}},setElementWithParentComponent:{value:function(e,t){this._alternateParentComponent=t,this.element!==e&&(this.element=e)}},_application:{value:null},application:{enumerable:!1,get:function(){return this._application||(x.prototype._application=e("../core/application").application)}},eventManager:{enumerable:!1,get:function(){return d}},rootComponent:{enumerable:!1,get:function(){return t.__root__}},elementControllerFromEvent:{enumerable:!1,value:function(e,t){return t}},_alternateParentComponent:{value:null},__parentComponent:{value:null},_parentComponent:{set:function(e){this.__parentComponent=e,this.dispatchOwnPropertyChange("parentComponent",e)},get:function(){return this.__parentComponent}},parentComponent:{enumerable:!1,get:function(){return this._parentComponent}},findParentComponent:{value:function(){var e,t=this.element,n=this.eventManager;if(t){for(;(e=t.parentNode)&&!n.eventHandlerForElement(e);)t=e;return e?n.eventHandlerForElement(e):this._alternateParentComponent}}},querySelectorComponent:{value:function(e){if("string"!=typeof e)throw"querySelectorComponent: Selector needs to be a string.";var t=e.match(/^\s*(?:@([^>\s]+))?(?:\s*(>)?\s*@([^>\s]+)(.*))?$/);if(!t)throw'querySelectorComponent: Syntax error "'+e+'"';var n,r,i,o=this.childComponents,s=t[1],l=(t[2]||" ",t[3]),u=t[4];if(s)for(u=l?"@"+l+u:"",r=0,i;i=o[r];r++){if(s===a.getInfoForObject(i).label)return u?i.querySelectorComponent(u):i;if(n=i.querySelectorComponent(e))return n}else for(r=0,i;i=o[r];r++)if(l===a.getInfoForObject(i).label)return u?i.querySelectorComponent(u):i;return null}},querySelectorAllComponent:{value:function(e,t){if("string"!=typeof e)throw"querySelectorComponent: Selector needs to be a string.";var n=e.match(/^\s*(?:@([^>\s]+))?(?:\s*(>)?\s*@([^>\s]+)(.*))?$/);if(!n)throw'querySelectorComponent: Syntax error "'+e+'"';var r,i,o=this.childComponents,s=n[1],l=(n[2]||" ",n[3]),u=n[4],c=[];if(s)for(u=l?"@"+l+u:"",r=0,i;i=o[r];r++)s!==a.getInfoForObject(i).label||t&&t!==i.ownerComponent?c=c.concat(i.querySelectorAllComponent(e,t)):u?c=c.concat(i.querySelectorAllComponent(u)):c.push(i);else for(r=0,i;i=o[r];r++)l!==a.getInfoForObject(i).label||t&&t!==i.ownerComponent||(u?c=c.concat(i.querySelectorAllComponent(u,t)):c.push(i));return c}},template:{enumerable:!1,value:null},hasTemplate:{enumerable:!1,value:!0},_templateModuleId:{serializable:!1,value:null},_template:{value:null},_treeLevel:{value:0},_addChildComponent:{value:function(e){return this.addChildComponent(e)}},addChildComponent:{value:function(e){this.childComponents.indexOf(e)===-1&&(this.childComponents.push(e),e._parentComponent=this,e._prepareForEnterDocument(),e.needsDraw&&!this.rootComponent.isComponentWaitingNeedsDraw(e)&&e._addToParentsDrawList()),e._shouldBuildIn=!0}},attachToParentComponent:{value:function(){this.detachFromParentComponent(),this._parentComponent=null;var e,t,n=this.findParentComponent();if(n){e=n.childComponents;for(var r=0;t=e[r];r++){var i=t.findParentComponent();i===this&&(n.removeChildComponent(t),i.addChildComponent(t))}n.addChildComponent(this)}}},detachFromParentComponent:{value:function(){var e=this.parentComponent;e&&e.removeChildComponent(this)}},removeChildComponent:{value:function(e){var t=this.childComponents,n=t.indexOf(e);n>-1&&(e._exitDocument(),t.splice(n,1),e._parentComponent=null,e._alternateParentComponent=null,e._addedToDrawList&&(e._addedToDrawList=!1,n=this._drawList.indexOf(e),this._drawList.splice(n,1)),this.rootComponent.removeFromCannotDrawList(e))}},_childComponents:{value:null},childComponents:{enumerable:!1,get:function(){return this._childComponents||(this._childComponents=[])}},_needsEnterDocument:{value:!1},_inDocument:{value:!1},__exitDocument:{value:function(){this.draggable&&this.unregisterDraggable(),this.droppable&&this.unregisterDroppable(),this._inDocument&&"function"==typeof this.exitDocument&&(this.exitDocument(),this._inDocument=!1)}},_exitDocument:{value:function(){var e;this._needsEnterDocument?this._needsEnterDocument=!1:(e=function(t){for(var n,r=t.childComponents,i=0;n=r[i];i++)n._isComponentExpanded&&e(n);t._inDocument&&t.__exitDocument()})(this)}},exitDocument:{value:function(){this.isActiveTarget&&(d.activeTarget=this.nextTarget)}},_prepareForEnterDocument:{value:function(){this._firstDraw?this._needsEnterDocument=!0:(this.needsDraw=!0,this.traverseComponentTree(function(e){return!e._needsEnterDocument&&(e._needsEnterDocument=!0,void(e.needsDraw=!0))}))}},draggable:{value:!1},droppable:{value:!1},ownerComponent:{enumerable:!1,value:null},components:{enumerable:!1,value:{}},_isComponentExpanded:{enumerable:!1,value:!1},_isTemplateLoaded:{enumerable:!1,value:!1},_isTemplateInstantiated:{enumerable:!1,value:!1},cleanupDeletedComponentTree:{value:function(e){e&&this.cancelBindings(),this.needsDraw=!1,this.traverseComponentTree(function(t){e&&t.cancelBindings(),t.needsDraw=!1})}},_newDomContent:{enumerable:!1,value:null},_elementsToAppend:{value:null},domContent:{serializable:!1,get:function(){return this._element?Array.prototype.slice.call(this._element.childNodes,0):null},set:function(e){var t,n,r,i=[];if(this._elementsToAppend||(this._elementsToAppend=[]),this._newDomContent=e,this.needsDraw=!0,null===this._newDomContent&&(this._shouldClearDomContentOnNextDraw=!0),"function"==typeof this.contentWillChange&&this.contentWillChange(e),t=this.childComponents,e)for(this._componentsPendingBuildOut||(this._componentsPendingBuildOut=[]),n=t.length-1;n>=0;n--)this._componentsPendingBuildOut.indexOf(t[n])===-1&&this._componentsPendingBuildOut.push(t[n]);else for(this._componentsPendingBuildOut=[],n=t.length-1;n>=0;n--)t[n]._shouldBuildOut=!0;if(e instanceof Element)this._elementsToAppend.push(e),this._findAndDetachComponents(e,i);else if(e&&e[0])for(n=0;n<e.length;n++)this._elementsToAppend.push(e[n]),this._findAndDetachComponents(e[n],i);for(n=0;r=i[n];n++)this.addChildComponent(r)}},_shouldClearDomContentOnNextDraw:{value:!1},_findAndDetachComponents:{value:function(e,t){var n,r=e.component;if(t||(t=[]),r)r.detachFromParentComponent(),t.push(r);else{n=e.children||e.childNodes;for(var i,o=0;i=n[o];o++)this._findAndDetachComponents(i,t)}return t}},clonesChildComponents:{writable:!1,value:!1},_innerTemplate:{value:null},innerTemplate:{serializable:!1,get:function(){var e,t,n,r,i,o,a,s=this._innerTemplate;if(!s&&(e=this._ownerDocumentPart)){t=e.template,n=this.getElementId(),s=t.createTemplateFromElementContents(n),r=s.getSerialization(),i=r.getExternalObjectLabels(),o=e.objects,a=Object.create(null);for(var l,u=0;l=i[u];u++)a[l]=o[l];s.setInstances(a),this._innerTemplate=s}return s},set:function(e){this._innerTemplate=e}},canDraw:{value:function(){return this._canDraw}},_canDraw:{get:function(){return!this._canDrawGate||this._canDrawGate.value},set:function(e){o.componentCanDraw(this,e)},enumerable:!1},_prepareCanDraw:{enumerable:!1,value:function(){if(!this._isComponentTreeLoaded)return this.loadComponentTree()}},_blocksOwnerComponentDraw:{value:!1},_updateOwnerCanDrawGate:{value:function(){this._blocksOwnerComponentDraw&&this.ownerComponent&&this.ownerComponent.canDrawGate.setField(this,this.canDrawGate.value)}},_isComponentTreeLoaded:{value:!1},shouldLoadComponentTree:{value:!0},_loadComponentTreeDeferred:{value:null},loadComponentTree:{value:function(){if(!this._loadComponentTreeDeferred){this.canDrawGate.setField("componentTreeLoaded",!1),(this.needsDraw||this.hasTemplate)&&(this._canDraw=!1);var e=this;this._loadComponentTreeDeferred=this.expandComponent().then(function(){if(e.hasTemplate||e.shouldLoadComponentTree){var t,n,r=e._childComponents;if(r&&r.length){t=[];for(var i=0;n=r[i];i++)t.push(n.loadComponentTree());return p.all(t)}return p.resolve(null)}}).then(function(){e._isComponentTreeLoaded=!0,e._needsEnterDocument&&(e.needsDraw=!0),e.canDrawGate.setField("componentTreeLoaded",!0)})["catch"](function(e){console.error(e)})}return this._loadComponentTreeDeferred}},traverseComponentTree:{value:function(e,t){function n(){var n,i,o=r.childComponents;if(e&&e(r)===!1)return void(t&&t());if(0===(i=o.length))return void(t&&t());for(var a=function(){0===--i&&t&&t()},s=0;n=o[s];s++)n.traverseComponentTree(e,a)}var r=this;this._isComponentExpanded?n():t&&t()}},_expandComponentPromise:{value:null},expandComponent:{value:function(){if(!this._expandComponentPromise)if(this.hasTemplate){var e=this;this._expandComponentPromise=this._instantiateTemplate().then(function(){e._isComponentExpanded=!0,e._addTemplateStylesIfNeeded(),e.needsDraw=!0})["catch"](function(e){console.error(e)})}else this._isComponentExpanded=!0,this._expandComponentPromise=p.resolve();return this._expandComponentPromise}},_templateObjectDescriptor:{value:{enumerable:!0,configurable:!0}},_setupTemplateObjects:{value:function(e){return this._templateObjects=this._templateObjects||Object.create(null),this._addTemplateObjects(e),this._setupTemplateObjectsCompleted=!0,this._templateObjects}},_setupTemplateObjectsCompleted:{value:!1},_addTemplateObjects:{value:function(e){var t,n,r=this._templateObjectDescriptor,i=this._templateObjects;for(t in e)n=e[t],null!==n&&void 0!==n&&(x.prototype.isPrototypeOf(n)&&n!==this&&n.parentComponent!==this?(r.get=this._makeTemplateObjectGetter(this,t,n),Object.defineProperty(i,t,r)):i[t]=n)}},_makeTemplateObjectGetter:{value:function(e,t,n){var r,i,o,a="@"+t;return function(){if(r)return e.querySelectorAllComponent(a,e);if(i=e.querySelectorAllComponent(a,e),1===i.length)for(o=i[0];o=o.parentComponent;){if(o===e)return Object.defineProperty(this,t,{value:i[0]}),i[0];if(o.clonesChildComponents)break}else if(0===i.length)return n;return r=!0,i}}},_instantiateTemplate:{value:function(){var e=this;return this._loadTemplate().then(function(t){if(!e._element)return p.reject(new Error("Cannot instantiate template without an element.",e));var n=null,r=e._element.ownerDocument;return n||(n=Object.create(null)),n.owner=e,e._isTemplateInstantiated=!0,t.instantiateWithInstances(n,r).then(function(t){t.parentDocumentPart=e._ownerDocumentPart,e._templateDocumentPart=t,t.fragment=null,n=null},function(e){throw new Error(t.getBaseUrl()+":"+e.stack||e)})})}},_templateDidLoad:{value:function(e){this._templateDocumentPart=e,this._templateObjects&&this._setupTemplateObjects(e.objects),this.addOwnPropertyChangeListener("draggable",this),this.addOwnPropertyChangeListener("droppable",this)}},_loadTemplatePromise:{value:null},_loadTemplate:{value:function(){var e;if(!this._loadTemplatePromise){var t=this;e=a.getInfoForObject(this),this._loadTemplatePromise=u.getTemplateWithModuleId(this.templateModuleId,e.require).then(function(e){return t._template=e,t._isTemplateLoaded=!0,e})}return this._loadTemplatePromise}},templateModuleId:{get:function(){return this._templateModuleId||this._getDefaultTemplateModuleId()}},_getDefaultTemplateModuleId:{value:function(){var e,t,n,r;return r=a.getInfoForObject(this),n=r.moduleId,t=n.lastIndexOf("/"),e=n+"/"+n.slice(t===-1?0:t+1,-5)+".html"}},deserializedFromSerialization:{value:function(){this.attachToParentComponent()}},_deserializedFromTemplate:{value:function(e,t,n){a.getInfoForObject(this).label=t,this._ownerDocumentPart=n,this.hasOwnProperty("identifier")||(this.identifier=t),this.ownerComponent||(x.prototype.isPrototypeOf(e)?this.ownerComponent=e:this.ownerComponent=this.rootComponent,this._updateOwnerCanDrawGate()),this._needsDrawInDeserialization&&(this.needsDraw=!0)}},blueprintModuleId:{serializable:!1,enumerable:!1,get:function(){return this.objectDescriptorModuleId}},blueprint:e("../core/core")._objectDescriptorDescriptor,objectDescriptor:e("../core/core")._objectDescriptorDescriptor,objectDescriptorModuleId:{serializable:!1,enumerable:!1,get:function(){var e=a.getInfoForObject(this),t=e&&!e.isInstance?this:Object.getPrototypeOf(this);if(!Object.getOwnPropertyDescriptor(t,"_objectDescriptorModuleId")||!t._objectDescriptorModuleId){e=a.getInfoForObject(t);var n=e.moduleId,r=n.lastIndexOf("/"),i=n.lastIndexOf(".");r=r===-1?0:r+1,i=i===-1?n.length:i,i=i<r?n.length:i;var o;o=i<n.length&&".reel"===n.slice(i,n.length)?n+"/"+n.slice(r,i)+".meta":n.slice(0,i)+".meta",a.defineProperty(t,"_objectDescriptorModuleId",{value:o})}return t._objectDescriptorModuleId}},gateDidBecomeTrue:{value:function(e){e===this._canDrawGate?(this._canDraw=!0,this._updateOwnerCanDrawGate()):e===this._blockDrawGate&&(o.componentBlockDraw(this),this._prepareCanDraw())},enumerable:!1},gateDidBecomeFalse:{value:function(e){e===this._canDrawGate&&this._updateOwnerCanDrawGate()},enumerable:!1},_canDrawGate:{enumerable:!1,value:null},preparedForActivationEvents:{enumerable:!1,value:!1},_arrayObjectPool:{value:{pool:null,size:200,ix:0}},_getArray:{value:function(){if(!this._arrayObjectPool.pool){this._arrayObjectPool.pool=[];for(var e=0;e<this._arrayObjectPool.size;e++)this._arrayObjectPool.pool[e]=[]}return this._arrayObjectPool.ix<this._arrayObjectPool.size?this._arrayObjectPool.pool[this._arrayObjectPool.ix++]:[]}},_disposeArray:{value:function(e){this._arrayObjectPool.ix>0&&(e.length=0,this._arrayObjectPool.pool[--this._arrayObjectPool.ix]=e)}},_drawIfNeeded:{enumerable:!1,value:function(e){var t,n,i,o,a=this._firstDraw;if(this._treeLevel=e,a&&(this.originalElement=this.element),this.needsDraw&&this.rootComponent.addToDrawCycle(this),this._needsEnterDocument&&(this._needsEnterDocument=!1,this._willEnterDocument(),this._enterDocument(a),"function"==typeof this.enterDocument&&this.enterDocument(a)),a&&(this.originalElement=null),null!==this._drawList&&this._drawList.length>0){for(n=this._drawList,this._drawList=this._getArray(),o=n.length,i=0;i<o;i++)t=n[i],t._addedToDrawList=!1,t.canDraw()?t._drawIfNeeded(e+1):b.isDebug&&b.debug(r(t)+" can't draw.");this._disposeArray(n)}}},_updateComponentDom:{value:function(){if(this._firstDraw){if(this._prepareForDraw(),this._composerList)for(var e,t=0,n=this._composerList.length;t<n;t++)e=this._composerList[t],e.lazyLoad||this.loadComposer(e);this._firstDraw=!1}(null!==this._newDomContent||this._shouldClearDomContentOnNextDraw)&&(b.isDebug&&g.debug("Component content changed: component ",this._montage_metadata.objectName,this.identifier," newDomContent",this._newDomContent),this._performDomContentChanges())}},_replaceElementWithTemplate:{enumerable:!1,value:function(){var e,t,n,r,i,o=this.element,a=this._templateElement,s=this.element.attributes;for(n=0;r=s[n];n++)e=r.nodeName,global._montage_le_flag&&e===E?t=r.nodeValue:"id"===e||"data-montage-id"===e?t=r.nodeValue:(i=a.getAttribute(e)||"",t=i?i+("style"===e?"; ":" ")+r.nodeValue:r.nodeValue),a.setAttribute(e,t);this._initializeClassListFromElement(a),o.parentNode?o.parentNode.replaceChild(a,o):this._canDrawOutsideDocument||console.warn("Warning: Trying to replace element ",o," which has no parentNode"),this.eventManager.unregisterEventHandlerForElement(o),this.eventManager.registerEventHandlerForElement(this,a),this._element=a,this._templateElement=null,this._newDomContent&&(this._newDomContent=null,this._shouldClearDomContentOnNextDraw=!1)}},_addTemplateStylesIfNeeded:{value:function(){var e=this._templateDocumentPart;e&&this.rootComponent.addStyleSheetsFromTemplate(e.template)}},_prepareForDraw:{value:function(){g.isDebug&&g.debug(this,"_templateElement: "+this._templateElement);var e;global._montage_le_flag&&(e=this.element.children.length>0),this._initDomArguments(),e&&this._leTagArguments(),this._templateElement&&(this._bindTemplateParametersToArguments(),this._replaceElementWithTemplate())},enumerable:!1},_leTagArguments:{value:function(){if(this!==this.rootComponent){var e=this.ownerComponent._montage_metadata.moduleId,t=this._montage_metadata.label,n=this.getDomArgumentNames();if(n&&0!==n.length)for(var r,i=0;r=n[i];i++)this._leTagNamedArgument(e,t,this._domArguments[r],r);else this._leTagStarArgument(e,t,this.element)}}},_getNodeFirstElement:{value:function(e){var t=e.firstElementChild;if(!t){t=e.firstChild;do if(t.nodeType===Node.ELEMENT_NODE)break;while(t=t.nextSibling)}return t}},_getNodeLastElement:{value:function(e){var t=e.lastElementChild;if(!t){t=e.lastChild;do if(t.nodeType===Node.ELEMENT_NODE)break;while(t=t.previousSibling)}return t}},_leTagStarArgument:{value:function(e,t,n){var r=this._getNodeFirstElement(n),i=this._getNodeLastElement(n);r.setAttribute(D,(r.getAttribute(D)||"")+" "+e+","+t),i.setAttribute(P,(i.getAttribute(P)||"")+" "+e+","+t)}},_leTagNamedArgument:{value:function(e,t,n,r){n.setAttribute(C,e+","+t+","+r)}},_bindTemplateParametersToArguments:{
value:function(){var e,t,n,r,i,o,a,s=this._templateDocumentPart?this._templateDocumentPart.parameters:null,l=this._domArguments;if(n=this._validateTemplateArguments(l,s))throw n;for(var u in s)if(s.hasOwnProperty(u)&&(e=s[u],t=l?l[u]:void 0,"*"===u?0!==this._element.childElementCount||this._element.firstChild&&this._element.firstChild.data&&this._element.firstChild.data.trim()?(o=this._element.ownerDocument.createRange(),o.selectNodeContents(this._element),r=o.extractContents()):e&&e.childElementCount>0?(o=this._element.ownerDocument.createRange(),o.selectNodeContents(e),e.parentNode.replaceChild(o.extractContents(),e)):e.parentNode.removeChild(e):r=t,r)){var c,h;if(r instanceof Element){var p=e.classList,d=r.component?r.component.classList:r.classList;for(c=0,h=p.length;c<h;c++)d.add(p[c])}for(i=this._findAndDetachComponents(r),e.parentNode.replaceChild(r,e),c=0;a=i[c];c++)a.attachToParentComponent()}}},_validateTemplateArguments:{value:function(e,t){var n,r=t?Object.keys(t):void 0;if(r&&0!==r.length){for(n in e)if("*"!==n&&!(n in t))return new Error('"'+n+'" parameter does not exist in '+this.templateModuleId);var i=t["*"];if(i)for(n in t)if("*"!==n&&i.contains(t[n]))return new Error('"'+n+'" parameter cannot be used within an element with the star parameter')}}},prepareForActivationEvents:{enumerable:!1,value:null},_prepareForActivationEvents:{value:function(){if("function"==typeof this.prepareForActivationEvents&&this.prepareForActivationEvents(),this._composerList)for(var e,t=0,n=this._composerList.length;t<n;t++)e=this._composerList[t],e.lazyLoad&&this.loadComposer(e);this.preparedForActivationEvents=!0}},_performDomContentChanges:{value:function(){var e,t,n,r=this._newDomContent;if(r||this._shouldClearDomContentOnNextDraw){for(e=this._element,n=e.childNodes.length-1;n>=0;n--)e.childNodes[n].component||e.removeChild(e.childNodes[n]);if(this._elementsToAppend)for(;this._elementsToAppend.length;)t=this._elementsToAppend.shift(),e.contains(t)||e.appendChild(t);this._newDomContent=null,"function"==typeof this.contentDidChange&&this.contentDidChange(),this._shouldClearDomContentOnNextDraw=!1}}},prepareForDraw:{enumerable:!1,value:null},draw:{enumerable:!1,value:Function.noop},willDraw:{enumerable:!1,value:null},didDraw:{enumerable:!1,value:Function.noop},_addedToDrawList:{value:!1},_addToParentsDrawList:{enumerable:!1,value:function(){if(!this._addedToDrawList){var e=this._parentComponent;e?(e._addToDrawList(this),this.drawListLogger.isDebug&&this.drawListLogger.debug(r(this)+" added to "+r(e)+"'s drawList")):this.drawListLogger.isDebug&&this.drawListLogger.debug(this,"parentComponent is null")}}},_needsDraw:{value:!1},_needsDrawInDeserialization:{value:!1},needsDraw:{enumerable:!1,get:function(){return this._needsDraw},set:function(e){return this.isDeserializing?void(this._needsDrawInDeserialization=!0):(e=!!e,void(this._needsDraw!==e&&(y.isDebug&&y.debug("needsDraw toggled "+e+" for "+this._montage_metadata.objectName),this._needsDraw=e,e&&(this.canDrawGate.value?this._addToParentsDrawList():this.blockDrawGate.setField("drawRequested",!0)))))}},_drawList:{value:null},__addToDrawList:{enumerable:!1,value:function(e){null===this._drawList?(this._drawList=[e],e._addedToDrawList=!0):this._drawList.indexOf(e)===-1&&(this._drawList.push(e),e._addedToDrawList=!0)}},_addToDrawList:{enumerable:!1,value:function(e){this.__addToDrawList(e),this._addToParentsDrawList()}},_templateElement:{enumerable:!1,value:null},surrenderPointer:{value:function(e,t){return!0}},_composerList:{value:null,serializable:!1},composerList:{get:function(){return this._composerList||(this._composerList=[]),this._composerList},serializable:!1},addComposer:{value:function(e){this.addComposerForElement(e,e.element)}},addComposerForElement:{value:function(e,t){e.component=this,e.element=t,this.composerList.push(e),this._firstDraw||(e.lazyLoad?this.preparedForActivationEvents&&this.loadComposer(e):this.loadComposer(e))}},loadComposer:{value:function(e){this._composerList&&this._composerList.indexOf(e)>-1&&l.prototype.loadComposer.call(this,e)}},unloadComposer:{value:function(e){this._composerList&&this._composerList.indexOf(e)>-1&&l.prototype.unloadComposer.call(this,e)}},scheduleComposer:{value:function(e){this.rootComponent.addToComposerList(e)}},removeComposer:{value:function(e){if(this._composerList)for(var t=0,n=this._composerList.length;t<n;t++)if(this._composerList[t]===e){this.unloadComposer(this._composerList[t]),this._composerList.splice(t,1);break}}},clearAllComposers:{value:function(){if(this._composerList){for(var e=this._composerList,t=0,n=e.length;t<n;t++)this.unloadComposer(e[t]);e.length=0}}},localizer:{value:null},_waitForLocalizerMessages:{value:!1},waitForLocalizerMessages:{enumerable:!1,get:function(){return this._waitForLocalizerMessages},set:function(e){if(this._waitForLocalizerMessages!==e)if(e!==!0||this.localizer.messages)this._waitForLocalizerMessages=!1,this.canDrawGate.setField("messages",!0);else{if(!this.localizer)throw"Cannot wait for messages on localizer if it is not set";this._waitForLocalizerMessages=!0,g.debug(this,"waiting for messages from localizer"),this.canDrawGate.setField("messages",!1);var t=this;this.localizer.messagesPromise.then(function(e){g.isDebug&&g.debug(t,"got messages from localizer"),t.canDrawGate.setField("messages",!0)})}}},handleDraggableChange:{value:function(e){e?this.registerDraggable():this.unregisterDraggable()}},handleDroppableChange:{value:function(e){e?this.registerDroppable():this.unregisterDroppable()}},registerDraggable:{value:function(){this.dragManager.registerDraggable(this),this.classList.add("montage-draggable")}},unregisterDraggable:{value:function(){this.dragManager.unregisterDraggable(this),this.classList.remove("montage-draggable")}},registerDroppable:{value:function(){this.dragManager.registerDroppable(this),this.classList.add("montage-droppable")}},unregisterDroppable:{value:function(){this.dragManager.unregisterDroppable(this),this.classList.remove("montage-droppable")}},_draggableContainer:{value:null},draggableContainer:{set:function(e){e&&(e instanceof Element?this._draggableContainer=e:e.element instanceof Element&&(this._draggableContainer=e.element))},get:function(){return this._draggableContainer}},__elementAttributeValues:{value:null},_elementAttributeValues:{get:function(){return this.__elementAttributeValues||(this.__elementAttributeValues={})}},_elementAttributeDescriptors:{value:null},_getElementAttributeDescriptor:{value:function(e){for(var t,n=this;n&&n._elementAttributeDescriptors&&!(t=n._elementAttributeDescriptors[e]);)n=Object.getPrototypeOf(n);return t}},__shouldBuildIn:{value:!0},_shouldBuildIn:{get:function(){return this.__shouldBuildIn},set:function(e){var t;e=!!e,this.__shouldBuildIn=e,e&&(this.parentComponent&&this.parentComponent._componentsPendingBuildOut&&(t=this.parentComponent._componentsPendingBuildOut.indexOf(this),t!==-1&&this.parentComponent._componentsPendingBuildOut.splice(t,1)),this._shouldBuildOut=!1,this._inDocument&&this._buildIn())}},__shouldBuildOut:{value:!1},_shouldBuildOut:{get:function(){return this.__shouldBuildOut},set:function(e){e=!!e,this.__shouldBuildOut=e,e&&(this._shouldBuildIn=!1,this._inDocument&&this._buildOut())}},buildInInitialAnimation:{get:function(){var e=null;return this._activeBuildInAnimation&&"object"==typeof this._activeBuildInAnimation&&"undefined"!=typeof this._activeBuildInAnimation.cssClass&&(e=new T,e.component=this,e.fromCssClass=this._activeBuildInAnimation.fromCssClass,e.cssClass=this._activeBuildInAnimation.cssClass,e.toCssClass=this._activeBuildInAnimation.toCssClass),e}},buildInSwitchAnimation:{get:function(){var e=null;return this._activeBuildInAnimation&&"object"==typeof this._activeBuildInAnimation&&"undefined"!=typeof this._activeBuildInAnimation.cssClass&&(e=new T,e.component=this,e.cssClass=this._activeBuildInAnimation.cssClass,e.toCssClass=this._activeBuildInAnimation.toCssClass),e}},buildOutInitialAnimation:{get:function(){var e=null;return this._activeBuildOutAnimation&&"object"==typeof this._activeBuildOutAnimation&&"undefined"!=typeof this._activeBuildOutAnimation.cssClass&&(e=new T,e.component=this,e.hasOneFrameDelay=!0,e.fromCssClass=this._activeBuildOutAnimation.fromCssClass,e.cssClass=this._activeBuildOutAnimation.cssClass,e.toCssClass=this._activeBuildOutAnimation.toCssClass),e}},buildOutSwitchAnimation:{get:function(){var e=null;return this._activeBuildOutAnimation&&"object"==typeof this._activeBuildOutAnimation&&"undefined"!=typeof this._activeBuildOutAnimation.cssClass&&(e=new T,e.component=this,e.cssClass=this._activeBuildOutAnimation.cssClass,e.toCssClass=this._activeBuildOutAnimation.toCssClass),e}},buildInAnimation:{value:null},buildOutAnimation:{value:null},buildInAnimationOverride:{value:null},buildOutAnimationOverride:{value:null},_activeBuildInAnimation:{value:null},_activeBuildOutAnimation:{value:null},_updateActiveBuildAnimations:{value:function(){this.buildInAnimationOverride?this._activeBuildInAnimation=this.buildInAnimationOverride:this._activeBuildInAnimation=this.buildInAnimation,this.buildOutAnimationOverride?this._activeBuildOutAnimation=this.buildOutAnimationOverride:this._activeBuildOutAnimation=this.buildOutAnimation}},_currentBuildAnimation:{value:null},_buildIn:{value:function(){var e=this;this._currentBuildAnimation&&this._currentBuildAnimation.cancel(),this._element&&this._element.parentNode&&this._element.parentNode.component&&(this._isElementAttachedToParent?this._currentBuildAnimation=this.buildInSwitchAnimation:(this._updateActiveBuildAnimations(),this._currentBuildAnimation=this.buildInInitialAnimation),this._currentBuildAnimation&&(this._currentBuildAnimation.play(),this._currentBuildAnimation.finished.then(function(){e._currentBuildAnimation.cancel(),e._currentBuildAnimation=null,e.dispatchEventNamed("buildInEnd",!0,!0)},function(){})))}},_buildOut:{value:function(){var e=this;this._currentBuildAnimation?(this._currentBuildAnimation.cancel(),this._currentBuildAnimation=this.buildOutSwitchAnimation):(this._updateActiveBuildAnimations(),this._currentBuildAnimation=this.buildOutInitialAnimation),this._element&&this._element.parentNode&&this._element.parentNode.component&&(this._currentBuildAnimation?(this._currentBuildAnimation.play(),this._currentBuildAnimation.finished.then(function(){var t=e.parentComponent;e._currentBuildAnimation.cancel(),e._currentBuildAnimation=null,e.detachFromParentComponent(),e.buildInAnimationOverride=null,e.buildOutAnimationOverride=null,e._element.parentNode.component&&e._element.parentNode.removeChild(e._element),e._isElementAttachedToParent=!1,t.dispatchEventNamed("buildOutEnd",!0,!0)},function(){})):(this.detachFromParentComponent(),this.buildInAnimationOverride=null,this.buildOutAnimationOverride=null,this._isElementAttachedToParent&&(this._element.parentNode&&this._element.parentNode.component&&this._element.parentNode.removeChild(this._element),this._isElementAttachedToParent=!1)))}},_willEnterDocument:{value:function(){var e;e=new CustomEvent("willEnterDocument",{details:{component:this},bubbles:!1}),this.dispatchEvent(e),this._inDocument=!0,this.parentComponent&&this.parentComponent._childWillEnterDocument(),this.__shouldBuildIn&&this._buildIn(),this._isElementAttachedToParent=!0,this.__shouldBuildOut&&this._buildOut()}},_childWillEnterDocument:{value:function(){if(this._componentsPendingBuildOut)for(;this._componentsPendingBuildOut.length;)this._componentsPendingBuildOut.pop()._shouldBuildOut=!0}},_enterDocument:{value:function(e){var t;if(this.draggable&&this.registerDraggable(),this.droppable&&this.registerDroppable(),e){t=this.originalElement;var n,r,i,o,a,s,l;if(n=t.attributes)for(i=n.length,r=0;r<i;r++)o=n[r].name,a=n[r].value,l=this._getElementAttributeDescriptor(o,this),(l||"undefined"!=typeof this[o])&&"undefined"==typeof this._elementAttributeValues[o]&&(this._elementAttributeValues[o]=a,null!==this[o]&&void 0!==this[o]||(this[o]=a));if(l=this._getElementAttributeDescriptor("textContent",this)){var u=t.textContent;"undefined"==typeof this._elementAttributeValues.textContent&&(this._elementAttributeValues.textContent=u,null!==this.textContent&&void 0!==this.textContent||(this.textContent=u))}if(this._elementAttributeDescriptors)for(s in this._elementAttributeDescriptors)if(this._elementAttributeDescriptors.hasOwnProperty(s)){l=this._elementAttributeDescriptors[s];var c="_"+s;null===this[c]&&null!==l&&"value"in l&&(this[c]=l.value)}}}},_draw:{value:function(){var e,t=this.element;if(null!==this.__elementAttributeValues)for(var n in this._elementAttributeValues)if(this._elementAttributeValues.hasOwnProperty(n)){var r=this[n];e=this._getElementAttributeDescriptor(n,this),e&&("boolean"===e.dataType?r===!0?(t[n]=!0,t.setAttribute(n,n.toLowerCase())):(t[n]=!1,t.removeAttribute(n)):"undefined"!=typeof r&&("textContent"===n?t.textContent=r:t.setAttribute(n,r))),delete this._elementAttributeValues[n]}this._drawClassListIntoComponent()}},_classList:{value:null},_classListDirty:{value:!1},classList:{get:function(){return null===this._classList&&(this._classList=new j,this._subscribeToToClassListChanges(),this._initializeClassListFromElement(this.element)),this._classList}},_initializeClassListFromElement:{value:function(e){if(e&&e.classList&&e.classList.length>0){this._classList?this._unsubscribeToClassListChanges&&this._unsubscribeToClassListChanges():this._classList=new j;for(var t=e.classList,n=0,r=t.length;n<r;n++)this._classList.add(t[n]);this._subscribeToToClassListChanges()}}},_unsubscribeToClassListChanges:{value:null},_subscribeToToClassListChanges:{value:function(){this._unsubscribeToClassListChanges=this._classList.addRangeChangeListener(this,"classList")}},handleClassListRangeChange:{value:function(e,t){this._classListDirty=!0,this.needsDraw=!0}},_drawClassListIntoComponent:{value:function(){if(this._classListDirty){for(var e,t=this.element.classList,n=this._classList,r=0,i=t.length;r<i;r++)e=t.item(r),n.has(e)||(t.remove(e),r--,i--);this._classList.forEach(function(e){t.add(e)}),this._classListDirty=!1}}},dispose:{value:function(){this.cancelBindings(),this.detachFromParentComponent(),this._element&&(d.unregisterEventHandlerForElement(this._element),this._element=null),this.childComponents.forEach(function(e){e.dispose()})}},loadUserInterfaceDescriptor:{value:function(t){var n,r,i,o,l,u,c=this;return this.canDrawGate.setField(this.constructor.userInterfaceDescriptorLoadedField,!1),"object"==typeof t&&(l=t.constructor)&&l.objectDescriptorModuleId&&(r=l.objectDescriptorModuleId),n=this.callDelegateMethod("componentWillUseObjectDescriptorModuleIdForObject",this,r,t),n&&(o=a.getInfoForObject(this.delegate),r=n),r?(i=n?s(r,o?o.require:e):l.objectDescriptor,u=i):u=p.resolve(),u=u.then(function(n){var r,i,s=a.getInfoForObject(c),l=s.require.packageDescription.name,u=l+"/"+s.moduleId;return n&&n.userInterfaceDescriptorModules&&(r=n.userInterfaceDescriptorModules[u],r||(r=n.userInterfaceDescriptorModules["*"])),i=c.callDelegateMethod("componentWillUseUserInterfaceDescriptorModuleIdForObject",c,r,t),!n||!r||i!==r&&i?i?(o=o||a.getInfoForObject(c.delegate),(o.require||e).async(i).then(function(e){return e.montageObject})):void 0:r===n.userInterfaceDescriptorModules["*"]?n.userInterfaceDescriptor:n.userInterfaceDescriptors[u]}),u["finally"](function(){c.canDrawGate.setField(c.constructor.userInterfaceDescriptorLoadedField,!0)})}}},{userInterfaceDescriptorLoadedField:{value:"userInterfaceDescriptorLoaded"},addAttributes:{value:function(e){var t,n,r;this.prototype._elementAttributeDescriptors=e;for(n in e)e.hasOwnProperty(n)&&(r=e[n],null===r||"string"==typeof r?(t={value:r,dataType:"string"},e[n]=t):t=r,"undefined"==typeof this[n]&&this.defineAttribute(n,t))}},defineAttributeSetter:{value:function(e,t,n){return function(e,t,n){return function(r,i){var o=this._getElementAttributeDescriptor(e,this);o&&"boolean"===o.dataType&&(r=!(!r&&""!==r)),"undefined"!=typeof r&&this[t]!==r&&(n?n.call(this,r):this[t]=r,this._elementAttributeValues[e]=r,i||(this.needsDraw=!0))}}(e,t,n.set)}},defineAttributeGetter:{value:function(e){return function(e){return function(){return this[e]}}(e)}},defineAttribute:{value:function(e,t){t=t||{};var n="_"+e,r={configurable:"undefined"==typeof t.configurable||t.configurable,enumerable:"undefined"==typeof t.enumerable||t.enumerable,set:this.defineAttributeSetter(e,n,t),get:t.get||this.defineAttributeGetter(n)};this.prototype.hasOwnProperty(n)||a.defineProperty(this.prototype,n,{value:t.value}),a.defineProperty(this.prototype,e,r)}}}),k=x.specialize({constructor:{value:function(){this._drawTree=this._drawTree.bind(this),this._readyToDrawListIndex=new O,this._addedStyleSheetsByTemplate=new w}},init:{value:function(){return this}},needsDraw:{enumerable:!0,get:function(){return!!this._needsDraw},set:function(e){if(this._needsDraw!==e&&(this._needsDraw=!!e,e))for(var t,n=this.childComponents,r=0;t=n[r];r++)y.isDebug&&y.debug(this,"needsDraw = true for: "+t._montage_metadata.exportedSymbol),t.needsDraw=!0}},canDrawGate:{get:function(){return this._canDrawGate||(this._canDrawGate=(new h).initWithDelegate(this))}},_clearNeedsDrawTimeOut:{value:null},_needsDrawList:{value:[]},_cannotDrawList:{value:null},componentBlockDraw:{value:function(e){this._cannotDrawList=this._cannotDrawList?this._cannotDrawList:new j,this._cannotDrawList.add(e),this._clearNeedsDrawTimeOut&&(clearTimeout(this._clearNeedsDrawTimeOut),this._clearNeedsDrawTimeOut=null)}},isComponentWaitingNeedsDraw:{value:function(e){return this._cannotDrawList.has(e)||this._needsDrawList.indexOf(e)>=0}},componentCanDraw:{value:function(e,t){if(t){if(!this._cannotDrawList)return;if(this._cannotDrawList["delete"](e),this._needsDrawList.push(e),0===this._cannotDrawList.size&&this._needsDrawList.length>0&&!this._clearNeedsDrawTimeOut){var n=this;this._clearNeedsDrawTimeOut=setTimeout(function(){n._clearNeedsDrawList()},0)}}else this._clearNeedsDrawTimeOut&&(clearTimeout(this._clearNeedsDrawTimeOut),this._clearNeedsDrawTimeOut=null)}},_clearNeedsDrawList:{value:function(){var e,t,n,r=this._needsDrawList;for(n=r.length,t=0;t<n;t++)e=r[t],(e.needsDraw||e._drawList&&e._drawList.length>0)&&e._addToParentsDrawList();this._clearNeedsDrawTimeOut=null,r.length=0}},removeFromCannotDrawList:{value:function(e){if(this._cannotDrawList&&(this._cannotDrawList["delete"](e),0===this._cannotDrawList.size&&this._needsDrawList.length>0&&!this._clearNeedsDrawTimeOut)){var t=this;this._clearNeedsDrawTimeOut=setTimeout(function(){t._clearNeedsDrawList()},0)}}},_cancelDrawIfScheduled:{value:function(){var e=this.requestedAnimationFrame,t=this.cancelAnimationFrame;null!==e&&(this._frameTime||(g.isDebug&&g.debug(this,"clearing draw"),t?t(e):clearTimeout(e),this.requestedAnimationFrame=null))}},_addToDrawList:{value:function(e){this.__addToDrawList(e),this.drawListLogger.isDebug&&this.drawListLogger.debug(this,this.canDrawGate.value,this.requestedAnimationFrame),this.drawTree()},enumerable:!1},addToComposerList:{value:function(e){this.composerList.push(e),b.isDebug&&b.debug(this,e,"Added to composer list"),this._scheduleComposerRequest=!0,this.drawTree()}},composerListSwap:{get:function(){return this._composerListSwap||(this._composerListSwap=[]),this._composerListSwap}},_composerListSwap:{value:null},_scheduleComposerRequest:{value:!1},requestedAnimationFrame:{value:null,enumerable:!1},requestAnimationFrame:{value:global.requestAnimationFrame||global.webkitRequestAnimationFrame||global.mozRequestAnimationFrame||global.msRequestAnimationFrame,enumerable:!1},cancelAnimationFrame:{value:global.cancelAnimationFrame||global.webkitCancelAnimationFrame||global.mozCancelAnimationFrame||global.msCancelAnimationFrame,enumerable:!1},_frameTime:{value:null},_oldSource:{value:null},_diff:{value:function(e,t){function n(e){return void 0===e||null===e}for(var r={},i={},o=0;o<t.length;o++)n(r[t[o]])&&(r[t[o]]={rows:[],o:null}),r[t[o]].rows.push(o);for(o=0;o<e.length;o++)n(i[e[o]])&&(i[e[o]]={rows:[],n:null}),i[e[o]].rows.push(o);for(o in r)1!==r[o].rows.length||n(i[o])||1!==i[o].rows.length||(t[r[o].rows[0]]={text:t[r[o].rows[0]],row:i[o].rows[0]},e[i[o].rows[0]]={text:e[i[o].rows[0]],row:r[o].rows[0]});for(o=0;o<t.length-1;o++)!n(t[o].text)&&n(t[o+1].text)&&t[o].row+1<e.length&&n(e[t[o].row+1].text)&&t[o+1]===e[t[o].row+1]&&(t[o+1]={text:t[o+1],row:t[o].row+1},e[t[o].row+1]={text:e[t[o].row+1],row:o+1});for(o=t.length-1;o>0;o--)!n(t[o].text)&&n(t[o-1].text)&&t[o].row>0&&n(e[t[o].row-1].text)&&t[o-1]===e[t[o].row-1]&&(t[o-1]={text:t[o-1],row:t[o].row-1},e[t[o].row-1]={text:e[t[o].row-1],row:o-1});return{o:e,n:t}}},_previousDrawDate:{enumerable:!1,value:0},_documentResources:{value:null},_needsStylesheetsDraw:{value:!1},_stylesheets:{value:[]},addStylesheet:{value:function(e){this._stylesheets.push(e),this._needsStylesheetsDraw=!0}},_addedStyleSheetsByTemplate:{value:null},addStyleSheetsFromTemplate:{value:function(e){if(!this._addedStyleSheetsByTemplate.has(e)){for(var t,n=e.getResources(),r=this.element.ownerDocument,i=n.createStylesForDocument(r),o=0;t=i[o];o++)this.addStylesheet(t);this._addedStyleSheetsByTemplate.set(e,!0)}}},__bufferDocumentFragment:{value:null},_bufferDocumentFragment:{get:function(){return this.__bufferDocumentFragment||(this.__bufferDocumentFragment=this._element.ownerDocument.createDocumentFragment())}},drawStylesheets:{value:function(){for(var e,t=this._documentResources,n=this._stylesheets,r=t._document.head,i=this._bufferDocumentFragment;e=n.shift();)t.addStyle(e,i);r.insertBefore(i,r.firstChild),this._needsStylesheetsDraw=!1}},drawTree:{value:function(){if(null===this.requestedAnimationFrame){var e=this.requestAnimationFrame;if(e)this.requestedAnimationFrame=e.call(window,this._drawTree);else{var t=Date.now(),n=17-t+this._previousDrawDate;n<0&&(n=0),this.requestedAnimationFrame=setTimeout(this._drawTree,n),this._previousDrawDate=t+n}this._scheduleComposerRequest=!1}},enumerable:!1},_drawTree:{value:function(e){var t;if(this._needsStylesheetsDraw&&this.drawStylesheets(),!this._documentResources.areStylesLoaded)return m.isDebug&&console.log("Draw Cycle Waiting Stylesheets: ",this._documentResources._expectedStyles.length),this.requestedAnimationFrame=null,void this.drawTree();if(m.isDebug&&(t=window.performance?window.performance.now():Date.now()),this._frameTime=e?e:Date.now(),this._clearNeedsDrawTimeOut&&this._clearNeedsDrawList(),b.isDebug){var n=document.body.innerHTML;if(this._oldSource&&n!==this._oldSource){for(var r=["DOM modified outside of the draw loop"],i=this._diff(this._oldSource.split("\n"),n.split("\n")),o=0;o<i.n.length;o++)if(void 0===i.n[o].text||null===i.n[o].text)r.push("+ "+i.n[o]);else for(var a=i.n[o].row+1;a<i.o.length&&(void 0===i.o[a].text||null===i.o[a].text);a++)r.push("- "+i.o[a]);console.warn(r.join("\n"))}console.group((e?b.toTimeString(new Date(e))+" ":"")+"Draw Fired")}if(this.drawIfNeeded(),m.isDebug){var s;s=window.performance?window.performance.now():Date.now(),console.log("Draw Cycle Time: ",s-t,", Components: ",this._lastDrawComponentsCount)}b.isDebug&&(console.groupEnd(),this._oldSource=document.body.innerHTML),this._frameTime=null,this._scheduleComposerRequest&&this.drawTree()}},_readyToDrawList:{enumerable:!1,value:[]},_readyToDrawListIndex:{enumerable:!1,value:null},addToDrawCycle:{value:function(e){var t=this._readyToDrawListIndex;return t.has(e)?void(b.isDebug&&this!==o&&b.debug(r(this)+" added to the draw cycle twice, this should not happen.")):(this._readyToDrawList.push(e),this._readyToDrawListIndex.set(e,!0),void e._updateComponentDom())}},_lastDrawComponentsCount:{value:null},_sortByLevel:{value:function(e,t){return e._treeLevel-t._treeLevel}},drawIfNeeded:{value:function(){var e,t,n,i,o,a,s=this._readyToDrawList,l=0,u=this._composerList,c=b.isDebug;if(s.length=0,this._readyToDrawListIndex.clear(),u&&(a=u.length)>0){for(this._composerList=this.composerListSwap,t=0;t<a;t++)o=u[t],o.needsFrame=!1,o.frame(this._frameTime);u.length=0,this._composerListSwap=u}for(this._drawIfNeeded(0),n=s.length,c&&console.groupCollapsed("willDraw - "+s.length+(s.length>1?" components.":" component."));l<n;){for(t=l;t<n;t++)e=s[t],"function"==typeof e.willDraw&&e.willDraw(this._frameTime),c&&b.debug("Level "+e._treeLevel+" "+r(e));this._drawIfNeeded(0),l=n,n=s.length}for(c&&(console.groupEnd(),console.group("draw - "+s.length+(s.length>1?" components.":" component."))),s.sort(this._sortByLevel),t=0;t<n;t++)e=s[t],e.needsDraw=!1;for(this.requestedAnimationFrame=null,t=n-1;t>=0;t--)e=s[t],e._draw(this._frameTime),e.draw(this._frameTime),c&&b.debug("Level "+e._treeLevel+" "+r(e));for(c&&(console.groupEnd(),console.groupCollapsed("didDraw - "+s.length+(s.length>1?" components.":" component."))),this._didDrawEvent||(this._didDrawEvent=new CustomEvent("didDraw",{bubbles:!1})),t=0;t<n;t++)e=s[t],e.dispatchEvent(this._didDrawEvent),e.didDraw(this._frameTime),e._completedFirstDraw||(i=document.createEvent("CustomEvent"),i.initCustomEvent("firstDraw",!0,!1,null),e.dispatchEvent(i),e._completedFirstDraw=!0),c&&b.debug("Level "+e._treeLevel+" "+r(e));return this._completedFirstDraw||(i=document.createEvent("CustomEvent"),i.initCustomEvent("firstDraw",!0,!1,null),this.dispatchEvent(i),this._completedFirstDraw=!0),c&&console.groupEnd(),m.isDebug&&(this._lastDrawComponentsCount=s.length),!!s.length}},element:{get:function(){return this._element},set:function(e){d.registerEventHandlerForElement(this,e),this._element=e.documentElement,this._documentResources=c.getInstanceForDocument(e)}},willDraw:{value:function(){this.dragManager.willDraw()}},draw:{value:function(){this.dragManager.draw()}}});t.__root__=o=(new k).init(),x.addAttributes({accesskey:null,contenteditable:null,contextmenu:null,dir:null,draggable:null,dropzone:null,hidden:{dataType:"boolean"},lang:null,spellcheck:null,tabindex:null,title:null})}}),montageDefine("64d2e12","core/messageformat-locale",{dependencies:[],factory:function(e,t,n){t.am=function(e){return 0===e||1===e?"one":"other"},t.ar=function(e){return 0===e?"zero":1===e?"one":2===e?"two":e%100>=3&&e%100<=10&&e===Math.floor(e)?"few":e%100>=11&&e%100<=99&&e===Math.floor(e)?"many":"other"},t.bg=function(e){return 1===e?"one":"other"},t.bn=function(e){return 1===e?"one":"other"},t.br=function(e){return 0===e?"zero":1===e?"one":2===e?"two":3===e?"few":6===e?"many":"other"},t.ca=function(e){return 1===e?"one":"other"},t.cs=function(e){return 1===e?"one":2===e||3===e||4===e?"few":"other"},t.cy=function(e){return 0===e?"zero":1===e?"one":2===e?"two":3===e?"few":6===e?"many":"other"},t.da=function(e){return 1===e?"one":"other"},t.de=function(e){return 1===e?"one":"other"},t.el=function(e){return 1===e?"one":"other"},t.en=function(e){return 1===e?"one":"other"},t.es=function(e){return 1===e?"one":"other"},t.et=function(e){return 1===e?"one":"other"},t.eu=function(e){return 1===e?"one":"other"},t.fa=function(e){return"other"},t.fi=function(e){return 1===e?"one":"other"},t.fil=function(e){return 0===e||1===e?"one":"other"},t.fr=function(e){return e>=0&&e<2?"one":"other"},t.ga=function(e){return 1===e?"one":2===e?"two":"other"},t.gl=function(e){return 1===e?"one":"other"},t.gsw=function(e){return 1===e?"one":"other"},t.gu=function(e){return 1===e?"one":"other"},t.he=function(e){return 1===e?"one":"other"},t.hi=function(e){return 0===e||1===e?"one":"other"},t.hr=function(e){return e%10===1&&e%100!==11?"one":e%10>=2&&e%10<=4&&(e%100<12||e%100>14)&&e===Math.floor(e)?"few":e%10===0||e%10>=5&&e%10<=9||e%100>=11&&e%100<=14&&e===Math.floor(e)?"many":"other"},t.hu=function(e){return"other"},t.id=function(e){return"other"},t["in"]=function(e){return"other"},t.is=function(e){return 1===e?"one":"other"},t.it=function(e){return 1===e?"one":"other"},t.iw=function(e){return 1===e?"one":"other"},t.ja=function(e){return"other"},t.kn=function(e){return"other"},t.ko=function(e){return"other"},t.lag=function(e){return 0===e?"zero":e>0&&e<2?"one":"other"},t.ln=function(e){return 0===e||1===e?"one":"other"},t.lt=function(e){return e%10===1&&(e%100<11||e%100>19)?"one":e%10>=2&&e%10<=9&&(e%100<11||e%100>19)&&e===Math.floor(e)?"few":"other"},t.lv=function(e){return 0===e?"zero":e%10===1&&e%100!==11?"one":"other"},t.mk=function(e){return e%10===1&&11!==e?"one":"other"},t.ml=function(e){return 1===e?"one":"other"},t.mo=function(e){return 1===e?"one":0===e||1!==e&&e%100>=1&&e%100<=19&&e===Math.floor(e)?"few":"other"},t.mr=function(e){return 1===e?"one":"other"},t.ms=function(e){return"other"},t.mt=function(e){return 1===e?"one":0===e||e%100>=2&&e%100<=4&&e===Math.floor(e)?"few":e%100>=11&&e%100<=19&&e===Math.floor(e)?"many":"other"},t.my=function(e){return"other"},t.ne=function(e){return 1===e?"one":"other"},t.nl=function(e){return 1===e?"one":"other"},t.no=function(e){return 1===e?"one":"other"},t.or=function(e){return 1===e?"one":"other"},t.pl=function(e){return 1===e?"one":e%10>=2&&e%10<=4&&(e%100<12||e%100>14)&&e===Math.floor(e)?"few":e%10===0||1!==e&&e%10===1||(e%10>=5&&e%10<=9||e%100>=12&&e%100<=14)&&e===Math.floor(e)?"many":"other"},t.pt=function(e){return 1===e?"one":"other"},t.ro=function(e){return 1===e?"one":0===e||1!==e&&e%100>=1&&e%100<=19&&e===Math.floor(e)?"few":"other"},t.ru=function(e){return e%10===1&&e%100!==11?"one":e%10>=2&&e%10<=4&&(e%100<12||e%100>14)&&e===Math.floor(e)?"few":e%10===0||e%10>=5&&e%10<=9||e%100>=11&&e%100<=14&&e===Math.floor(e)?"many":"other"},t.shi=function(e){return e>=0&&e<=1?"one":e>=2&&e<=10&&e===Math.floor(e)?"few":"other"},t.sk=function(e){return 1===e?"one":2===e||3===e||4===e?"few":"other"},t.sl=function(e){return e%100===1?"one":e%100===2?"two":e%100===3||e%100===4?"few":"other"},t.sq=function(e){return 1===e?"one":"other"},t.sr=function(e){return e%10===1&&e%100!==11?"one":e%10>=2&&e%10<=4&&(e%100<12||e%100>14)&&e===Math.floor(e)?"few":e%10===0||e%10>=5&&e%10<=9||e%100>=11&&e%100<=14&&e===Math.floor(e)?"many":"other"},t.sv=function(e){return 1===e?"one":"other"},t.sw=function(e){return 1===e?"one":"other"},t.ta=function(e){return 1===e?"one":"other"},t.te=function(e){return 1===e?"one":"other"},t.th=function(e){return"other"},t.tl=function(e){return 0===e||1===e?"one":"other"},t.tr=function(e){return"other"},t.uk=function(e){return e%10===1&&e%100!==11?"one":e%10>=2&&e%10<=4&&(e%100<12||e%100>14)&&e===Math.floor(e)?"few":e%10===0||e%10>=5&&e%10<=9||e%100>=11&&e%100<=14&&e===Math.floor(e)?"many":"other"},t.ur=function(e){return 1===e?"one":"other"},t.vi=function(e){return"other"},t.zh=function(e){return"other"}}}),montageDefine("64d2e12","ui/montage-studio-loader.reel/montage-studio-loader.html",{text:'<!DOCTYPE html><html manifest=../../../../manifest.appcache><head><title></title><style>.MontageStudioLoader{opacity:1;width:100%;height:100%;position:absolute;top:0;left:0;background-color:rgba(0,0,0,1);z-index:99999}.MontageStudioLoader.off{transition:all 1s ease-in}@keyframes svg_cont_ani{0%{transform:translate(0,0) scale(.55);opacity:0}1%{transform:translate(0,0) scale(.5);opacity:1}}.svg_cont{width:200px;height:200px;background-color:rgba(0,0,0,1);position:absolute;top:calc(50% - 100px);left:calc(50% - 100px);transform-origin:50% 50%;animation:svg_cont_ani 120s infinite linear;transform:translate(0,0) scale(.5);transition:all .5s ease-in;transform-style:preserve-3d;perspective:1000}.svg_cont,.svg{overflow:visible}.svg,.svg2{position:absolute;top:0;left:0}.svg1,.svg2{transform-origin:50% 50%;transform-style:preserve-3d;perspective:1000;overflow:visible}.svg2_cont{position:absolute;transform:translate(0,0) rotate(0deg)}.svg2_cont,.svg1_cont{width:200px;height:200px;overflow:visible;top:0;left:0;transform-origin:50% 50%;transition:all .5s ease-in}.svg1_cont{position:relative;transform:translate(0,0);transform-style:preserve-3d;perspective:1000}.circle.off,.wtri_{opacity:0}.wtri_{transform-origin:50% 50%;transform:scale(1);transition:all 2s ease-out}@keyframes wtri_f{0%,100%{opacity:1}}@keyframes wtri_l1{0%{opacity:0;transform:translate(calc(642.2px - 281.5px),calc(630.4px - 390px))}100%{opacity:1;transform:translate(0,0)}}@keyframes wtri_l2{0%{opacity:0;transform:translate(calc(-1002.9px + 461.8px),calc(-630.4px + 269.7px))}100%{opacity:1;transform:translate(0,0)}}@keyframes wtri_l3{0%{opacity:0;transform:translate(calc(1002.9px - 822.6px),calc(390px - 269.7px))}100%{opacity:1;transform:translate(0,0)}}@keyframes wtri_l4{0%{opacity:0;transform:translate(calc(-461.8px + 281.5px),calc(-269.7px + 390px))}100%{opacity:1;transform:translate(0,0)}}@keyframes wtri_l5{0%{opacity:0;transform:translate(calc(822.6px - 281.5px),calc(269.7px - 630.4px))}100%{opacity:1;transform:translate(0,0)}}@keyframes wtri_l6{0%{opacity:0;transform:translate(calc(-1002.9px + 642.2px),calc(-390px + 630.4px))}100%{opacity:1;transform:translate(0,0)}}@keyframes wtri_l7{0%{opacity:0;transform:translate(calc(281.5px - 281.5px),calc(390px - 630.4px))}100%{opacity:1;transform:translate(0,0)}}@keyframes wtri_l8{0%{opacity:0;transform:translate(calc(461.8px - 461.8px),calc(-269.7px + 510.2px))}100%{opacity:1;transform:translate(0,0)}}@keyframes wtri_l9{0%{opacity:0;transform:translate(calc(642.2px - 642.2px),calc(390px - 630.4px))}100%{opacity:1;transform:translate(0,0)}}@keyframes wtri_l10{0%{opacity:0;transform:translate(0,calc(-269.7px + 510.2px))}100%{opacity:1;transform:translate(0,0)}}@keyframes wtri_l11{0%{opacity:0;transform:translate(0,calc(390px - 630.4px))}100%{opacity:1;transform:translate(0,0)}}.wtri_.l1{animation:wtri_l1 2s 1 cubic-bezier(1,0,.665,.175)forwards;animation-delay:0s}.wtri_.l1,.wtri_.l2{transform:translate(0,0)}.wtri_.l2{animation:wtri_l2 2s 1 cubic-bezier(1,0,.665,.175)forwards;animation-delay:.1s}.wtri_.l3{animation:wtri_l3 2s 1 cubic-bezier(1,0,.665,.175)forwards;animation-delay:.3s}.wtri_.l3,.wtri_.l4{transform:translate(0,0)}.wtri_.l4{animation:wtri_l4 2s 1 cubic-bezier(1,0,.665,.175)forwards;animation-delay:.4s}.wtri_.l5{animation:wtri_l5 2s 1 cubic-bezier(1,0,.665,.175)forwards;animation-delay:.5s}.wtri_.l5,.wtri_.l6{transform:translate(0,0)}.wtri_.l6{animation:wtri_l6 2s 1 cubic-bezier(1,0,.665,.175)forwards;animation-delay:.6s}.wtri_.l7{animation:wtri_l7 2s 1 cubic-bezier(1,0,.665,.175)forwards;animation-delay:.7s}.wtri_.l7,.wtri_.l8{transform:translate(0,0)}.wtri_.l8{animation:wtri_l8 2s 1 cubic-bezier(1,0,.665,.175)forwards;animation-delay:.8s}.wtri_.l9{animation:wtri_l9 2s 1 cubic-bezier(1,0,.665,.175)forwards;animation-delay:.9s}.wtri_.l9,.wtri_.l10{transform:translate(0,0)}.wtri_.l10{animation:wtri_l10 2s 1 cubic-bezier(1,0,.665,.175)forwards;animation-delay:1s}.wtri_.l11{transform:translate(0,0);animation:wtri_l11 2s 1 cubic-bezier(1,0,.665,.175)forwards;animation-delay:1.1s}.wtri{opacity:1;transform-origin:50% 50%;transform:scale(1)}.wtri,.wtri.off{transition:all .5s ease-out}.wtri.off{opacity:0;transform:scale(.1)}.tri{opacity:0;transform-origin:50% 50%;transform:scale(.25)}.tri,.tri.on{transition:all .5s ease-out}.tri.on{opacity:1;transform:scale(1)}@keyframes trigrow_1{0%{opacity:0;transform:scale(.25)}20%,70%{opacity:1;transform:scale(1)}90%,100%{opacity:0;transform:scale(.25)}}@keyframes trigrow_2{0%,4%{opacity:0;transform:scale(.25)}24%,72%{opacity:1;transform:scale(1)}92%,100%{opacity:0;transform:scale(.25)}}@keyframes trigrow_3{0%,8%{opacity:0;transform:scale(.25)}28%,74%{opacity:1;transform:scale(1)}94%,100%{opacity:0;transform:scale(.25)}}@keyframes trigrow_4{0%,12%{opacity:0;transform:scale(.25)}32%,76%{opacity:1;transform:scale(1)}96%,100%{opacity:0;transform:scale(.25)}}@keyframes trigrow_5{0%,16%{opacity:0;transform:scale(.25)}36%,78%{opacity:1;transform:scale(1)}98%,100%{opacity:0;transform:scale(.25)}}@keyframes trigrow_6{0%,20%{opacity:0;transform:scale(.25)}40%,80%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.25)}}@keyframes trigrow_7{0%,24%{opacity:0;transform:scale(.25)}44%,82%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.25)}}@keyframes trigrow_8{0%,28%{opacity:0;transform:scale(.25)}48%,84%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.25)}}@keyframes trigrow{0%{opacity:0;transform:scale(.25)}100%{opacity:1;transform:scale(1)}}.tri.t1{animation:trigrow_1 5s infinite ease-out}.tri.t2{animation:trigrow_2 5s infinite ease-out}.tri.t3{animation:trigrow_3 5s infinite ease-out}.tri.t4{animation:trigrow_4 5s infinite ease-out}.tri.t5{animation:trigrow_5 5s infinite ease-out}.tri.t6{animation:trigrow_6 5s infinite ease-out}.tri.t7{animation:trigrow_7 5s infinite ease-out}.tri.t8{animation:trigrow_8 5s infinite ease-out}@keyframes glower_ani{0%{opacity:.6;transform:rotate(0deg)}50%{opacity:.2;transform:rotate(180deg)}100%{opacity:.6;transform:rotate(0deg)}}.glower{width:100%;height:100%;opacity:.6;border-radius:50%;box-shadow:inset 0 0 50px #fff,inset 20px 0 80px #f0f,inset -20px 0 80px #0ff,inset 20px 0 300px #f0f,inset -20px 0 300px #0ff,0 0 50px #fff,-10px 0 80px #f0f,10px 0 80px #0ff;transition:all 2s linear;transform-origin:50% 50%;transform:rotate(0deg);animation:glower_ani 4s infinite linear}.tri.off{opacity:0;transition:all .5s ease-in}.mslogo_circle{cursor:pointer;opacity:1}.mslogo_circle.off{opacity:0}@keyframes mslogo_ms_ani{0%,20%{opacity:0;transform:translate(0,-10px) scale(1.5)}100%{opacity:1;transform:translate(0,-10px) scale(1)}}.mslogo_ms{opacity:1;cursor:pointer;transition:all .5s ease-in;transform-origin:50% 50%;transform:translate(0,-10px) scale(1);animation-name:mslogo_ms_ani;animation-duration:4s}.mslogo_ms.off{opacity:0;transform-origin:50% 50%;transform:scale(2)}.mslogo_ms.off,.mslogo_wirelogo{transition:all .5s ease-in;cursor:pointer}.mslogo_wirelogo{transform-origin:50% 0%;transform:translate(-8px,140px);opacity:1}.mslogo_wirelogo.off{opacity:0}@keyframes mslogo_wtriangles_ani{0%{opacity:.25}0%,10%,40%{transform:translate3d(-8px,-20px,100px)}10%,40%{opacity:.5}50%,60%,80%,92%{opacity:0}50%,60%,80%,92%,100%{transform:translate3d(-8px,-20px,100px)}100%{opacity:.25}}.mslogo_wtriangles{opacity:1;border:1px solid #fff;transition:all 1s ease-in;transform:translate3d(-8px,-20px,100px) rotateY(0deg);transform-origin:50% 50%;cursor:pointer}.mslogo_wtriangles.ani{animation:mslogo_wtriangles_ani 5s infinite}.mslogo_wtriangles.off{opacity:0;transition:all 1s ease-in;transform:translate3d(-8px,-20px,0)}@keyframes mslogo_triangles_ani{0%,40%,60%,80%,100%{opacity:1;transform:translate3d(-8px,-20px,100px)}}.mslogo_triangles{opacity:1;transform:translate3d(-8px,-20px,100px);transform-origin:50% 50%;cursor:pointer}.mslogo_triangles.ani{animation:mslogo_triangles_ani 5s infinite}@keyframes mslogo_tri_lines_ani1{0%,50%,100%{transform:translate3d(-8px,-20px,20px)}}@keyframes mslogo_tri_lines_ani2{0%,50%,100%{transform:translate3d(-8px,-20px,0)}}.mslogo_tri_lines{opacity:1;transition:all 2s ease-in;transform:translate3d(-8px,-20px,100px);perspective:50em;transform-style:preserve-3d;transform-origin:50% 50%;cursor:pointer}.mslogo_tri_lines.off{opacity:0;transition:all 2s ease-in;transform:translate3d(-8px,-20px,0)}#line_1{opacity:0;transition:all .5s ease-in;transform-origin:50% 0%;transform:scale(5) translate(-200px,0)}#line_1.frame1{opacity:1;transition:all 1s ease-in;transform:scale(1) translate(0,0)}#line_2{opacity:0;transition:all .5s ease-in;transform-origin:50% 0%;transform:scale(5) translate(-200px,0)}#line_2.frame1{opacity:1;transition:all 1s ease-in;transform:scale(1) translate(0,0)}#line_3{opacity:0;transition:all .5s ease-in;transform-origin:50% 0%;transform:scale(5) translate(-200px,0)}#line_3.frame1{opacity:1;transition:all 1s ease-in;transform:scale(1) translate(0,0)}#line_4{opacity:0;transition:all .5s ease-in;transform-origin:50% 0%;transform:scale(5) translate(-200px,0)}#line_4.frame1{opacity:1;transition:all 1s ease-in;transform:scale(1) translate(0,0)}#crafted_c,#crafted_r,#crafted_a,#crafted_f,#crafted_t,#crafted_e,#crafted_d,#with_w,#with_i,#with_t,#with_h{opacity:0;transition:all .5s ease-in;cursor:pointer}#crafted_c.frame2,#crafted_r.frame2,#crafted_a.frame2,#crafted_f.frame2,#crafted_t.frame2,#crafted_e.frame2,#crafted_d.frame2,#with_w.frame2,#with_i.frame2,#with_t.frame2,#with_h.frame2{opacity:1;transition:all .2s ease-in}.st0{stroke-width:200;stroke-linejoin:round;stroke-miterlimit:10}.st0,.st1{stroke:rgba(255,255,255,.025)}.st1{stroke-width:190}.st1,.st2{stroke-linejoin:round;stroke-miterlimit:10}.st2{stroke-width:180}.st2,.st3{stroke:rgba(255,255,255,.03)}.st3{stroke-width:170}.st3,.st4{stroke-linejoin:round;stroke-miterlimit:10}.st4{stroke-width:160}.st4,.st5{stroke:rgba(255,255,255,.035)}.st5{stroke-width:150}.st5,.st6{stroke-linejoin:round;stroke-miterlimit:10}.st6{stroke-width:140}.st6,.st7{stroke:rgba(255,255,255,.04)}.st7{stroke-width:130}.st7,.st8{stroke-linejoin:round;stroke-miterlimit:10}.st8{stroke-width:120}.st8,.st9{stroke:rgba(255,255,255,.045)}.st9{stroke-width:110}.st9,.st10{stroke-linejoin:round;stroke-miterlimit:10}.st10{stroke:rgba(255,255,255,.05);stroke-width:100}.st11{stroke:rgba(255,255,255,.06);stroke-width:90}.st11,.st12{stroke-linejoin:round;stroke-miterlimit:10}.st12{stroke:rgba(255,255,255,.07);stroke-width:80}.st13{stroke:rgba(255,255,255,.08);stroke-width:70}.st13,.st14{stroke-linejoin:round;stroke-miterlimit:10}.st14{stroke:rgba(255,255,255,.1);stroke-width:60}.st15{stroke:rgba(255,255,255,.15);stroke-width:50}.st15,.st16{stroke-linejoin:round;stroke-miterlimit:10}.st16{stroke:rgba(255,255,255,.2);stroke-width:40}.st17{stroke:rgba(255,255,255,.25);stroke-width:30}.st17,.st18{stroke-linejoin:round;stroke-miterlimit:10}.st18{stroke:rgba(255,255,255,.3);stroke-width:20}.st19{stroke:rgba(255,255,255,.35);stroke-width:10}.st19,.st20{stroke-linejoin:round;stroke-miterlimit:10}.st20{stroke:rgba(255,255,255,.4);stroke-width:5}.rects{opacity:1;fill:rgba(255,200,160,1);transform-origin:50% 50%;transform:translate(-580px,580px)}.rects.off{opacity:0;transition:all .6s ease-in}.circles{opacity:1;fill:rgba(255,200,160,1);transform-origin:50% 50%;transform:translate(-580px,580px) scale(1)}.circles.off{opacity:0;transition:all .6s ease-in}.comet{opacity:.2;fill:rgba(255,200,160,1);transform-origin:50% 50%;transform:translate(-580px,580px) scale(.95);transition:all .1s ease-in}.comet.off{opacity:0;transition:all 1s ease-in}.gear{fill:url(packages/montage@64d2e12/ui/montage-studio-loader.reel/montage-studio-loader.html#gear_grad);opacity:1;transform-origin:50% 50%;transform:translate(-580px,580px)}.gear.off{opacity:0}.glowtrans{opacity:0;transform-origin:50% 50%;transform:translate(-328px,238.2px);transition:all .5s ease-in}.glowtrans.off{opacity:0}</style><script type=text/montage-serialization>{"owner":{"values":{"element":{"#":"owner"},"_logoSVGContainerElement":{"#":"logo-svg-container"},"_logoTrianglesElement":{"#":"ms-logo-triangles"},"_logoWtrianglesElement":{"#":"ms-logo-wtriangles"},"_logoLinesElement":{"#":"ms-logo-lines"}}}}</script></head><body><div data-montage-id=owner class=MontageStudioLoader><div class=svg_cont><div class=svg1_cont><div class=glower></div><svg version=1.1 class=svg xmlns=http://www.w3.org/2000/svg x=0px y=0px viewBox="0 0 1268.2 1268.2" enable-background="new 0 0 1268.2 1268.2" xml:space=preserve><circle class=mslogo_circle id=circle ifill=#333333 cx=634.1 cy=634.1 r=634.1></circle><g id=gear_cont transform=translate(-90.71378,-123.07497)><g id=g11 transform=translate(-331.78622,98.676973)><radialgradient id=gear_grad cx=1641.4827 cy=73.3868 r=601.0833 gradientUnits=userSpaceOnUse><stop offset=0.5 style=stop-color:#000000></stop><stop offset=1 style=stop-color:#666666></stop></radialgradient><path id=gear class="gear off" d="M2143.4,73.4c0-16-0.8-31.7-2.3-47.3l101.5-40.6c-4.6-31.1-11.6-61.5-20.8-90.8l-109.3,7\n                                c-11.2-29.9-25.1-58.5-41.6-85.4l73.5-80.1c-17.7-25.8-37.4-50.1-58.8-72.8l-95.4,53.2c-22.9-21.9-47.9-41.7-74.7-59l31.2-103.9\n                                c-27-15.6-55.3-29.1-84.8-40.5l-62.7,88.9c-29.9-9.8-61.1-16.9-93.3-21l-17.5-107c-15.5-1.2-31.2-1.8-47.1-1.8\n                                c-15.8,0-31.6,0.6-47.1,1.8l-17.5,107c-32.2,4.1-63.3,11.2-93.3,21l-62.7-88.9c-29.5,11.4-57.8,24.9-84.8,40.5l31.2,103.9\n                                c-26.8,17.3-51.8,37.1-74.7,59l-95.4-53.2c-21.4,22.7-41.1,47-58.8,72.8l73.6,80.1c-16.5,26.9-30.4,55.5-41.6,85.4l-109.3-7\n                                c-9.2,29.4-16.2,59.7-20.8,90.8l101.5,40.6c-1.5,15.6-2.3,31.4-2.3,47.3s0.8,31.7,2.3,47.3l-101.5,40.6\n                                c4.6,31.1,11.6,61.5,20.8,90.8l109.3-7c11.2,29.9,25.1,58.5,41.6,85.3l-73.6,80.1c17.7,25.8,37.4,50.1,58.8,72.8l95.4-53.2\n                                c22.9,21.9,47.9,41.7,74.7,59l-31.2,103.9c27,15.6,55.3,29.1,84.8,40.5l62.7-88.9c29.9,9.8,61.1,16.9,93.3,21l17.5,107\n                                c15.5,1.2,31.2,1.8,47.1,1.8c15.8,0,31.5-0.6,47.1-1.8l17.5-107c32.1-4.1,63.3-11.2,93.3-21l62.7,88.9\n                                c29.5-11.4,57.8-24.9,84.8-40.5l-31.2-103.9c26.8-17.3,51.8-37.1,74.7-59l95.4,53.2c21.4-22.7,41.1-47,58.8-72.8l-73.6-80.1\n                                c16.5-26.9,30.4-55.4,41.6-85.3l109.3,7c9.2-29.4,16.2-59.7,20.8-90.8L2141,120.7C2142.5,105.1,2143.4,89.3,2143.4,73.4z"></path></g></g><circle class="mslogo_circle off" id=circle2 fill=#000000 cx=634.1 cy=634.1 r=500></circle><g class=mslogo_ms id=montage_studio><polygon id=montage_m fill=#FFFFFF points="140.1,766.3 180.1,822.2 185.9,822.2 225,767.9 225,834.6 247.2,834.6\n                            247.2,731.3 228,731.3 184.7,793.8 140.3,731.3 120.2,731.3 120.2,834.6 140,834.6 \t"></polygon><path id=montage_o fill=#FFFFFF d="M304.5,815h78.3v-65.4h-78.3V815z M283.1,755.6c0-9.6,1.8-16.1,5.5-19.4\n                            c3.6-3.3,10.3-5,20.2-5h70.4c9.9,0,16.6,1.7,20.2,5c3.6,3.3,5.4,9.8,5.4,19.4V810c0,9.6-1.8,16.1-5.4,19.4c-3.6,3.3-10.3,5-20.2,5\n                            h-70.4c-9.9,0-16.6-1.7-20.2-5c-3.7-3.3-5.5-9.8-5.5-19.4V755.6z"></path><polygon id=montage_n fill=#FFFFFF points="548.7,800.7 463.1,731.2 446.7,731.2 446.7,834.4 468.3,834.4 468.3,764.4\n                            553.9,834.4 570.3,834.4 570.3,731.2 548.7,731.2 \t"></polygon><polygon id=montage_t fill=#FFFFFF points="671,749.6 671,834.4 647,834.4 647,749.6 599.6,749.6 599.6,731.2 718.6,731.2\n                            718.6,749.6 \t"></polygon><path id=montage_a fill=#FFFFFF d="M766.1,793.2h45.2l-22.2-42L766.1,793.2z M719.8,834.4l58.4-103.3h23.2l59.2,103.3h-27\n                            l-12.4-22.6h-65.4l-12,22.6H719.8z"></path><path id=montage_g fill=#FFFFFF d="M988,749.6h-75V815h75v-23h-35v-17.6h58.4V810c0,9.6-1.8,16.1-5.4,19.4\n                            c-3.6,3.3-10.3,5-20.2,5h-71.2c-9.9,0-16.6-1.7-20.2-5c-3.6-3.3-5.4-9.8-5.4-19.4v-54.4c0-9.6,1.8-16.1,5.4-19.4\n                            c3.6-3.3,10.4-5,20.2-5h71.2c9.6,0,16.3,1.6,20,4.9c3.7,3.3,5.6,9.4,5.6,18.5v2.4l-23.4,2.7V749.6z"></path><polygon id=montage_e fill=#FFFFFF points="1060.9,834.4 1060.9,731.2 1166.6,731.2 1166.6,748.8 1084.9,748.8 1084.9,774.3 1132.5,774.3 1132.5,791.9 1084.9,791.9 1084.9,815 1172.9,815 1172.9,834.4 \t"></polygon><path id=studio_s fill=#FFFFFF d="M396.1,914.6v14.6h44c12.8,0,17,3.3,17,16.1v9.4c0,12.8-4.2,16.1-17,16.1h-42.3\n                            c-12.8,0-17-3.3-17-16.1v-1.8l14-1.9v7h48.4v-15.6h-44c-12.8,0-16.9-3.3-16.9-16.1v-7.5c0-12.8,4.1-16.1,16.9-16.1h40.2\n                            c12.1,0,16.9,3.2,16.9,14.9v1.5l-14,2v-6.5H396.1z"></path><polygon id=studio_t fill=#FFFFFF points="520.9,970.7 505.1,970.7 505.1,914.8 473.8,914.8 473.8,902.7 552.3,902.7 552.3,914.8 520.9,914.8 \t"></polygon><path id=studio_u fill=#FFFFFF d="M586.1,958h45.1v-55.2H647v51.9c0,12.8-4.1,16.1-16.9,16.1h-43 c-12.8,0-16.9-3.3-16.9-16.1v-51.9h15.8V958z"></path><path id=studio_d fill=#FFFFFF d="M714.2,958c20,0,30.1-5,30.1-21.9c0-13.8-7.5-21.2-22.4-21.2h-28.1V958H714.2z M677.9,902.7h43.8c25.5,0,38.9,12.5,38.9,33.6c0,12.8-5.5,23.3-15,29.1c-6.6,4.1-15.8,5.3-28,5.3h-39.7V902.7z"></path><rect id=studio_i x=785.2 y=902.7 fill=#FFFFFF width=15 height=68></rect><path id=studio_o fill=#FFFFFF d="M896.9,914.8h-52.2V958h52.2V914.8z M845.7,902.7h50.1c12.8,0,16.9,3.3,16.9,16.1v35.9 c0,12.8-4.1,16.1-16.9,16.1h-50.1c-12.8,0-16.9-3.3-16.9-16.1v-35.9C828.9,906,833,902.7,845.7,902.7"></path><path id=trade_t fill=#FFFFFF d=M937.2,916.5h-1.5v-12h-4.5v-1.4h10.5v1.4h-4.5V916.5z></path><path id=trade_m fill=#FFFFFF d="M950.9,912.8L950.9,912.8l-5-7.2v10.8h-1.5v-13.4h1.5l4.9,7.3l4.9-7.3h1.5v13.4h-1.5 v-10.9L950.9,912.8z"></path></g><g id=Layer_2><lineargradient id=line_1_1_ gradientUnits=userSpaceOnUse x1=147.1909 y1=728.1639 x2=1104.3575 y2=728.1639><stop offset=0 style=stop-color:#FFFFFF;stop-opacity:0></stop><stop offset=0.2527 style=stop-color:#FFFFFF;stop-opacity:0.5></stop><stop offset=0.7473 style=stop-color:#FFFFFF;stop-opacity:0.5></stop><stop offset=1 style=stop-color:#FEFEFE;stop-opacity:0></stop></lineargradient><rect id=line_1 x=147.2 y=725.2 fill-rule=evenodd clip-rule=evenodd fill=url(#line_1_1_) width=957.2 height=6></rect><lineargradient id=line_2_1_ gradientUnits=userSpaceOnUse x1=179.8575 y1=837.1639 x2=1071.6908 y2=837.1639><stop offset=0 style=stop-color:#FFFFFF;stop-opacity:0></stop><stop offset=0.2527 style=stop-color:#FFFFFF;stop-opacity:0.5></stop><stop offset=0.7473 style=stop-color:#FFFFFF;stop-opacity:0.5></stop><stop offset=1 style=stop-color:#FEFEFE;stop-opacity:0></stop></lineargradient><rect id=line_2 x=179.9 y=834.2 fill-rule=evenodd clip-rule=evenodd fill=url(#line_2_1_) width=891.8 height=6></rect><lineargradient id=line_3_1_ gradientUnits=userSpaceOnUse x1=207.8575 y1=899.6639 x2=1043.6908 y2=899.6639><stop offset=0 style=stop-color:#FFFFFF;stop-opacity:0></stop><stop offset=0.2527 style=stop-color:#FFFFFF;stop-opacity:0.5></stop><stop offset=0.7473 style=stop-color:#FFFFFF;stop-opacity:0.5></stop><stop offset=1 style=stop-color:#FEFEFE;stop-opacity:0></stop></lineargradient><rect id=line_3 x=207.9 y=896.7 fill-rule=evenodd clip-rule=evenodd fill=url(#line_3_1_) width=835.8 height=6></rect><lineargradient id=line_4_1_ gradientUnits=userSpaceOnUse x1=265.0242 y1=974.1639 x2=986.5242 y2=974.1639><stop offset=0 style=stop-color:#FFFFFF;stop-opacity:0></stop><stop offset=0.2527 style=stop-color:#FFFFFF;stop-opacity:0.5></stop><stop offset=0.7473 style=stop-color:#FFFFFF;stop-opacity:0.5></stop><stop offset=1 style=stop-color:#FEFEFE;stop-opacity:0></stop></lineargradient><rect id=line_4 x=265 y=971.2 fill-rule=evenodd clip-rule=evenodd fill=url(#line_4_1_) width=721.5 height=6></rect><g><path id=crafted_c fill=#FFFFFF d="M282.5,783v-0.3c0-29.2,21.9-53.5,52.3-53.5c18.8,0,30,6.6,40.3,16.4l-8,8.6\n                                c-8.7-8.3-18.5-14.2-32.5-14.2c-22.9,0-40,18.6-40,42.4v0.3c0,23.9,17.3,42.7,40,42.7c14.2,0,23.5-5.5,33.4-14.9l7.7,7.5\n                                c-10.8,10.9-22.6,18.2-41.3,18.2C304.5,836.1,282.5,812.7,282.5,783z"></path><path id=crafted_r fill=#FFFFFF d="M396.1,731h44.5c12.7,0,22.9,3.8,29.4,10.3c5,5,8,12.3,8,20.4v0.3\n                                c0,17.1-11.8,27.2-28.1,30.1l31.8,42.2h-14.3l-30-40.2h-29.5v40.2h-11.7V731z M439.5,783.7c15.5,0,26.6-8,26.6-21.3v-0.3\n                                c0-12.7-9.7-20.4-26.4-20.4h-31.9v41.9H439.5z"></path><path id=crafted_a fill=#FFFFFF d="M541.1,730.3H552l47.1,104.1h-12.6L574.5,807h-56.3L506,834.4h-12L541.1,730.3z M569.9,796.4l-23.5-52.6l-23.6,52.6H569.9z"></path><path id=crafted_f fill=#FFFFFF d=M619.5,731h74.3v10.8h-62.6v36.9h56v10.6h-56v45h-11.7V731z></path><path id=crafted_t fill=#FFFFFF d=M743.7,741.8H709V731h81.2v10.8h-34.7v92.6h-11.8V741.8z></path><path id=crafted_e fill=#FFFFFF d=M812.1,731h74.7v10.6h-63.1v35.3h56.4v10.6h-56.4v36.2h63.8v10.6h-75.5V731z></path><path id=crafted_d fill=#FFFFFF d="M911,731h35.9c32.5,0,54.9,22.3,54.9,51.4v0.3c0,29.1-22.4,51.7-54.9,51.7H911V731z M922.7,741.8v81.8h24.2c26.1,0,42.8-17.7,42.8-40.6v-0.3c0-22.9-16.7-40.9-42.8-40.9H922.7z"></path></g><g><path id=with_w fill=#FFFFFF d="M510.1,903h8.4l19.5,56.7l18.7-56.9h6.3l18.7,56.9l19.5-56.7h8.1l-24.3,68.6h-6.5 l-18.7-55.3l-18.8,55.3h-6.4L510.1,903z"></path><path id=with_i fill=#FFFFFF d=M623.8,903h7.7v68.1h-7.7V903z></path><path id=with_t fill=#FFFFFF d=M669.4,910.1h-22.9V903h53.5v7.1h-22.9v61h-7.8V910.1z></path><path id=with_h fill=#FFFFFF d=M714.5,903h7.7v30.3h39.3V903h7.7v68.1h-7.7v-30.7h-39.3v30.7h-7.7V903z></path></g></g><radialgradient id=comet_1_ cx=1146.4724 cy=-566.7919 r=485.6023 fx=1170.9791 fy=-646.2809 gradientTransform="matrix(0.6537 0.7568 -0.7353 0.6351 -19.7055 -1074.4386)" gradientUnits=userSpaceOnUse><stop offset=0 style=stop-color:#FFD215></stop><stop offset=1 style=stop-color:#FFDF15;stop-opacity:0></stop></radialgradient><g id=cometslices class=comets><path id=comet0 class="comet off" d="M1278.8-576c334.6,40.5,582.1,310.3,575.9,635.1l0.1,0c0,72.9-59.1,132-132,132s-132-59.1-132-132\n                            l-0.1-1.2c4.3-284-134-523.1-320.6-576.4c-15.1-4.3-25.3-17.5-22.9-33.3C1249.6-567.7,1263.4-577.6,1278.8-576z"></path><path id=comet30 class="comet off" d="M953.3-521.6c310-132.2,659.2-22.3,816.3,262.1l0.1-0.1c36.5,63.1,14.8,143.9-48.3,180.3\n                            s-143.9,14.8-180.3-48.3l-0.7-1c-138.2-248.1-377.6-386-565.9-338.9c-15.3,3.8-30.6-2.5-36.5-17.4\n                            C932.2-499.8,939.2-515.3,953.3-521.6z"></path><path id=comet60 class="comet off" d="M698.6-311.7c202.4-269.5,559.7-349,837.9-181.2l0.1-0.1c63.1,36.5,84.8,117.2,48.3,180.3\n                            s-117.2,84.8-180.3,48.3l-1.1-0.6c-243.8-145.7-520-145.5-659.5-10.5c-11.3,10.9-27.8,13.2-40.3,3.1\n                            C691.2-282.3,689.6-299.2,698.6-311.7z"></path><path id=comet90 class="comet off" d="M583-2.6c40.5-334.6,310.3-582.1,635.1-575.9l0-0.1c72.9,0,132,59.1,132,132s-59.1,132-132,132\n                            l-1.2,0.1c-284-4.3-523.1,134-576.4,320.6C636.2,21.3,623,31.4,607.1,29C591.3,26.6,581.4,12.8,583-2.6z"></path><path id=comet120 class="comet off" d="M637.4,322.9c-132.2-310-22.3-659.2,262.1-816.3l-0.1-0.1c63.1-36.5,143.9-14.8,180.3,48.3\n                            s14.8,143.9-48.3,180.3l-1,0.7c-248.1,138.2-386,377.6-338.9,565.9c3.8,15.3-2.5,30.6-17.4,36.5C659.2,344,643.7,337,637.4,322.9z"></path><path id=comet150 class="comet off" d="M847.3,577.6c-269.5-202.4-349-559.7-181.2-837.9l-0.1-0.1c36.5-63.1,117.2-84.8,180.3-48.3\n                            s84.8,117.2,48.3,180.3l-0.6,1.1c-145.7,243.8-145.5,520-10.5,659.5c10.9,11.3,13.2,27.8,3.1,40.3\n                            C876.7,585,859.8,586.6,847.3,577.6z"></path><path id=comet180 class="comet off" d="M1156.4,693.2C821.8,652.7,574.3,382.9,580.5,58.1l-0.1,0c0-72.9,59.1-132,132-132\n                            s132,59.1,132,132l0.1,1.2c-4.3,284,134,523.1,320.6,576.4c15.1,4.3,25.3,17.5,22.9,33.3C1185.6,684.9,1171.8,694.8,1156.4,693.2z"></path><path id=comet210 class="comet off" d="M1481.9,638.8c-310,132.2-659.2,22.3-816.3-262.1l-0.1,0.1c-36.5-63.1-14.8-143.9,48.3-180.3\n                            s143.9-14.8,180.3,48.3l0.7,1c138.2,248.1,377.6,386,565.9,338.9c15.3-3.8,30.6,2.5,36.5,17.4S1496,632.5,1481.9,638.8z"></path><path id=comet240 class="comet off" d="M1736.6,428.9c-202.4,269.5-559.7,349-837.9,181.2l-0.1,0.1c-63.1-36.5-84.8-117.2-48.3-180.3\n                            c36.5-63.1,117.2-84.8,180.3-48.3l1.1,0.6c243.8,145.7,520,145.5,659.5,10.5c11.3-10.9,27.8-13.2,40.3-3.1\n                            S1745.6,416.4,1736.6,428.9z"></path><path id=comet270 class="comet off" d="M1852.2,119.8c-40.5,334.6-310.3,582.1-635.1,575.9l0,0.1c-72.9,0-132-59.1-132-132\n                            s59.1-132,132-132l1.2-0.1c284,4.3,523.1-134,576.4-320.6c4.3-15.1,17.5-25.3,33.3-22.9C1843.9,90.6,1853.8,104.4,1852.2,119.8z"></path><path id=comet300 class="comet off" d="M1797.8-205.7c132.2,310,22.3,659.2-262.1,816.3l0.1,0.1c-63.1,36.5-143.9,14.8-180.3-48.3\n                            s-14.8-143.9,48.3-180.3l1-0.7c248.1-138.2,386-377.6,338.9-565.9c-3.8-15.3,2.5-30.6,17.4-36.5\n                            C1776-226.8,1791.5-219.8,1797.8-205.7z"></path><path id=comet330 class="comet off" d="M1587.9-460.4c269.5,202.4,349,559.7,181.2,837.9l0.1,0.1c-36.5,63.1-117.2,84.8-180.3,48.3\n                        s-84.8-117.2-48.3-180.3l0.6-1.1c145.7-243.8,145.5-520,10.5-659.5c-10.9-11.3-13.2-27.8-3.1-40.3S1575.4-469.4,1587.9-460.4z"></path></g><g id=rectslices class=rects_group><path id=rdeg330 class="rects off" d=M1780.8,98.6c-7.3,84.4-33.1,163.5-73.5,233.2l60,34.7c45.3-78.2,74.3-167.1,82.5-261.8L1780.8,98.6z></path><path id=rdeg300 class="rects off" d=M1737.6,413.1l-56.8-39.8c-47.2,67.3-108.8,123.9-180.2,165.2l34.7,60C1615.4,552.2,1684.5,488.7,1737.6,413.1z></path><path id=rdeg270 class="rects off" d=M1456.8,561.3c-72.5,33.9-153.4,52.8-238.7,52.8v69.3c95.8,0,186.6-21.2,268-59.3L1456.8,561.3z></path><path id=rdeg240 class="rects off" d=M1168.9,612c-84.4-7.3-163.5-33.1-233.2-73.5l-34.7,60c78.2,45.3,167.1,74.3,261.8,82.5L1168.9,612z></path><path id=rdeg210 class="rects off" d=M854.4,568.8l39.8-56.8c-67.3-47.2-123.9-108.8-165.2-180.2l-60,34.7C715.3,446.7,778.8,515.8,854.4,568.8z></path><path id=rdeg180 class="rects off" d=M706.1,288.1c-33.9-72.5-52.8-153.4-52.8-238.7H584c0,95.8,21.2,186.6,59.3,268L706.1,288.1z></path><path id=rdeg150 class="rects off" d=M655.4,0.1c7.3-84.4,33.1-163.5,73.5-233.2l-60-34.7c-45.3,78.2-74.3,167.1-82.5,261.8L655.4,0.1z></path><path id=rdeg120 class="rects off" d=M698.6-314.4l56.8,39.8c47.2-67.3,108.8-123.9,180.2-165.2l-34.7-60C820.8-453.5,751.7-390,698.6-314.4z></path><path id=rdeg90 class="rects off" d=M979.4-462.6c72.5-33.9,153.4-52.8,238.7-52.8v-69.3c-95.8,0-186.6,21.2-268,59.3L979.4-462.6z></path><path id=rdeg60 class="rects off" d=M1267.3-513.3c84.4,7.3,163.5,33.1,233.2,73.5l34.7-60c-78.2-45.3-167.1-74.3-261.8-82.5L1267.3-513.3z></path><path id=rdeg30 class="rects off" d=M1581.8-470.1l-39.8,56.8c67.3,47.2,123.9,108.8,165.2,180.2l60-34.7C1720.9-348,1657.4-417.1,1581.8-470.1z></path><path id=rdeg0 class="rects off" d=M1730.1-189.3c33.4,71.5,52.2,151,52.7,235h69.3c-0.5-94.4-21.7-183.9-59.2-264.3L1730.1-189.3z></path></g><g id=spheres><circle id=deg0 class="circles off" cx=1744.8 cy=70.9 r=79.4></circle><circle id=deg30 class="circles off" cx=1685.3 cy=-194.9 r=79.4></circle><circle id=deg60 class="circles off" cx=1500.9 cy=-395.3 r=79.4></circle><circle id=deg90 class="circles off" cx=1241 cy=-476.7 r=79.4></circle><circle id=deg120 class="circles off" cx=975.3 cy=-417.2 r=79.4></circle><circle id=deg150 class="circles off" cx=774.8 cy=-232.9 r=79.4></circle><circle id=deg180 class="circles off" cx=693.4 cy=27 r=79.4></circle><circle id=deg210 class="circles off" cx=752.9 cy=292.8 r=79.4></circle><circle id=deg240 class="circles off" cx=937.3 cy=493.2 r=79.4></circle><circle id=deg270 class="circles off" cx=1197.2 cy=574.6 r=79.4></circle><circle id=deg300 class="circles off" cx=1462.9 cy=515.2 r=79.4></circle><circle id=deg330 class="circles off" cx=1663.4 cy=330.8 r=79.4></circle></g></svg></div><div data-montage-id=logo-svg-container class=svg2_cont><svg version=1.1 class=svg xmlns=http://www.w3.org/2000/svg x=0px y=0px viewBox="0 0 1268.2 1268.2" enable-background="new 0 0 1268.2 1268.2" xml:space=preserve><path class="mslogo_wirelogo off" id=wirelogo fill=#FFFFFF d="M820.4,254.3c-0.7,0.1-1.3,0.2-2,0.4c-0.7,0.2-1.4,0.4-2,0.7c-0.4,0.2-0.9,0.3-1.3,0.5\n                        c-0.2,0.1-0.4,0.3-0.6,0.4c-0.2,0.1-0.5,0.2-0.7,0.3L642.2,370.9L470.7,256.7c-0.2-0.1-0.4-0.2-0.7-0.3c-0.2-0.1-0.4-0.3-0.6-0.4\n                        c-0.4-0.2-0.9-0.3-1.3-0.5c-0.7-0.3-1.3-0.6-2-0.7c-0.7-0.2-1.4-0.3-2-0.4c-0.7-0.1-1.4-0.2-2.1-0.2c-0.7,0-1.4,0.1-2.1,0.2\n                        c-0.7,0.1-1.4,0.2-2,0.4c-0.7,0.2-1.3,0.4-2,0.7c-0.4,0.2-0.9,0.3-1.3,0.5c-0.2,0.1-0.4,0.3-0.6,0.4c-0.2,0.1-0.5,0.2-0.7,0.3\n                        l-180.2,120c-0.4,0.3-0.8,0.7-1.2,1c-0.4,0.4-0.9,0.7-1.3,1.1c-0.6,0.6-1.1,1.2-1.5,1.9c-0.3,0.4-0.6,0.8-0.9,1.2\n                        c-0.4,0.8-0.8,1.6-1.1,2.5c-0.2,0.4-0.4,0.8-0.5,1.2c-0.4,1.3-0.5,2.6-0.5,4l0.1,240c0,9.6,7.8,17.3,17.3,17.3\n                        c3.2,0,6.1-0.9,8.7-2.3L453.4,536c0.2-0.1,0.5-0.2,0.7-0.3c0.2-0.1,0.4-0.3,0.6-0.4c0.4-0.2,0.9-0.3,1.3-0.5c0.7-0.3,1.3-0.6,2-0.7\n                        c0.7-0.2,1.3-0.3,2-0.4c0.7-0.1,1.4-0.2,2.1-0.2c0.7,0,1.4,0.1,2.1,0.2c0.7,0.1,1.3,0.2,2,0.4c0.7,0.2,1.3,0.5,2,0.7\n                        c0.4,0.2,0.9,0.3,1.3,0.5c0.2,0.1,0.4,0.3,0.6,0.4c0.2,0.1,0.5,0.2,0.7,0.3l162.8,106.8c0.2,0.1,0.4,0.2,0.7,0.3\n                        c0.2,0.1,0.4,0.3,0.7,0.5c0.6,0.3,1.3,0.5,1.9,0.8c0.4,0.2,0.8,0.4,1.3,0.5c1.4,0.4,2.8,0.6,4.2,0.6c1.4,0,2.8-0.2,4.2-0.6\n                        c0.4-0.1,0.8-0.3,1.2-0.5c0.7-0.2,1.3-0.4,2-0.8c0.2-0.1,0.4-0.3,0.7-0.5c0.2-0.1,0.4-0.2,0.6-0.3L813.9,536\n                        c0.2-0.1,0.5-0.2,0.7-0.3c0.2-0.1,0.4-0.3,0.6-0.4c0.4-0.2,0.8-0.3,1.3-0.5c0.7-0.3,1.3-0.6,2-0.7c0.7-0.2,1.3-0.3,2-0.4\n                        c0.7-0.1,1.4-0.2,2.1-0.2c0.7,0,1.4,0.1,2.1,0.2c0.7,0.1,1.4,0.2,2,0.4c0.7,0.2,1.3,0.5,2,0.7c0.4,0.2,0.9,0.3,1.3,0.5\n                        c0.2,0.1,0.4,0.3,0.6,0.4c0.2,0.1,0.5,0.2,0.7,0.3l160.6,108.7c2.6,1.5,5.6,2.4,8.8,2.4c9.6,0,17.3-7.8,17.3-17.3l0.3-240\n                        c0-1.4-0.2-2.7-0.6-4c-0.1-0.4-0.3-0.8-0.5-1.2c-0.3-0.8-0.6-1.7-1.1-2.5c-0.3-0.4-0.6-0.8-0.9-1.2c-0.5-0.7-1-1.3-1.5-1.9\n                        c-0.4-0.4-0.8-0.7-1.2-1.1c-0.4-0.3-0.8-0.7-1.2-1l-180.2-120c-0.2-0.1-0.5-0.2-0.7-0.3c-0.2-0.1-0.4-0.3-0.6-0.4\n                        c-0.4-0.2-0.8-0.3-1.3-0.5c-0.7-0.3-1.3-0.6-2-0.7c-0.7-0.2-1.4-0.3-2-0.4c-0.7-0.1-1.4-0.2-2.1-0.2\n                        C821.7,254.2,821.1,254.2,820.4,254.3 M297.5,419l136.3,90.7l-136.3,90.8V419z M488.4,509.8L624.7,419v181.5L488.4,509.8z M656,419\n                        l136.3,90.7L656,600.5V419z M848.8,509.8L985.1,419v181.5L848.8,509.8z M310.1,389.8L446.4,299v181.5L310.1,389.8z M475.8,299\n                        l136.3,90.7l-136.3,90.8V299z M668.6,389.8L804.9,299v181.5L668.6,389.8z M836.3,299l136.3,90.7l-136.3,90.8V299z"></path><g id=glowpath class="glowtrans off"><polygon id=glow class=st0 points="1150.7,32.1 970.3,152.4 789.9,32.1 609.6,152.4 609.6,392.8 789.9,272.6 970.3,392.7\n                            970.3,392.8 970.4,392.8 970.4,392.8 970.4,392.7 1150.7,272.6 1331,392.8 1331,152.4 \t"></polygon><polygon id=glow class=st1 points="1150.7,32.1 970.3,152.4 789.9,32.1 609.6,152.4 609.6,392.8 789.9,272.6 970.3,392.7\n                            970.3,392.8 970.4,392.8 970.4,392.8 970.4,392.7 1150.7,272.6 1331,392.8 1331,152.4 \t"></polygon><polygon id=glow class=st2 points="1150.7,32.1 970.3,152.4 789.9,32.1 609.6,152.4 609.6,392.8 789.9,272.6 970.3,392.7\n                            970.3,392.8 970.4,392.8 970.4,392.8 970.4,392.7 1150.7,272.6 1331,392.8 1331,152.4 \t"></polygon><polygon id=glow class=st3 points="1150.7,32.1 970.3,152.4 789.9,32.1 609.6,152.4 609.6,392.8 789.9,272.6 970.3,392.7\n                            970.3,392.8 970.4,392.8 970.4,392.8 970.4,392.7 1150.7,272.6 1331,392.8 1331,152.4 \t"></polygon><polygon id=glow class=st4 points="1150.7,32.1 970.3,152.4 789.9,32.1 609.6,152.4 609.6,392.8 789.9,272.6 970.3,392.7\n                            970.3,392.8 970.4,392.8 970.4,392.8 970.4,392.7 1150.7,272.6 1331,392.8 1331,152.4 \t"></polygon><polygon id=glow class=st5 points="1150.7,32.1 970.3,152.4 789.9,32.1 609.6,152.4 609.6,392.8 789.9,272.6 970.3,392.7\n                            970.3,392.8 970.4,392.8 970.4,392.8 970.4,392.7 1150.7,272.6 1331,392.8 1331,152.4 \t"></polygon><polygon id=glow class=st6 points="1150.7,32.1 970.3,152.4 789.9,32.1 609.6,152.4 609.6,392.8 789.9,272.6 970.3,392.7\n                            970.3,392.8 970.4,392.8 970.4,392.8 970.4,392.7 1150.7,272.6 1331,392.8 1331,152.4 \t"></polygon><polygon id=glow class=st7 points="1150.7,32.1 970.3,152.4 789.9,32.1 609.6,152.4 609.6,392.8 789.9,272.6 970.3,392.7\n                            970.3,392.8 970.4,392.8 970.4,392.8 970.4,392.7 1150.7,272.6 1331,392.8 1331,152.4 \t"></polygon><polygon id=glow class=st8 points="1150.7,32.1 970.3,152.4 789.9,32.1 609.6,152.4 609.6,392.8 789.9,272.6 970.3,392.7\n                            970.3,392.8 970.4,392.8 970.4,392.8 970.4,392.7 1150.7,272.6 1331,392.8 1331,152.4 \t"></polygon><polygon id=glow class=st9 points="1150.7,32.1 970.3,152.4 789.9,32.1 609.6,152.4 609.6,392.8 789.9,272.6 970.3,392.7\n                            970.3,392.8 970.4,392.8 970.4,392.8 970.4,392.7 1150.7,272.6 1331,392.8 1331,152.4 \t"></polygon><polygon id=glow class=st10 points="1150.7,32.1 970.3,152.4 789.9,32.1 609.6,152.4 609.6,392.8 789.9,272.6 970.3,392.7\n                            970.3,392.8 970.4,392.8 970.4,392.8 970.4,392.7 1150.7,272.6 1331,392.8 1331,152.4 \t"></polygon><polygon id=glow class=st11 points="1150.7,32.1 970.3,152.4 789.9,32.1 609.6,152.4 609.6,392.8 789.9,272.6 970.3,392.7\n                            970.3,392.8 970.4,392.8 970.4,392.8 970.4,392.7 1150.7,272.6 1331,392.8 1331,152.4 \t"></polygon><polygon id=glow class=st12 points="1150.7,32.1 970.3,152.4 789.9,32.1 609.6,152.4 609.6,392.8 789.9,272.6 970.3,392.7\n                            970.3,392.8 970.4,392.8 970.4,392.8 970.4,392.7 1150.7,272.6 1331,392.8 1331,152.4 \t"></polygon><polygon id=glow class=st13 points="1150.7,32.1 970.3,152.4 789.9,32.1 609.6,152.4 609.6,392.8 789.9,272.6 970.3,392.7\n                            970.3,392.8 970.4,392.8 970.4,392.8 970.4,392.7 1150.7,272.6 1331,392.8 1331,152.4 \t"></polygon><polygon id=glow class=st14 points="1150.7,32.1 970.3,152.4 789.9,32.1 609.6,152.4 609.6,392.8 789.9,272.6 970.3,392.7\n                            970.3,392.8 970.4,392.8 970.4,392.8 970.4,392.7 1150.7,272.6 1331,392.8 1331,152.4 \t"></polygon><polygon id=glow class=st15 points="1150.7,32.1 970.3,152.4 789.9,32.1 609.6,152.4 609.6,392.8 789.9,272.6 970.3,392.7\n                            970.3,392.8 970.4,392.8 970.4,392.8 970.4,392.7 1150.7,272.6 1331,392.8 1331,152.4 \t"></polygon><polygon id=glow class=st16 points="1150.7,32.1 970.3,152.4 789.9,32.1 609.6,152.4 609.6,392.8 789.9,272.6 970.3,392.7\n                            970.3,392.8 970.4,392.8 970.4,392.8 970.4,392.7 1150.7,272.6 1331,392.8 1331,152.4 \t"></polygon><polygon id=glow class=st17 points="1150.7,32.1 970.3,152.4 789.9,32.1 609.6,152.4 609.6,392.8 789.9,272.6 970.3,392.7\n                            970.3,392.8 970.4,392.8 970.4,392.8 970.4,392.7 1150.7,272.6 1331,392.8 1331,152.4 \t"></polygon><polygon id=glow class=st18 points="1150.7,32.1 970.3,152.4 789.9,32.1 609.6,152.4 609.6,392.8 789.9,272.6 970.3,392.7\n                            970.3,392.8 970.4,392.8 970.4,392.8 970.4,392.7 1150.7,272.6 1331,392.8 1331,152.4 \t"></polygon><polygon id=glow class=st19 points="1150.7,32.1 970.3,152.4 789.9,32.1 609.6,152.4 609.6,392.8 789.9,272.6 970.3,392.7\n                            970.3,392.8 970.4,392.8 970.4,392.8 970.4,392.7 1150.7,272.6 1331,392.8 1331,152.4 \t"></polygon><polygon id=glow class=st20 points="1150.7,32.1 970.3,152.4 789.9,32.1 609.6,152.4 609.6,392.8 789.9,272.6 970.3,392.7\n                            970.3,392.8 970.4,392.8 970.4,392.8 970.4,392.7 1150.7,272.6 1331,392.8 1331,152.4 \t"></polygon></g><g data-montage-id=ms-logo-wtriangles id=mslogo_wtriangles class="mslogo_wtriangles off"><polygon id=wtriangle_1 class=wtri fill=rgba(0,0,0,0) stroke-linejoin=round stroke-width=10 stroke=#888 points="281.5,630.4 281.5,390 461.8,510.2 281.5,630.4 \t"></polygon><polygon id=wtriangle_2 class=wtri fill=rgba(0,0,0,0) stroke-linejoin=round stroke-width=10 stroke=#888 points="461.8,510.2 461.8,269.7 281.5,390 461.8,510.2 \t"></polygon><polygon id=wtriangle_3 class=wtri fill=rgba(0,0,0,0) stroke-linejoin=round stroke-width=10 stroke=#888 points="461.8,510.2 461.8,269.7 642.2,390 461.8,510.2 \t"></polygon><polygon id=wtriangle_4 class=wtri fill=rgba(0,0,0,0) stroke-linejoin=round stroke-width=10 stroke=#888 points="642.2,390 461.8,510.2 642.3,630.4 642.2,390\t"></polygon><polygon id=wtriangle_5 class=wtri fill=rgba(0,0,0,0) stroke-linejoin=round stroke-width=10 stroke=#888 points="642.2,390 822.6,510.2 642.2,630.4 642.2,390\t"></polygon><polygon id=wtriangle_6 class=wtri fill=rgba(0,0,0,0) stroke-linejoin=round stroke-width=10 stroke=#888 points="822.6,269.7 642.2,390 822.6,510.2 822.6,269.7\t"></polygon><polygon id=wtriangle_7 class=wtri fill=rgba(0,0,0,0) stroke-linejoin=round stroke-width=10 stroke=#888 points="822.6,510.2 822.6,269.7 1002.9,390 822.6,510.2 \t"></polygon><polygon id=wtriangle_8 class=wtri fill=rgba(0,0,0,0) stroke-linejoin=round stroke-width=10 stroke=#888 points="1002.9,630.4 1002.9,390 822.6,510.2 1002.9,630.4 \t"></polygon></g><g data-montage-id=ms-logo-lines id=mslogo_tri_lines class=mslogo_tri_lines><polygon id=wtriline_1 class="wtri_ l1" stroke-linejoin=round stroke-width=10 stroke=#888 points="281.5,390 642.2,630.4"></polygon><polygon id=wtriline_2 class="wtri_ l2" stroke-linejoin=round stroke-width=10 stroke=#888 points="461.8,269.7 1002.9,630.4"></polygon><polygon id=wtriline_3 class="wtri_ l3" stroke-linejoin=round stroke-width=10 stroke=#888 points="822.6,269.7 1002.9,390"></polygon><polygon id=wtriline_4 class="wtri_ l4" stroke-linejoin=round stroke-width=10 stroke=#888 points="281.5,390 461.8,269.7"></polygon><polygon id=wtriline_5 class="wtri_ l5" stroke-linejoin=round stroke-width=10 stroke=#888 points="281.5,630.4 822.6,269.7"></polygon><polygon id=wtriline_6 class="wtri_ l6" stroke-linejoin=round stroke-width=10 stroke=#888 points="642.2,630.4 1002.9,390"></polygon><polygon id=wtriline_7 class="wtri_ l7" stroke-linejoin=round stroke-width=10 stroke=#888 points="281.5,630.4 281.5,390"></polygon><polygon id=wtriline_8 class="wtri_ l8" stroke-linejoin=round stroke-width=10 stroke=#888 points="461.8,510.2 461.8,269.7"></polygon><polygon id=wtriline_9 class="wtri_ l9" stroke-linejoin=round stroke-width=10 stroke=#888 points="642.2,630.4 642.2,390"></polygon><polygon id=wtriline_10 class="wtri_ l10" stroke-linejoin=round stroke-width=10 stroke=#888 points="822.6,510.2 822.6,269.7"></polygon><polygon id=wtriline_11 class="wtri_ l11" stroke-linejoin=round stroke-width=10 stroke=#888 points="1002.9,630.4 1002.9,390"></polygon></g><g data-montage-id=ms-logo-triangles id=mslogo_triangles class="mslogo_triangles off"><lineargradient id=triangle_1_1_ gradientUnits=userSpaceOnUse x1=236.3617 y1=585.3589 x2=386.6703 y2=435.0504><stop offset=0 style=stop-color:#D4622A></stop><stop offset=0.5 style=stop-color:#F37521></stop><stop offset=1 style=stop-color:#F69453></stop></lineargradient><polygon id=triangle_1 class=tri fill-rule=evenodd clip-rule=evenodd fill=url(#triangle_1_1_) points="281.5,630.4 281.5,390 461.8,510.2 281.5,630.4 \t"></polygon><lineargradient id=triangle_2_1_ gradientUnits=userSpaceOnUse x1=356.6074 y1=465.1132 x2=506.9209 y2=314.7997><stop offset=0 style=stop-color:#CF232A></stop><stop offset=0.5 style=stop-color:#EC1C24></stop><stop offset=1 style=stop-color:#F05F58></stop></lineargradient><polygon id=triangle_2 class=tri fill-rule=evenodd clip-rule=evenodd fill=url(#triangle_2_1_) points="461.8,510.2 461.8,269.7 281.5,390 461.8,510.2 \t"></polygon><lineargradient id=triangle_3_1_ gradientUnits=userSpaceOnUse x1=416.7302 y1=465.1104 x2=567.038 y2=314.8026><stop offset=0 style=stop-color:#CD118C></stop><stop offset=0.5 style=stop-color:#EB008B></stop><stop offset=1 style=stop-color:#EF70AA></stop></lineargradient><polygon id=triangle_3 class=tri fill-rule=evenodd clip-rule=evenodd fill=url(#triangle_3_1_) points="461.8,510.2 461.8,269.7 642.2,390 461.8,510.2 \t"></polygon><lineargradient id=triangle_4_1_ gradientUnits=userSpaceOnUse x1=536.9935 y1=585.3737 x2=687.3013 y2=435.0659><stop offset=0 style=stop-color:#B07EB7></stop><stop offset=0.5 style=stop-color:#8C3D96></stop><stop offset=1 style=stop-color:#762A90></stop></lineargradient><polygon id=triangle_4 class=tri fill-rule=evenodd clip-rule=evenodd fill=url(#triangle_4_1_) points="642.2,390 461.8,510.2 642.3,630.4"></polygon><lineargradient id=triangle_5_1_ gradientUnits=userSpaceOnUse x1=597.1013 y1=585.3572 x2=747.4064 y2=435.0521><stop offset=0 style=stop-color:#7C76B7></stop><stop offset=0.4424 style=stop-color:#615CA3></stop><stop offset=1 style=stop-color:#2E2268></stop></lineargradient><polygon id=triangle_5 class=tri fill-rule=evenodd clip-rule=evenodd fill=url(#triangle_5_1_) points="642.2,390 822.6,510.2 642.2,630.4"></polygon><lineargradient id=triangle_6_1_ gradientUnits=userSpaceOnUse x1=721.8968 y1=318.1921 x2=862.4485 y2=474.2905><stop offset=0 style=stop-color:#FFE7A3></stop><stop offset=2.733290e-002 style=stop-color:#FFE59A></stop><stop offset=0.1895 style=stop-color:#FFD96A></stop><stop offset=0.328 style=stop-color:#FFD13D></stop><stop offset=0.4359 style=stop-color:#FFCC19></stop><stop offset=0.5 style=stop-color:#FFCA05></stop><stop offset=0.9448 style=stop-color:#E39E16></stop></lineargradient><polygon id=triangle_6 class=tri fill-rule=evenodd clip-rule=evenodd fill=url(#triangle_6_1_) points="822.6,269.7 642.2,390 822.6,510.2"></polygon><lineargradient id=triangle_7_1_ gradientUnits=userSpaceOnUse x1=777.4653 y1=465.111 x2=927.7742 y2=314.802><stop offset=0 style=stop-color:#007FC3></stop><stop offset=0.4157 style=stop-color:#0094D3></stop><stop offset=0.6562 style=stop-color:#3AA1D9></stop><stop offset=0.8709 style=stop-color:#5EABDE></stop><stop offset=1 style=stop-color:#69AFE0></stop></lineargradient><polygon id=triangle_7 class=tri fill-rule=evenodd clip-rule=evenodd fill=url(#triangle_7_1_) points="822.6,510.2 822.6,269.7 1002.9,390 822.6,510.2"></polygon><lineargradient id=triangle_8_1_ gradientUnits=userSpaceOnUse x1=897.7134 y1=585.3591 x2=1048.0223 y2=435.0502><stop offset=0 style=stop-color:#00806A></stop><stop offset=0.5 style=stop-color:#00B6A9></stop><stop offset=0.9944 style=stop-color:#8AD0C3></stop></lineargradient><polygon id=triangle_8 class=tri fill-rule=evenodd clip-rule=evenodd fill=url(#triangle_8_1_) points="1002.9,630.4 1002.9,390 822.6,510.2 1002.9,630.4"></polygon></g></svg></div></div></div></body></html>'
}),montageDefine("64d2e12","ui/loader.reel/loader",{dependencies:["../component","../../core/logger","../../core/event/event-manager"],factory:function(e,t,n){var r=e("../component"),i=r.Component,o=r.__root__,a=e("../../core/logger").logger("loader"),s=e("../../core/event/event-manager").defaultEventManager,l="montage-app-loader",u="montage-app-bootstrapping",c="montage-app-loading",h="montage-app-first-load",p="montage-app-loaded",d=0,f=1,v=2;t.Loader=i.specialize({mainModule:{value:"ui/main.reel"},mainName:{value:"Main"},includeFrameworkModules:{value:!1},minimumBootstrappingDuration:{value:0},minimumLoadingDuration:{value:0},minimumFirstLoadingDuration:{value:null},minimumFirstBootstrappingDuration:{value:null},_initializedModules:{value:null},element:{get:function(){if(!this._element){var e=document.getElementsByClassName("loading")[0];e||(e=document.createElement("div"),document.body.appendChild(e)),this.element=e}return this._element},set:function(e){Object.getOwnPropertyDescriptor(i.prototype,"element").set.call(this,e)}},initializedModules:{dependencies:["includeFrameworkModules"],enumerable:!1,get:function(){return!this._initializedModules||this.includeFrameworkModules?this._initializedModules:this._initializedModules.slice(this._frameworkModuleCount-1)},set:function(e){this._initializedModules=e}},_requiredModules:{value:null},requiredModules:{dependencies:["includeFrameworkModules"],enumerable:!1,get:function(){return!this._requiredModules||this.includeFrameworkModules?this._requiredModules:this._requiredModules.slice(this._frameworkModuleCount-1)},set:function(e){this._requiredModules=e}},_currentStage:{value:d},currentStage:{get:function(){return this._currentStage},set:function(e){e!==this._currentStage&&(a.isDebug&&a.debug(this,"CURRENT STAGE: "+e),this._currentStage=e,f===e?(o.classList.remove(u),o.classList.add(c)):v===e&&(o.classList.remove(u),o.classList.remove(c),o.classList.add(p),this.needsDraw=!0))}},_readyToShowLoader:{value:!1},isLoadingMainComponent:{value:null},readyToShowLoader:{get:function(){return this._readyToShowLoader},set:function(e){e===this._readyToShowLoader&&(this._readyToShowLoader=e,this.needsDraw=!0)}},readyToShowMainComponent:{get:function(){return!!this._mainComponent}},_frameworkModuleCount:{enumerable:!1,value:null},hasTemplate:{enumerable:!1,value:!1},_mainComponent:{value:null},_mainComponentEnterDocument:{value:null},_showLoadingTimeout:{enumerable:!1,value:null},_showMainComponentTimeout:{enumerable:!1,value:null},enterDocument:{value:function(){a.isDebug&&a.debug(this,"enterDocument"),this._loadLoaderContext(),this._loadMainComponent(),this.readyToShowLoader=!0;var e=document._montageTiming,t=Date.now(),n=this.minimumBootstrappingDuration-(t-e.bootstrappingStartTime);if(n>0){a.isDebug&&a.debug(this,"still need to show bootstrapper for another "+n+"ms");var r=this;this._showLoadingTimeout=setTimeout(function(){e.bootstrappingEndTime=Date.now(),r._showLoadingTimeout=null,r._revealLoader()},n)}else e.bootstrappingEndTime=t,this._revealLoader()}},_loadLoaderContext:{value:function(){this.application.isFirstLoad&&(o.classList.add(h),null!==this.minimumFirstLoadingDuration&&(this.minimumLoadingDuration=this.minimumFirstLoadingDuration),null!==this.minimumFirstBootstrappingDuration&&(this.minimumBootstrappingDuration=this.minimumFirstBootstrappingDuration))}},_revealLoader:{value:function(){a.isDebug&&a.debug(this,"_revealLoader"),document._montageTiming.loadingStartTime=Date.now(),this.currentStage=f,this._waitForLoadingIndicatorIfNeeded();var e,t,n,r,i=document.getElementById(l);if(i)for(t=i.children,e=0;n=t[e];e++)(r=n.component)&&(r.attachToParentComponent(),r.needsDraw=!0)}},_revealMainComponent:{value:function(){a.isDebug&&a.debug(this,"_revealMainComponent"),this.currentStage=v}},_loadMainComponent:{value:function(){a.isDebug&&a.debug(this,"_loadMainComponent"),this.isLoadingMainComponent=!0;var e=this;return global.require.async(this.mainModule).then(function(t){if(!(e.mainName in t))throw new Error(e.mainName+" was not found in "+e.mainModule);return e._mainLoadedCallback(t)})}},_mainLoadedCallback:{value:function(e){return a.isDebug&&a.debug(this,"_mainLoadedCallback"),this._mainComponent=new e[this.mainName],this._mainComponentEnterDocument=this._mainComponent.enterDocument,this._mainComponent.enterDocument=this.mainComponentEnterDocument.bind(this),this._mainComponent.setElementWithParentComponent(document.createElement("div"),this),this._mainComponent.attachToParentComponent(),this._mainComponent._canDrawOutsideDocument=!0,this._mainComponent.needsDraw=!0,this}},mainComponentEnterDocument:{value:function(){var e=this._mainComponent;if(a.isDebug&&a.debug(this,"main preparing to draw"),this.isLoadingMainComponent=!1,this.childComponents=[this._mainComponent],this.element.parentElement.appendChild(this._mainComponent.element),this._waitForLoadingIndicatorIfNeeded(),s.unregisterEventHandlerForElement(this.element),e.attachToParentComponent(),e.enterDocument=this._mainComponentEnterDocument,e.enterDocument)return e.enterDocument.apply(e,arguments)}},_waitForLoadingIndicatorIfNeeded:{value:function(){if(!this._showMainComponentTimeout&&!this.isLoadingMainComponent&&!this._showLoadingTimeout){var e=document._montageTiming,t=Date.now(),n=this,r=this.minimumLoadingDuration-(t-e.loadingStartTime);r>0?(a.isDebug&&a.debug(this,"show loader for another "+r+"ms"),this._showMainComponentTimeout=setTimeout(function(){a.isDebug&&a.debug(this,"ok, shown loader long enough"),e.loadingEndTime=Date.now(),n._revealMainComponent()},r)):(e.loadingEndTime=t,this._revealMainComponent())}}},draw:{value:function(){v===this._currentStage&&(this._dispatchLoadEvent(),this.detachFromParentComponent(),this.element.parentElement.removeChild(this.element))}},_dispatchLoadEvent:{value:function(){var e=document.createEvent("CustomEvent");e.initCustomEvent("componentLoaded",!0,!0,this._mainComponent),this.dispatchEvent(e,!0,!0)}}})}}),montageDefine("64d2e12","core/meta/module-object-descriptor",{dependencies:["../core","../promise","./object-descriptor","../serialization/deserializer/montage-deserializer","../module-reference","../deprecate"],factory:function(e,t,n){var r=e("../core").Montage,i=e("../promise").Promise,o=e("./object-descriptor").ObjectDescriptor,a=e("../serialization/deserializer/montage-deserializer").MontageDeserializer,s=e("../module-reference").ModuleReference,l=e("../deprecate"),u=Object.create(null),c=t.ModuleObjectDescriptor=o.specialize({initWithModuleAndExportName:{value:function(e,t){var n=o.prototype.initWithName.call(this,t);return n.module=e,n.exportName=t,n}},serializeSelf:{value:function(e){if(!this.module)throw new Error("Cannot serialize object descriptor without a module reference");if(!this.exportName)throw new Error("Cannot serialize object descriptor without an exportName");this["super"](e),this._setPropertyWithDefaults(e,"module",this.module),this._setPropertyWithDefaults(e,"exportName",this.exportName),this.object&&this._setPropertyWithDefaults(e,"object",this.object)}},deserializeSelf:{value:function(e){this["super"](e);var t;if(t=e.getProperty("module"),void 0!==t&&(this.module=t),t=e.getProperty("exportName")||this.exportName,void 0!==t&&(this.exportName=t),!this.module)throw new Error("Cannot deserialize object descriptor without a module reference");if(!this.exportName)throw new Error("Cannot deserialize object descriptor without an exportName");t=e.getProperty("object"),void 0!==t&&(this.object=t)}},module:{value:null},object:{value:null},exportName:{value:null},objectDescriptorInstanceModule:{serializable:!1,value:null}},{getObjectDescriptorWithModuleId:{value:function(e,t){if(e.search(/\.meta$/)===-1&&e.search(/\.mjson$/)===-1)throw new Error(e+" object descriptor module id does not end in '.meta' or '.mjson'");if(!t)throw new Error("Require needed to get object descriptor "+e);var n=t.location+"#"+e;return n in u?u[n]:u[n]=t.async(e).then(function(n){var r=n.montageObject,i=a.getModuleRequire(t,e);if(!c.prototype.isPrototypeOf(r))throw new Error("Object in "+e+" is not a module-object-descriptor");return r.objectDescriptorInstanceModule=(new s).initWithIdAndRequire(e,t),r._parentReference?r._parentReference.promise(i).then(function(e){return r._parent=e,r}):r})}},createDefaultObjectDescriptorForObject:{value:function(e){var t=r.getInfoForObject(e).isInstance?Object.getPrototypeOf(e):e,n=r.getInfoForObject(t);return n.objectName&&n.moduleId?this["super"](e).then(function(e){return e.module=(new s).initWithIdAndRequire(n.moduleId,n.require),e.exportName=n.objectName,e}):i.reject("Cannot create module-object-descriptor for an object that has no been loaded from a module")}},getBlueprintWithModuleId:{value:l.deprecateMethod(void 0,function(e,t){return c.getObjectDescriptorWithModuleId(e,t)},"ModuleBlueprint.getBlueprintWithModuleId","ModuleObjectDescriptor.getObjectDescriptorWithModuleId")},createDefaultBlueprintForObject:{value:l.deprecateMethod(void 0,function(e){return c.createDefaultObjectDescriptorForObject(e)},"ModuleBlueprint.createDefaultBlueprintForObject","ModuleObjectDescriptor.createDefaultObjectDescriptorForObject")}})}}),montageDefine("64d2e12","core/target",{dependencies:["./core","./event/event-manager","./event/mutable-event"],factory:function(e,t,n){var r=e("./core").Montage,i=e("./event/event-manager").defaultEventManager,o=e("./event/mutable-event").MutableEvent;t.Target=r.specialize({acceptsActiveTarget:{serializable:!1,value:!1},isActiveTarget:{get:function(){return this===i.activeTarget}},willBecomeActiveTarget:{value:Function.noop},didBecomeActiveTarget:{value:Function.noop},surrendersActiveTarget:{value:function(e){return!0}},nextTarget:{serializable:!1,value:null},dispatchEvent:{value:function(e){var t=e instanceof o?e:o.fromEvent(e);return t.target=this,i.handleEvent(t),!e.defaultPrevented}},dispatchEventNamed:{value:function(e,t,n,r){var a=o.fromType(e,t,n,r);return a.target=this,i.handleEvent(a),!a.defaultPrevented}},addEventListener:{value:function(e,t,n){t&&i.registerEventListener(this,e,t,n)}},removeEventListener:{value:function(e,t,n){t&&i.unregisterEventListener(this,e,t,n)}},loadComposer:{value:function(e){e&&!e._isLoaded&&(e._resolveDefaults(),e.load(),e._isLoaded=!0)}},unloadComposer:{value:function(e){e&&e._isLoaded&&(e.unload(),e._isLoaded=!1)}}})}}),montageDefine("64d2e12","core/template",{dependencies:["./core","core/serialization/deserializer/montage-deserializer","./document-part","./document-resources","./serialization/serialization","./serialization/serializer/montage-labeler","./promise","./mini-url","./logger","./event/event-manager","./application"],factory:function(e,t,n){function r(e,t,n){var r,i,o=new d,a=e.documentElement.outerHTML,l=new s,u=e.documentElement;return r=o.createHtmlDocumentWithHtml(a,e.location.href),o.initWithDocument(r,t).then(function(){return o.setBaseUrl(e.location.href),i=o._createTemplateObjects(n),l.initWithTemplateAndFragment(o),o._instantiateObjects(i,u).then(function(e){return l.objects=e,o._invokeDelegates(l),l})})}var i,o=e("./core").Montage,a=e("core/serialization/deserializer/montage-deserializer").MontageDeserializer,s=e("./document-part").DocumentPart,l=e("./document-resources").DocumentResources,u=e("./serialization/serialization").Serialization,c=e("./serialization/serializer/montage-labeler").MontageLabeler,h=e("./promise").Promise,p=e("./mini-url"),d=(e("./logger").logger("template"),e("./event/event-manager").defaultEventManager,o.specialize({_SERIALIZATION_SCRIPT_TYPE:{value:"text/montage-serialization"},_ELEMENT_ID_ATTRIBUTE:{value:"data-montage-id"},PARAM_ATTRIBUTE:{value:"data-param"},_require:{value:null},_resources:{value:null},_baseUrl:{value:null},_instances:{value:null},_metadata:{value:null},_objectsString:{value:null},objectsString:{get:function(){return this._objectsString},set:function(e){this._objectsString=e,this._serialization&&this._serialization.initWithString(e),this.__deserializer=null}},__deserializer:{value:null},_deserializer:{get:function(){var e,t,n=this.__deserializer;if(!n){if(e=this._metadata){t=Object.create(null);for(var r in e)t[r]=e[r].require}n=(new a).init(this.objectsString,this._require,t),this.__deserializer=n}return n}},getDeserializer:{value:function(){return this._deserializer}},_serialization:{value:null},getSerialization:{value:function(){var e=this._serialization;return e||(e=this._serialization=new u,e.initWithString(this.objectsString)),e}},_isDirty:{value:!1},isDirty:{get:function(){return this._isDirty},set:function(e){this._isDirty!==e&&(this._isDirty=e,this.clearTemplateFromElementContentsCache())}},refresher:{value:null},_document:{value:null},document:{get:function(){return this._isDirty&&this.refresh(),this._document},set:function(e){this._document=e}},initWithRequire:{value:function(e){return this._require=e,this.document=this.createHtmlDocumentWithHtml(""),this.objectsString="",this}},initWithDocument:{value:function(e,t){var n=this;return this._require=t,this.setDocument(e),this.getObjectsString(e).then(function(e){return n.objectsString=e,n})}},initWithHtml:{value:function(e,t){var n=this;return this._require=t,this.document=this.createHtmlDocumentWithHtml(e),this.getObjectsString(this.document).then(function(e){return n.objectsString=e,n})}},initWithObjectsAndDocumentFragment:{value:function(e,t,n){return this._require=n,this.document=this.createHtmlDocumentWithHtml(""),this.document.body.appendChild(this.document.importNode(t,!0)),this.setObjects(e),this}},initWithModuleId:{value:function(e,t){var n=this;return this._require=t,this.createHtmlDocumentWithModuleId(e,t).then(function(r){var i=t(e).directory;return n.document=r,n.setBaseUrl(i),n.getObjectsString(r).then(function(e){return n.objectsString=e,n})})}},clone:{value:function(){var e=new d;return e._require=this._require,e._baseUrl=this._baseUrl,e.setDocument(this.document),e.objectsString=this.objectsString,e._instances=Object.clone(this._instances,1),e}},instantiate:{value:function(e){return this.instantiateWithInstances(null,e)}},instantiateWithInstances:{value:function(e,t){var n,r,i,o=this,a=new s;return e=e||this._instances,n=this._createMarkupDocumentFragment(t),i=this._getParameters(n),a.initWithTemplateAndFragment(this,n),a.startActingAsTopComponent(),a.parameters=i,r=this._createTemplateObjects(e),this._instantiateObjects(r,n).then(function(n){var r=o.getResources();return!r.resourcesLoaded()&&r.hasResources()&&r.loadResources(t),a.objects=n,o._invokeDelegates(a,e),a.stopActingAsTopComponent(),a})}},_objectsInstantiationOptimized:{value:!1},_optimizeObjectsInstantiationPromise:{value:null},_optimizeObjectsInstantiation:{value:function(){var e,t=this;if(!this._objectsInstantiationOptimized)return this._optimizeObjectsInstantiationPromise||(e=this._deserializer.preloadModules(),e?this._optimizeObjectsInstantiationPromise=e.then(function(){t._objectsInstantiationOptimized=!0}):this._objectsInstantiationOptimized=!0),this._optimizeObjectsInstantiationPromise}},setBaseUrl:{value:function(e){this._baseUrl=e}},getBaseUrl:{value:function(){return this._baseUrl}},getResources:{value:function(){var e=this._resources;return e||(e=this._resources=new t.TemplateResources,e.initWithTemplate(this)),e}},_createTemplateObjects:{value:function(t){var n=Object.create(t||null);return"undefined"==typeof i&&(i=e("./application").application),n.application=i,n.template=this,n}},_instantiateObjects:{value:function(e,t){var n,r=this._deserializer;return h.is(r)?r:(n=this._optimizeObjectsInstantiation(),n?n.then(function(){return r.deserialize(e,t)}):r.deserialize(e,t))}},_createMarkupDocumentFragment:{value:function(e){for(var t=e.createDocumentFragment(),n=this.document.body.childNodes,r=0,i=n.length;r<i;r++)t.appendChild(e.importNode(n[r],!0));return t}},getParameterName:{value:function(e){return e.getAttribute(this.PARAM_ATTRIBUTE)}},getParameters:{value:function(){return this._getParameters(this.document.body)}},_getParameters:{value:function(e){for(var t,n,r=e.querySelectorAll("*["+this.PARAM_ATTRIBUTE+"]"),i=r.length,o={},a=0;a<i;a++){if(t=r[a],n=this.getParameterName(t),n in o)throw new Error('The parameter "'+n+'" is declared more than once in '+this.getBaseUrl()+".");o[n]=t}return o}},hasParameters:{value:function(){return!!this.document.querySelector("*["+this.PARAM_ATTRIBUTE+"]")}},_invokeDelegates:{value:function(e,t){var n,r,i,o=e.objects,a=o.owner||t&&t.owner;for(var s in o)t&&s in t||(n=o[s],r=this._getObjectOwner(s,a),i=this._getObjectLabel(s),n&&("function"==typeof n._deserializedFromTemplate&&n._deserializedFromTemplate(r,i,e),"function"==typeof n.deserializedFromTemplate&&n.deserializedFromTemplate(r,i,e)));if(a){var l=this.getSerialization();l.isExternalObject("owner")||("function"==typeof a._templateDidLoad&&a._templateDidLoad(e),"function"==typeof a.templateDidLoad&&a.templateDidLoad(e))}}},setInstances:{value:function(e){this._instances=e}},getInstances:{value:function(){return this._instances}},setObjects:{value:function(e){this.objectsString=JSON.stringify(e,null,4)}},setObjectMetadata:{value:function(e,t,n,r){var i=this._metadata;i||(this._metadata=i=Object.create(null)),i[e]={require:t,label:n,owner:r},this.__deserializer=null}},getObjectMetadata:{value:function(e){var t=this._metadata;return t&&e in t?t[e]:{require:this._require,label:e}}},_getObjectOwner:{value:function(e,t){var n,r=this._metadata;return n=r&&e in r?r[e].owner:t}},_getObjectLabel:{value:function(e){var t,n=this._metadata;return t=n&&e in n?n[e].label:e}},setDocument:{value:function(e){this.document=this.cloneHtmlDocument(e),this.clearTemplateFromElementContentsCache()}},getObjectsString:{value:function(e){var t;return t=this.getInlineObjectsString(e),null===t?this.getExternalObjectsString(e):h.resolve(t)}},getInlineObjectsString:{value:function(e){var t="script[type='"+this._SERIALIZATION_SCRIPT_TYPE+"']",n=e.querySelector(t);return n?n.textContent:null}},getExternalObjectsString:{value:function(e){var t,n=e.querySelector('link[rel="serialization"]');return n?t=new h(function(e,t){var r=new XMLHttpRequest,i=n.getAttribute("href");r.open("GET",i),r.addEventListener("load",function(n){var r=n.target;200===r.status?e(r.responseText):t(new Error("Unable to retrive '"+i+"', code status: "+r.status))},!1),r.addEventListener("error",function(e){t(new Error("Unable to retrive '"+i+"' with error: "+e.error+"."))},!1),r.send()}):h.resolve(null)}},createHtmlDocumentWithHtml:{value:function(e,t){var n=document.implementation.createHTMLDocument("");return e&&(n.documentElement.innerHTML=e,t&&this.normalizeRelativeUrls(n,t)),n}},cloneHtmlDocument:{value:function(e){var t=document.implementation.createHTMLDocument(""),n=e.baseURI||e.URL;return t.replaceChild(t.importNode(e.documentElement,!0),t.documentElement),this.normalizeRelativeUrls(t,n),t}},createHtmlDocumentWithModuleId:{value:function(e,t){var n=this;return"function"!=typeof t?h.reject(new Error("Missing 'require' function to load module '"+e+"'.")):t.async(e).then(function(e){return n.createHtmlDocumentWithHtml(e.content,e.directory)})}},_removeObjects:{value:function(e){var t="script[type='"+this._SERIALIZATION_SCRIPT_TYPE+"'], link[rel='serialization']";Array.prototype.forEach.call(e.querySelectorAll(t),function(e){e.parentNode.removeChild(e)})}},_addObjects:{value:function(e,t){if(t){var n=e.createElement("script");n.setAttribute("type",this._SERIALIZATION_SCRIPT_TYPE),n.textContent=JSON.stringify(JSON.parse(t),null,4),e.head.appendChild(n)}}},_templateFromElementContentsCache:{value:null},clearTemplateFromElementContentsCache:{value:function(){this._templateFromElementContentsCache=null}},createTemplateFromElementContents:{value:function(e){var t,n,r,i=this._templateFromElementContentsCache;return i||(i=Object.create(null),this._templateFromElementContentsCache=i),e in i?Object.create(i[e]):(t=this.getElementById(e),r=this.document.createRange(),r.selectNodeContents(t),n=this.createTemplateFromRange(r),i[e]=n,Object.create(n))}},createTemplateFromElement:{value:function(e){var t,n;return t=this.getElementById(e),n=this.document.createRange(),n.selectNode(t),this.createTemplateFromRange(n)}},createTemplateFromRange:{value:function(e){var t,n,r,i,o,a=new u;return t=e.cloneContents(),n=this._getChildrenElementIds(t),a.initWithString(this.objectsString),r=a.getSerializationLabelsWithElements(n),o=a.extractSerialization(r,["owner"]),i=new d,i.initWithObjectsAndDocumentFragment(null,t,this._require),i.objectsString=o.getSerializationString(),i._resources=this.getResources(),i}},_createSerializationWithElementIds:{value:function(e){var t,n,r=new u;return r.initWithString(this.objectsString),t=r.getSerializationLabelsWithElements(e),n=r.extractSerialization(t,["owner"])}},expandParameters:{value:function(e){var t,n,r,i,o,a,s,l=[],u={},c=this.getSerialization(),h={};t=this.getParameters();for(var p in t)if(t.hasOwnProperty(p)){if(i=t[p],o=e.getTemplateArgumentElement(p),"*"===p&&i.childElementCount>0){if(!o||!(o.childElementCount>0||o.firstChild&&o.firstChild.data&&o.firstChild.data.trim())){var d=i.ownerDocument.createRange();d.selectNodeContents(i),this.replaceNode(d.extractContents(),i);break}c.getSerializationLabels(),c.removeObjectsWithLabels(this._getChildrenElementIds(i))}if(l.push.apply(l,this._getElementIds(o)),n=this.replaceNode(o,i))for(var f in n)u[f]=n[f]}return e._ownerDocumentPart&&(h.elementIds=l,h.elementIdsCollisions=u,a=e.getTemplateArgumentSerialization(l),a.renameElementReferences(u),s=function(t){if(t.indexOf(":")>0)return e.resolveTemplateArgumentTemplateProperty(t)},r=c.mergeSerialization(a,{willMergeObjectWithLabel:s}),this.objectsString=c.getSerializationString(),h.labels=a.getSerializationLabels(),h.labelsCollisions=r),h}},_resolveElementIdCollisions:{value:function(e,t){var n,r,i,o,a,s;t=t||new c,o=this.getElementIds();for(var l=0;i=o[l];l++)t.addLabel(i);r=this._getElements(e);for(i in r)this.getElementById(i)&&(a=r[i],s=t.generateLabel(t.getLabelBaseName(i)),this.setElementId(a,s),n||(n=Object.create(null)),n[i]=s);return n}},replaceNode:{value:function(e,t,n){var r;return r=this._resolveElementIdCollisions(e,n),this.normalizeRelativeUrls(e,this.getBaseUrl()),t.parentNode.replaceChild(e,t),r}},insertNodeBefore:{value:function(e,t,n){var r;return r=this._resolveElementIdCollisions(e,n),this.normalizeRelativeUrls(e,this.getBaseUrl()),t.parentNode.insertBefore(e,t),r}},appendNode:{value:function(e,t,n){var r;return r=this._resolveElementIdCollisions(e,n),this.normalizeRelativeUrls(e,this.getBaseUrl()),t.appendChild(e),r}},getElementId:{value:function(e){if(e.getAttribute)return e.getAttribute(this._ELEMENT_ID_ATTRIBUTE)}},setElementId:{value:function(e,t){e.setAttribute(this._ELEMENT_ID_ATTRIBUTE,t)}},getElementIds:{value:function(){return this._getElementIds(this.document.body)}},_getElements:{value:function(e){var t,n,r="*["+this._ELEMENT_ID_ATTRIBUTE+"]",i={};t=e.querySelectorAll(r);for(var o,a=0;o=t[a];a++)n=this.getElementId(o),i[n]=o;return n=this.getElementId(e),n&&(i[n]=e),i}},_getChildrenElementIds:{value:function(e){var t,n="*["+this._ELEMENT_ID_ATTRIBUTE+"]",r=[];t=e.querySelectorAll(n);for(var i,o=0;i=t[o];o++)r.push(this.getElementId(i));return r}},_getElementIds:{value:function(e){var t,n=this._getChildrenElementIds(e);return t=this.getElementId(e),t&&n.push(t),n}},getElementById:{value:function(e){var t="*["+this._ELEMENT_ID_ATTRIBUTE+"='"+e+"']";return this.document.querySelector(t)}},html:{get:function(){var e=this.document;return this._removeObjects(e),this._addObjects(e,this.objectsString),this._getDoctypeString(e.doctype)+"\n"+e.documentElement.outerHTML}},_getDoctypeString:{value:function(e){return"<!DOCTYPE "+e.name+(e.publicId?' PUBLIC "'+e.publicId+'"':"")+(!e.publicId&&e.systemId?" SYSTEM":"")+(e.systemId?' "'+e.systemId+'"':"")+">"}},normalizeRelativeUrls:{value:function(e,t){if("string"==typeof t&&""!==t&&"about:blank"!==t)for(var n="http://www.w3.org/1999/xlink",r=/^[\w\-]+:|^\//,i=d._NORMALIZED_TAG_NAMES.indexOf(e.tagName)!==-1?[e]:e.querySelectorAll(d._NORMALIZED_TAG_NAMES_SELECTOR),o=0,a=i.length;o<a;o++){var s,l=i[o];"image"===l.tagName?(s=l.getAttributeNS(n,"href"),r.test(s)||l.setAttributeNS(n,"href",p.resolve(t,s))):l.hasAttribute("src")?(s=l.getAttribute("src"),""===s||r.test(s)||l.setAttribute("src",p.resolve(t,s))):l.hasAttribute("href")&&(s=l.getAttribute("href"),""===s||r.test(s)||l.setAttribute("href",p.resolve(t,s)))}}},replaceContentsWithTemplate:{value:function(e){this._require=e._require,this._baseUrl=e._baseUrl,this._document=e._document,this.objectsString=e.objectsString,this._instances=e._instances,this._templateFromElementContentsCache=e._templateFromElementContentsCache,this._metadata=e._metadata}},refresh:{value:function(){this.isDirty&&(this.refresher&&"function"==typeof this.refresher.refreshTemplate?(this.refresher.refreshTemplate(this),this.isDirty=!1):console.warn("Not able to refresh without a refresher.refreshTemplate."))}}},{_templateCache:{value:{moduleId:Object.create(null)}},_getTemplateCacheKey:{value:function(e,t){return e=t.resolve(e),t.location+"#"+e}},getTemplateWithModuleId:{value:function(e,t){var n,r;return n=this._getTemplateCacheKey(e,t),r=this._templateCache.moduleId[n],r||(r=(new d).initWithModuleId(e,t),this._templateCache.moduleId[n]=r),r}},_NORMALIZED_TAG_NAMES:{value:["IMG","image","IFRAME","link","script"]},__NORMALIZED_TAG_NAMES_SELECTOR:{value:null},_NORMALIZED_TAG_NAMES_SELECTOR:{get:function(){return this.__NORMALIZED_TAG_NAMES_SELECTOR||(this.__NORMALIZED_TAG_NAMES_SELECTOR=this._NORMALIZED_TAG_NAMES.join(",")),this.__NORMALIZED_TAG_NAMES_SELECTOR}}})),f=o.specialize({_resources:{value:null},_resourcesLoaded:{value:!1},template:{value:null},rootUrl:{value:""},constructor:{value:function(){this._resources=Object.create(null)}},resolvedPromise:{get:function(){return f._resolvedPromise||(f._resolvedPromise=h.resolve()),f._resolvedPromise}},initWithTemplate:{value:function(e){this.template=e}},hasResources:{value:function(){return this.getStyles().length>0||this.getScripts().length>0}},resourcesLoaded:{value:function(){return this._resourcesLoaded}},loadResources:{value:function(e){return this._resourcesLoaded=!0,h.all([this.loadScripts(e),this.loadStyles(e)])}},getScripts:{value:function(){var e,t,n,r=this._resources.scripts;if(!r){t=this.template,r=this._resources.scripts=[],n=t.document.querySelectorAll("script");for(var i=0,o=n.length;i<o;i++)e=n[i],e.type!==this.template._SERIALIZATION_SCRIPT_TYPE&&r.push(e)}return r}},loadScripts:{value:function(e){var t=this.getScripts(),n=t.length;if(n){for(var r=[],i=0;i<n;i++)r.push(this.loadScript(t[i],e));return h.all(r)}return this.resolvedPromise}},loadScript:{value:function(e,t){var n,r;return n=l.getInstanceForDocument(t),r=this._cloneScriptElement(e,t),n.addScript(r)}},_cloneScriptElement:{value:function(e,t){for(var n,r=t.createElement("script"),i=e.attributes,o=0,a=i.length;o<a;o++)n=i[o],r.setAttribute(n.name,n.value);return r.textContent=e.textContent,r}},getStyles:{value:function(){var e,t,n,r=this._resources.styles;return r||(n='link[rel="stylesheet"], style',e=this.template,t=e.document.querySelectorAll(n),r=Array.prototype.slice.call(t,0),this._resources.styles=r),r}},loadStyles:{value:function(e){var t,n=[];t=this.getStyles();for(var r=0,i=t.length;r<i;r++)n.push(this.loadStyle(t[r],e));return h.all(n)}},loadStyle:{value:function(e,t){var n,r=e.getAttribute("href");return r?(n=l.getInstanceForDocument(t),n.preloadResource(r)):this.resolvedPromise}},createStylesForDocument:{value:function(e){for(var t,n,r=this.getStyles(),i=[],o=0;n=r[o];o++)t=e.importNode(n,!0),i.push(t);return i}}}),v=o.specialize({getTemplateArgumentElement:{value:Function.noop},getTemplateArgumentSerialization:{value:Function.noop},resolveTemplateArgumentTemplateProperty:{value:Function.noop}});t.Template=d,t.TemplateArgumentProvider=v,t.TemplateResources=f,t.instantiateDocument=r}}),montageDefine("64d2e12","core/document-resources",{dependencies:["./core","./promise","./mini-url"],factory:function(e,t,n){var r=e("./core").Montage,i=e("./promise").Promise,o=e("./mini-url"),a=r.specialize({_SCRIPT_TIMEOUT:{value:5e3},_document:{value:null},_resources:{value:null},_preloaded:{value:null},_expectedStyles:{value:null},constructor:{value:function(){this._expectedStyles=[],this._isPollingDocumentStyleSheets=!this._isLinkLoadEventAvailable()}},_webkitVersion:{value:function(){var e=/AppleWebKit\/([\d.]+)/.exec(navigator.userAgent);return e?parseInt(e[1]):null}},_isLinkLoadEventAvailable:{value:function(){var e=document.createElement("link"),t=this._webkitVersion();return"onload"in e&&!(null!==t&&t<535)}},initWithDocument:{value:function(e){return this.clear(),this._document=e,this._populateWithDocument(e),this}},_populateWithDocument:{value:function(e){var t=e.querySelectorAll("script"),n=Array.prototype.forEach;n.call(t,function(e){e.src&&this._addResource(this.normalizeUrl(e.src))},this);var r=e.querySelectorAll("link");n.call(r,function(e){"stylesheet"===e.rel&&this._addResource(this.normalizeUrl(e.href))},this)}},clear:{value:function(){this._resources=Object.create(null),this._preloaded=Object.create(null)}},_addResource:{value:function(e){this._resources[e]=!0}},hasResource:{value:function(e){return e in this._resources}},isResourcePreloaded:{value:function(e){return this._preloaded[e]===!0}},isResourcePreloading:{value:function(e){return i.is(this._preloaded[e])}},setResourcePreloadedPromise:{value:function(e,t){this._preloaded[e]=t}},setResourcePreloaded:{value:function(e){this._preloaded[e]=!0}},getResourcePreloadedPromise:{value:function(e){return this._preloaded[e]}},addScript:{value:function(e){var t=this.normalizeUrl(e.src);return t?this.isResourcePreloaded(t)?i.resolve():this.isResourcePreloading(t)?this.getResourcePreloadedPromise(t):this._importScript(e):this._importScript(e)}},_importScript:{value:function(e){var t,n=this,r=this._document,o=r.head,a=e.src;return a?(n._addResource(a),t=new i(function(t,r){var i,o=function s(r){n.setResourcePreloaded(a),e.removeEventListener("load",s,!1),e.removeEventListener("error",s,!1),clearTimeout(i),t(r)};e.addEventListener("load",o,!1),e.addEventListener("error",o,!1),i=setTimeout(function(){n.setResourcePreloaded(a),t()},n._SCRIPT_TIMEOUT)}),this.setResourcePreloadedPromise(a,t)):t=new i(function(e,t){e()}),o.appendChild(r.createComment("Inserted from FIXME")),o.appendChild(e),t}},handleEvent:{value:function(e){var t,n=e.target;"LINK"===n.tagName&&(t=this._expectedStyles.indexOf(n.href),t>=0&&this._expectedStyles.splice(t,1),n.removeEventListener("load",this,!1),n.removeEventListener("error",this,!1))}},addStyle:{value:function(e,t){var n,r=e.getAttribute("href");if(r){if(r=this.normalizeUrl(r),this.hasResource(r))return;this._addResource(r),this._expectedStyles.push(r),this._isPollingDocumentStyleSheets||(e.setAttribute("href",r),e.addEventListener("load",this,!1),e.addEventListener("error",this,!1))}n=t||this._document.head,n.insertBefore(e,n.firstChild)}},normalizeUrl:{value:function(e,t){return t||(t=this._document.location.href),o.resolve(t,e)}},domain:{value:global.location?global.location.protocol+"//"+global.location.host:""},isCrossDomain:{value:function(e){return 0!==e.indexOf(this.domain+"/")||0===e.indexOf("file://")}},preloadResource:{value:function(e,t){var n;return e=this.normalizeUrl(e),!t&&this.isCrossDomain(e)&&(n=!0),n||this.isResourcePreloaded(e)?i.resolve():this.isResourcePreloading(e)?this.getResourcePreloadedPromise(e):this._preloadResource(e)}},_preloadResource:{value:function(e){var t=this,n=new i(function(n,r){var i=new XMLHttpRequest;i.open("GET",e),i.addEventListener("load",n,!1),i.addEventListener("error",n,!1),i.addEventListener("timeout",n,!1),i.timeout=t._SCRIPT_TIMEOUT,i.send(),i.listener=n}).bind(this).then(function(t){this.setResourcePreloaded(e),t.target.removeEventListener("load",t.target.listener),t.target.removeEventListener("error",t.target.listener),t.target.removeEventListener("timeout",t.target.listener);
});return this.setResourcePreloadedPromise(e,n),n}},areStylesLoaded:{get:function(){var e,t;if(this._isPollingDocumentStyleSheets&&this._expectedStyles.length>0){e=this._document.styleSheets;for(var n,r=0;n=e[r];r++)t=this._expectedStyles.indexOf(n.href),t>=0&&this._expectedStyles.splice(t,1)}return 0===this._expectedStyles.length}}},{getInstanceForDocument:{value:function(e){var t=e.__montage_resources__;return t||(t=e.__montage_resources__=(new a).initWithDocument(e)),t}}});t.DocumentResources=a}}),montageDefine("64d2e12","core/gate",{dependencies:["./core","./logger","collections/map"],factory:function(e,t,n){var r=e("./core").Montage,i=e("./logger").logger("gate"),o=e("collections/map");t.Gate=r.specialize({init:{enumerable:!1,value:function(){return this.reset(),this}},initWithDelegate:{enumerable:!1,value:function(e){return this.reset(),this.delegate=e,this}},initWithDescriptor:{enumerable:!1,value:function(e){var t;this.reset();for(t in e)e.hasOwnProperty(t)&&this.setField(t,e[t].value);return this}},count:{value:0},table:{value:null},getField:{enumerable:!1,value:function(e){var t=this.table;return!t||t[e]}},setField:{enumerable:!1,value:function(e,t){var n,r=this.table||(this.table=new o),a=this.count;n=r[e],"undefined"!=typeof n||t?"undefined"!=typeof n&&n!==t?t?this.count--:this.count++:t&&i.isDebug&&i.debug(this,e+" was not set before."):this.count++,r[e]=!!t,0===this.count&&a>0?this.callDelegateMethod(!0):0===a&&this.count>0&&this.callDelegateMethod(!1)}},removeField:{enumerable:!1,value:function(e){var t=this.table,n=t[e];"undefined"==typeof n||n||this.count--,delete t[e]}},delegate:{enumerable:!1,value:null},callDelegateMethod:{value:function(e){var t;this.delegate&&"function"==typeof(t=this.delegate["gateDidBecome"+(e?"True":"False")])&&t.call(this.delegate,this)},enumerable:!1},value:{enumerable:!1,get:function(){return 0===this.count}},reset:{enumerable:!1,value:function(){this.table={},this.count=0}},toString:{value:function(){var e,t,n=this._fields,r="";for(e=0;t=n[e];e++)r+=t+"["+(this._value&n[t])+"], ";return r}}})}}),montageDefine("64d2e12","core/drag/drag-manager",{dependencies:["../core","./drag-event","./drag-event","../../composer/translate-composer","./dragging-operation-context"],factory:function(e,t,n){var r=e("../core").Montage,i=e("./drag-event").DragEvent,o=e("./drag-event").DataTransfer,a=e("../../composer/translate-composer").TranslateComposer,s=e("./dragging-operation-context").DraggingOperationContext,l=0,u=1,c="touch",h="px",p=t.DragManager=r.specialize({__draggables:{value:null},_draggables:{get:function(){return this.__draggables||(this.__draggables=[])}},__droppables:{value:null},_droppables:{get:function(){return this.__droppables||(this.__droppables=[])}},__rootComponent:{value:null},_rootComponent:{set:function(e){this.__rootComponent!==e&&(this.__rootComponent&&this.__rootComponent.removeComposer(this._translateComposer),e&&e.addComposerForElement(this._translateComposer,e.element),this.__rootComponent=e)},get:function(){return this.__rootComponent}},__translateComposer:{value:null},_translateComposer:{get:function(){return this.__translateComposer||(this.__translateComposer=new a,this.__translateComposer.hasMomentum=!1,this.__translateComposer.shouldCancelOnSroll=!0,this.__translateComposer.translateX=0,this.__translateComposer.translateY=0,this.__translateComposer.lazyLoad=!1),this.__translateComposer}},_draggingOperationContext:{value:null},_willTerminateDraggingOperation:{value:!1},_needsToWaitforDraggedImageBoundaries:{value:!1},_draggableContainerBoundingRect:{value:null},_draggedImageBoundingRect:{value:null},_oldDraggableDisplayStyle:{value:null},_dragEnterCounter:{value:0},_cursorStyle:{value:null},_scrollThreshold:{value:25},_shouldRemovePlaceholder:{value:!1},initWithComponent:{value:function(e){this._rootComponent=e;var t=this._rootComponent.element;return"webkitTransform"in t.style?p.cssTransform="webkitTransform":"MozTransform"in t.style?p.cssTransform="MozTransform":"oTransform"in t.style?p.cssTransform="oTransform":p.cssTransform="transform",window.PointerEvent?t.addEventListener("pointerdown",this,!0):window.MSPointerEvent&&window.navigator.msPointerEnabled?t.addEventListener("MSPointerDown",this,!0):t.addEventListener("touchstart",this,!0),this._translateComposer.addEventListener("translateStart",this),t.addEventListener("dragenter",this,!0),this}},registerDraggable:{value:function(e){this._register(e,l)}},registerDroppable:{value:function(e){this._register(e,u)}},unregisterDraggable:{value:function(e){this._unregister(e,l)}},unregisterDroppable:{value:function(e){this._unregister(e,u)}},_register:{value:function(e,t){if(e){var n=t===l?this._draggables:this._droppables;n.indexOf(e)===-1&&n.push(e)}}},_unregister:{value:function(e,t){if(e){var n,r=t===l?this._draggables:this._droppables;(n=r.indexOf(e))>-1&&r.splice(n,1)}}},_createDraggingOperationContextWithDraggableAndPosition:{value:function(e,t){var n=new s;return n.draggable=e,n.startPositionX=t.pageX,n.startPositionY=t.pageY,n.positionX=t.pageX,n.positionY=t.pageY,n}},_sanitizeDraggedImage:{value:function(e){return e.classList.add("montage-dragged-image"),e.style.visibility="hidden",e.style.position="absolute",e.style.pointerEvents="none",e.style.boxSizing="border-box",e.style.zIndex=999999,e.style.opacity=.95,e}},_createDragEvent:{value:function(e,t){var n=new i(e);return t.dataTransfer?n.dataTransfer=t.dataTransfer:t.dataTransfer=n.dataTransfer,n}},_dispatchDragStart:{value:function(){var e=this._draggingOperationContext.draggable,t=this._createDragEvent("dragstart",this._draggingOperationContext);return e?e.dispatchEvent(t):this._rootComponent.application.dispatchEvent(t),this._draggingOperationContext.dropTargetCandidates=t.dataTransfer.dropTargetCandidates,this._draggingOperationContext.dropTargetCandidates.forEach(function(e){e.classList.add("valid-drop-target")}),t}},_dispatchDragEnd:{value:function(e){e.dropTargetCandidates.forEach(function(e){e.classList.remove("valid-drop-target")}),e.draggable&&e.draggable.dispatchEvent(this._createDragEvent("dragend",e))}},_dispatchDrop:{value:function(e){e.currentDropTarget&&(e.currentDropTarget.classList.remove("drag-enter"),e.currentDropTarget.classList.remove("drag-over"),e.currentDropTarget.dispatchEvent(this._createDragEvent("drop",e)))}},_dispatchDragEnter:{value:function(e){if(e.currentDropTarget){e.currentDropTarget.classList.add("drag-enter");var t=this._createDragEvent("dragenter",e);e.currentDropTarget.dispatchEvent(t),e.dropEffect=t.dataTransfer.dropEffect||"default"}}},_dispatchDragOver:{value:function(e){if(e.currentDropTarget){e.currentDropTarget.classList.add("drag-over");var t=this._createDragEvent("dragover",e);e.currentDropTarget.dispatchEvent(t),e.dropEffect=t.dataTransfer.dropEffect||"default"}}},_dispatchDragLeave:{value:function(e){e.currentDropTarget&&(e.currentDropTarget.classList.remove("drag-over","drag-enter"),e.currentDropTarget.dispatchEvent(this._createDragEvent("dragleave",e)))}},_findDraggableAtPosition:{value:function(e,t){return this._findRegisteredComponentAtPosistion(e,t,l)}},_findDroppableAtPosition:{value:function(e,t){return this._findRegisteredComponentAtPosistion(e,t,u)}},_findRegisteredComponentAtPosistion:{value:function(e,t,n){var r=this._findComponentAtPosition(e,t),i=null;if(r)for(var o,a=n===l?this._draggables:this._droppables;r;)(o=a.indexOf(r))>-1?(i=a[o],r=null):r=r.parentComponent;return i}},_findComponentAtPosition:{value:function(e,t){for(var n=document.elementFromPoint(e,t),r=null;n&&!(r=n.component);)n=n.parentElement;return r}},_addTranslateListeners:{value:function(){this._translateComposer.addEventListener("translate",this),this._translateComposer.addEventListener("translateEnd",this),this._translateComposer.addEventListener("translateCancel",this)}},_removeTranslateListeners:{value:function(){this._translateComposer.removeEventListener("translate",this),this._translateComposer.removeEventListener("translateEnd",this),this._translateComposer.removeEventListener("translateCancel",this)}},_addDragListeners:{value:function(){var e=this._rootComponent.element;e.addEventListener("dragover",this,!0),e.addEventListener("drop",this,!0),e.addEventListener("dragleave",this,!0)}},_removeDragListeners:{value:function(){var e=this._rootComponent.element;e.removeEventListener("dragover",this,!0),e.removeEventListener("drop",this,!0),e.removeEventListener("dragleave",this,!0)}},_resetTranslateContext:{value:function(){this._removeTranslateListeners(),this._removeDragListeners(),this._dragEnterCounter=0,this._draggingOperationContext.isDragging=!1,this.__translateComposer.translateX=0,this.__translateComposer.translateY=0,this._oldDraggableDisplayStyle=null,this._draggedImageBoundingRect=null,this._draggableContainerBoundingRect=null,this._willTerminateDraggingOperation=!1,this._needsToWaitforDraggedImageBoundaries=!1}},capturePointerdown:{value:function(e){(e.pointerType===c||window.MSPointerEvent&&e.pointerType===window.MSPointerEvent.MSPOINTER_TYPE_TOUCH)&&this.captureTouchstart(e)}},captureTouchstart:{value:function(e){var t=this._findDraggableAtPosition(e.pageX,e.pageY);t&&(window.PointerEvent?this._rootComponent.element.addEventListener("pointermove",this,!0):window.MSPointerEvent&&window.navigator.msPointerEnabled?this._rootComponent.element.addEventListener("MSPointerMove",this,!0):this._rootComponent.element.addEventListener("touchmove",this,!0))}},capturePointermove:{value:function(e){this.captureTouchmove(e)}},captureTouchmove:{value:function(e){e.preventDefault(),window.PointerEvent?this._rootComponent.element.removeEventListener("pointermove",this,!0):window.MSPointerEvent&&window.navigator.msPointerEnabled?this._rootComponent.element.removeEventListener("MSPointerMove",this,!0):this._rootComponent.element.removeEventListener("touchmove",this,!0)}},captureDragenter:{value:function(e){if(!(this._draggingOperationContext||e instanceof i)){var t;e.dataTransfer.types,this._draggingOperationContext=t=this._createDraggingOperationContextWithDraggableAndPosition(null,e),t.dataTransfer=o.fromDataTransfer(e.dataTransfer);var n=this._dispatchDragStart();t.dragEffect=n.dataTransfer.dragEffect,this._addDragListeners(),t.isDragging=!0,this._rootComponent.needsDraw=!0}this._dragEnterCounter++}},captureDragover:{value:function(e){this._draggingOperationContext.currentDropTarget&&e.preventDefault(),this._draggingOperationContext.positionX===e.pageX&&this._draggingOperationContext.positionY===e.pageY||(this._draggingOperationContext.deltaX=e.pageX-this._draggingOperationContext.startPositionX,this._draggingOperationContext.deltaY=e.pageY-this._draggingOperationContext.startPositionY,this._draggingOperationContext.positionX=e.pageX,this._draggingOperationContext.positionY=e.pageY,this._draggingOperationContext.dataTransfer=e.dataTransfer,this._draggingOperationContext.dataTransfer=o.fromDataTransfer(e.dataTransfer),this._rootComponent.needsDraw=!0)}},captureDrop:{value:function(e){e.preventDefault(),e.stopPropagation(),this._draggingOperationContext.deltaX=e.pageX-this._draggingOperationContext.startPositionX,this._draggingOperationContext.deltaY=e.pageY-this._draggingOperationContext.startPositionY,this._draggingOperationContext.positionX=e.pageX,this._draggingOperationContext.positionY=e.pageY,this._draggingOperationContext.dataTransfer=o.fromDataTransfer(e.dataTransfer),this._removeDragListeners(),this.handleTranslateEnd()}},captureDragleave:{value:function(e){this._dragEnterCounter--,this._dragEnterCounter||this.handleTranslateCancel()}},handleTranslateStart:{value:function(e){var t=this._translateComposer.pointerStartEventPosition,n=this._findDraggableAtPosition(t.pageX,t.pageY);if(n){var r,i;this._draggingOperationContext=r=this._createDraggingOperationContextWithDraggableAndPosition(n,t);var o=this._dispatchDragStart();this._draggingOperationContext.dataTransfer=o.dataTransfer,this._draggingOperationContext.dragEffect=o.dataTransfer.dragEffect,this._draggingOperationContext.showPlaceholder=o.dataTransfer.showPlaceholder,(i=o.dataTransfer.getDragImage())||(i=n.element.cloneNode(!0)),r.draggedImage=this._sanitizeDraggedImage(i),this._addTranslateListeners(),r.isDragging=!0,this._rootComponent.needsDraw=!0}else this._translateComposer._cancel()}},handleTranslate:{value:function(e){this._draggingOperationContext.deltaX=e.translateX,this._draggingOperationContext.deltaY=e.translateY,this._draggingOperationContext.positionX=this._draggingOperationContext.startPositionX+e.translateX,this._draggingOperationContext.positionY=this._draggingOperationContext.startPositionY+e.translateY,this._rootComponent.needsDraw=!0}},handleTranslateEnd:{value:function(){this._willTerminateDraggingOperation=!0,this._rootComponent.needsDraw=!0}},handleTranslateCancel:{value:function(){this.draggingOperationContext.currentDropTarget=null,this._willTerminateDraggingOperation=!0,this._rootComponent.needsDraw=!0}},willDraw:{value:function(){var e;if((e=this._draggingOperationContext)&&e.isDragging){var t=e.draggable;if(!this._draggedImageBoundingRect&&e.draggable)this._draggedImageBoundingRect=e.draggable.element.getBoundingClientRect(),t.draggableContainer&&(this._draggableContainerBoundingRect=t.draggableContainer.getBoundingClientRect());else{var n=this._findDroppableAtPosition(e.positionX,e.positionY);n&&!e.dropTargetCandidates.has(n)?(n.classList.add("invalid-drop-target"),this._invalidDroppable=n,n=null):this._invalidDroppable&&(this._invalidDroppable.classList.remove("invalid-drop-target"),this._invalidDroppable=null),t&&t.dispatchEvent(this._createDragEvent("drag",e)),n!==e.currentDropTarget?(e.currentDropTarget&&this._dispatchDragLeave(e),e.currentDropTarget=n,n&&this._dispatchDragEnter(e)):n?this._dispatchDragOver(e):e.currentDropTarget=null,n?this._cursorStyle=e.dropEffect:this._cursorStyle=e.dragEffect}}}},draw:{value:function(){var e=this._draggingOperationContext;if(e&&e.isDragging&&!this._willTerminateDraggingOperation){var t=e.draggedImage;if(t){var n=e.deltaX,r=e.deltaY;if(this._drawDraggedImageIfNeeded(t),this._needsToWaitforDraggedImageBoundaries?this._needsToWaitforDraggedImageBoundaries=!1:t.style.visibility="visible",this._draggableContainerBoundingRect){var i,o,a,s,l=this._draggableContainerBoundingRect;e.positionX-(i=e.startPositionX-this._draggedImageBoundingRect.left)<l.left?n=l.left-e.startPositionX+i:e.positionX+(o=this._draggedImageBoundingRect.right-e.startPositionX)>l.right&&(n=l.right-e.startPositionX-o),e.positionY-(a=e.startPositionY-this._draggedImageBoundingRect.top)<l.top?r=l.top-e.startPositionY+a:e.positionY+(s=this._draggedImageBoundingRect.bottom-e.startPositionY)>l.bottom&&(r=l.bottom-e.startPositionY-s)}var u="translate3d(";u+=n,u+="px,",u+=r,u+="px,0)",t.style[p.cssTransform]=u,this._scrollIfNeeded(e.positionX,e.positionY)}this._rootComponent.element.style.cursor=this._cursorStyle}else if(this._willTerminateDraggingOperation){if(this._rootComponent.element.style.cursor="default",e.draggedImage&&document.body.removeChild(e.draggedImage),e.currentDropTarget&&(e.hasBeenDrop=!0,e.droppable=e.currentDropTarget),this._dispatchDrop(e),this._resetTranslateContext(),e.currentDropTarget=null,this._dispatchDragEnd(e),e.draggable&&"move"===e.dragEffect)return this._shouldRemovePlaceholder=!0,void(this._rootComponent.needsDraw=!0);this._draggingOperationContext=null}this._removeDraggablePlaceholderIfNeeded()}},_drawDraggedImageIfNeeded:{value:function(e){var t=this._draggingOperationContext;if(!e.parentElement){var n=this._draggedImageBoundingRect,r=0,i=0;if(e.style.width=n.width+h,e.style.height=n.height+h,null!==t.dataTransfer.dragImageXOffset?(i=t.startPositionX,i-=t.dataTransfer.dragImageXOffset>n.width?n.width:t.dataTransfer.dragImageXOffset):i=n.left,null!==t.dataTransfer.dragImageXOffset?(r=t.startPositionY,r-=t.dataTransfer.dragImageYOffset>n.height?n.height:t.dataTransfer.dragImageYOffset):r=n.top,r+=h,i+=h,e.style.top=r,e.style.left=i,"move"===t.dragEffect){var o=t.draggable.element;if(this._oldDraggableDisplayStyle=o.style.display,o.style.display="none",t.showPlaceholder){var a=document.createElement("div"),s=n.width+h,l=n.height+h;a.style.width=s,a.style.height=l,a.style.boxSizing="border-box",a.classList.add("montage-drag-placeholder"),o.parentNode.insertBefore(a,o),this._placeholderElement=a}}document.body.appendChild(e),this._needsToWaitforDraggedImageBoundaries=!0}}},_removeDraggablePlaceholderIfNeeded:{value:function(){if(this._shouldRemovePlaceholder){var e=this._draggingOperationContext;if(this._draggingOperationContext=null,this._shouldRemovePlaceholder=!1,e&&e.draggable){var t=e.draggable.element;t.style.display=this._oldDraggableDisplayStyle,e.showPlaceholder&&t.parentNode.removeChild(this._placeholderElement)}}}},_scrollIfNeeded:{value:function(e,t){for(var n,r,i,o,a,s,l,u,c,h,p,d,f,v=document.elementFromPoint(e,t),g=this._draggableContainerBoundingRect,m=this._scrollThreshold,_=!1,y=!1;v;)n=v.getBoundingClientRect(),r=n.height,i=n.width,!r||!i||(f=(h=v.scrollHeight)<=r)||f&&(u=v.scrollWidth)<=i?v=v.parentElement:(o=n.top,a=n.bottom,l=n.left,s=n.right,d=0,y=!1,t>=o&&(!g||t>=g.top)&&t<=o+m?(p=v.scrollTop,p&&(v.scrollTop=p-this._getScrollMultiplier(t-o),this._rootComponent.needsDraw=!0),y=!0):d++,!y&&t<=a&&(!g||t<=g.bottom)&&t>=a-m?(p=v.scrollTop,p<h&&(v.scrollTop=p+this._getScrollMultiplier(a-t),this._rootComponent.needsDraw=!0),y=!0):d++,e>=l&&(!g||e>=g.left)&&e<=l+m?(c=v.scrollLeft,c&&(v.scrollLeft=c-this._getScrollMultiplier(e-l),this._rootComponent.needsDraw=!0),_=!0):d++,!_&&e<=s&&(!g||e<=g.right)&&e>=s-m?(c=v.scrollLeft,u=u||v.scrollWidth,c<u&&(v.scrollLeft=c+this._getScrollMultiplier(s-e),this._rootComponent.needsDraw=!0),_=!0):d++,v=y||_||4===d?null:v.parentElement)}},_getScrollMultiplier:{value:function(e){return this._scrollThreshold/(e>=1?e:1)*4}}});p.prototype.captureMSPointerDown=p.prototype.capturePointerdown,p.prototype.captureMSPointerMove=p.prototype.capturePointermove}}),montageDefine("64d2e12","core/application",{dependencies:["./target","./template","../window-loader/montage-window","./dom"],factory:function(e,t,n){var r,i=e("./target").Target,o=e("./template"),a=e("../window-loader/montage-window").MontageWindow;e("./dom");var s="-is-first-load";t.Application=i.specialize({eventManager:{value:null},parentApplication:{value:null},name:{value:null},_isFirstLoad:{value:null},isFirstLoad:{get:function(){return this._isFirstLoad}},mainApplication:{get:function(){for(var e=this;e.parentApplication;)e=e.parentApplication;return e}},_windowsSortOrder:{value:"reverse-z-order"},windowsSortOrder:{get:function(){return null===this.parentApplication?this._windowsSortOrder:this.mainApplication.windowsSortOrder},set:function(e){null===this.parentApplication?["z-order","reverse-z-order","z-order","reverse-open-order"].indexOf(e)!==-1&&(this._windowsSortOrder=e):this.mainApplication.windowsSortOrder=e}},windows:{get:function(){if(null===this.parentApplication){if(!this._windows){var e=new a;e.application=this,e.window=window,this.window=e,this._windows=[this.window],this._multipleWindow=!0}return this._windows}return this.mainApplication.windows}},_window:{value:null},window:{get:function(){if(!this._window&&this===this.mainApplication){var e=new a;e.application=this,e.window=window,this._window=e}return this._window},set:function(e){this._window||(this._window=e)}},attachedWindows:{value:[]},eventManagerForWindow:{value:function(e){return e.defaultEventMananger}},focusWindow:{get:function(){var e=this.windows,t=this.windowsSortOrder;if("z-order"===t)return e[0];if("reverse-z-order"===t)return e[e.length-1];for(var n in e)if(e[n].focused)return e[n]}},delegate:{value:null},nextTarget:{get:function(){return this.delegate}},openWindow:{value:function(e,t,n){var r,i,o=this,s=new a,l={location:!1,menubar:!1,resizable:!0,scrollbars:!0,status:!1,titlebar:!0,toolbar:!1},u={module:e,name:t,parent:window,callback:function(e,t){var n;r=e.document.application,s.window=e,s.application=r,s.component=t,r.window=s,o.attachedWindows.push(s),n=o.mainApplication.windowsSortOrder,"z-order"===n||"reverse-open-order"===n?o.windows.unshift(s):o.windows.push(s),i=document.createEvent("CustomEvent"),i.initCustomEvent("load",!0,!0,null),s.dispatchEvent(i)}};this!==this.mainApplication||this._multipleWindow||this.window;var c,h,p="",d="";if("object"==typeof n)for(c in n)n.hasOwnProperty(c)&&(l[c]=n[c]);var f=["name"];for(c in l)f.indexOf(c)===-1&&(h=l[c],"boolean"==typeof h?h=h?"yes":"no":(h=String(h),h.match(/[ ,"]/)&&(h='"'+h.replace(/"/g,'\\"')+'"')),d+=p+c+"="+h,p=",");return global.require.loadPackage({name:"montage"}).then(function(e){var t=window.open(e.location+"window-loader/index.html","_blank",d);t.loadInfo=u}),s}},attachWindow:{value:function(e){var t,n=e.application.parentApplication;return n!==this&&(n&&n.detachWindow(e),e.parentApplication=this,this.attachedWindows.push(e),t=this.mainApplication.windowsSortOrder,"z-order"===t||"reverse-open-order"===t?this.windows.unshift(e):this.windows.push(e),e.focus()),e}},detachWindow:{value:function(e){var t,n,r=this.windows;return void 0===e&&(e=this.window),n=e.application.parentApplication,n===this?(t=this.attachedWindows.indexOf(e),t!==-1&&this.attachedWindows.splice(t,1),t=r.indexOf(e),t!==-1&&r.splice(t,1),e.application.parentApplication=null):n&&n.detachWindow(e),e}},constructor:{value:function(){"undefined"!=typeof window&&window.loadInfo&&!this.parentApplication&&(this.parentApplication=window.loadInfo.parent.document.application)}},_load:{value:function(n,r){var i,a=this;return this.name=n.packageDescription.name,this._loadApplicationContext(),t.application=a,e.async("ui/component").then(function(e){if(i=e.__root__,"undefined"!=typeof document)return i.element=document,o.instantiateDocument(document,n)}).then(function(e){return a.callDelegateMethod("willFinishLoading",a),i.needsDraw=!0,r&&r(a),a})}},_loadApplicationContext:{value:function(){if(null===this._isFirstLoad){var e,t=this.name+s;if("undefined"!=typeof localStorage&&(localStorage.getItem(t),null===e))try{localStorage.setItem(t,!0)}catch(n){}this._isFirstLoad=!e}}},_alertPopup:{value:null,enumerable:!1},_confirmPopup:{value:null,enumerable:!1},_notifyPopup:{value:null,enumerable:!1},_zIndex:{value:null},_isSystemPopup:{value:function(e){return"alert"===e||"confirm"===e||"notify"===e}},_createPopupSlot:{value:function(e){var t=document.createElement("div");document.body.appendChild(t),t.style.zIndex=e,t.style.position="absolute";var n=new r;return n.element=t,n.attachToParentComponent(),n}},getPopupSlot:{value:function(t,n,i){var o=this;e.async("ui/slot.reel/slot").then(function(e){r=r||e.Slot,t=t||"custom";var a,s,l=o._isSystemPopup(t);if(o.popupSlots=o.popupSlots||{},l)switch(t){case"alert":a=19004;break;case"confirm":a=19003;break;case"notify":a=19002}else o._zIndex?o._zIndex=o._zIndex+1:o._zIndex=17e3,a=o._zIndex;s=o.popupSlots[t],s||(s=o.popupSlots[t]=o._createPopupSlot(a)),l||(s.element.style.zIndex=a),s.content=n,i.call(this,s)})}},returnPopupSlot:{value:function(e){var t=this;if(t.popupSlots&&t.popupSlots[e]){var n=t.popupSlots[e];n.content=null}}},_getActivePopupSlots:{value:function(){var e=[];if(this.popupSlots){var t=Object.keys(this.popupSlots);if(t&&t.length>0){var n,r,i=t.length;for(n=0;n<i;n++)r=this.popupSlots[t[n]],r&&null!==r.content&&e.push(r)}}return e}}})}}),montageDefine("64d2e12","core/meta/object-descriptor",{dependencies:["../core","./derived-descriptor","./event-descriptor","collections/map","./model","../promise","./property-descriptor","./validation-rule","collections/set","../deprecate","../core","../core","../core","../core"],factory:function(e,t,n){var r=e("../core").Montage,i=e("./derived-descriptor").DerivedDescriptor,o=e("./event-descriptor").EventDescriptor,a=e("collections/map"),s=e("./model"),l=e("../promise").Promise,u=e("./property-descriptor").PropertyDescriptor,c=e("./validation-rule").PropertyValidationRule,h=e("collections/set"),p=e("../deprecate"),d={name:"default",customPrototype:!1},f=t.ObjectDescriptor=r.specialize({FileExtension:{value:".mjson"},constructor:{value:function(){this._ownPropertyDescriptors=[],this._propertyDescriptorGroups={},this._eventPropertyDescriptorsTable=new a,this.defineBinding("eventDescriptors",{"<-":"_eventDescriptors.concat(parent.eventDescriptors)"})}},initWithName:{value:function(e){return this._name=null!==e?e:"default",this.customPrototype=!1,this}},serializeSelf:{value:function(e){e.setProperty("name",this.name),this._model&&!this.model.isDefault&&e.setProperty("model",this._model,"reference"),this.objectDescriptorInstanceModule&&e.setProperty("objectDescriptorModule",this.objectDescriptorInstanceModule),this._parent&&e.setProperty("parent",this._parent),this._setPropertyWithDefaults(e,"customPrototype",this.customPrototype),this._ownPropertyDescriptors.length>0&&e.setProperty("propertyDescriptors",this._ownPropertyDescriptors),Object.getOwnPropertyNames(this._propertyDescriptorGroups).length>0&&e.setProperty("propertyDescriptorGroups",this._propertyDescriptorGroups),this._eventDescriptors.length>0&&e.setProperty("eventDescriptors",this._eventDescriptors),this._propertyValidationRules.length>0&&e.setProperty("propertyValidationRules",this._propertyValidationRules),"number"==typeof this.maxAge&&e.setProperty("maxAge",this.maxAge),this.userInterfaceDescriptorModules&&e.setProperty("userInterfaceDescriptorModules",this.userInterfaceDescriptorModules)}},deserializeSelf:{value:function(e){var t,n;t=e.getProperty("name"),void 0!==t&&(this._name=t),t=e.getProperty("model")||e.getProperty("binder"),t&&(this._model=t),t=e.getProperty("objectDescriptorModule")||e.getProperty("blueprintModule"),void 0!==t&&(this.objectDescriptorInstanceModule=t),n=e.getProperty("parent"),n&&(n.promise&&n.valueFromReference?(p.deprecationWarningOnce("parent reference via ObjectDescriptorReference","direct reference with object syntax"),this._parentReference=n):this._parent=n),this.customPrototype=this._getPropertyWithDefaults(e,"customPrototype"),t=e.getProperty("propertyDescriptors")||e.getProperty("propertyBlueprints"),t&&(this._ownPropertyDescriptors=t),t=e.getProperty("propertyDescriptorGroups")||e.getProperty("propertyBlueprintGroups"),t&&(this._propertyDescriptorGroups=t),t=e.getProperty("eventDescriptors")||e.getProperty("eventBlueprints"),t&&(this._eventDescriptors=t),t=e.getProperty("propertyValidationRules"),t&&(this._propertyValidationRules=t),t=e.getProperty("maxAge"),t&&(this.maxAge=t),t=e.getProperty("userInterfaceDescriptorModules"),t&&(this.userInterfaceDescriptorModules=t)}},_setPropertyWithDefaults:{value:function(e,t,n){n!==d[t]&&e.setProperty(t,n)}},_getPropertyWithDefaults:{value:function(e,t){var n=e.getProperty(t);return n||this[t]||d[t]}},_name:{value:null},name:{get:function(){return this._name}},create:{value:function(e,t,n){var r;if("undefined"==typeof e||f.prototype.isPrototypeOf(e)){var i=Object.getPrototypeOf(f).create;return i.call(this,"undefined"==typeof e?this:e,t,n)}return r="function"==typeof e.specialize||t?e.specialize(t,n):new e,this.ObjectProperty.applyWithObjectDescriptor(r.prototype,this),this.customPrototype=!0,r}},newInstance:{value:function(){var e=this.newInstancePrototype();return e?new e:null}},newInstancePrototype:{value:function(){if(this.customPrototype)throw new Error("Already has customPrototype");var e=this.parent?this.parent.newInstancePrototype():r,t=e.specialize({init:{value:function(){return this}}});return this.ObjectProperty.applyWithObjectDescriptor(t.prototype,this),t?t:null}},ObjectProperty:{serializable:!1,enumerable:!0,get:function(){return this.model?this.model.ObjectProperty:s.Model.group.defaultObjectDescriptorObjectProperty}},objectDescriptorInstanceModule:{serializable:!1,value:null},identifier:{get:function(){return["objectDescriptor",(this.name||"unnamed").toLowerCase()].join("_")}},_model:{value:null},model:{serializable:!1,get:function(){return this._model||(this._model=s.Model.group.defaultModel,this._model.addObjectDescriptor(this)),this._model},set:function(e){this._model=e}},_parentReference:{value:null},_parent:{value:null},parent:{serializable:!1,get:function(){return this._parent},set:function(e){this._parent=e}},customPrototype:{value:!1},_handlePropertyDescriptorsRangeChange:{value:function(e,t,n){var r,i,o=new h(this._propertyDescriptors),a=new h(e),s=new h(t);for(i=0;r=t[i];++i)!a.has(r)&&o.has(r)&&(n=this._propertyDescriptors.indexOf(r),this._propertyDescriptors.splice(n,1),this._propertyDescriptorsTable["delete"](r.name),r._owner=null);for(i=0;r=e[i];++i)s.has(r)||o.has(r)||(r.owner===this?(this._propertyDescriptors.push(r),this._propertyDescriptorsTable.set(r.name,r)):this._propertyDescriptorsTable.has(r.name)||(this._propertyDescriptors.push(r),this._propertyDescriptorsTable.set(r.name,r)),r._owner=r._owner||this)}},_preparePropertyDescriptorsCache:{value:function(){var e,t,n,r=this._ownPropertyDescriptors,i=!0;if(!this._propertyDescriptorsAreCached){for(t=0,n=r.length;t<n&&i;++t)e=r[t],i=!(!e||!e.name);if(i){for(this._propertyDescriptorsAreCached=!0,this._propertyDescriptors=[],this._propertyDescriptorsTable.clear(),t=0,n=r.length;t<n;++t)e=r[t],e._owner=this,this._propertyDescriptors.push(e),this._propertyDescriptorsTable.set(e.name,e);this.addRangeAtPathChangeListener("_ownPropertyDescriptors",this,"_handlePropertyDescriptorsRangeChange"),this.addRangeAtPathChangeListener("parent.propertyDescriptors",this,"_handlePropertyDescriptorsRangeChange")}}}},_ownPropertyDescriptors:{value:null},_propertyDescriptors:{value:null},_propertyDescriptorsAreCached:{value:!1},propertyDescriptors:{get:function(){return this._propertyDescriptors||(this._propertyDescriptors=[]),this._preparePropertyDescriptorsCache(),this._propertyDescriptors}},_validParentPropertyDescriptors:{value:function(){var e,t,n=this.parent.propertyDescriptors,r=[];for(t=0;e=n[t];++t)this._propertyDescriptorsTable.has(e.name)||r.push(e);return r}},serializablePropertyDescriptors:{get:function(){return this.propertyDescriptors.filter(function(e){return e.serializable!==!1})}},_propertyDescriptorsTable:{get:function(){return this.__propertyDescriptorsTable||(this.__propertyDescriptorsTable=new a),this._preparePropertyDescriptorsCache(),this.__propertyDescriptorsTable}},addPropertyDescriptor:{value:function(e){if(null!==e&&null!==e.name){var t=this._ownPropertyDescriptors.indexOf(e);t<0&&(null!==e.owner&&e.owner!==this&&e.owner.removePropertyDescriptor(e),this._ownPropertyDescriptors.push(e),e._owner=this)}return e}},removePropertyDescriptor:{value:function(e){if(null!==e&&null!==e.name){var t=this._ownPropertyDescriptors.indexOf(e);t>=0&&(this._ownPropertyDescriptors.splice(t,1),e._owner=null)}return e}},newPropertyDescriptor:{value:function(e,t){return(new u).initWithNameObjectDescriptorAndCardinality(e,this,t)}},addToOnePropertyDescriptorNamed:{value:function(e){return this.addPropertyDescriptor(this.newPropertyDescriptor(e,1))}},addToManyPropertyDescriptorNamed:{value:function(e){return this.addPropertyDescriptor(this.newPropertyDescriptor(e,1/0))}},addToOneAssociationBlueprintNamed:{value:function(e,t){var n=this.addPropertyDescriptor(this.addToOnePropertyDescriptorNamed(e));return t&&(n.valueDescriptor=t.owner,t.valueDescriptor=this),n}},addToManyAssociationBlueprintNamed:{value:function(e,t){var n=this.addPropertyDescriptor(this.addToManyPropertyDescriptorNamed(e));return t&&(n.valueDescriptor=t.owner,t.valueDescriptor=this),n}},propertyDescriptorForName:{value:function(e){var n=this._propertyDescriptorsTable.get(e);return void 0===n?this._propertyDescriptorsTable.set(e,t.UnknownPropertyDescriptor):n===t.UnknownPropertyDescriptor&&(n=null),!n&&this.parent&&(n=this.parent.propertyDescriptorForName(e)),n||null}},_propertyDescriptorGroups:{value:null},propertyDescriptorGroups:{get:function(){var e,t=[];for(e in this._propertyDescriptorGroups)this._propertyDescriptorGroups.hasOwnProperty(e)&&t.push(e);return this.parent&&(t=t.concat(this.parent.propertyDescriptorGroups)),
t}},propertyDescriptorGroupForName:{value:function(e){var t=this._propertyDescriptorGroups[e];return!t&&this.parent&&(t=this.parent.propertyDescriptorGroupForName(e)),t}},addPropertyDescriptorGroupNamed:{value:function(e){var t=this._propertyDescriptorGroups[e];return t||(t=[],this._propertyDescriptorGroups[e]=t),t}},removePropertyDescriptorGroupNamed:{value:function(e){var t=this._propertyDescriptorGroups[e];return t||delete this._propertyDescriptorGroups[e],t}},addPropertyDescriptorToGroupNamed:{value:function(e,t){var n,r=this._propertyDescriptorGroups[t];return r||(r=this.addPropertyDescriptorGroupNamed(t)),n=r.indexOf(e),n<0&&r.push(e),r}},removePropertyDescriptorFromGroupNamed:{value:function(e,t){var n=this._propertyDescriptorGroups[t];if(n&&e){var r=n.indexOf(e);r>=0&&n.splice(r,1)}return n||[]}},__eventDescriptors:{value:null},_eventDescriptors:{get:function(){return this.__eventDescriptors||(this.__eventDescriptors=[])}},eventDescriptors:{value:null},_eventPropertyDescriptorsTable:{value:null},addEventDescriptor:{value:function(e){if(e&&e.name){var t=this._eventDescriptors.indexOf(e);t<0&&(e.owner&&e.owner!==this&&e.owner.removeEventDescriptor(e),this._eventDescriptors.push(e),this._eventPropertyDescriptorsTable.set(e.name,e),e._owner=this)}return e}},removeEventDescriptor:{value:function(e){if(e&&e.name){var t=this._eventDescriptors.indexOf(e);t>=0&&(this._eventDescriptors.splice(t,1),this._eventPropertyDescriptorsTable["delete"](e.name),e._owner=null)}return e}},newEventDescriptor:{value:function(e){return(new o).initWithNameAndObjectDescriptor(e,this)}},addEventDescriptorNamed:{value:function(e){return this.addEventDescriptor(this.newEventDescriptor(e))}},eventDescriptorForName:{value:function(e){var n=this._eventPropertyDescriptorsTable.get(e);if("undefined"==typeof n){n=t.UnknownEventDescriptor;var r,i;for(i=0;"undefined"!=typeof(r=this._eventDescriptors[i]);i++)if(r.name===e){n=r;break}this._eventPropertyDescriptorsTable.set(e,n)}return n===t.UnknownEventDescriptor&&(n=null),!n&&this.parent&&(n=this.parent.eventDescriptorForName(e)),n}},_propertyValidationRules:{value:{}},propertyValidationRules:{get:function(){var e,t=[];for(e in this._propertyValidationRules)this._propertyValidationRules.hasOwnProperty(e)&&t.push(this._propertyValidationRules[e]);return this.parent&&(t=t.concat(this.parent.propertyValidationRules)),t}},propertyValidationRuleForName:{value:function(e){var t=this._propertyValidationRules[e];return!t&&this.parent&&(t=this.parent.propertyValidationRuleForName(e)),t}},addPropertyValidationRule:{value:function(e){var t=this._propertyValidationRules[e];return t||(t=(new c).initWithNameAndObjectDescriptor(e,this),this._propertyValidationRules[e]=t),t}},removePropertyValidationRule:{value:function(e){var t=this._propertyValidationRules[e];return t&&delete this._propertyValidationRules[e],t}},evaluateRules:{value:function(e){var t,n,r=[];for(t in this._propertyValidationRules)this._propertyValidationRules.hasOwnProperty(t)&&(n=this._propertyValidationRules[t],n.evaluateRule(e)&&r.push(n.messageKey));return r}},objectDescriptorModuleId:e("../core")._objectDescriptorModuleIdDescriptor,objectDescriptor:e("../core")._objectDescriptorDescriptor,userInterfaceDescriptor:{get:function(){return this._userInterfaceDescriptor||this.userInterfaceDescriptorModules&&this.userInterfaceDescriptorModules["*"]&&r.defineProperty(this,"_userInterfaceDescriptor",{enumerable:!1,value:this.userInterfaceDescriptorModules["*"].require.async(this.userInterfaceDescriptorModules["*"].id).then(function(e){return e.montageObject})}),this._userInterfaceDescriptor||(this._userInterfaceDescriptor=l.resolve())}},userInterfaceDescriptors:{get:function(){if(!this._userInterfaceDescriptors&&this.userInterfaceDescriptorModules){var e,t=Object.keys(this.userInterfaceDescriptorModules);if(e=t.length){for(var n,i=function(e,t){return Object.assign({},e,t.montageObject)},o={},a=0;a<e;a++)n=t[a],"*"===n?o[n]=this.userInterfaceDescriptor:r.defineProperty(o,n,{enumerable:!1,value:l.all([this.userInterfaceDescriptor,this.userInterfaceDescriptorModules[n].require.async(this.userInterfaceDescriptorModules[n].id)]).spread(i)});this._userInterfaceDescriptors=o}}return this._userInterfaceDescriptors}},addEventBlueprint:{value:p.deprecateMethod(void 0,function(e){return this.addEventDescriptor(e)},"addEventBlueprint","addEventDescriptor")},addEventBlueprintNamed:{value:p.deprecateMethod(void 0,function(e){return this.addEventDescriptorNamed(e)},"addEventBlueprintNamed","addEventDescriptorNamed",!0)},addPropertyBlueprint:{value:p.deprecateMethod(void 0,function(e){this.addPropertyDescriptor(e)},"addPropertyBlueprint","addPropertyDescriptor",!0)},addPropertyBlueprintGroupNamed:{value:p.deprecateMethod(void 0,function(e){this.addPropertyDescriptorGroupNamed(e)},"addPropertyBlueprintGroupNamed","addPropertyDescriptorGroupNamed",!0)},addPropertyBlueprintToGroupNamed:{value:p.deprecateMethod(void 0,function(e,t){this.addPropertyDescriptorToGroupNamed(e,t)},"addPropertyBlueprintToGroupNamed","addPropertyDescriptorToGroupNamed",!0)},addToOnePropertyBlueprintNamed:{value:p.deprecateMethod(void 0,function(e){return this.addToOnePropertyDescriptorNamed(e)},"addToOnePropertyBlueprintNamed","addToOnePropertyDescriptorNamed",!0)},addToManyPropertyBlueprintNamed:{value:p.deprecateMethod(void 0,function(e){return this.addToManyPropertyDescriptorNamed(e)},"addToManyPropertyBlueprintNamed","addToManyPropertyDescriptorNamed",!0)},blueprintInstanceModule:{serializable:!1,get:p.deprecateMethod(void 0,function(){return this.objectDescriptorInstanceModule},"blueprintInstanceModule.get","objectDescriptorInstanceModule.get",!0),set:p.deprecateMethod(void 0,function(e){this.objectDescriptorInstanceModule=e},"blueprintInstanceModule.set","objectDescriptorInstanceModule.set",!0)},binder:{serializable:!1,get:p.deprecateMethod(void 0,function(){return this.model},"binder.get","model.get",!0),set:p.deprecateMethod(void 0,function(e){this.model=e},"binder.set","model.set",!0)},eventBlueprintForName:{value:p.deprecateMethod(void 0,function(e){return this.eventDescriptorForName(e)},"eventBlueprintForName","eventDescriptorForName",!0)},eventBlueprints:{get:p.deprecateMethod(void 0,function(){return this.eventDescriptors},"eventBlueprints.get","eventDescriptors.get",!0),set:p.deprecateMethod(void 0,function(e){this.eventDescriptors=e},"eventBlueprints.set","eventDescriptors.set",!0)},newAssociationBlueprint:{value:function(e,t){return 1===t?this.addToOnePropertyDescriptorNamed(e):this.addToManyPropertyDescriptorNamed(e)}},newDerivedPropertyBlueprint:{value:p.deprecateMethod(void 0,function(e,t){return this.newDerivedDescriptor(e,t)},"newDerivedPropertyBlueprint","newDerivedDescriptor",!0)},newDerivedDescriptor:{value:function(e,t){return(new i).initWithNameObjectDescriptorAndCardinality(e,this,t)}},newEventBlueprint:{value:p.deprecateMethod(void 0,function(e){return this.newEventDescriptor(e)},"newEventBlueprint","newEventDescriptor",!0)},newPropertyBlueprint:{value:p.deprecateMethod(void 0,function(e,t){return this.newPropertyDescriptor(e,t)},"newPropertyBlueprint","newPropertyDescriptor",!0)},propertyBlueprintForName:{value:p.deprecateMethod(void 0,function(e){return this.propertyDescriptorForName(e)},"propertyBlueprintForName","propertyDescriptorForName",!0)},propertyBlueprintGroups:{get:p.deprecateMethod(void 0,function(){return this.propertyDescriptorGroups},"propertyBlueprintGroups","propertyDescriptorGroups",!0)},propertyBlueprintGroupForName:{value:p.deprecateMethod(void 0,function(e){return this.propertyDescriptorGroupForName(e)},"propertyBlueprintGroupForName","propertyDescriptorForName",!0)},propertyBlueprints:{get:p.deprecateMethod(void 0,function(){return this.propertyDescriptors},"propertyBlueprints","propertyDescriptors",!0)},removeEventBlueprint:{value:p.deprecateMethod(void 0,function(e){this.removeEventDescriptor(e)},"removeEventBlueprint","removeEventDescriptor",!0)},removePropertyBlueprint:{value:p.deprecateMethod(void 0,function(e){this.removePropertyDescriptor(e)},"removePropertyBlueprint","removePropertyDescriptor",!0)},removePropertyBlueprintFromGroupNamed:{value:p.deprecateMethod(void 0,function(e,t){this.removePropertyDescriptorFromGroupNamed(e,t)},"removePropertyBlueprintFromGroupNamed","removePropertyDescriptorGroupNamed",!0)},removePropertyBlueprintGroupNamed:{value:p.deprecateMethod(void 0,function(e){this.removePropertyDescriptorGroupNamed(e)},"removePropertyBlueprintGroupNamed","removePropertyDescriptorGroupNamed",!0)},maxAge:{value:240},blueprintModuleId:e("../core")._objectDescriptorModuleIdDescriptor,blueprint:e("../core")._objectDescriptorDescriptor},{createDefaultBlueprintForObject:{value:p.deprecateMethod(void 0,function(e){return f.createDefaultObjectDescriptorForObject(e)},"Blueprint.createDefaultBlueprintForObject","ObjectDescriptor.createDefaultObjectDescriptorForObject",!0)},createDefaultObjectDescriptorForObject:{value:function(e){if(e){var n=r.getInfoForObject(e).isInstance?Object.getPrototypeOf(e):e.prototype,i=r.getInfoForObject(n),o=new this;for(var a in n)if("_"!==a[0]&&n.hasOwnProperty(a)){var s,u=n[a];s=Array.isArray(u)?o.addToManyPropertyDescriptorNamed(a):o.addToOnePropertyDescriptorNamed(a),o.addPropertyDescriptorGroupNamed(s,i.objectName)}var c=Object.getPrototypeOf(n);return c&&"objectDescriptor"in c?c.objectDescriptor.then(function(e){return o.parent=e,o}):l.resolve(o)}return l.resolve(t.UnknownObjectDescriptor)}}});t.UnknownObjectDescriptor=Object.freeze((new f).initWithName("Unknown")),t.UnknownPropertyDescriptor=Object.freeze((new u).initWithNameObjectDescriptorAndCardinality("Unknown",null,1)),t.UnknownEventDescriptor=Object.freeze((new o).initWithNameAndObjectDescriptor("Unknown",null))}}),montageDefine("64d2e12","core/mini-url",{dependencies:[],factory:function(e,t,n){"use strict";function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function o(e,t,n,r){t=t||"&",n=n||"=";var o={};if("string"!=typeof e||0===e.length)return o;var a=/\+/g;e=e.split(t);var s=1e3;r&&"number"==typeof r.maxKeys&&(s=r.maxKeys);var l=e.length;s>0&&l>s&&(l=s);for(var u=0;u<l;++u){var c,h,p,d,f=e[u].replace(a,"%20"),v=f.indexOf(n);v>=0?(c=f.substr(0,v),h=f.substr(v+1)):(c=f,h=""),p=decodeURIComponent(c),d=decodeURIComponent(h),i(o,p)?Array.isArray(o[p])?o[p].push(d):o[p]=[o[p],d]:o[p]=d}return o}function a(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}}function s(e,t,n,r){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?Object.keys(e).map(function(r){var i=encodeURIComponent(a(r))+n;return Array.isArray(e[r])?e[r].map(function(e){return i+encodeURIComponent(a(e))}).join(t):i+encodeURIComponent(a(e[r]))}).join(t):void 0===r||null===r?"":encodeURIComponent(a(r))+n+encodeURIComponent(a(e))}function l(e){return null===e}function u(e){return null===e||void 0===e}function c(e){return"string"==typeof e}function h(e){return"object"==typeof e}function p(e,t,n){if(e&&h(e)&&e instanceof r)return e;var i=new r;return i.parse(e,t,n),i}var d=/^([a-z0-9.+-]+:)/i,f=/:[0-9]*$/,v=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,g=["<",">",'"',"`"," ","\r","\n","\t"],m=["{","}","|","\\","^","`"].concat(g),_=["'"].concat(m),y=["%","/","?",";","#"].concat(_),b=["/","?","#"],w=255,O=/^[+a-z0-9A-Z_-]{0,63}$/,j=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,E={javascript:!0,"javascript:":!0},C={javascript:!0,"javascript:":!0},D={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};r.prototype.parse=function(e,t,n){if(!c(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var r=e.indexOf("?"),i=r!==-1&&r<e.indexOf("#")?"?":"#",a=e.split(i),s=/\\/g;a[0]=a[0].replace(s,"/"),e=a.join(i);var l=e;if(l=l.trim(),!n&&1===e.split("#").length){var u=v.exec(l);if(u)return this.path=l,this.href=l,this.pathname=u[1],u[2]?(this.search=u[2],t?this.query=o(this.search.substr(1)):this.query=this.search.substr(1)):t&&(this.search="",this.query={}),this}var h,p=d.exec(l);p&&(p=p[0],h=p.toLowerCase(),this.protocol=h,l=l.substr(p.length));var f;(n||p||l.match(/^\/\/[^@\/]+@[^@\/]+/))&&(f="//"===l.substr(0,2),!f||p&&C[p]||(l=l.substr(2),this.slashes=!0));var g,m,P,T;if(!C[p]&&(f||p&&!D[p])){var x=-1;for(g=0;g<b.length;g++)T=l.indexOf(b[g]),T!==-1&&(x===-1||T<x)&&(x=T);var k,A;for(A=x===-1?l.lastIndexOf("@"):l.lastIndexOf("@",x),A!==-1&&(k=l.slice(0,A),l=l.slice(A+1),this.auth=decodeURIComponent(k)),x=-1,g=0;g<y.length;g++)T=l.indexOf(y[g]),T!==-1&&(x===-1||T<x)&&(x=T);x===-1&&(x=l.length),this.host=l.slice(0,x),l=l.slice(x),this.parseHost(),this.hostname=this.hostname||"";var S="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!S){var L=this.hostname.split(/\./);for(g=0,m=L.length;g<m;g++){var M=L[g];if(M&&!M.match(O)){for(var F="",R=0,z=M.length;R<z;R++)F+=M.charCodeAt(R)>127?"x":M[R];if(!F.match(O)){var I=L.slice(0,g),N=L.slice(g+1),B=M.match(j);B&&(I.push(B[1]),N.unshift(B[2])),N.length&&(l="/"+N.join(".")+l),this.hostname=I.join(".");break}}}}this.hostname.length>w?this.hostname="":this.hostname=this.hostname.toLowerCase(),P=this.port?":"+this.port:"";var W=this.hostname||"";this.host=W+P,this.href+=this.host,S&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==l[0]&&(l="/"+l))}if(!E[h])for(g=0,m=_.length;g<m;g++){var V=_[g];if(l.indexOf(V)!==-1){var q=encodeURIComponent(V);q===V&&(q=escape(V)),l=l.split(V).join(q)}}var U=l.indexOf("#");U!==-1&&(this.hash=l.substr(U),l=l.slice(0,U));var H=l.indexOf("?");if(H!==-1?(this.search=l.substr(H),this.query=l.substr(H+1),t&&(this.query=o(this.query)),l=l.slice(0,H)):t&&(this.search="",this.query={}),l&&(this.pathname=l),D[h]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){P=this.pathname||"";var G=this.search||"";this.path=P+G}return this.href=this.format(),this},r.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,o="";this.host?i=e+this.host:this.hostname&&(i=e+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&h(this.query)&&Object.keys(this.query).length&&(o=s(this.query));var a=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||D[t])&&i!==!1?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i||(i=""),r&&"#"!==r.charAt(0)&&(r="#"+r),a&&"?"!==a.charAt(0)&&(a="?"+a),n=n.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),a=a.replace("#","%23"),t+i+n+a+r},r.prototype.resolve=function(e){return this.resolveObject(p(e,!1,!0)).format()},r.prototype.resolveObject=function(e){if(c(e)){var t=new r;t.parse(e,!1,!0),e=t}for(var n=new r,i=Object.keys(this),o=0;o<i.length;o++){var a=i[o];n[a]=this[a]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var s=Object.keys(e),h=0;h<s.length;h++){var p=s[h];"protocol"!==p&&(n[p]=e[p])}return D[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}var d,f;if(e.protocol&&e.protocol!==n.protocol){if(!D[e.protocol]){for(var v=Object.keys(e),g=0;g<v.length;g++){var m=v[g];n[m]=e[m]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||C[e.protocol])n.pathname=e.pathname;else{d=(e.pathname||"").split("/");do e.host=d.shift();while(!e.host&&d.length);e.host||(e.host=""),e.hostname||(e.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),n.pathname=d.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var _=n.pathname||"",y=n.search||"";n.path=_+y}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var b=n.pathname&&"/"===n.pathname.charAt(0),w=e.host||e.pathname&&"/"===e.pathname.charAt(0),O=w||b||n.host&&e.pathname,j=O,E=n.protocol&&!D[n.protocol];f=n.pathname&&n.pathname.split("/")||[],d=e.pathname&&e.pathname.split("/")||[],E&&(n.hostname="",n.port=null,n.host&&(""===f[0]?f[0]=n.host:f.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===d[0]?d[0]=e.host:d.unshift(e.host)),e.host=null),O=O&&(""===d[0]||""===f[0]));var P;if(w)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,f=d;else if(d.length)f||(f=[]),f.pop(),f=f.concat(d),n.search=e.search,n.query=e.query;else if(!u(e.search))return E&&(n.hostname=n.host=f.shift(),P=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"),P&&(n.auth=P.shift(),n.host=n.hostname=P.shift())),n.search=e.search,n.query=e.query,l(n.pathname)&&l(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n;if(!f.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var T=f.slice(-1)[0],x=(n.host||e.host||f.length>1)&&("."===T||".."===T)||""===T,k=0,A=f.length;A>=0;A--)T=f[A],"."===T?f.splice(A,1):".."===T?(f.splice(A,1),k++):k&&(f.splice(A,1),k--);if(!O&&!j)for(;k--;k)f.unshift("..");!O||""===f[0]||f[0]&&"/"===f[0].charAt(0)||f.unshift(""),x&&"/"!==f.join("/").substr(-1)&&f.push("");var S=""===f[0]||f[0]&&"/"===f[0].charAt(0);return E&&(n.hostname=n.host=S?"":f.length?f.shift():"",P=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"),P&&(n.auth=P.shift(),n.host=n.hostname=P.shift())),O=O||n.host&&f.length,O&&!S&&f.unshift(""),f.length?n.pathname=f.join("/"):(n.pathname=null,n.path=null),l(n.pathname)&&l(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},r.prototype.parseHost=function(){var e=this.host,t=f.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)},t.resolve=function(e,t){return p(e,!1,!0).resolve(t)}}}),montageDefine("64d2e12","core/drag/drag-event",{dependencies:["../event/mutable-event","../core"],factory:function(e,t,n){var r=e("../event/mutable-event").MutableEvent,i=e("../core").Montage;if("undefined"!=typeof window){var o="application/object",a=t.DataTransfer=i.specialize({__data:{enumerable:!1,value:null},_data:{enumerable:!1,get:function(){return this.__data||(this.__data=new Map)}},_dragImage:{value:null,enumerable:!1},_dragEffect:{value:null},dragEffect:{set:function(e){this.isEffectAllowed(e)&&(this._dragEffect=e)},get:function(){return this._dragEffect||a.Default}},_dropEffect:{value:null},dropEffect:{set:function(e){e&&this.isEffectAllowed(e)&&a.isDropEffectAllowed(e,this.effectAllowed)?this._dropEffect=e:this._dropEffect=null},get:function(){return this._dropEffect||(this.effectAllowed===a.All||this.effectAllowed.startsWith("c")?this._dropEffect=a.Copy:this.isEffectAllowed(this.effectAllowed)?this._dropEffect=this.effectAllowed:this._dropEffect=a.Link),this._dropEffect}},_effectAllowed:{value:null},effectAllowed:{set:function(e){a.allowedDropEffectsMap[e]&&(this._effectAllowed=e)},get:function(){return this._effectAllowed||a.All}},files:{value:null},items:{value:null},types:{value:null},dragTarget:{value:null},_dropTargetCandidates:{value:null,enumerable:!1},dropTargetCandidates:{get:function(){return this._dropTargetCandidates||(this._dropTargetCandidates=new Set)}},showPlaceholder:{value:!1},draggedObject:{set:function(e){this._data.set(o,e)},get:function(){return this._data.get(o)}},clearData:{value:function(){return this._data.clear()}},getData:{value:function(e){return this._data.get(e)}},hasData:{value:function(e){return this._data.has(e)}},setData:{value:function(e,t){return this._data.set(e,t)}},dragImageXOffset:{value:null},dragImageYOffset:{value:null},setDragImage:{value:function(e,t,n){this._dragImage||(this._dragImage=e,t>=0&&(this.dragImageXOffset=t),n>=0&&(this.dragImageYOffset=n))}},getDragImage:{value:function(){return this._dragImage}},isEffectAllowed:{value:function(e){return!!a.allowedEffectsMap[e]}}},{Default:{value:"default"},Copy:{value:"copy"},Move:{value:"move"},Link:{value:"alias"},CopyLink:{value:"copyLink"},CopyMove:{value:"copyMove"},LinkMove:{value:"linkMove"},All:{value:"all"},_allowedEffectsMap:{value:null},allowedEffectsMap:{get:function(){return this._allowedEffectsMap||(this._allowedEffectsMap={},this._allowedEffectsMap[this.Default]=!0,this._allowedEffectsMap[this.Copy]=!0,this._allowedEffectsMap[this.Link]=!0,this._allowedEffectsMap[this.Move]=!0),this._allowedEffectsMap}},_allowedDropEffectsMap:{value:null},allowedDropEffectsMap:{get:function(){if(!this._allowedDropEffectsMap){var e={};e[this.All]=!0,e[this.CopyMove]=!0,e[this.CopyLink]=!0,e[this.LinkMove]=!0,this._allowedDropEffectsMap=Object.assign(e,this._allowedEffectsMap)}return this._allowedDropEffectsMap}},isDropEffectAllowed:{value:function(e,t){return t===this.All||e===t||e===this.Copy&&(t===this.CopyMove||t===this.CopyLink)||e===this.Move&&(t===this.CopyMove||t===this.LinkMove)||e===this.Link&&(t===this.LinkMove||t===this.CopyLink)}},fromDataTransfer:{value:function(e){var t=new a;return t.items=e.items,t.files=e.files,t.types=e.types,t.dropEffect="none"===e.dropEffect?this.Default:e.dropEffect,t.effectAllowed=e.effectAllowed,t}}});t.DragEvent=r.specialize({type:{value:"drag"},_event:{enumerable:!1,value:null},event:{get:function(){return this._event},set:function(e){this._event=e}},bubbles:{value:!0},dataTransfer:{value:null},constructor:{value:function(e,t){this.dataTransfer=new a,this._event=new CustomEvent(e,t),this.type=e}}},{DRAGSTART:{value:"dragstart"},DRAG:{value:"drag"},DRAGENTER:{value:"dragenter"},DRAGEXIT:{value:"dragexit"},DRAGLEAVE:{value:"dragleave"},DROP:{value:"drop"},DRAGEND:{value:"dragend"}})}}}),montageDefine("64d2e12","composer/translate-composer",{dependencies:["./composer","../core/event/event-manager"],factory:function(e,t,n){var r=e("./composer").Composer,i=e("../core/event/event-manager").defaultEventManager,o=t.TranslateComposer=r.specialize({_NATIVE_ELEMENTS:{value:["A","IFRAME","EMBED","OBJECT","VIDEO","AUDIO","CANVAS","LABEL","INPUT","BUTTON","SELECT","TEXTAREA","KEYGEN","DETAILS","COMMAND"]},_WHEEL_POINTER:{value:"wheel",writable:!1},_MOUSE_POINTER:{value:"mouse",writable:!1},_TOUCH_POINTER:{value:"touch",writable:!1},CLAIM_POINTER_POLICIES:{value:{DEFAULT:"default",MOVE:"move"}},enabled:{value:!0},_externalUpdate:{value:!0},isAnimating:{value:!1},isMoving:{value:!1},frame:{value:function(){this.isAnimating&&this._animationInterval(),this._externalUpdate=!1}},_pointerSpeedMultiplier:{value:1},pointerSpeedMultiplier:{get:function(){return this._pointerSpeedMultiplier},set:function(e){this._pointerSpeedMultiplier=e}},pointerStartEventPosition:{value:null},shouldCancelOnSroll:{value:!0},_shouldDispatchTranslate:{value:!1},_isSelfUpdate:{value:!1},_allowFloats:{value:!0},allowFloats:{get:function(){return this._allowFloats},set:function(e){this._allowFloats!==e&&(this._allowFloats=e,this.translateX=this._translateX,this.translateY=this._translateY)}},allowTranslateOuterExtreme:{value:!1},_translateX:{value:0},translateX:{get:function(){return this._translateX},set:function(e){if("vertical"===this._axis)this._translateX=this._minTranslateX||0;else{var t=isNaN(e)?0:this._allowFloats?parseFloat(e):e>>0;null!==this._minTranslateX&&t<this._minTranslateX&&(t=this._minTranslateX),null!==this._maxTranslateX&&t>this._maxTranslateX&&(t=this._maxTranslateX),this._isSelfUpdate||(this.isAnimating=!1),this._translateX=t}}},_translateY:{value:0},translateY:{get:function(){return this._translateY},set:function(e){if("horizontal"===this._axis)this._translateY=this._minTranslateY||0;else{var t=isNaN(e)?0:this._allowFloats?parseFloat(e):e>>0;null!==this._minTranslateY&&t<this._minTranslateY&&(t=this._minTranslateY),null!==this._maxTranslateY&&t>this._maxTranslateY&&(t=this._maxTranslateY),this._isSelfUpdate||(this.isAnimating=!1),this._translateY=t}}},_minTranslateX:{value:null},minTranslateX:{get:function(){return this._minTranslateX},set:function(e){null!==e&&(e=parseFloat(e)),this._minTranslateX!==e&&(null!==e&&this._translateX<e&&(this.translateX=e),this._minTranslateX=e)}},_maxTranslateX:{value:null},maxTranslateX:{get:function(){return this._maxTranslateX},set:function(e){null!==e&&(e=parseFloat(e)),this._maxTranslateX!==e&&(null!==e&&this._translateX>e&&(this.translateX=e),this._maxTranslateX=e)}},_minTranslateY:{value:null},minTranslateY:{get:function(){return this._minTranslateY},set:function(e){null!==e&&(e=parseFloat(e)),this._minTranslateY!==e&&(null!==e&&this._translateY<e&&(this.translateY=e),this._minTranslateY=e)}},_maxTranslateY:{value:null},maxTranslateY:{get:function(){return this._maxTranslateY},set:function(e){null!==e&&(e=parseFloat(e)),this._maxTranslateY!==e&&(null!==e&&this._translateY>e&&(this.translateY=e),this._maxTranslateY=e)}},_axis:{value:"both"},axis:{get:function(){return this._axis},set:function(e){switch(e){case"vertical":case"horizontal":this._axis=e,this.translateX=this._translateX,this.translateY=this._translateY;break;default:this._axis="both"}}},invertAxis:{depends:["invertXAxis","invertYAxis"],get:function(){return this._invertXAxis===this._invertYAxis?this._invertXAxis:null},set:function(e){this.invertXAxis=e,this.invertYAxis=e}},_invertXAxis:{value:!1},invertXAxis:{get:function(){return this._invertXAxis},set:function(e){this._invertXAxis=!!e}},_invertYAxis:{value:!1},invertYAxis:{get:function(){return this._invertYAxis},set:function(e){this._invertYAxis=!!e}},_hasMomentum:{value:!0},hasMomentum:{get:function(){return this._hasMomentum},set:function(e){this._hasMomentum=!!e}},__momentumDuration:{value:650},_momentumDuration:{get:function(){return this.__momentumDuration},set:function(e){this.__momentumDuration=isNaN(e)?1:e>>0,this.__momentumDuration<1&&(this.__momentumDuration=1)}},_pointerX:{value:null},_pointerY:{value:null},_touchIdentifier:{value:null},_isFirstMove:{value:!1},_observedPointer:{value:null},eventManager:{get:function(){return i}},_mouseRadiusThreshold:{value:2},_touchRadiusThreshold:{value:8},_listenToWheelEvent:{value:!1},listenToWheelEvent:{set:function(e){e=!!e,this._listenToWheelEvent!==e&&(this._listenToWheelEvent=e,this._isLoaded&&(e?this._addWheelEventListener():this._removeWheelEventListener()))},get:function(){return this._listenToWheelEvent}},_claimPointerPolicy:{value:null},load:{value:function(){window.PointerEvent?(this._element.addEventListener("pointerdown",this,!0),this._element.style.touchAction="none"):window.MSPointerEvent&&window.navigator.msPointerEnabled?this._element.addEventListener("MSPointerDown",this,!0):(this._element.addEventListener("touchstart",this,!0),this._element.addEventListener("mousedown",this,!0)),this._listenToWheelEvent&&this._addWheelEventListener(),this.eventManager.isStoringPointerEvents=!0}},unload:{value:function(){window.PointerEvent?(this._element.removeEventListener("pointerdown",this,!0),this._element.style.touchAction="auto"):window.MSPointerEvent&&window.navigator.msPointerEnabled?this._element.removeEventListener("MSPointerDown",this,!0):(this._element.removeEventListener("touchstart",this,!0),this._element.removeEventListener("mousedown",this,!0)),this._listenToWheelEvent&&this._removeWheelEventListener()}},surrenderPointer:{value:function(e,t){var n=this.callDelegateMethod("surrenderPointer",e,t);return("undefined"==typeof n||n!==!1)&&(this._cancel(),!0)}},addEventListener:{value:function(e,t,n){r.prototype.addEventListener.call(this,e,t,n),"translate"===e&&(this._shouldDispatchTranslate=!0)}},capturePointerdown:{value:function(e){e.pointerType===this._MOUSE_POINTER||window.MSPointerEvent&&e.pointerType===window.MSPointerEvent.MSPOINTER_TYPE_MOUSE?this.captureMousedown(e):(e.pointerType===this._TOUCH_POINTER||window.MSPointerEvent&&e.pointerType===window.MSPointerEvent.MSPOINTER_TYPE_TOUCH)&&this.captureTouchstart(e)}},capturePointermove:{value:function(e){e.pointerType===this._MOUSE_POINTER||window.MSPointerEvent&&e.pointerType===window.MSPointerEvent.MSPOINTER_TYPE_MOUSE?this.captureMousemove(e):(e.pointerType===this._TOUCH_POINTER||window.MSPointerEvent&&e.pointerType===window.MSPointerEvent.MSPOINTER_TYPE_TOUCH)&&this.captureTouchmove(e)}},handlePointerup:{value:function(e){e.pointerType===this._MOUSE_POINTER||window.MSPointerEvent&&e.pointerType===window.MSPointerEvent.MSPOINTER_TYPE_MOUSE?this.handleMouseup(e):(e.pointerType===this._TOUCH_POINTER||window.MSPointerEvent&&e.pointerType===window.MSPointerEvent.MSPOINTER_TYPE_TOUCH)&&this.handleTouchend(e)}},handlePointercancel:{value:function(e){(e.pointerType===this._TOUCH_POINTER||window.MSPointerEvent&&e.pointerType===window.MSPointerEvent.MSPOINTER_TYPE_TOUCH)&&this.handleTouchcancel(e)}},captureMousedown:{value:function(e){this.enabled&&0===e.button&&(this._observedPointer=this._MOUSE_POINTER,this._start(e.clientX,e.clientY,e.target,e.timeStamp))}},captureMousemove:{value:function(e){this.enabled&&this._handleMove(e)}},handleMouseup:{value:function(e){this.enabled&&this._end(e)}},captureTouchstart:{value:function(e){if(this.enabled&&null===this._observedPointer)if(void 0!==e.pointerId)this._observedPointer=e.pointerId,this._start(e.clientX,e.clientY,e.target,e.timeStamp),this._preventDefaultIfNeeded(e);else{var t=e.targetTouches;if(t&&1===t.length){var n=t[0];this._preventDefaultIfNeeded(e),this._observedPointer=n.identifier,this._start(n.clientX,n.clientY,n.target,e.timeStamp)}}}},captureTouchmove:{value:function(e){if(this.enabled)if(void 0!==e.pointerId)this._handleMove(e);else{var t=this._findObservedTouch(e.changedTouches);t&&this._handleMove(e,t)}}},handleTouchend:{value:function(e){if(this.enabled)if(void 0!==e.pointerId)this._end(e);else{var t=this._findObservedTouch(e.changedTouches);t&&this._end(t)}}},handleTouchcancel:{value:function(e){if(this.enabled)if(void 0!==e.pointerId)this._cancel(e);else{var t=this._findObservedTouch(e.changedTouches);t&&this._cancel(t)}}},captureScroll:{value:function(e){e.target.contains(this.element)&&this._cancel(e)}},_shouldPreventDefault:{value:function(e){return!i.isPassiveEventType(e.type)&&!!e.target.tagName&&this._NATIVE_ELEMENTS.indexOf(e.target.tagName)===-1&&!e.target.isContentEditable}},_preventDefaultIfNeeded:{value:function(e){!e.defaultPrevented&&this._shouldPreventDefault(e)&&e.preventDefault()}},_addWheelEventListener:{value:function(){if(this._element){var e="undefined"!=typeof window.onwheel||"undefined"!=typeof window.WheelEvent?"wheel":"mousewheel";this._element.addEventListener(e,this,!1),this._element.addEventListener(e,this,!0)}}},_removeWheelEventListener:{value:function(){if(this._element){var e="undefined"!=typeof window.onwheel||"undefined"!=typeof window.WheelEvent?"wheel":"mousewheel";this._element.removeEventListener(e,this,!1),this._element.removeEventListener(e,this,!0)}}},_start:{value:function(e,t,n,r){this.pointerStartEventPosition={pageX:e,pageY:t,target:n,timeStamp:r},this._pointerX=e,this._pointerY=t,window.PointerEvent?(this._element.addEventListener("pointerdown",this,!1),document.addEventListener("pointermove",this,!0),document.addEventListener("pointerup",this,!1),document.addEventListener("pointercancel",this,!1),this.shouldCancelOnSroll&&document.addEventListener("scroll",this,!0)):window.MSPointerEvent&&window.navigator.msPointerEnabled?(this._element.addEventListener("MSPointerDown",this,!1),document.addEventListener("MSPointerMove",this,!0),document.addEventListener("MSPointerUp",this,!1),document.addEventListener("MSPointerCancel",this,!1),this.shouldCancelOnSroll&&document.addEventListener("scroll",this,!0)):this._observedPointer===this._MOUSE_POINTER?(this._element.addEventListener("mousedown",this,!1),document.addEventListener("mousemove",this,!0),document.addEventListener("mouseup",this,!1),this.shouldCancelOnSroll&&document.addEventListener("scroll",this,!0)):(this._element.addEventListener("touchstart",this,!1),
this._element.addEventListener("touchmove",this,!0),this._element.addEventListener("touchend",this,!1),this._element.addEventListener("touchcancel",this,!1)),this.isAnimating&&(this.isAnimating=!1,this._dispatchTranslateEnd()),this._isFirstMove=!0}},_handleStart:{value:function(e){this._claimPointerPolicy=this.eventManager.componentClaimingPointer(this._observedPointer)?this.CLAIM_POINTER_POLICIES.MOVE:this.CLAIM_POINTER_POLICIES.DEFAULT}},_findObservedTouch:{value:function(e){for(var t,n=null,r=0;(t=e[r])&&null===n;r++)t.identifier===this._observedPointer&&(n=t);return n}},_handleMove:{value:function(e,t){var n=this.eventManager,i=this.pointerStartEventPosition;if(t||(t=e),this._isFirstMove){var o=n.componentClaimingPointer(this._observedPointer);if(o){var a=!0;if(this._claimPointerPolicy===this.CLAIM_POINTER_POLICIES.MOVE){var s=this._observedPointer===this._MOUSE_POINTER?this._mouseRadiusThreshold:this._touchRadiusThreshold,l=i.pageX-t.clientX,u=i.pageY-t.clientY;a=r.isCoordinateOutsideRadius(l,u,s),a&&(i.pageX=t.clientX,i.pageY=t.clientY,i.target=t.target,i.timeStamp=e.timeStamp,this._pointerX=t.clientX,this._pointerY=t.clientY)}if(!a)return void this._preventDefaultIfNeeded(e)}n.claimPointer(this._observedPointer,this)}n.isPointerClaimedByComponent(this._observedPointer,this)?(this._preventDefaultIfNeeded(e),(this.allowTranslateOuterExtreme||this._shouldMove(e,t.clientX,t.clientY))&&(this._isFirstMove?this._firstMove():this._move(t.clientX,t.clientY))):this._releaseInterest()}},_shouldMove:{value:function(e,t,n){var r,i,o,a,s=this._translateY,l=this._translateX,u=this._minTranslateY,c=this._maxTranslateY,h=this._minTranslateX,p=this._maxTranslateX,d=!0;return"wheel"===e.type||"mousewheel"===e.type?("vertical"!==this._axis&&(o=20*(e.wheelDeltaX||-e.deltaX||0)/120),"horizontal"!==this._axis&&(a=20*(e.wheelDeltaY||-e.deltaY||0)/120),d=!("horizontal"===this._axis&&0===o||"vertical"===this._axis&&0===a||0===o&&0===a)):("vertical"!==this._axis&&(o=-(this._invertXAxis?this._pointerX-t:t-this._pointerX)),"horizontal"!==this._axis&&(a=-(this._invertYAxis?this._pointerY-n:n-this._pointerY))),d&&(a&&(r=this._isNegativeNumber(a),null!==u&&(d=s!==u||s===u&&r),null!==c&&d&&(d=s!==c||s===c&&!r)),o&&(i=this._isNegativeNumber(o),null!==h&&d&&(d=l!==h||l===h&&i),null!==p&&d&&(d=l!==p||l===p&&!i))),d}},_firstMove:{value:function(){this._isFirstMove&&(this._dispatchTranslateStart(this._translateX,this._translateY),this._isFirstMove=!1,this.isMoving=!0)}},_move:{value:function(e,t){var n;this._isSelfUpdate=!0,"vertical"!==this._axis&&(n=this._invertXAxis?this._pointerX-e:e-this._pointerX,this.translateX+=n*this._pointerSpeedMultiplier),"horizontal"!==this._axis&&(n=this._invertYAxis?this._pointerY-t:t-this._pointerY,this.translateY+=n*this._pointerSpeedMultiplier),this._isSelfUpdate=!1,this._pointerX=e,this._pointerY=t,this._shouldDispatchTranslate&&this._dispatchTranslate()}},_end:{value:function(e){this.startTime=Date.now(),this.endX=this.posX=this.startX=this._translateX,this.endY=this.posY=this.startY=this._translateY;var t;this._hasMomentum&&(t=e.velocity)&&(t.speed>40||this.translateStrideX||this.translateStrideY)?("vertical"!==this._axis?this.momentumX=t.x*this._pointerSpeedMultiplier*(this._invertXAxis?1:-1):this.momentumX=0,"horizontal"!==this._axis?this.momentumY=t.y*this._pointerSpeedMultiplier*(this._invertYAxis?1:-1):this.momentumY=0,this.endX=this.startX-this.momentumX*this.__momentumDuration/2e3,this.endY=this.startY-this.momentumY*this.__momentumDuration/2e3,this.startStrideXTime=null,this.startStrideYTime=null,this.animateMomentum=!0):this.animateMomentum=!1,this.animateMomentum?this._animationInterval():this._isFirstMove||(this.isMoving=!1,this._dispatchTranslateEnd()),this._releaseInterest()}},_cancel:{value:function(e){this.startTime=Date.now(),this.endX=this.posX=this.startX=this._translateX,this.endY=this.posY=this.startY=this._translateY,this.animateMomentum=!1,this._isFirstMove||(this.isMoving=!1,this._dispatchTranslateCancel()),this._releaseInterest()}},_releaseInterest:{value:function(){window.PointerEvent?(this._element.removeEventListener("pointerdown",this,!1),document.removeEventListener("pointermove",this,!0),document.removeEventListener("pointerup",this,!1),document.removeEventListener("pointercancel",this,!1),this.shouldCancelOnSroll&&document.removeEventListener("scroll",this,!0)):window.MSPointerEvent&&window.navigator.msPointerEnabled?(this._element.removeEventListener("MSPointerDown",this,!1),document.removeEventListener("MSPointerMove",this,!0),document.removeEventListener("MSPointerUp",this,!1),document.removeEventListener("MSPointerCancel",this,!1),this.shouldCancelOnSroll&&document.removeEventListener("scroll",this,!0)):this._observedPointer===this._MOUSE_POINTER?(this._element.removeEventListener("mousedown",this,!1),document.removeEventListener("mousemove",this,!0),document.removeEventListener("mouseup",this,!1),this.shouldCancelOnSroll&&document.removeEventListener("scroll",this,!0)):(this._element.removeEventListener("touchstart",this,!1),this._element.removeEventListener("touchmove",this,!0),this._element.removeEventListener("touchend",this,!1),this._element.removeEventListener("touchcancel",this,!1)),this.eventManager.isPointerClaimedByComponent(this._observedPointer,this)&&this.eventManager.forfeitPointer(this._observedPointer,this),this._observedPointer=null,this._isFirstMove=!1,this.isMoving=!1}},_isAxisMovement:{value:function(e){var t,n,r,i,o,a,s,l=e.velocity,u=.7853981633974483,c=2.356194490192345,h=-2.356194490192345,p=-.7853981633974483;if("both"===this.axis)return!0;if(!l||0===l.speed||isNaN(l.speed)?(a=this.pointerStartEventPosition.pageX-e.clientX,s=this.pointerStartEventPosition.pageY-e.clientY,o=Math.atan2(s,a)):o=l.angle,"horizontal"===this.axis){if(r=o<=u&&o>=p,i=o>=c||o<=h,r||i)return!0}else if("vertical"===this.axis&&(t=o<=p&&o>=h,n=o>=u&&o<=c,t||n))return!0;return!1}},_translateEndTimeout:{value:null},_handleWheelTimeout:{value:null},_isNegativeNumber:{value:function(e){return e=+e,isNaN(e)||(e=1/e),e<0}},captureWheel:{value:function(e){this._shouldMove(e)?this.eventManager.isPointerClaimedByComponent(this._WHEEL_POINTER,this)||this.eventManager.claimPointer(this._WHEEL_POINTER,this):this.eventManager.isPointerClaimedByComponent(this._WHEEL_POINTER,this)&&this.eventManager.forfeitPointer(this._WHEEL_POINTER,this)}},handleWheel:{value:function(e){if(this.enabled&&this.eventManager.isPointerClaimedByComponent(this._WHEEL_POINTER,this)){if(this._observedPointer=this._WHEEL_POINTER,this._translateEndTimeout?clearTimeout(this._translateEndTimeout):this._dispatchTranslateStart(),"vertical"!==this.axis&&(this.translateX=this._translateX-20*(e.wheelDeltaX||-e.deltaX||0)/120),"horizontal"!==this.axis&&(this.translateY=this._translateY-20*(e.wheelDeltaY||-e.deltaY||0)/120),this.isMoving=!0,this._dispatchTranslate(),"function"!=typeof this._handleWheelTimeout){var t=function(){this._translateEndTimeout=null,this._dispatchTranslateEnd(),this.isMoving=!1,this.eventManager.isPointerClaimedByComponent(this._WHEEL_POINTER,this)&&this.eventManager.forfeitPointer(this._WHEEL_POINTER,this)};this._handleWheelTimeout=t.bind(this)}this._translateEndTimeout=setTimeout(this._handleWheelTimeout,400),e.preventDefault()}}},_bezierTValue:{value:function(e,t,n,r,i){var o,a,s,l,u=1-3*r+3*t,c=3*r-6*t,h=3*t,p=.5;for(a=0;a<10;a++)l=p*p,o=3*u*l+2*c*p+h,s=1-p,p-=(3*(s*s*p*t+s*l*r)+l*p-e)/o;return l=p*p,s=1-p,3*(s*s*p*n+s*l*i)+l*p}},_dispatchTranslateStart:{value:function(e,t){var n=document.createEvent("CustomEvent");n.initCustomEvent("translateStart",!0,!0,null),n.translateX=e,n.translateY=t,n.scroll=0,n.pointer=this._observedPointer,this.dispatchEvent(n)}},_dispatchTranslateEnd:{value:function(){var e=document.createEvent("CustomEvent");e.initCustomEvent("translateEnd",!0,!0,null),e.translateX=this._translateX,e.translateY=this._translateY,e.scroll=0,e.pointer=this._observedPointer,this.dispatchEvent(e)}},_dispatchTranslateCancel:{value:function(){var e=document.createEvent("CustomEvent");e.initCustomEvent("translateCancel",!0,!0,null),e.translateX=this._translateX,e.translateY=this._translateY,e.scroll=0,e.pointer=this._observedPointer,this.dispatchEvent(e)}},_dispatchTranslate:{value:function(){var e=document.createEvent("CustomEvent");e.initCustomEvent("translate",!0,!0,null),e.translateX=this._translateX,e.translateY=this._translateY,e.scroll=0,e.pointer=this._observedPointer,this.dispatchEvent(e)}},animateBouncingX:{value:!1,enumerable:!1},startTimeBounceX:{value:!1,enumerable:!1},animateBouncingY:{value:!1,enumerable:!1},startTimeBounceY:{value:!1,enumerable:!1},animateMomentum:{value:!1,enumerable:!1},startTime:{value:null,enumerable:!1},startX:{value:null,enumerable:!1},posX:{value:null,enumerable:!1},endX:{value:null,enumerable:!1},startY:{value:null,enumerable:!1},posY:{value:null,enumerable:!1},endY:{value:null,enumerable:!1},translateStrideX:{value:null},translateStrideY:{value:null},translateStrideDuration:{value:330},_animationInterval:{value:function(){var e,t,n,r,i=Date.now(),o=!1;this.animateMomentum&&(e=i-this.startTime,e<this.__momentumDuration?(this.posX=this.startX-(this.momentumX+this.momentumX*(this.__momentumDuration-e)/this.__momentumDuration)*e/1e3/2,this.posY=this.startY-(this.momentumY+this.momentumY*(this.__momentumDuration-e)/this.__momentumDuration)*e/1e3/2,this.translateStrideX&&null===this.startStrideXTime&&(this.__momentumDuration-e<this.translateStrideDuration||Math.abs(this.posX-this.endX)<.75*this.translateStrideX)&&(this.startStrideXTime=i),this.translateStrideY&&null===this.startStrideYTime&&(this.__momentumDuration-e<this.translateStrideDuration||Math.abs(this.posY-this.endY)<.75*this.translateStrideY)&&(this.startStrideYTime=i)):this.animateMomentum=!1),t=Math.round(this.endX/this.translateStrideX),this.startStrideXTime&&i-this.startStrideXTime>0&&(i-this.startStrideXTime<this.translateStrideDuration?(e=this._bezierTValue((i-this.startStrideXTime)/this.translateStrideDuration,.275,0,.275,1),this.posX=this.posX*(1-e)+t*this.translateStrideX*e,o=!0):this.posX=t*this.translateStrideX),t=Math.round(this.endY/this.translateStrideY),this.startStrideYTime&&i-this.startStrideYTime>0&&(i-this.startStrideYTime<this.translateStrideDuration?(e=this._bezierTValue((i-this.startStrideYTime)/this.translateStrideDuration,.275,0,.275,1),this.posY=this.posY*(1-e)+t*this.translateStrideY*e,o=!0):this.posY=t*this.translateStrideY),n=this.posX,r=this.posY,this._isSelfUpdate=!0,this.translateX=n,this.translateY=r,this._shouldDispatchTranslate&&this._dispatchTranslate(),this._isSelfUpdate=!1,this.isAnimating=this.animateMomentum||o,this.isAnimating?this.needsFrame=!0:this._dispatchTranslateEnd()}}});o.prototype.captureMSPointerDown=o.prototype.capturePointerdown,o.prototype.captureMSPointerMove=o.prototype.capturePointermove,o.prototype.handleMSPointerUp=o.prototype.handlePointerup,o.prototype.handleMSPointerCancel=o.prototype.handlePointercancel,o.prototype.handleMousewheel=o.prototype.handleWheel,o.prototype.handleMSPointerDown=o.prototype._handleStart,o.prototype.handlePointerdown=o.prototype._handleStart,o.prototype.handleMousedown=o.prototype._handleStart,o.prototype.handleTouchstart=o.prototype._handleStart,void 0!==Math.sign&&(o.prototype._isNegativeNumber=function(e){return Math.sign(e)===-1})}}),montageDefine("64d2e12","core/drag/dragging-operation-context",{dependencies:["../core"],factory:function(e,t,n){var r=e("../core").Montage;t.DraggingOperationContext=r.specialize({draggable:{value:null},draggedImage:{value:null},startPositionX:{value:0},startPositionY:{value:0},positionX:{value:0},positionY:{value:0},deltaX:{value:0},deltaY:{value:0},showPlaceholder:{value:!1},dragEffect:{value:null},dropEffect:{value:null},effectAllowed:{value:null},dataTransfer:{value:null},hasBeenDrop:{value:!1},dragTarget:{value:null},currentDropTarget:{value:null},_isDragging:{value:!1}})}}),montageDefine("64d2e12","window-loader/montage-window",{dependencies:["../core/core"],factory:function(e,t,n){var r=e("../core/core").Montage;t.MontageWindow=r.specialize({_application:{value:null},application:{get:function(){return this._application},set:function(e){null===this._application&&(this._application=e,this.focused&&this._setFocusedWindow(this))}},_window:{value:null},window:{get:function(){return this._window},set:function(e){if(null===this._window){var t=e.document.body;this._window=e,e.addEventListener("beforeunload",this,!0),e.addEventListener("focus",this,!0),e.addEventListener("mousedown",this,!0),null===t.getAttribute("tabIndex")&&(t.setAttribute("tabIndex",-1),t.focus())}}},document:{get:function(){return this._window.document}},_component:{value:null},component:{get:function(){return this._component},set:function(e){null===this._component&&(this._component=e)}},title:{get:function(){return this.document.title},set:function(e){this.document.title=e}},focused:{value:!1},focus:{value:function(){this._window&&this._window.focus()}},_setFocusedWindow:{value:function(e){var t,n,r,i=this.application;if(i._multipleWindow){t=i.windows;for(r in t)t.hasOwnProperty(r)&&(n=t[r],n.window===e?n.focused!==!0&&(n.focused=!0,"z-order"===i.windowsSortOrder?(t.splice(r,1),t.unshift(n)):"reverse-z-order"===i.windowsSortOrder&&(t.splice(r,1),t.push(n))):n.focused=!1)}else this.focused=!0}},closed:{get:function(){return!!this._window&&this._window.closed}},close:{value:function(){this._window&&this._window.close()}},resizeTo:{value:function(e,t){this._window&&this._window.resizeTo(e,t)}},moveTo:{value:function(e,t){this._window&&this._window.moveTo(e,t)}},captureFocus:{value:function(e){var t=this.application;if(!this.application)return void(this.focused=!0);if(t.parentApplication)t.mainApplication.window.captureFocus(e);else{var n=(e.target.ownerDocument?e.target.ownerDocument.defaultView:null)||e.target.defaultView||e.target;this._setFocusedWindow(n)}}},captureMousedown:{value:function(e){this.captureFocus(e)}},captureBeforeunload:{value:function(e){var t,n=this.application,r=n.windows,i=n.attachedWindows;n.attachedWindows=[];for(t in i)i.hasOwnProperty(t)&&i[t].close();n.parentApplication&&(i=n.parentApplication.attachedWindows,t=i.indexOf(this),t!==-1&&i.splice(t,1),t=r.indexOf(this),t!==-1&&r.splice(t,1),this.window.removeEventListener("beforeunload",this,!0),this.close())}}})}}),montageDefine("64d2e12","core/dom",{dependencies:["./extras/dom"],factory:function(e,t,n){e("./extras/dom")}}),montageDefine("64d2e12","core/document-part",{dependencies:["./core","./logger","./promise","./event/event-manager"],factory:function(e,t,n){var r=e("./core").Montage,i=(e("./logger").logger("document-part"),e("./promise").Promise),o=e("./event/event-manager").defaultEventManager,a=r.specialize({parentDocumentPart:{value:null},template:{value:null},fragment:{value:null},objects:{value:null},childComponents:{value:null},parameters:{value:null},initWithTemplateAndFragment:{value:function(e,t){this.template=e,this.fragment=t,this.objects=null,this.childComponents=[],this.parameters=null}},startActingAsTopComponent:{value:function(){this.fragment&&o.registerEventHandlerForElement(this,this.fragment)}},stopActingAsTopComponent:{value:function(){this.fragment&&o.unregisterEventHandlerForElement(this.fragment)}},addChildComponent:{value:function(e){this.childComponents.indexOf(e)===-1&&this.childComponents.push(e)}},removeChildComponent:{value:function(e){var t=this.childComponents,n=t.indexOf(e);n>-1&&(t.splice(n,1),e._parentComponent=null,e._alternateParentComponent=null)}},_addToDrawList:{value:Function.noop},_componentTreeLoadedDeferred:{value:null},loadComponentTree:{value:function(){if(!this._componentTreeLoadedDeferred){for(var e=[],t=this.childComponents,n=0,r=t.length;n<r;n++)e.push(t[n].loadComponentTree());this._componentTreeLoadedDeferred=i.all(e)}return this._componentTreeLoadedDeferred}}});t.DocumentPart=a}}),montageDefine("64d2e12","core/serialization/serialization",{dependencies:["../core","./serializer/montage-labeler","./deserializer/montage-reviver","frb/parse","frb/stringify"],factory:function(e,t,n){var r=e("../core").Montage,i=e("./serializer/montage-labeler").MontageLabeler,o=e("./deserializer/montage-reviver").MontageReviver,a=e("frb/parse"),s=e("frb/stringify"),l=r.specialize({_serializationString:{value:null},_serializationObject:{value:null},_serializationLabels:{value:null},initWithString:{value:function(e){return this._serializationString=e,this._serializationObject=null,this._serializationLabels=null,this}},initWithObject:{value:function(e){return this._serializationString=null,this._serializationObject=e,this._serializationLabels=null,this}},clone:{value:function(){var e=new l;return e.initWithString(this.getSerializationString()),e}},getSerializationObject:{value:function(){return this._serializationObject||(this._serializationObject=JSON.parse(this._serializationString)),this._serializationObject}},getSerializationString:{value:function(){return this._serializationString||(this._serializationString=JSON.stringify(this._serializationObject)),this._serializationString}},getSerializationLabels:{value:function(){var e;return this._serializationLabels||(e=this.getSerializationObject())&&(this._serializationLabels=Object.keys(e)),this._serializationLabels}},getExternalObjectLabels:{value:function(){var e=this.getSerializationObject(),t=[];for(var n in e)0===Object.keys(e[n]).length&&t.push(n);return t}},removeObjectWithLabel:{value:function(e,t){return t=t||this.getSerializationObject(),t&&e in t&&(delete t[e],this._serializationLabels&&this._serializationLabels.splice(this._serializationLabels.indexOf(e),1),this._serializationString=null),this}},removeObjectsWithLabels:{value:function(e){var t=this.getSerializationObject();if(t&&e){for(var n=0,r=e.length;n<r;n++)this.removeObjectWithLabel(e[n],t);this._serializationString=null}return this}},hasSerializationLabel:{value:function(e){return e in this.getSerializationObject()}},isExternalObject:{value:function(e){var t=this.getSerializationObject();return!!(t&&e in t)&&0===Object.keys(t[e]).length}},isAlias:{value:function(e){var t=this.getSerializationObject();return!!(t&&e in t)&&"alias"in t[e]}},getElementId:{value:function(e){var t=this.getSerializationObject(),n=r.getPath.call(t,e+".values.element");if(n||(n=r.getPath.call(t,e+".properties.element")),n)return n["#"]}},getSerializationLabelsWithElements:{value:function(e){var n=new t.SerializationInspector,r=[];return n.initWithSerialization(this),n.visitSerialization(function(t){"Element"===t.type&&e.indexOf(t.data)>=0&&(t=t.parent,!t||"values"!==t.name&&"properties"!==t.name||(t=t.parent,t&&"montageObject"===t.type&&r.push(t.label)))}),r}},renameElementReferences:{value:function(e){var n=new t.SerializationInspector;n.initWithSerialization(this),n.visitSerialization(function(t){"Element"===t.type&&t.data in e&&(t.data=e[t.data])})}},renameSerializationLabels:{value:function(e){var n=new t.SerializationInspector;n.initWithSerialization(this),n.visitSerialization(function(t){if(t.label){var n=t.label;n in e&&(t.label=e[n])}if("reference"===t.type){var r=t.data;r in e&&(t.data=e[r])}})}},mergeSerialization:{value:function(e,n){return t.SerializationMerger.mergeSerializations(this,e,n)}},extractSerialization:{value:function(e,n){var r=new t.SerializationExtractor;return r.initWithSerialization(this),r.extractSerialization(e,n)}}}),u=r.specialize(null,{mergeSerializations:{value:function(e,t,n){var r,i,o,a,s,l,u={};o=e.getSerializationLabels(),a=t.getSerializationLabels(),s=this._createCollisionTable(o,a,u,n&&n.labeler),n&&n.willMergeObjectWithLabel&&(l=this._willMergeObjectWithLabel(n,e,t,u),s=s||l),s&&(t=t.clone(),t.renameSerializationLabels(u),a=t.getSerializationLabels()),r=e.getSerializationObject(),i=t.getSerializationObject();for(var c,h=0;c=a[h];h++)o.indexOf(c)===-1&&(r[c]=i[c]);return e.initWithObject(r),u}},_willMergeObjectWithLabel:{value:function(e,t,n,r){var i,o,a,s,l,u=!1,c=n.getSerializationLabels();r&&(a=[],Object.keys(r).forEach(function(e){a.push(r[e])}));for(var h,p=0;h=c[p];p++)if(o=r&&r[h],i=e.willMergeObjectWithLabel(h,o),"string"==typeof i){if(s=this._isLabelValidInSerialization(i,t),s||(l=!this._isLabelValidInSerialization(i,n)&&a.indexOf(i)===-1),!s&&!l)throw new Error("willMergeObjectWithLabel either needs to return a label that exists in the destination serialization to indicate it's the same object or return a completely new label to rename the object being merged. \""+i+'"  destination: '+t.getSerializationString()+"\n source: "+n.getSerializationString()+"\n collision table: "+JSON.stringify(r,null,4));u=!0,r[h]=i}return u}},_isLabelValidInSerialization:{value:function(e,t){var n,r;return!!t.hasSerializationLabel(e)||(r=e.indexOf(":"),!!(r>0&&(n=e.slice(0,r),t.hasSerializationLabel(n))))}},_createCollisionTable:{value:function(e,t,n,r){r=r||new i;var o,a,s,l,u,c=!1,h=Object.create(null);for(u=0;u<e.length;u++)s=e[u],l=s.indexOf(":"),l>0&&(o=s.slice(0,l),r.addLabel(o),h[o]=1),r.addLabel(s),h[s]=1;for(u=0;s=t[u];u++)l=s.indexOf(":"),l>0?(o=s.slice(0,l),a=n[o],a?(n[s]=a+":"+s.slice(l+1),c=!0):o in h?(a=r.generateLabel(r.getLabelBaseName(o)),t.indexOf(o)>=0&&(n[o]=a),n[s]=a+s.slice(l),c=!0):r.addLabel(o)):s in h&&!(s in n)?(n[s]=r.generateLabel(r.getLabelBaseName(s)),c=!0):r.addLabel(s);return c}}}),c=r.specialize({initWithSerialization:{value:function(e){this._serialization=e}},visitSerialization:{value:function(e){var t=this._serialization.getSerializationObject();this._walkRootObjects(e,t),this._serialization.initWithObject(t)}},visitSerializationObject:{value:function(e,t){var n=this._serialization.getSerializationObject();if(!(e in n))throw new Error('Object "'+e+'" does not exist in '+this._serialization.getSerializationString());this._walkRootObject(t,n,e),this._serialization.initWithObject(n)}},changeLabel:{value:function(e,t){var n,r=this._serialization.getSerializationObject();n=r[e],delete r[e],r[t]=n}},_walkRootObjects:{value:function(e,t){for(var n in t)this._walkRootObject(e,t,n)}},_walkRootObject:{value:function(e,t,n){var r=t[n];"value"in r?this._walkObject(e,r,"value",n):this._walkCustomObject(e,t,n)}},_walkObject:{value:function(e,t,n,r,i){var a,s=t[n],l=o.getTypeOf(s);if(a={type:l},r?a.label=r:a.name=n,i&&(a.parent=i),"number"===l||"string"===l||"null"===l)a.data=s,e(a),t[n]=a.data;else if("regexp"===l)a.data=s["/"],e(a),s["/"]=a.data;else if("reference"===l)a.data=s["@"],e(a),s["@"]=a.data;else if("Element"===l)a.data=s["#"],e(a),s["#"]=a.data;else if("array"===l){a.data=s,e(a),t[n]=s=a.data;for(var u=0,c=s.length;u<c;u++)this._walkObject(e,s,""+u,null,a)}else if("binding"===l)this._walkBinding(e,t,n,a);else if("object"===l){a.data=s,e(a),t[n]=s=a.data;for(var h in s)this._walkObject(e,s,h,null,a)}null!==r&&void 0!==r&&r!==a&&a.label!==r&&this.changeLabel(r,a.label)}},_walkCustomObject:{value:function(e,t,n){var r,i=t[n];r={type:"montageObject",label:n,data:i},e(r),t[n]=i=r.data,r.label!==n&&this.changeLabel(n,r.label),i.values?this._walkObject(e,i,"values",null,r):i.properties&&this._walkObject(e,i,"properties",null,r),i.bindings&&this._walkBindings(e,i,null,r),i.listeners&&this._walkObject(e,i,"listeners",null,r),i.localizations&&this._walkLocalizations(e,i,null,r)}},_walkBindings:{value:function(e,t,n){var r,i=t.bindings;r={type:"bindings",data:i,parent:n},e(r),t.bindings=i=r.data;for(var o in i)this._walkBinding(e,i,o,r)}},_walkBinding:{value:function(e,t,n,r){var i,o=t[n];i={type:"binding",name:n,data:o,parent:r},e(i),t[n]=o=i.data,this._walkBindingData(e,o,i)}},_walkBindingData:{value:function(e,t,n){var r,i,o=!1;r=t["<-"]||t["<->"]||t["="],i=Object.clone(a(r)),this._walksBindingReferences(i,function(t){var n={type:"reference",data:t.label};e(n),t.label!==n.data&&(t.label=n.data,o=!0)}),o&&("<-"in t?t["<-"]=s(i):"<->"in t?t["<->"]=s(i):t["="]=s(i)),t.converter&&this._walkObject(e,t,"converter",null,n)}},_walkLocalizations:{value:function(e,t,n){var r,i=t.localizations;r={type:"localizations",data:i,parent:n},e(r),t.localizations=i=r.data;for(var o in i)this._walkLocalization(e,i,o,r)}},_walkLocalization:{value:function(e,t,n,r){var i,o,a=t[n];if(i={type:"localization",name:n,data:a,parent:r},e(i),t[n]=a=i.data,"object"==typeof a.key&&this._walkBindingData(e,a.key,i),"object"==typeof a["default"]&&this._walkBindingData(e,a["default"],i),"object"==typeof a.data){o=a.data;for(var s in o)this._walkBindingData(e,o[s],i)}}},_walksBindingReferences:{value:function(e,t){var n=e.args;if("component"===e.type&&t(e),n)for(var r=0,i=n.length;r<i;r++)this._walksBindingReferences(n[r],t)}}}),h=r.specialize({_serialization:{value:null},initWithSerialization:{value:function(e){this._serialization=e}},extractSerialization:{value:function(e,n){var r,i,o,a=new t.SerializationInspector,s={},u=[];for(o=this._serialization.getSerializationObject(),a.initWithSerialization(this._serialization),r=0,i;i=e[r];r++)s[i]=o[i],a.visitSerializationObject(i,function(t){var n;"reference"===t.type&&(n=t.data,u.indexOf(n)===-1&&e.indexOf(n)===-1&&u.push(n))});if(n)for(r=0,i;i=n[r];r++)i in o&&!(i in s)&&(s[i]={});for(r=0,i;i=u[r];r++)s[i]={};return(new l).initWithObject(s)}}});t.Serialization=l,t.SerializationMerger=u,t.SerializationInspector=c,t.SerializationExtractor=h}}),montageDefine("64d2e12","core/meta/derived-descriptor",{dependencies:["./property-descriptor","../logger"],factory:function(e,t,n){var r=e("./property-descriptor").PropertyDescriptor,i=(e("../logger").logger("objectDescriptor"),{dependencies:[],getterDefinition:"",setterDefinition:""});t.DerivedDescriptor=r.specialize({serializeSelf:{value:function(e){this.dependencies.length>0&&this._setPropertyWithDefaults(e,"dependencies",this.dependencies),this._setPropertyWithDefaults(e,"getterDefinition",this.getterDefinition),this._setPropertyWithDefaults(e,"setterDefinition",this.setterDefinition)}},deserializeSelf:{value:function(e){this.dependencies=this._getPropertyWithDefaults(e,"dependencies"),this.getterDefinition=this._getPropertyWithDefaults(e,"getterDefinition"),this.setterDefinition=this._getPropertyWithDefaults(e,"setterDefinition")}},_setPropertyWithDefaults:{value:function(e,t,n){n!==i[t]&&e.setProperty(t,n)}},_getPropertyWithDefaults:{value:function(e,t){var n=e.getProperty(t);return n||this[t]||i[t]}},isDerived:{get:function(){return!0},serializable:!1},_dependencies:{value:null},dependencies:{get:function(){return this._dependencies||(this._dependencies=[])}},getterDefinition:{value:i.getterDefinition},setterDefinition:{value:i.setterDefinition}})}}),montageDefine("64d2e12","core/meta/event-descriptor",{dependencies:["../core","../logger","../deprecate","../core","../core","../core","../core"],factory:function(e,t,n){var r=e("../core").Montage,i=(e("../logger").logger("objectDescriptor"),e("../deprecate")),o={name:"default",detailKeys:[],detailValueTypes:[],helpKey:""};t.EventDescriptor=r.specialize({constructor:{value:function(){this._detailKeys=[]}},initWithNameAndObjectDescriptor:{value:function(e,t){return this._name=null!==e?e:o.name,this._owner=t,this}},initWithNameAndBlueprint:{value:i.deprecateMethod(void 0,function(e,t){return this.initWithNameAndObjectDescriptor(e,t)},"new EventBlueprint().initWithNameAndBlueprint","new EventDescriptor().initWithNameAndObjectDescriptor")},serializeSelf:{value:function(e){e.setProperty("name",this.name),e.setProperty("objectDescriptor",this._owner,"reference"),this.detailKeys.length>0&&this._setPropertyWithDefaults(e,"detailKeys",this.detailKeys),this._setPropertyWithDefaults(e,"helpKey",this.helpKey)}},deserializeSelf:{value:function(e){var t;t=e.getProperty("name"),void 0!==t&&(this._name=t),t=e.getProperty("objectDescriptor")||e.getProperty("blueprint"),void 0!==t&&(this._owner=t),this.detailKeys=this._getPropertyWithDefaults(e,"detailKeys"),this.helpKey=this._getPropertyWithDefaults(e,"helpKey")}},_setPropertyWithDefaults:{value:function(e,t,n){n!==o[t]&&e.setProperty(t,n)}},_getPropertyWithDefaults:{value:function(e,t){var n=e.getProperty(t)||this[t];return n||this[t]||o[t]}},_owner:{value:null},owner:{get:function(){return this._owner}},_name:{value:null},name:{serializable:!1,get:function(){return this._name}},identifier:{get:function(){return[this.owner.identifier,this.name].join("_")}},_detailKeys:{value:null},detailKeys:{get:function(){return this._detailKeys},set:function(e){Array.isArray(e)&&(this._detailKeys=e)}},helpKey:{value:o.helpKey},objectDescriptorModuleId:e("../core")._objectDescriptorModuleIdDescriptor,objectDescriptor:e("../core")._objectDescriptorDescriptor,blueprintModuleId:e("../core")._blueprintModuleIdDescriptor,blueprint:e("../core")._blueprintDescriptor})}}),montageDefine("64d2e12","core/meta/model",{dependencies:["../core","./model-group","./object-descriptor","../deprecate","../application","../core","../core","../core","../core"],factory:function(e,t,n){var r=e("../core").Montage,i=e("./model-group").ModelGroup,o=e("./object-descriptor"),a=e("../deprecate"),s=e("../application").application,l=null,u=t.Model=r.specialize({constructor:{value:function(){return this._name=null,this.modelModuleId=null,this.isDefault=!1,this._objectDescriptorForPrototypeTable={},this}},initWithNameAndRequire:{value:function(e,t){if(!e)throw new Error("name is required");if(!t)throw new Error("require is required");return this._name=e,this._require=t,u.group.addModel(this),this}},serializeSelf:{value:function(e){this.version>1&&e.setProperty("version",this.version),e.setProperty("name",this.name),this.objectDescriptors.length>0&&e.setProperty("objectDescriptors",this.objectDescriptors),e.setProperty("objectModelModuleId",this.modelInstanceModuleId)}},deserializeSelf:{value:function(e){var t=e.getProperty("version");void 0!==t&&(this.version=t),t=e.getProperty("name"),void 0!==t&&(this._name=t),t=e.getProperty("objectDescriptors")||e.getProperty("blueprints"),t&&(this._objectDescriptors=t),t=e.getProperty("objectModelModuleId")||e.getProperty("binderModuleId"),void 0!==t&&(this.modelInstanceModuleId=t)}},_name:{value:null},name:{get:function(){return this._name}},_require:{value:null},require:{get:function(){return this._require}},_objectDescriptorForPrototypeTable:{value:null},identifier:{get:function(){return["objectModel",this.name.toLowerCase()].join("_")}},modelInstanceModuleId:{serializable:!1,value:null},isDefault:{serializable:!1,value:!1},_objectDescriptors:{value:null},objectDescriptors:{get:function(){return this._objectDescriptors||(this._objectDescriptors=[])}},addObjectDescriptor:{value:function(e){if(null!==e){var t=this.objectDescriptors.indexOf(e);t<0&&(null!==e.model&&e.model!==this&&e.model.removeObjectDescriptor(e),this.objectDescriptors.push(e),e.model=this)}return e}},removeObjectDescriptor:{value:function(e){if(null!==e){var t=this.objectDescriptors.indexOf(e);t>=0&&(this.objectDescriptors.splice(t,1),e.model=null)}return e}},addObjectDescriptorNamed:{value:function(e){return this.addObjectDescriptor((new o.ObjectDescriptor).initWithName(e))}},objectDescriptorForPrototype:{value:a.deprecateMethod(void 0,function(e){return this.objectDescriptorForName(e)},"objectDescriptorForPrototype","objectDescriptorForName",!0)},objectDescriptorForName:{value:function(e){for(var t=this.objectDescriptors,n=null,r=t.length,i=0;i<r&&!n;i++)t[i].name===e&&(n=t[i]);return n}},_objectDescriptorObjectProperty:{value:null},ObjectProperty:{get:function(){return this._objectDescriptorObjectProperty||(this._objectDescriptorObjectProperty=u.group.defaultObjectDescriptorObjectProperty),this._objectDescriptorObjectProperty}},objectDescriptorModuleId:e("../core")._objectDescriptorModuleIdDescriptor,objectDescriptor:e("../core")._objectDescriptorDescriptor,blueprints:{get:a.deprecateMethod(void 0,function(){return this.objectDescriptors},"blueprints","objectDescriptors",!0)},addBlueprint:{value:a.deprecateMethod(void 0,function(e){return this.addObjectDescriptor(e)},"addBlueprint","addObjectDescriptor",!0)},removeBlueprint:{value:a.deprecateMethod(void 0,function(e){
return this.removeObjectDescriptor(e)},"removeBlueprint","removeObjectDescriptor",!0)},addBlueprintNamed:{value:a.deprecateMethod(void 0,function(e){return this.addObjectDescriptorNamed(e)},"addBlueprintNamed","addObjectDescriptorNamed",!0)},blueprintForPrototype:{value:a.deprecateMethod(void 0,function(e){return this.blueprintForName(e)},"blueprintForPrototype","blueprintForName",!0)},blueprintForName:{value:a.deprecateMethod(void 0,function(e){return this.objectDescriptorForName(e)},"blueprintForName","objectDescriptorForName",!0)},blueprintModuleId:e("../core")._objectDescriptorModuleIdDescriptor,blueprint:e("../core")._objectDescriptorDescriptor},{group:{get:function(){return null===l&&(l=new i,l.name=s?s.name:""),l}},manager:{get:a.deprecateMethod(void 0,function(){return t.Model.group},"Binder.manager","Model.group")}})}}),montageDefine("64d2e12","core/meta/property-descriptor",{dependencies:["../core","../promise","../deprecate","../logger","../core","../core","../core","../core"],factory:function(e,t,n){var r=e("../core").Montage,i=e("../promise").Promise,o=e("../deprecate"),a=(e("../logger").logger("objectDescriptor"),{name:"default",cardinality:1,mandatory:!1,readOnly:!1,denyDelete:!1,inversePropertyName:void 0,valueType:"string",collectionValueType:"list",valueObjectPrototypeName:"",valueObjectModuleId:"",valueDescriptor:void 0,enumValues:[],defaultValue:void 0,helpKey:""});t.PropertyDescriptor=r.specialize({initWithNameObjectDescriptorAndCardinality:{value:function(e,t,n){return this._name=null!==e?e:a.name,this._owner=t,this.cardinality=n>0?n:a.cardinality,this}},initWithNameBlueprintAndCardinality:{value:o.deprecateMethod(void 0,function(e,t,n){return this.initWithNameObjectDescriptorAndCardinality(e,t,n)},"new PropertyBlueprint().initWithNameBlueprintAndCardinality","new PropertyDescriptor().initWithNameObjectDescriptorAndCardinality",!0)},serializeSelf:{value:function(e){e.setProperty("name",this.name),e.setProperty("objectDescriptor",this._owner,"reference"),this.cardinality===1/0?e.setProperty("cardinality",-1):this._setPropertyWithDefaults(e,"cardinality",this.cardinality),this._setPropertyWithDefaults(e,"mandatory",this.mandatory),this._setPropertyWithDefaults(e,"readOnly",this.readOnly),this._setPropertyWithDefaults(e,"denyDelete",this.denyDelete),this._setPropertyWithDefaults(e,"valueType",this.valueType),this._setPropertyWithDefaults(e,"collectionValueType",this.collectionValueType),this._setPropertyWithDefaults(e,"valueObjectPrototypeName",this.valueObjectPrototypeName),this._setPropertyWithDefaults(e,"valueObjectModuleId",this.valueObjectModuleId),this._setPropertyWithDefaults(e,"valueDescriptor",this._valueDescriptorReference),this.enumValues.length>0&&this._setPropertyWithDefaults(e,"enumValues",this.enumValues),this._setPropertyWithDefaults(e,"defaultValue",this.defaultValue),this._setPropertyWithDefaults(e,"helpKey",this.helpKey),this._setPropertyWithDefaults(e,"definition",this.definition),this._setPropertyWithDefaults(e,"inversePropertyName",this.inversePropertyName)}},deserializeSelf:{value:function(e){var t;t=e.getProperty("name"),void 0!==t&&(this._name=t),t=e.getProperty("objectDescriptor")||e.getProperty("blueprint"),void 0!==t&&(this._owner=t),this._overridePropertyWithDefaults(e,"cardinality"),this.cardinality===-1&&(this.cardinality=1/0),this._overridePropertyWithDefaults(e,"mandatory"),this._overridePropertyWithDefaults(e,"readOnly"),this._overridePropertyWithDefaults(e,"denyDelete"),this._overridePropertyWithDefaults(e,"valueType"),this._overridePropertyWithDefaults(e,"collectionValueType"),this._overridePropertyWithDefaults(e,"valueObjectPrototypeName"),this._overridePropertyWithDefaults(e,"valueObjectModuleId"),this._overridePropertyWithDefaults(e,"_valueDescriptorReference","valueDescriptor","targetBlueprint"),this._overridePropertyWithDefaults(e,"enumValues"),this._overridePropertyWithDefaults(e,"defaultValue"),this._overridePropertyWithDefaults(e,"helpKey"),this._overridePropertyWithDefaults(e,"definition"),this._overridePropertyWithDefaults(e,"inversePropertyName")}},_setPropertyWithDefaults:{value:function(e,t,n){null!==n&&n!==a[t]&&e.setProperty(t,n)}},_getPropertyWithDefaults:{value:function(e){var t,n,r,i=Array.prototype.slice.call(arguments).slice(1,1/0);for(n=0,r=i.length;n<r&&!t;n+=1)t=e.getProperty(i[n]);return t||a[i[0]]}},_overridePropertyWithDefaults:{value:function(e,t){var n,r,i,o;for(n=arguments.length>2?Array.prototype.slice.call(arguments,2,1/0):[t],i=0,o=n.length;i<o&&!r;i++)r=e.getProperty(n[i]);this[t]=void 0===r?a[n[0]]:r}},_owner:{value:null},owner:{get:function(){return this._owner}},_name:{value:null},name:{serializable:!1,get:function(){return this._name}},identifier:{get:function(){return[this.owner.identifier,this.name].join("_")}},cardinality:{value:a.cardinality},mandatory:{value:a.mandatory},denyDelete:{value:a.denyDelete},readOnly:{value:a.readOnly},isToMany:{get:function(){return this.cardinality===1/0||this.cardinality>1}},isDerived:{get:function(){return!1}},definition:{value:null},valueType:{value:a.valueType},collectionValueType:{value:a.collectionValueType},valueObjectPrototypeName:{value:a.valueObjectPrototypeName},valueObjectModuleId:{value:a.valueObjectModuleId},valueDescriptor:{serializable:!1,get:function(){return this._valueDescriptorReference&&"function"==typeof this._valueDescriptorReference.promise?(o.deprecationWarningOnce("valueDescriptor reference via ObjectDescriptorReference","direct reference via object syntax"),this._valueDescriptorReference.promise(this.require)):this._valueDescriptorReference&&i.resolve(this._valueDescriptorReference)},set:function(e){this._valueDescriptorReference=e}},_targetObjectDescriptorReference:{value:null},_enumValues:{value:null},enumValues:{get:function(){return this._enumValues?this._enumValues:[]},set:function(e){Array.isArray(e)&&(this._enumValues=e)}},defaultValue:{value:a.defaultValue},helpKey:{value:a.helpKey},objectDescriptorModuleId:e("../core")._objectDescriptorModuleIdDescriptor,objectDescriptor:e("../core")._objectDescriptorDescriptor,serializable:{value:!0},inversePropertyName:{value:void 0},isAssociationBlueprint:{get:o.deprecateMethod(void 0,function(){return!!this._valueDescriptorReference},"isAssociationBlueprint","No analog",!0)},targetBlueprint:{get:o.deprecateMethod(void 0,function(){return this.valueDescriptor},"targetBlueprint.get","valueDescriptor.get",!0),set:o.deprecateMethod(void 0,function(e){this.valueDescriptor=e},"targetBlueprint.get","valueDescriptor.set",!0)},blueprintDescriptorModuleId:e("../core")._objectDescriptorModuleIdDescriptor,blueprint:e("../core")._objectDescriptorDescriptor})}}),montageDefine("64d2e12","core/meta/validation-rule",{dependencies:["../core","./validation-semantics","../selector","../deprecate","../core","../core","../core","../core"],factory:function(e,t,n){var r=e("../core").Montage,i=e("./validation-semantics").PropertyValidationSemantics,o=e("../selector").Selector,a=e("../deprecate");t.PropertyValidationRule=r.specialize({initWithNameAndObjectDescriptor:{value:function(e,t){return this._name=e,this._owner=t,this}},serializeSelf:{value:function(e){e.setProperty("name",this.name),e.setProperty("objectDescriptor",this.owner,"reference"),e.setProperty("messageKey",this.messageKey),e.setAllValues()}},deserializeSelf:{value:function(e){var t;t=e.getProperty("name"),void 0!==t&&(this._name=t),t=e.getProperty("objectDescriptor")||e.getProperty("blueprint"),void 0!==t&&(this._owner=t),t=e.getProperty("messageKey"),void 0!==t&&(this._messageKey=t);for(var n=r.getSerializablePropertyNames(this),i=0,o=n.length;i<o;i++){var a=n[i];this[a]=e.getProperty(a)}}},_owner:{value:null},owner:{get:function(){return this._owner}},identifier:{get:function(){return[this.objectDescriptor.identifier,"rule",this.name].join("_")}},_name:{value:""},name:{get:function(){return this._name}},_validationSelector:{value:null},validationSelector:{serializable:!1,get:function(){return this._validationSelector||(this._validationSelector=o["false"]),this._validationSelector},set:function(e){this._validationSelector=e}},_messageKey:{value:""},messageKey:{serializable:!1,get:function(){return this._messageKey&&0!==this._messageKey.length?this._messageKey:this._name},set:function(e){this._messageKey=e}},_propertyValidationEvaluator:{value:null},evaluateRule:{value:function(e){if(null===this._propertyValidationEvaluator){var t=(new i).initWithBlueprint(this.objectDescriptor);this._propertyValidationEvaluator=t.compile(this.selector.syntax)}return this._propertyValidationEvaluator(e)}},objectDescriptorModuleId:e("../core")._objectDescriptorModuleIdDescriptor,objectDescriptor:e("../core")._objectDescriptorDescriptor,initWithNameAndBlueprint:{value:a.deprecateMethod(void 0,function(e,t){return this.initWithNameAndObjectDescriptor(e,t)},"initWithNameAndBlueprint","initWithNameAndObjectDescriptor")},blueprintModuleId:e("../core")._objectDescriptorModuleIdDescriptor,blueprint:e("../core")._objectDescriptorDescriptor})}}),montageDefine("64d2e12","composer/composer",{dependencies:["../core/target","../core/event/event-manager"],factory:function(e,t,n){var r=e("../core/target").Target,i=e("../core/event/event-manager").defaultEventManager;t.Composer=r.specialize({_component:{value:null},component:{get:function(){return this._component},set:function(e){this._component=e}},_element:{value:null},element:{get:function(){return this._element},set:function(e){this._element=e}},_shawdowRoot:{value:null},shawdowRoot:{get:function(){return this._shawdowRoot||(this._shawdowRoot=i.shawdowRootFromNode(this.element)),this._shawdowRoot}},lazyLoad:{value:!0},_needsFrame:{value:!1},needsFrame:{set:function(e){this._needsFrame!==e&&(this._needsFrame=e,this._component&&e&&this._component.scheduleComposer(this))},get:function(){return this._needsFrame}},frame:{value:Function.noop},_resolveDefaults:{value:function(){this.element||null!==this.element||null===this.component||(this.element=this.component.element)}},_isLoaded:{value:!1},isLoaded:{get:function(){return this._isLoaded}},load:{value:Function.noop},unload:{value:Function.noop},deserializedFromTemplate:{value:function(){this.component&&this.component.addComposer(this)}}},{isCoordinateOutsideRadius:{value:function(e,t,n){return e*e+t*t>n*n}}})}}),montageDefine("64d2e12","core/extras/dom",{dependencies:[],factory:function(e,t,n){if("undefined"!=typeof Node){var r=Node.prototype;r.get=function(e){return this.getAttribute(e)||this[e]},r.parentOf=function(e){do e=e.parentNode;while(e&&e!==this);return!!e}}if("undefined"!=typeof Element){var i=Element.prototype;Object.defineProperty(i,"set",{value:function(e,t,n){var r,i,o,a,s,l=e.indexOf(".",n);n=n||0,i=e.substring(n,l===-1?e.length:l),l===-1?this.setAttribute(i,t):(o=e.lastIndexOf("."),"style"===i?(a=e.substring(l+1,e.length),this.style[a]=t):"classList"===i?(s=e.substring(l+1,e.length),t?this.classList.add(s):this.classList.remove(s)):(r=this.get(e.substring(0,o)))&&(r[e.substring(o+1,e.length)]=t))},enumerable:!1});var o="classList";if(!i.hasOwnProperty(o)){var a=/^\s+|\s+$/g,s=function(e,t){e.setAttribute("class",t.join(" "))},l=function(e,t){if(""===t)throw"SYNTAX_ERR";if(/\s/.test(t))throw"INVALID_CHARACTER_ERR";return e.indexOf(t)},u=function(){var e=this,t=e.getAttribute("class")||"";return t=t.replace(a,"").split(/\s+/),{length:t.length,item:function(e){return t[e]||null},contains:function(e){return l(t,e)!==-1},add:function(n){l(t,n)===-1&&(t.push(n),this.length=t.length,s(e,t))},remove:function(n){var r=l(t,n);r!==-1&&(t.splice(r,1),this.length=t.length,s(e,t))},toggle:function(e){l(t,e)===-1?this.add(e):this.remove(e)},toString:function(){return e.getAttribute("class")||""}}};Object.defineProperty?Object.defineProperty(i,o,{get:u,enumerable:!0}):Object.prototype.__defineGetter__&&i.__defineGetter__(o,u)}}if("undefined"!=typeof Node){var c=Object.getPrototypeOf(document);c.addRule=function(e,t){var n,r;if(n=document.styleSheets[0])r=document.getRule(e,n);else{var i=document.createElement("style");i.type="text/css",document.head.appendChild(i),n=document.styleSheets[0]}r||n.insertRule(e+" "+t,n.cssRules.length)},c.getRule=function(e,t){var n;if(t.cssRules)for(var r=0;n=t.cssRules[r];r++){if(n.name&&n.name===e)return n;if(n.selectorText===e)return n}}}if("undefined"!=typeof DOMTokenList){var h=window.DOMTokenList.prototype;"undefined"==typeof h.has&&Object.defineProperty(h,"has",{value:function(e){return this.contains(e)}})}}}),montageDefine("64d2e12","core/meta/model-group",{dependencies:["../core","./model","./object-property","../deprecate"],factory:function(e,t,n){var r=e("../core").Montage,i=e("./model"),o=e("./object-property").ObjectProperty,a=e("../deprecate");t.ModelGroup=r.specialize({constructor:{value:function(){this._models=[],this._modelTable={}}},_name:{value:null},name:{get:function(){return this._name},set:function(e){e!==this._name&&(this._name=e)}},_models:{value:null},_modelTable:{value:null},models:{get:function(){return this._models}},addModel:{value:function(e){var t;null!==e&&(this._modelTable[e.name]&&this.removeModel(this._modelTable[e.name]),t=this._models.indexOf(e),t>=0&&this._models.splice(t,1),this._models.push(e),this._modelTable[e.name]=e)}},removeModel:{value:function(e){var t;null!==e&&(t=this._models.indexOf(e),t>=0&&this._models.splice(t,1),this._modelTable[e.name]&&delete this._modelTable[e.name])}},modelForName:{value:function(e){return this._modelTable[e]}},objectDescriptorForPrototype:{value:function(e,t){var n,r,i=null;for(r=0;"undefined"!=typeof(n=this.models[r])&&!i;r++)i=n.objectDescriptorForName(e);return i}},_defaultObjectDescriptorObjectProperty:{serializable:!0,value:null},defaultObjectDescriptorObjectProperty:{get:function(){return this._defaultObjectDescriptorObjectProperty||(this._defaultObjectDescriptorObjectProperty=(new o).init()),this._defaultObjectDescriptorObjectProperty}},_defaultModel:{serializable:!0,value:null},defaultModel:{get:function(){if(!this._defaultModel){var t=global.mr||e;this._defaultModel=(new i.Model).initWithNameAndRequire("default",t),this._defaultModel.isDefault=!0,this.addModel(this._defaultModel)}return this._defaultModel}},binders:{get:a.deprecateMethod(void 0,function(){return this.models},"binders","models")},addBinder:{value:a.deprecateMethod(void 0,function(e){this.addModel(e)},"addBinder","addModel")},removeBinder:{value:a.deprecateMethod(void 0,function(e){return this.removeModel(e)},"removeBinder","removeModel")},binderForName:{value:a.deprecateMethod(void 0,function(e){return this.modelForName(e)},"binderForName","modelForName")},blueprintForPrototype:{value:a.deprecateMethod(void 0,function(e,t){return this.objectDescriptorForPrototype(e)},"blueprintForPrototype","objectDescriptorForPrototype")},defaultBlueprintObjectProperty:{get:a.deprecateMethod(void 0,function(){return this.defaultObjectDescriptorObjectProperty},"defaultBlueprintObjectProperty","defaultObjectDescriptorObjectProperty")},defaultBinder:{get:a.deprecateMethod(void 0,function(){return this.defaultModel},"defaultBinder","defaultModel")}})}}),montageDefine("64d2e12","core/meta/validation-semantics",{dependencies:["../core","../deprecate","../logger"],factory:function(e,t,n){var r=e("../core").Montage,i=r,o=e("../deprecate"),a=(e("../logger").logger("objectDescriptor"),t.PropertyValidationSemantics=i.specialize({initWithObjectDescriptor:{value:function(e){return this._objectDescriptor=e,this}},_objectDescriptor:{value:void 0},objectDescriptor:{get:function(){return this._objectDescriptor}},compile:{value:function(e,t){i.compile.call(this,e,t)}},operators:{value:{isBound:function(e){return!e}}},evaluators:{value:{isBound:function(e,t){var n=this;return function(r,i){return r=n.count(e(r,i)),t(r,i)}}}},initWithBlueprint:{value:o.deprecateMethod(void 0,function(e){return this.initWithObjectDescriptor(e)},"initWithBlueprint","initWithObjectDescriptor")},blueprint:{get:o.deprecateMethod(void 0,function(){return this._blueprint},"blueprint","objectDescriptor")}}));for(var s in i.operators)i.operators.hasOwnProperty(s)&&(a.operators[s]=i.operators[s]);for(var l in i.evaluators)i.evaluators.hasOwnProperty(l)&&(a.evaluators[l]=i.evaluators[l])}}),montageDefine("64d2e12","core/selector",{dependencies:["./criteria"],factory:function(e,t,n){var r=e("./criteria").Criteria;t.Selector=r}}),montageDefine("64d2e12","core/criteria",{dependencies:["./core","frb/parse","frb/stringify","frb/evaluate","frb/language","frb/scope","frb/compile-evaluator"],factory:function(e,t,n){var r=e("./core").Montage,i=e("frb/parse"),o=e("frb/stringify"),a=(e("frb/evaluate"),e("frb/language").precedence),s=e("frb/scope"),l=e("frb/compile-evaluator"),u=t.Criteria=r.specialize({_expression:{value:null},expression:{get:function(){return this._expression}},parameters:{value:null},_syntax:{value:null},syntax:{get:function(){return this._syntax||(this._syntax=i(this._expression))}},_compiledSyntax:{value:null},compiledSyntax:{get:function(){return this._compiledSyntax||(this._compiledSyntax=l(this.syntax))}},initWithSyntax:{value:function(e,t){return this._syntax=e,this.parameters=t,this}},initWithExpression:{value:function(e,t){return this._expression=e,this.parameters=t,this}},initWithPath:{value:function(e){return this.initWithExpression(e)}},criteriaWithParameters:{value:function(e){var t=(new this.constructor).initWithExpression(this.expression);return t.parameters=e,t}},serializeSelf:{value:function(e){e.setProperty("expression",this._expression||(this._expression=o(this.syntax))),e.setProperty("parameters",this.parameters)}},deserializeSelf:{value:function(e){var t;t=e.getProperty("expression")||e.getProperty("path"),void 0!==t&&(this._expression=t),t=e.getProperty("parameters"),void 0!==t&&(this.parameters=t)}},__scope:{value:null},_scope:{get:function(){return this.__scope||(this.__scope=new s)}},evaluate:{value:function(e,t){return this._scope.parameters=t||this.parameters,this._scope.value=e,this.compiledSyntax(this._scope)}}},{forObjectsLike:{value:function(e){var t,n,r,i,o,a,s,l=Object.keys(e),u="";for(t=0;n=l[t];t++)if(r=e[n],Array.isArray(r)){for(a="",i=0;o=r[i];i++)s=n,s+=i,a.length>0&&(a+=" && "),a+=n,a+=".has($",a+=s,a+=")",e[s]=o;u.length>0&&(u+=" && "),u+=a}else u.length>0&&(u+=" && "),u+=n,u+="== $",u+=n;return(new this).initWithExpression(u,e)}},withExpression:{value:function(e,t){return(new this).initWithExpression(e,t)}},withSyntax:{value:function(e,t){return(new this).initWithSyntax(e,t)}}});a.forEach(function(e,t,n){r.defineProperty(u.prototype,t,{value:function(){var e=Array.prototype.map.call(arguments,function(e){return"string"==typeof e?i(e):e.syntax?e.syntax:"object"==typeof e?e:void 0});return(new this.constructor).initWithSyntax({type:t,args:[this.syntax].concat(e)})}}),r.defineProperty(u,t,{value:function(){var e=Array.prototype.map.call(arguments,function(e){return"string"==typeof e?i(e):e.syntax?e.syntax:"object"==typeof e?e:void 0});return(new this).initWithSyntax({type:t,args:e})}})})}}),montageDefine("64d2e12","core/meta/object-property",{dependencies:["../core","../exception","./model","../deprecate","../logger"],factory:function(e,t,n){var r=e("../core").Montage,i=e("../exception").Exception,o=e("./model").Model,a=e("../deprecate"),s=e("../logger").logger("object-property");t.ObjectProperty=r.specialize({init:{serializable:!1,enumerable:!1,value:function(){return this}},apply:{value:function(e,t){var n;e.hasOwnProperty("objectDescriptor")||(n=r.getInfoForObject(e),null!==n&&n.isInstance===!1&&(void 0===t?t=o.group.objectDescriptorForPrototype(n.objectName,n.moduleId):t.prototypeName===n.objectName&&t.moduleId===n.moduleId||(t=null),this.applyWithObjectDescriptor(e,t)))}},applyWithBlueprint:{value:a.deprecateMethod(void 0,function(e,t){return this.applyWithObjectDescriptor(e,t)},"applyWithBlueprint","applyWithObjectDescriptor")},applyWithObjectDescriptor:{value:function(e,t){null!==t&&(this.addProperties(e,t),null!==t.parent&&this.apply(Object.getPrototypeOf(e),t))}},addProperties:{value:function(e,t){for(var n,i=0;n=t.propertyDescriptors[i++];)n.isDerived?this.addDerivedProperty(e,n):n.isAssociation?this.addAssociation(e,n):this.addProperty(e,n);r.defineProperty(e,"blueprint",{enumerable:!1,serializable:!1,get:function(){return this._objectDescriptor}}),r.defineProperty(e,"_objectDescriptor",{serializable:!1,enumerable:!1,value:t}),r.defineProperty(e,"objectDescriptor",{enumerable:!1,serializable:!1,get:function(){return this._objectDescriptor}}),r.defineProperty(e,"blueprintGet",{serializable:!1,enumerable:!1,value:this.objectDescriptorGet}),r.defineProperty(e,"blueprintSet",{serializable:!1,enumerable:!1,value:this.objectDescriptorSet}),r.defineProperty(e,"objectDescriptorGet",{serializable:!1,enumerable:!1,value:this.objectDescriptorGet}),r.defineProperty(e,"objectDescriptorSet",{serializable:!1,enumerable:!1,value:this.objectDescriptorSet})}},addProperty:{value:function(e,t){this.addPropertyStorage(e,t),this.addPropertyDefinition(e,t),this.addPropertyStoredValue(e,t)}},addPropertyStorage:{value:function(e,t){var n="_"+t.name,i="_"+n,o=null;e.hasOwnProperty(n)?s.isError&&s.error("We have an issue here. The developer should not override the storage value for "+n+"."):(t.isToMany?(r.defineProperty(e,i,{value:null,enumerable:!1,serializable:!1}),o={get:function(){return this[i]||(this[i]=[])},enumerable:!1,serializable:!0}):o={value:null,enumerable:!1,serializable:!0},r.defineProperty(e,n,o))}},addPropertyDefinition:{value:function(e,t){var n=t.name,i=null;e.hasOwnProperty(n)?s.isDebug&&s.debug("The developer has already created the property "+n+" method do nothing."):(i={get:function(){return this.objectDescriptorGet(n)},enumerable:!0,serializable:!1},t.readOnly||(i.set=function(e){return this.objectDescriptorSet(n,e)}),r.defineProperty(e,n,i))}},blueprintGet:{value:a.deprecateMethod(void 0,function(e){return this.objectDescriptorGet(e)},"blueprintGet","objectDescriptorGet"),enumerable:!1,serializable:!1},objectDescriptorGet:{value:function(e){var t=this.objectDescriptor.propertyDescriptorForName(e),n="_"+t.name;return this[n]},enumerable:!1,serializable:!1},blueprintSet:{value:a.deprecateMethod(void 0,function(e,t){return this.objectDescriptorSet(e,t)},"blueprintSet","objectDescriptorSet"),enumerable:!1,serializable:!1},objectDescriptorSet:{value:function(e,t){var n=this.objectDescriptor.propertyDescriptorForName(e),r="_"+n.name;if(null===t&&n.denyDelete)throw(new i).initWithMessageTargetAndMethod("Deny Delete",this,n.name);this[r]=t},enumerable:!1,serializable:!1},addPropertyStoredValue:{value:function(e,t){var n=t.name+"$Storage",i="_"+n,o=null;e.hasOwnProperty(n)?s.isError&&s.error("We have an issue here. The developer should not override the stored value for "+n+"."):(t.isToMany?(r.defineProperty(e,i,{value:null,enumerable:!1,serializable:!1}),o={get:function(){return this[i]||(this[i]=[])},enumerable:!1,serializable:!1}):o={value:null,enumerable:!1,serializable:!1},r.defineProperty(e,n,o))}},addAssociation:{value:function(e,t){this.addPropertyStorage(e,t),this.addAssociationDefinition(e,t),this.addPropertyStoredValue(e,t)}},addAssociationDefinition:{value:function(e,t){t.isToMany?this.addToManyAssociationDefinition(e,t):this.addToOneAssociationDefinition(e,t)}},addToOneAssociationDefinition:{value:function(e,t){var n=t.name.toCapitalized(),i="addTo"+n;e.hasOwnProperty(i)?s.isError&&s.error("We have an issue here. The developer should not override the method "+i+"."):r.defineProperty(e,i,{serializable:!1,enumerable:!1,value:function(){return null}}),i="removeFrom"+n,e.hasOwnProperty(i)?s.isError&&s.error("We have an issue here. The developer should not override the method "+i+"."):r.defineProperty(e,i,{serializable:!1,enumerable:!1,value:function(){return null}}),i="clear"+n,e.hasOwnProperty(i)?s.isError&&s.error("We have an issue here. The developer should not override the method "+i+"."):r.defineProperty(e,i,{serializable:!1,enumerable:!1,value:function(){return null}})}},addToManyAssociationDefinition:{value:function(e,t){var n=t.name.toCapitalized(),i="addTo"+n;e.hasOwnProperty(i)?s.isError&&s.error("We have an issue here. The developer should not override the method "+i+"."):r.defineProperty(e,i,{serializable:!1,enumerable:!1,value:function(){return null}}),i="removeFrom"+n,e.hasOwnProperty(i)?s.isError&&s.error("We have an issue here. The developer should not override the method "+i+"."):r.defineProperty(e,i,{serializable:!1,enumerable:!1,value:function(){return null}}),i="clear"+n,e.hasOwnProperty(i)?s.isError&&s.error("We have an issue here. The developer should not override the method "+i+"."):r.defineProperty(e,i,{serializable:!1,enumerable:!1,value:function(){return null}})}},addDerivedProperty:{value:function(e,t){}}})}}),montageDefine("64d2e12","core/exception",{dependencies:["./core","./logger"],factory:function(e,t,n){var r=e("./core").Montage;e("./logger").logger("exception"),t.Exception=r.specialize({message:{value:null},target:{value:null},method:{value:null},initWithMessage:{enumerable:!0,value:function(e){return this.initWithMessageTargetAndMethod(e,null,null)}},initWithMessageAndTarget:{enumerable:!0,value:function(e,t){return this.initWithMessageTargetAndMethod(e,t,null)}},initWithMessageTargetAndMethod:{enumerable:!0,value:function(e,t,n){return this.message="undefined"!=typeof e?e:null,Object.defineProperty(this,"message",{writable:!1}),this.target="undefined"!=typeof t?t:null,Object.defineProperty(this,"target",{writable:!1}),this.method="undefined"!=typeof n?n:null,Object.defineProperty(this,"method",{writable:!1}),this}},toString:{enumerable:!1,value:function(){return"Exception: "+(null!==this.message?this.message+" ":null)+(null!==this.target?this.target+" ":null)+(null!==this.method?this.method+" ":null)}}})}}),montageDefine("020234c","js/release/bluebird",{dependencies:["./promise"],factory:function(e,t,n){"use strict";function r(){try{Promise===o&&(Promise=i)}catch(e){}return o}var i;"undefined"!=typeof Promise&&(i=Promise);var o=e("./promise")();o.noConflict=r,n.exports=o}}),montageDefine("020234c","js/release/promise",{dependencies:["./util","./es5","./async","./errors","./thenables","./promise_array","./context","./debuggability","./finally","./catch_filter","./nodeback","./method","./bind","./cancel","./direct_resolve","./synchronous_inspection","./join","./call_get.js","./generators.js","./map.js","./nodeify.js","./promisify.js","./props.js","./race.js","./reduce.js","./settle.js","./some.js","./timers.js","./using.js","./any.js","./each.js","./filter.js"],factory:function(e,t,n){"use strict";n.exports=function(){function t(){}function r(e,t){if(null==e||e.constructor!==i)throw new _("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n");if("function"!=typeof t)throw new _("expecting a function but got "+d.classString(t))}function i(e){e!==b&&r(this,e),this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(e),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function o(e){this.promise._resolveCallback(e)}function a(e){this.promise._rejectCallback(e,!1)}function s(e){var t=new i(b);t._fulfillmentHandler0=e,t._rejectionHandler0=e,t._promise0=e,t._receiver0=e}var l,u=function(){return new _("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},c=function(){return new i.PromiseInspection(this._target())},h=function(e){return i.reject(new _(e))},p={},d=e("./util");l=d.isNode?function(){var e=process.domain;return void 0===e&&(e=null),e}:function(){return null},d.notEnumerableProp(i,"_getDomain",l);var f=e("./es5"),v=e("./async"),g=new v;f.defineProperty(i,"_async",{value:g});var m=e("./errors"),_=i.TypeError=m.TypeError;i.RangeError=m.RangeError;var y=i.CancellationError=m.CancellationError;i.TimeoutError=m.TimeoutError,i.OperationalError=m.OperationalError,i.RejectionError=m.OperationalError,i.AggregateError=m.AggregateError;var b=function(){},w={},O={},j=e("./thenables")(i,b),E=e("./promise_array")(i,b,j,h,t),C=e("./context")(i),D=C.create,P=e("./debuggability")(i,C),T=(P.CapturedTrace,e("./finally")(i,j,O)),x=e("./catch_filter")(O),k=e("./nodeback"),A=d.errorObj,S=d.tryCatch;return i.prototype.toString=function(){return"[object Promise]"},i.prototype.caught=i.prototype["catch"]=function(e){var t=arguments.length;if(t>1){var n,r=new Array(t-1),i=0;for(n=0;n<t-1;++n){var o=arguments[n];if(!d.isObject(o))return h("Catch statement predicate: expecting an object but got "+d.classString(o));r[i++]=o}if(r.length=i,e=arguments[n],"function"!=typeof e)throw new _("The last argument to .catch() must be a function, got "+d.toString(e));return this.then(void 0,x(r,e,this))}return this.then(void 0,e)},i.prototype.reflect=function(){return this._then(c,c,void 0,this,void 0)},i.prototype.then=function(e,t){if(P.warnings()&&arguments.length>0&&"function"!=typeof e&&"function"!=typeof t){var n=".then() only accepts functions but was passed: "+d.classString(e);arguments.length>1&&(n+=", "+d.classString(t)),this._warn(n)}return this._then(e,t,void 0,void 0,void 0)},i.prototype.done=function(e,t){var n=this._then(e,t,void 0,void 0,void 0);n._setIsFinal()},i.prototype.spread=function(e){return"function"!=typeof e?h("expecting a function but got "+d.classString(e)):this.all()._then(e,void 0,void 0,w,void 0)},i.prototype.toJSON=function(){var e={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(e.fulfillmentValue=this.value(),e.isFulfilled=!0):this.isRejected()&&(e.rejectionReason=this.reason(),e.isRejected=!0),e},i.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new E(this).promise()},i.prototype.error=function(e){return this.caught(d.originatesFromRejection,e)},i.getNewLibraryCopy=n.exports,i.is=function(e){return e instanceof i},i.fromNode=i.fromCallback=function(e){var t=new i(b);t._captureStackTrace();var n=arguments.length>1&&!!Object(arguments[1]).multiArgs,r=S(e)(k(t,n));return r===A&&t._rejectCallback(r.e,!0),t._isFateSealed()||t._setAsyncGuaranteed(),t},i.all=function(e){return new E(e).promise()},i.cast=function(e){var t=j(e);return t instanceof i||(t=new i(b),t._captureStackTrace(),t._setFulfilled(),t._rejectionHandler0=e),t},i.resolve=i.fulfilled=i.cast,i.reject=i.rejected=function(e){var t=new i(b);return t._captureStackTrace(),t._rejectCallback(e,!0),t},i.setScheduler=function(e){if("function"!=typeof e)throw new _("expecting a function but got "+d.classString(e));return g.setScheduler(e)},i.prototype._then=function(e,t,n,r,o){var a=void 0!==o,s=a?o:new i(b),u=this._target(),c=u._bitField;a||(s._propagateFrom(this,3),s._captureStackTrace(),void 0===r&&0!==(2097152&this._bitField)&&(r=0!==(50397184&c)?this._boundValue():u===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,s));var h=l();if(0!==(50397184&c)){var p,f,v=u._settlePromiseCtx;0!==(33554432&c)?(f=u._rejectionHandler0,p=e):0!==(16777216&c)?(f=u._fulfillmentHandler0,p=t,u._unsetRejectionIsUnhandled()):(v=u._settlePromiseLateCancellationObserver,f=new y("late cancellation observer"),u._attachExtraTrace(f),p=t),g.invoke(v,u,{handler:null===h?p:"function"==typeof p&&d.domainBind(h,p),promise:s,receiver:r,value:f})}else u._addCallbacks(e,t,s,r,h);return s},i.prototype._length=function(){return 65535&this._bitField},i.prototype._isFateSealed=function(){return 0!==(117506048&this._bitField)},i.prototype._isFollowing=function(){return 67108864===(67108864&this._bitField)},i.prototype._setLength=function(e){this._bitField=this._bitField&-65536|65535&e},i.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},i.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},i.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,
this._fireEvent("promiseResolved",this)},i.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},i.prototype._isFinal=function(){return(4194304&this._bitField)>0},i.prototype._unsetCancelled=function(){this._bitField=this._bitField&-65537},i.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},i.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},i.prototype._setAsyncGuaranteed=function(){g.hasCustomScheduler()||(this._bitField=134217728|this._bitField)},i.prototype._receiverAt=function(e){var t=0===e?this._receiver0:this[4*e-4+3];if(t!==p)return void 0===t&&this._isBound()?this._boundValue():t},i.prototype._promiseAt=function(e){return this[4*e-4+2]},i.prototype._fulfillmentHandlerAt=function(e){return this[4*e-4+0]},i.prototype._rejectionHandlerAt=function(e){return this[4*e-4+1]},i.prototype._boundValue=function(){},i.prototype._migrateCallback0=function(e){var t=(e._bitField,e._fulfillmentHandler0),n=e._rejectionHandler0,r=e._promise0,i=e._receiverAt(0);void 0===i&&(i=p),this._addCallbacks(t,n,r,i,null)},i.prototype._migrateCallbackAt=function(e,t){var n=e._fulfillmentHandlerAt(t),r=e._rejectionHandlerAt(t),i=e._promiseAt(t),o=e._receiverAt(t);void 0===o&&(o=p),this._addCallbacks(n,r,i,o,null)},i.prototype._addCallbacks=function(e,t,n,r,i){var o=this._length();if(o>=65531&&(o=0,this._setLength(0)),0===o)this._promise0=n,this._receiver0=r,"function"==typeof e&&(this._fulfillmentHandler0=null===i?e:d.domainBind(i,e)),"function"==typeof t&&(this._rejectionHandler0=null===i?t:d.domainBind(i,t));else{var a=4*o-4;this[a+2]=n,this[a+3]=r,"function"==typeof e&&(this[a+0]=null===i?e:d.domainBind(i,e)),"function"==typeof t&&(this[a+1]=null===i?t:d.domainBind(i,t))}return this._setLength(o+1),o},i.prototype._proxy=function(e,t){this._addCallbacks(void 0,void 0,t,e,null)},i.prototype._resolveCallback=function(e,t){if(0===(117506048&this._bitField)){if(e===this)return this._rejectCallback(u(),!1);var n=j(e,this);if(!(n instanceof i))return this._fulfill(e);t&&this._propagateFrom(n,2);var r=n._target();if(r===this)return void this._reject(u());var o=r._bitField;if(0===(50397184&o)){var a=this._length();a>0&&r._migrateCallback0(this);for(var s=1;s<a;++s)r._migrateCallbackAt(this,s);this._setFollowing(),this._setLength(0),this._setFollowee(r)}else if(0!==(33554432&o))this._fulfill(r._value());else if(0!==(16777216&o))this._reject(r._reason());else{var l=new y("late cancellation observer");r._attachExtraTrace(l),this._reject(l)}}},i.prototype._rejectCallback=function(e,t,n){var r=d.ensureErrorObject(e),i=r===e;if(!i&&!n&&P.warnings()){var o="a promise was rejected with a non-error: "+d.classString(e);this._warn(o,!0)}this._attachExtraTrace(r,!!t&&i),this._reject(e)},i.prototype._resolveFromExecutor=function(e){if(e!==b){var t=this;this._captureStackTrace(),this._pushContext();var n=!0,r=this._execute(e,function(e){t._resolveCallback(e)},function(e){t._rejectCallback(e,n)});n=!1,this._popContext(),void 0!==r&&t._rejectCallback(r,!0)}},i.prototype._settlePromiseFromHandler=function(e,t,n,r){var i=r._bitField;if(0===(65536&i)){r._pushContext();var o;t===w?n&&"number"==typeof n.length?o=S(e).apply(this._boundValue(),n):(o=A,o.e=new _("cannot .spread() a non-array: "+d.classString(n))):o=S(e).call(t,n);var a=r._popContext();i=r._bitField,0===(65536&i)&&(o===O?r._reject(n):o===A?r._rejectCallback(o.e,!1):(P.checkForgottenReturns(o,a,"",r,this),r._resolveCallback(o)))}},i.prototype._target=function(){for(var e=this;e._isFollowing();)e=e._followee();return e},i.prototype._followee=function(){return this._rejectionHandler0},i.prototype._setFollowee=function(e){this._rejectionHandler0=e},i.prototype._settlePromise=function(e,n,r,o){var a=e instanceof i,s=this._bitField,l=0!==(134217728&s);0!==(65536&s)?(a&&e._invokeInternalOnCancel(),r instanceof T&&r.isFinallyHandler()?(r.cancelPromise=e,S(n).call(r,o)===A&&e._reject(A.e)):n===c?e._fulfill(c.call(r)):r instanceof t?r._promiseCancelled(e):a||e instanceof E?e._cancel():r.cancel()):"function"==typeof n?a?(l&&e._setAsyncGuaranteed(),this._settlePromiseFromHandler(n,r,o,e)):n.call(r,o,e):r instanceof t?r._isResolved()||(0!==(33554432&s)?r._promiseFulfilled(o,e):r._promiseRejected(o,e)):a&&(l&&e._setAsyncGuaranteed(),0!==(33554432&s)?e._fulfill(o):e._reject(o))},i.prototype._settlePromiseLateCancellationObserver=function(e){var t=e.handler,n=e.promise,r=e.receiver,o=e.value;"function"==typeof t?n instanceof i?this._settlePromiseFromHandler(t,r,o,n):t.call(r,o,n):n instanceof i&&n._reject(o)},i.prototype._settlePromiseCtx=function(e){this._settlePromise(e.promise,e.handler,e.receiver,e.value)},i.prototype._settlePromise0=function(e,t,n){var r=this._promise0,i=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(r,e,i,t)},i.prototype._clearCallbackDataAtIndex=function(e){var t=4*e-4;this[t+2]=this[t+3]=this[t+0]=this[t+1]=void 0},i.prototype._fulfill=function(e){var t=this._bitField;if(!((117506048&t)>>>16)){if(e===this){var n=u();return this._attachExtraTrace(n),this._reject(n)}this._setFulfilled(),this._rejectionHandler0=e,(65535&t)>0&&(0!==(134217728&t)?this._settlePromises():g.settlePromises(this),this._dereferenceTrace())}},i.prototype._reject=function(e){var t=this._bitField;if(!((117506048&t)>>>16))return this._setRejected(),this._fulfillmentHandler0=e,this._isFinal()?g.fatalError(e,d.isNode):void((65535&t)>0?g.settlePromises(this):this._ensurePossibleRejectionHandled())},i.prototype._fulfillPromises=function(e,t){for(var n=1;n<e;n++){var r=this._fulfillmentHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,t)}},i.prototype._rejectPromises=function(e,t){for(var n=1;n<e;n++){var r=this._rejectionHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,t)}},i.prototype._settlePromises=function(){var e=this._bitField,t=65535&e;if(t>0){if(0!==(16842752&e)){var n=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,n,e),this._rejectPromises(t,n)}else{var r=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,r,e),this._fulfillPromises(t,r)}this._setLength(0)}this._clearCancellationData()},i.prototype._settledValue=function(){var e=this._bitField;return 0!==(33554432&e)?this._rejectionHandler0:0!==(16777216&e)?this._fulfillmentHandler0:void 0},"undefined"!=typeof Symbol&&Symbol.toStringTag&&f.defineProperty(i.prototype,Symbol.toStringTag,{get:function(){return"Object"}}),i.defer=i.pending=function(){P.deprecated("Promise.defer","new Promise");var e=new i(b);return{promise:e,resolve:o,reject:a}},d.notEnumerableProp(i,"_makeSelfResolutionError",u),e("./method")(i,b,j,h,P),e("./bind")(i,b,j,P),e("./cancel")(i,E,h,P),e("./direct_resolve")(i),e("./synchronous_inspection")(i),e("./join")(i,E,j,b,g,l),i.Promise=i,i.version="3.5.5",e("./call_get.js")(i),e("./generators.js")(i,h,b,j,t,P),e("./map.js")(i,E,h,j,b,P),e("./nodeify.js")(i),e("./promisify.js")(i,b),e("./props.js")(i,E,j,h),e("./race.js")(i,b,j,h),e("./reduce.js")(i,E,h,j,b,P),e("./settle.js")(i,E,P),e("./some.js")(i,E,h),e("./timers.js")(i,b,P),e("./using.js")(i,h,j,D,b,P),e("./any.js")(i),e("./each.js")(i,b),e("./filter.js")(i,b),d.toFastProperties(i),d.toFastProperties(i.prototype),s({a:1}),s({b:2}),s({c:3}),s(1),s(function(){}),s(void 0),s(!1),s(new i(b)),P.setBounds(v.firstLineError,d.lastLineError),i}}}),montageDefine("020234c","js/release/util",{dependencies:["./es5"],factory:function(e,t,n){"use strict";function r(){try{var e=D;return D=null,e.apply(this,arguments)}catch(t){return x.e=t,x}}function i(e){return D=e,r}function o(e){return null==e||e===!0||e===!1||"string"==typeof e||"number"==typeof e}function a(e){return"function"==typeof e||"object"==typeof e&&null!==e}function s(e){return o(e)?new Error(g(e)):e}function l(e,t){var n,r=e.length,i=new Array(r+1);for(n=0;n<r;++n)i[n]=e[n];return i[n]=t,i}function u(e,t,n){if(!P.isES5)return{}.hasOwnProperty.call(e,t)?e[t]:void 0;var r=Object.getOwnPropertyDescriptor(e,t);return null!=r?null==r.get&&null==r.set?r.value:n:void 0}function c(e,t,n){if(o(e))return e;var r={value:n,configurable:!0,enumerable:!1,writable:!0};return P.defineProperty(e,t,r),e}function h(e){throw e}function p(e){try{if("function"==typeof e){var t=P.names(e.prototype),n=P.isES5&&t.length>1,r=t.length>0&&!(1===t.length&&"constructor"===t[0]),i=L.test(e+"")&&P.names(e).length>0;if(n||r||i)return!0}return!1}catch(o){return!1}}function d(e){function t(){}function n(){return typeof r.foo}t.prototype=e;var r=new t;return n(),n(),e}function f(e){return M.test(e)}function v(e,t,n){for(var r=new Array(e),i=0;i<e;++i)r[i]=t+i+n;return r}function g(e){try{return e+""}catch(t){return"[no string representation]"}}function m(e){return e instanceof Error||null!==e&&"object"==typeof e&&"string"==typeof e.message&&"string"==typeof e.name}function _(e){try{c(e,"isOperational",!0)}catch(t){}}function y(e){return null!=e&&(e instanceof Error.__BluebirdErrorTypes__.OperationalError||e.isOperational===!0)}function b(e){return m(e)&&P.propertyIsWritable(e,"stack")}function w(e){return{}.toString.call(e)}function O(e,t,n){for(var r=P.names(e),i=0;i<r.length;++i){var o=r[i];if(n(o))try{P.defineProperty(t,o,P.getDescriptor(e,o))}catch(a){}}}function j(e){return N?process.env[e]:void 0}function E(){if("function"==typeof Promise)try{var e=new Promise(function(){});if("[object Promise]"==={}.toString.call(e))return Promise}catch(t){}}function C(e,t){return e.bind(t)}var D,P=e("./es5"),T="undefined"==typeof navigator,x={e:{}},k="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:void 0!==this?this:null,A=function(e,t){function n(){this.constructor=e,this.constructor$=t;for(var n in t.prototype)r.call(t.prototype,n)&&"$"!==n.charAt(n.length-1)&&(this[n+"$"]=t.prototype[n])}var r={}.hasOwnProperty;return n.prototype=t.prototype,e.prototype=new n,e.prototype},S=function(){var e=[Array.prototype,Object.prototype,Function.prototype],t=function(t){for(var n=0;n<e.length;++n)if(e[n]===t)return!0;return!1};if(P.isES5){var n=Object.getOwnPropertyNames;return function(e){for(var r=[],i=Object.create(null);null!=e&&!t(e);){var o;try{o=n(e)}catch(a){return r}for(var s=0;s<o.length;++s){var l=o[s];if(!i[l]){i[l]=!0;var u=Object.getOwnPropertyDescriptor(e,l);null!=u&&null==u.get&&null==u.set&&r.push(l)}}e=P.getPrototypeOf(e)}return r}}var r={}.hasOwnProperty;return function(n){if(t(n))return[];var i=[];e:for(var o in n)if(r.call(n,o))i.push(o);else{for(var a=0;a<e.length;++a)if(r.call(e[a],o))continue e;i.push(o)}return i}}(),L=/this\s*\.\s*\S+\s*=/,M=/^[a-z$_][a-z$_0-9]*$/i,F=function(){return"stack"in new Error?function(e){return b(e)?e:new Error(g(e))}:function(e){if(b(e))return e;try{throw new Error(g(e))}catch(t){return t}}}(),R=function(e){return P.isArray(e)?e:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var z="function"==typeof Array.from?function(e){return Array.from(e)}:function(e){for(var t,n=[],r=e[Symbol.iterator]();!(t=r.next()).done;)n.push(t.value);return n};R=function(e){return P.isArray(e)?e:null!=e&&"function"==typeof e[Symbol.iterator]?z(e):null}}var I="undefined"!=typeof process&&"[object process]"===w(process).toLowerCase(),N="undefined"!=typeof process&&"undefined"!=typeof process.env,B={isClass:p,isIdentifier:f,inheritedDataKeys:S,getDataPropertyOrDefault:u,thrower:h,isArray:P.isArray,asArray:R,notEnumerableProp:c,isPrimitive:o,isObject:a,isError:m,canEvaluate:T,errorObj:x,tryCatch:i,inherits:A,withAppended:l,maybeWrapAsError:s,toFastProperties:d,filledRange:v,toString:g,canAttachTrace:b,ensureErrorObject:F,originatesFromRejection:y,markAsOriginatingFromRejection:_,classString:w,copyDescriptors:O,hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:I,hasEnvVariables:N,env:j,global:k,getNativePromise:E,domainBind:C};B.isRecentNode=B.isNode&&function(){var e;return process.versions&&process.versions.node?e=process.versions.node.split(".").map(Number):process.version&&(e=process.version.split(".").map(Number)),0===e[0]&&e[1]>10||e[0]>0}(),B.isNode&&B.toFastProperties(process);try{throw new Error}catch(W){B.lastLineError=W}n.exports=B}}),montageDefine("020234c","js/release/es5",{dependencies:[],factory:function(e,t,n){var r=function(){"use strict";return void 0===this}();if(r)n.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:r,propertyIsWritable:function(e,t){var n=Object.getOwnPropertyDescriptor(e,t);return!(n&&!n.writable&&!n.set)}};else{var i={}.hasOwnProperty,o={}.toString,a={}.constructor.prototype,s=function(e){var t=[];for(var n in e)i.call(e,n)&&t.push(n);return t},l=function(e,t){return{value:e[t]}},u=function(e,t,n){return e[t]=n.value,e},c=function(e){return e},h=function(e){try{return Object(e).constructor.prototype}catch(t){return a}},p=function(e){try{return"[object Array]"===o.call(e)}catch(t){return!1}};n.exports={isArray:p,keys:s,names:s,defineProperty:u,getDescriptor:l,freeze:c,getPrototypeOf:h,isES5:r,propertyIsWritable:function(){return!0}}}}}),montageDefine("020234c","js/release/async",{dependencies:["./schedule","./queue","./util"],factory:function(e,t,n){"use strict";function r(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new p(16),this._normalQueue=new p(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var e=this;this.drainQueues=function(){e._drainQueues()},this._schedule=h}function i(e,t,n){this._lateQueue.push(e,t,n),this._queueTick()}function o(e,t,n){this._normalQueue.push(e,t,n),this._queueTick()}function a(e){this._normalQueue._pushOne(e),this._queueTick()}function s(e){for(;e.length()>0;)l(e)}function l(e){var t=e.shift();if("function"!=typeof t)t._settlePromises();else{var n=e.shift(),r=e.shift();t.call(n,r)}}var u;try{throw new Error}catch(c){u=c}var h=e("./schedule"),p=e("./queue"),d=e("./util");r.prototype.setScheduler=function(e){var t=this._schedule;return this._schedule=e,this._customScheduler=!0,t},r.prototype.hasCustomScheduler=function(){return this._customScheduler},r.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},r.prototype.disableTrampolineIfNecessary=function(){d.hasDevTools&&(this._trampolineEnabled=!1)},r.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},r.prototype.fatalError=function(e,t){t?(process.stderr.write("Fatal "+(e instanceof Error?e.stack:e)+"\n"),process.exit(2)):this.throwLater(e)},r.prototype.throwLater=function(e,t){if(1===arguments.length&&(t=e,e=function(){throw t}),"undefined"!=typeof setTimeout)setTimeout(function(){e(t)},0);else try{this._schedule(function(){e(t)})}catch(n){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},d.hasDevTools?(r.prototype.invokeLater=function(e,t,n){this._trampolineEnabled?i.call(this,e,t,n):this._schedule(function(){setTimeout(function(){e.call(t,n)},100)})},r.prototype.invoke=function(e,t,n){this._trampolineEnabled?o.call(this,e,t,n):this._schedule(function(){e.call(t,n)})},r.prototype.settlePromises=function(e){this._trampolineEnabled?a.call(this,e):this._schedule(function(){e._settlePromises()})}):(r.prototype.invokeLater=i,r.prototype.invoke=o,r.prototype.settlePromises=a),r.prototype._drainQueues=function(){s(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,s(this._lateQueue)},r.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},r.prototype._reset=function(){this._isTickUsed=!1},n.exports=r,n.exports.firstLineError=u}}),montageDefine("020234c","js/release/errors",{dependencies:["./es5","./util"],factory:function(e,t,n){"use strict";function r(e,t){function n(r){return this instanceof n?(h(this,"message","string"==typeof r?r:t),h(this,"name",e),void(Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this))):new n(r)}return c(n,Error),n}function i(e){return this instanceof i?(h(this,"name","OperationalError"),h(this,"message",e),this.cause=e,this.isOperational=!0,void(e instanceof Error?(h(this,"message",e.message),h(this,"stack",e.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor))):new i(e)}var o,a,s=e("./es5"),l=s.freeze,u=e("./util"),c=u.inherits,h=u.notEnumerableProp,p=r("Warning","warning"),d=r("CancellationError","cancellation error"),f=r("TimeoutError","timeout error"),v=r("AggregateError","aggregate error");try{o=TypeError,a=RangeError}catch(g){o=r("TypeError","type error"),a=r("RangeError","range error")}for(var m="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),_=0;_<m.length;++_)"function"==typeof Array.prototype[m[_]]&&(v.prototype[m[_]]=Array.prototype[m[_]]);s.defineProperty(v.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),v.prototype.isOperational=!0;var y=0;v.prototype.toString=function(){var e=Array(4*y+1).join(" "),t="\n"+e+"AggregateError of:\n";y++,e=Array(4*y+1).join(" ");for(var n=0;n<this.length;++n){for(var r=this[n]===this?"[Circular AggregateError]":this[n]+"",i=r.split("\n"),o=0;o<i.length;++o)i[o]=e+i[o];r=i.join("\n"),t+=r+"\n"}return y--,t},c(i,Error);var b=Error.__BluebirdErrorTypes__;b||(b=l({CancellationError:d,TimeoutError:f,OperationalError:i,RejectionError:i,AggregateError:v}),s.defineProperty(Error,"__BluebirdErrorTypes__",{value:b,writable:!1,enumerable:!1,configurable:!1})),n.exports={Error:Error,TypeError:o,RangeError:a,CancellationError:b.CancellationError,OperationalError:b.OperationalError,TimeoutError:b.TimeoutError,AggregateError:b.AggregateError,Warning:p}}}),montageDefine("020234c","js/release/thenables",{dependencies:["./util"],factory:function(e,t,n){"use strict";n.exports=function(t,n){function r(e,r){if(c(e)){if(e instanceof t)return e;var i=o(e);if(i===u){r&&r._pushContext();var l=t.reject(i.e);return r&&r._popContext(),l}if("function"==typeof i){if(a(e)){var l=new t(n);return e._then(l._fulfill,l._reject,void 0,l,null),l}return s(e,i,r)}}return e}function i(e){return e.then}function o(e){try{return i(e)}catch(t){return u.e=t,u}}function a(e){try{return h.call(e,"_promise0")}catch(t){return!1}}function s(e,r,i){function o(e){s&&(s._resolveCallback(e),s=null)}function a(e){s&&(s._rejectCallback(e,h,!0),s=null)}var s=new t(n),c=s;i&&i._pushContext(),s._captureStackTrace(),i&&i._popContext();var h=!0,p=l.tryCatch(r).call(e,o,a);return h=!1,s&&p===u&&(s._rejectCallback(p.e,!0,!0),s=null),c}var l=e("./util"),u=l.errorObj,c=l.isObject,h={}.hasOwnProperty;return r}}}),montageDefine("020234c","js/release/promise_array",{dependencies:["./util"],factory:function(e,t,n){"use strict";n.exports=function(t,n,r,i,o){function a(e){switch(e){case-2:return[];case-3:return{};case-6:return new Map}}function s(e){var r=this._promise=new t(n);e instanceof t&&r._propagateFrom(e,3),r._setOnCancel(this),this._values=e,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var l=e("./util");return l.isArray,l.inherits(s,o),s.prototype.length=function(){return this._length},s.prototype.promise=function(){return this._promise},s.prototype._init=function u(e,n){var o=r(this._values,this._promise);if(o instanceof t){o=o._target();var s=o._bitField;if(this._values=o,0===(50397184&s))return this._promise._setAsyncGuaranteed(),o._then(u,this._reject,void 0,this,n);if(0===(33554432&s))return 0!==(16777216&s)?this._reject(o._reason()):this._cancel();o=o._value()}if(o=l.asArray(o),null===o){var c=i("expecting an array or an iterable object but got "+l.classString(o)).reason();return void this._promise._rejectCallback(c,!1)}return 0===o.length?void(n===-5?this._resolveEmptyArray():this._resolve(a(n))):void this._iterate(o)},s.prototype._iterate=function(e){var n=this.getActualLength(e.length);this._length=n,this._values=this.shouldCopyValues()?new Array(n):this._values;for(var i=this._promise,o=!1,a=null,s=0;s<n;++s){var l=r(e[s],i);l instanceof t?(l=l._target(),a=l._bitField):a=null,o?null!==a&&l.suppressUnhandledRejections():null!==a?0===(50397184&a)?(l._proxy(this,s),this._values[s]=l):o=0!==(33554432&a)?this._promiseFulfilled(l._value(),s):0!==(16777216&a)?this._promiseRejected(l._reason(),s):this._promiseCancelled(s):o=this._promiseFulfilled(l,s)}o||i._setAsyncGuaranteed()},s.prototype._isResolved=function(){return null===this._values},s.prototype._resolve=function(e){this._values=null,this._promise._fulfill(e)},s.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},s.prototype._reject=function(e){this._values=null,this._promise._rejectCallback(e,!1)},s.prototype._promiseFulfilled=function(e,t){this._values[t]=e;var n=++this._totalResolved;return n>=this._length&&(this._resolve(this._values),!0)},s.prototype._promiseCancelled=function(){return this._cancel(),!0},s.prototype._promiseRejected=function(e){return this._totalResolved++,this._reject(e),!0},s.prototype._resultCancelled=function(){if(!this._isResolved()){var e=this._values;if(this._cancel(),e instanceof t)e.cancel();else for(var n=0;n<e.length;++n)e[n]instanceof t&&e[n].cancel()}},s.prototype.shouldCopyValues=function(){return!0},s.prototype.getActualLength=function(e){return e},s}}}),montageDefine("020234c","js/release/context",{dependencies:[],factory:function(e,t,n){"use strict";n.exports=function(e){function t(){this._trace=new t.CapturedTrace(r())}function n(){if(i)return new t}function r(){var e=o.length-1;if(e>=0)return o[e]}var i=!1,o=[];return e.prototype._promiseCreated=function(){},e.prototype._pushContext=function(){},e.prototype._popContext=function(){return null},e._peekContext=e.prototype._peekContext=function(){},t.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,o.push(this._trace))},t.prototype._popContext=function(){if(void 0!==this._trace){var e=o.pop(),t=e._promiseCreated;return e._promiseCreated=null,t}return null},t.CapturedTrace=null,t.create=n,t.deactivateLongStackTraces=function(){},t.activateLongStackTraces=function(){var n=e.prototype._pushContext,o=e.prototype._popContext,a=e._peekContext,s=e.prototype._peekContext,l=e.prototype._promiseCreated;t.deactivateLongStackTraces=function(){e.prototype._pushContext=n,e.prototype._popContext=o,e._peekContext=a,e.prototype._peekContext=s,e.prototype._promiseCreated=l,i=!1},i=!0,e.prototype._pushContext=t.prototype._pushContext,e.prototype._popContext=t.prototype._popContext,e._peekContext=e.prototype._peekContext=r,e.prototype._promiseCreated=function(){var e=this._peekContext();e&&null==e._promiseCreated&&(e._promiseCreated=this)}},t}}}),montageDefine("020234c","js/release/debuggability",{dependencies:["./errors","./util","./es5"],factory:function(e,t,n){"use strict";n.exports=function(t,n){function r(e,t){return{promise:t}}function i(){return!1}function o(e,t,n){var r=this;try{e(t,n,function(e){if("function"!=typeof e)throw new TypeError("onCancel must be a function, got: "+N.toString(e));r._attachCancellationCallback(e)})}catch(i){return i}}function a(e){if(!this._isCancellable())return this;var t=this._onCancel();void 0!==t?N.isArray(t)?t.push(e):this._setOnCancel([t,e]):this._setOnCancel(e)}function s(){return this._onCancelField}function l(e){this._onCancelField=e}function u(){this._cancellationParent=void 0,this._onCancelField=void 0}function c(e,t){if(0!==(1&t)){this._cancellationParent=e;var n=e._branchesRemainingToCancel;void 0===n&&(n=0),e._branchesRemainingToCancel=n+1}0!==(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)}function h(e,t){0!==(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)}function p(){var e=this._boundTo;return void 0!==e&&e instanceof t?e.isFulfilled()?e.value():void 0:e}function d(){this._trace=new S(this._peekContext())}function f(e,t){if(W(e)){var n=this._trace;if(void 0!==n&&t&&(n=n._parent),void 0!==n)n.attachExtraTrace(e);else if(!e.__stackCleaned__){var r=E(e);N.notEnumerableProp(e,"stack",r.message+"\n"+r.stack.join("\n")),N.notEnumerableProp(e,"__stackCleaned__",!0)}}}function v(){this._trace=void 0}function g(e,t,n,r,i){if(void 0===e&&null!==t&&K){if(void 0!==i&&i._returnedNonUndefined())return;if(0===(65535&r._bitField))return;n&&(n+=" ");var o="",a="";if(t._trace){for(var s=t._trace.stack.split("\n"),l=O(s),u=l.length-1;u>=0;--u){var c=l[u];if(!q.test(c)){var h=c.match(U);h&&(o="at "+h[1]+":"+h[2]+":"+h[3]+" ");break}}if(l.length>0)for(var p=l[0],u=0;u<s.length;++u)if(s[u]===p){u>0&&(a="\n"+s[u-1]);break}}var d="a promise was created in a "+n+"handler "+o+"but was not returned from it, see http://goo.gl/rRqMUw"+a;r._warn(d,!0,t)}}function m(e,t){var n=e+" is deprecated and will be removed in a future version.";return t&&(n+=" Use "+t+" instead."),_(n)}function _(e,n,r){if(se.warnings){var i,o=new I(e);if(n)r._attachExtraTrace(o);else if(se.longStackTraces&&(i=t._peekContext()))i.attachExtraTrace(o);else{var a=E(o);o.stack=a.message+"\n"+a.stack.join("\n")}ne("warning",o)||C(o,"",!0)}}function y(e,t){for(var n=0;n<t.length-1;++n)t[n].push("From previous event:"),t[n]=t[n].join("\n");return n<t.length&&(t[n]=t[n].join("\n")),e+"\n"+t.join("\n")}function b(e){for(var t=0;t<e.length;++t)(0===e[t].length||t+1<e.length&&e[t][0]===e[t+1][0])&&(e.splice(t,1),t--)}function w(e){for(var t=e[0],n=1;n<e.length;++n){for(var r=e[n],i=t.length-1,o=t[i],a=-1,s=r.length-1;s>=0;--s)if(r[s]===o){a=s;break}for(var s=a;s>=0;--s){var l=r[s];if(t[i]!==l)break;t.pop(),i--}t=r}}function O(e){for(var t=[],n=0;n<e.length;++n){var r=e[n],i="    (No stack trace)"===r||H.test(r),o=i&&ie(r);i&&!o&&(X&&" "!==r.charAt(0)&&(r="    "+r),t.push(r))}return t}function j(e){for(var t=e.stack.replace(/\s+$/g,"").split("\n"),n=0;n<t.length;++n){var r=t[n];if("    (No stack trace)"===r||H.test(r))break}return n>0&&"SyntaxError"!=e.name&&(t=t.slice(n)),t}function E(e){var t=e.stack,n=e.toString();return t="string"==typeof t&&t.length>0?j(e):["    (No stack trace)"],{message:n,stack:"SyntaxError"==e.name?t:O(t)}}function C(e,t,n){if("undefined"!=typeof console){var r;if(N.isObject(e)){var i=e.stack;r=t+G(i,e)}else r=t+String(e);"function"==typeof F?F(r,n):"function"!=typeof console.log&&"object"!=typeof console.log||console.log(r)}}function D(e,t,n,r){var i=!1;try{"function"==typeof t&&(i=!0,"rejectionHandled"===e?t(r):t(n,r))}catch(o){z.throwLater(o)}"unhandledRejection"===e?ne(e,n,r)||i||C(n,"Unhandled rejection "):ne(e,r)}function P(e){var t;if("function"==typeof e)t="[function "+(e.name||"anonymous")+"]";else{t=e&&"function"==typeof e.toString?e.toString():N.toString(e);var n=/\[object [a-zA-Z0-9$_]+\]/;if(n.test(t))try{var r=JSON.stringify(e);t=r}catch(i){}0===t.length&&(t="(empty array)")}return"(<"+T(t)+">, no stack trace)"}function T(e){var t=41;return e.length<t?e:e.substr(0,t-3)+"..."}function x(){return"function"==typeof ae}function k(e){var t=e.match(oe);if(t)return{fileName:t[1],line:parseInt(t[2],10)}}function A(e,t){if(x()){for(var n,r,i=(e.stack||"").split("\n"),o=(t.stack||"").split("\n"),a=-1,s=-1,l=0;l<i.length;++l){var u=k(i[l]);if(u){n=u.fileName,a=u.line;break}}for(var l=0;l<o.length;++l){var u=k(o[l]);if(u){r=u.fileName,s=u.line;break}}a<0||s<0||!n||!r||n!==r||a>=s||(ie=function(e){if(V.test(e))return!0;var t=k(e);return!!(t&&t.fileName===n&&a<=t.line&&t.line<=s)})}}function S(e){this._parent=e,this._promisesCreated=0;var t=this._length=1+(void 0===e?0:e._length);ae(this,S),t>32&&this.uncycle()}var L,M,F,R=t._getDomain,z=t._async,I=e("./errors").Warning,N=e("./util"),B=e("./es5"),W=N.canAttachTrace,V=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,q=/\((?:timers\.js):\d+:\d+\)/,U=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,H=null,G=null,X=!1,Y=!(0==N.env("BLUEBIRD_DEBUG")||!N.env("BLUEBIRD_DEBUG")&&"development"!==N.env("NODE_ENV")),$=!(0==N.env("BLUEBIRD_WARNINGS")||!Y&&!N.env("BLUEBIRD_WARNINGS")),J=!(0==N.env("BLUEBIRD_LONG_STACK_TRACES")||!Y&&!N.env("BLUEBIRD_LONG_STACK_TRACES")),K=0!=N.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&($||!!N.env("BLUEBIRD_W_FORGOTTEN_RETURN"));t.prototype.suppressUnhandledRejections=function(){var e=this._target();e._bitField=e._bitField&-1048577|524288},t.prototype._ensurePossibleRejectionHandled=function(){if(0===(524288&this._bitField)){this._setRejectionIsUnhandled();var e=this;setTimeout(function(){e._notifyUnhandledRejection()},1)}},t.prototype._notifyUnhandledRejectionIsHandled=function(){D("rejectionHandled",L,void 0,this)},t.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},t.prototype._returnedNonUndefined=function(){return 0!==(268435456&this._bitField)},t.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var e=this._settledValue();this._setUnhandledRejectionIsNotified(),D("unhandledRejection",M,e,this)}},t.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},t.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=this._bitField&-262145},t.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},t.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},t.prototype._unsetRejectionIsUnhandled=function(){this._bitField=this._bitField&-1048577,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},t.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},t.prototype._warn=function(e,t,n){return _(e,t,n||this)},t.onPossiblyUnhandledRejection=function(e){var t=R();M="function"==typeof e?null===t?e:N.domainBind(t,e):void 0},t.onUnhandledRejectionHandled=function(e){var t=R();L="function"==typeof e?null===t?e:N.domainBind(t,e):void 0};var Z=function(){};t.longStackTraces=function(){if(z.haveItemsQueued()&&!se.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!se.longStackTraces&&x()){var e=t.prototype._captureStackTrace,r=t.prototype._attachExtraTrace,i=t.prototype._dereferenceTrace;se.longStackTraces=!0,Z=function(){if(z.haveItemsQueued()&&!se.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");t.prototype._captureStackTrace=e,t.prototype._attachExtraTrace=r,t.prototype._dereferenceTrace=i,n.deactivateLongStackTraces(),z.enableTrampoline(),se.longStackTraces=!1},t.prototype._captureStackTrace=d,t.prototype._attachExtraTrace=f,t.prototype._dereferenceTrace=v,n.activateLongStackTraces(),z.disableTrampolineIfNecessary()}},t.hasLongStackTraces=function(){return se.longStackTraces&&x()};var Q=function(){try{if("function"==typeof CustomEvent){var e=new CustomEvent("CustomEvent");return N.global.dispatchEvent(e),function(e,t){var n={detail:t,cancelable:!0};B.defineProperty(n,"promise",{value:t.promise}),B.defineProperty(n,"reason",{value:t.reason});var r=new CustomEvent(e.toLowerCase(),n);return!N.global.dispatchEvent(r)}}if("function"==typeof Event){var e=new Event("CustomEvent");return N.global.dispatchEvent(e),function(e,t){var n=new Event(e.toLowerCase(),{cancelable:!0});return n.detail=t,B.defineProperty(n,"promise",{value:t.promise}),B.defineProperty(n,"reason",{value:t.reason}),!N.global.dispatchEvent(n)}}var e=document.createEvent("CustomEvent");return e.initCustomEvent("testingtheevent",!1,!0,{}),N.global.dispatchEvent(e),function(e,t){var n=document.createEvent("CustomEvent");return n.initCustomEvent(e.toLowerCase(),!1,!0,t),!N.global.dispatchEvent(n)}}catch(t){}return function(){return!1}}(),ee=function(){return N.isNode?function(){return process.emit.apply(process,arguments)}:N.global?function(e){var t="on"+e.toLowerCase(),n=N.global[t];return!!n&&(n.apply(N.global,[].slice.call(arguments,1)),
!0)}:function(){return!1}}(),te={promiseCreated:r,promiseFulfilled:r,promiseRejected:r,promiseResolved:r,promiseCancelled:r,promiseChained:function(e,t,n){return{promise:t,child:n}},warning:function(e,t){return{warning:t}},unhandledRejection:function(e,t,n){return{reason:t,promise:n}},rejectionHandled:r},ne=function(e){var t=!1;try{t=ee.apply(null,arguments)}catch(n){z.throwLater(n),t=!0}var r=!1;try{r=Q(e,te[e].apply(null,arguments))}catch(n){z.throwLater(n),r=!0}return r||t};t.config=function(e){if(e=Object(e),"longStackTraces"in e&&(e.longStackTraces?t.longStackTraces():!e.longStackTraces&&t.hasLongStackTraces()&&Z()),"warnings"in e){var n=e.warnings;se.warnings=!!n,K=se.warnings,N.isObject(n)&&"wForgottenReturn"in n&&(K=!!n.wForgottenReturn)}if("cancellation"in e&&e.cancellation&&!se.cancellation){if(z.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");t.prototype._clearCancellationData=u,t.prototype._propagateFrom=c,t.prototype._onCancel=s,t.prototype._setOnCancel=l,t.prototype._attachCancellationCallback=a,t.prototype._execute=o,re=c,se.cancellation=!0}return"monitoring"in e&&(e.monitoring&&!se.monitoring?(se.monitoring=!0,t.prototype._fireEvent=ne):!e.monitoring&&se.monitoring&&(se.monitoring=!1,t.prototype._fireEvent=i)),t},t.prototype._fireEvent=i,t.prototype._execute=function(e,t,n){try{e(t,n)}catch(r){return r}},t.prototype._onCancel=function(){},t.prototype._setOnCancel=function(e){},t.prototype._attachCancellationCallback=function(e){},t.prototype._captureStackTrace=function(){},t.prototype._attachExtraTrace=function(){},t.prototype._dereferenceTrace=function(){},t.prototype._clearCancellationData=function(){},t.prototype._propagateFrom=function(e,t){};var re=h,ie=function(){return!1},oe=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;N.inherits(S,Error),n.CapturedTrace=S,S.prototype.uncycle=function(){var e=this._length;if(!(e<2)){for(var t=[],n={},r=0,i=this;void 0!==i;++r)t.push(i),i=i._parent;e=this._length=r;for(var r=e-1;r>=0;--r){var o=t[r].stack;void 0===n[o]&&(n[o]=r)}for(var r=0;r<e;++r){var a=t[r].stack,s=n[a];if(void 0!==s&&s!==r){s>0&&(t[s-1]._parent=void 0,t[s-1]._length=1),t[r]._parent=void 0,t[r]._length=1;var l=r>0?t[r-1]:this;s<e-1?(l._parent=t[s+1],l._parent.uncycle(),l._length=l._parent._length+1):(l._parent=void 0,l._length=1);for(var u=l._length+1,c=r-2;c>=0;--c)t[c]._length=u,u++;return}}}},S.prototype.attachExtraTrace=function(e){if(!e.__stackCleaned__){this.uncycle();for(var t=E(e),n=t.message,r=[t.stack],i=this;void 0!==i;)r.push(O(i.stack.split("\n"))),i=i._parent;w(r),b(r),N.notEnumerableProp(e,"stack",y(n,r)),N.notEnumerableProp(e,"__stackCleaned__",!0)}};var ae=function(){var e=/^\s*at\s*/,t=function(e,t){return"string"==typeof e?e:void 0!==t.name&&void 0!==t.message?t.toString():P(t)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,H=e,G=t;var n=Error.captureStackTrace;return ie=function(e){return V.test(e)},function(e,t){Error.stackTraceLimit+=6,n(e,t),Error.stackTraceLimit-=6}}var r=new Error;if("string"==typeof r.stack&&r.stack.split("\n")[0].indexOf("stackDetection@")>=0)return H=/@/,G=t,X=!0,function(e){e.stack=(new Error).stack};var i;try{throw new Error}catch(o){i="stack"in o}return"stack"in r||!i||"number"!=typeof Error.stackTraceLimit?(G=function(e,t){return"string"==typeof e?e:"object"!=typeof t&&"function"!=typeof t||void 0===t.name||void 0===t.message?P(t):t.toString()},null):(H=e,G=t,function(e){Error.stackTraceLimit+=6;try{throw new Error}catch(t){e.stack=t.stack}Error.stackTraceLimit-=6})}([]);"undefined"!=typeof console&&"undefined"!=typeof console.warn&&(F=function(e){console.warn(e)},N.isNode&&process.stderr.isTTY?F=function(e,t){var n=t?"[33m":"[31m";console.warn(n+e+"[0m\n")}:N.isNode||"string"!=typeof(new Error).stack||(F=function(e,t){console.warn("%c"+e,t?"color: darkorange":"color: red")}));var se={warnings:$,longStackTraces:!1,cancellation:!1,monitoring:!1};return J&&t.longStackTraces(),{longStackTraces:function(){return se.longStackTraces},warnings:function(){return se.warnings},cancellation:function(){return se.cancellation},monitoring:function(){return se.monitoring},propagateFromFunction:function(){return re},boundValueFunction:function(){return p},checkForgottenReturns:g,setBounds:A,warn:_,deprecated:m,CapturedTrace:S,fireDomEvent:Q,fireGlobalEvent:ee}}}}),montageDefine("020234c","js/release/finally",{dependencies:["./util","./catch_filter"],factory:function(e,t,n){"use strict";n.exports=function(t,n,r){function i(e,t,n){this.promise=e,this.type=t,this.handler=n,this.called=!1,this.cancelPromise=null}function o(e){this.finallyHandler=e}function a(e,t){return null!=e.cancelPromise&&(arguments.length>1?e.cancelPromise._reject(t):e.cancelPromise._cancel(),e.cancelPromise=null,!0)}function s(){return u.call(this,this.promise._target()._settledValue())}function l(e){if(!a(this,e))return p.e=e,p}function u(e){var i=this.promise,u=this.handler;if(!this.called){this.called=!0;var c=this.isFinallyHandler()?u.call(i._boundValue()):u.call(i._boundValue(),e);if(c===r)return c;if(void 0!==c){i._setReturnedNonUndefined();var d=n(c,i);if(d instanceof t){if(null!=this.cancelPromise){if(d._isCancelled()){var f=new h("late cancellation observer");return i._attachExtraTrace(f),p.e=f,p}d.isPending()&&d._attachCancellationCallback(new o(this))}return d._then(s,l,void 0,this,void 0)}}}return i.isRejected()?(a(this),p.e=e,p):(a(this),e)}var c=e("./util"),h=t.CancellationError,p=c.errorObj,d=e("./catch_filter")(r);return i.prototype.isFinallyHandler=function(){return 0===this.type},o.prototype._resultCancelled=function(){a(this.finallyHandler)},t.prototype._passThrough=function(e,t,n,r){return"function"!=typeof e?this.then():this._then(n,r,void 0,new i(this,t,e),void 0)},t.prototype.lastly=t.prototype["finally"]=function(e){return this._passThrough(e,0,u,u)},t.prototype.tap=function(e){return this._passThrough(e,1,u)},t.prototype.tapCatch=function(e){var n=arguments.length;if(1===n)return this._passThrough(e,1,void 0,u);var r,i=new Array(n-1),o=0;for(r=0;r<n-1;++r){var a=arguments[r];if(!c.isObject(a))return t.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+c.classString(a)));i[o++]=a}i.length=o;var s=arguments[r];return this._passThrough(d(i,s,this),1,void 0,u)},i}}}),montageDefine("020234c","js/release/catch_filter",{dependencies:["./util","./es5"],factory:function(e,t,n){"use strict";n.exports=function(t){function n(e,n,s){return function(l){var u=s._boundValue();e:for(var c=0;c<e.length;++c){var h=e[c];if(h===Error||null!=h&&h.prototype instanceof Error){if(l instanceof h)return o(n).call(u,l)}else if("function"==typeof h){var p=o(h).call(u,l);if(p===a)return p;if(p)return o(n).call(u,l)}else if(r.isObject(l)){for(var d=i(h),f=0;f<d.length;++f){var v=d[f];if(h[v]!=l[v])continue e}return o(n).call(u,l)}}return t}}var r=e("./util"),i=e("./es5").keys,o=r.tryCatch,a=r.errorObj;return n}}}),montageDefine("020234c","js/release/nodeback",{dependencies:["./util","./errors","./es5"],factory:function(e,t,n){"use strict";function r(e){return e instanceof Error&&c.getPrototypeOf(e)===Error.prototype}function i(e){var t;if(r(e)){t=new u(e),t.name=e.name,t.message=e.message,t.stack=e.stack;for(var n=c.keys(e),i=0;i<n.length;++i){var o=n[i];h.test(o)||(t[o]=e[o])}return t}return a.markAsOriginatingFromRejection(e),e}function o(e,t){return function(n,r){if(null!==e){if(n){var o=i(s(n));e._attachExtraTrace(o),e._reject(o)}else if(t){for(var a=arguments.length,l=new Array(Math.max(a-1,0)),u=1;u<a;++u)l[u-1]=arguments[u];e._fulfill(l)}else e._fulfill(r);e=null}}}var a=e("./util"),s=a.maybeWrapAsError,l=e("./errors"),u=l.OperationalError,c=e("./es5"),h=/^(?:name|message|stack|cause)$/;n.exports=o}}),montageDefine("020234c","js/release/method",{dependencies:["./util"],factory:function(e,t,n){"use strict";n.exports=function(t,n,r,i,o){var a=e("./util"),s=a.tryCatch;t.method=function(e){if("function"!=typeof e)throw new t.TypeError("expecting a function but got "+a.classString(e));return function(){var r=new t(n);r._captureStackTrace(),r._pushContext();var i=s(e).apply(this,arguments),a=r._popContext();return o.checkForgottenReturns(i,a,"Promise.method",r),r._resolveFromSyncValue(i),r}},t.attempt=t["try"]=function(e){if("function"!=typeof e)return i("expecting a function but got "+a.classString(e));var r=new t(n);r._captureStackTrace(),r._pushContext();var l;if(arguments.length>1){o.deprecated("calling Promise.try with more than 1 argument");var u=arguments[1],c=arguments[2];l=a.isArray(u)?s(e).apply(c,u):s(e).call(c,u)}else l=s(e)();var h=r._popContext();return o.checkForgottenReturns(l,h,"Promise.try",r),r._resolveFromSyncValue(l),r},t.prototype._resolveFromSyncValue=function(e){e===a.errorObj?this._rejectCallback(e.e,!1):this._resolveCallback(e,!0)}}}}),montageDefine("020234c","js/release/bind",{dependencies:[],factory:function(e,t,n){"use strict";n.exports=function(e,t,n,r){var i=!1,o=function(e,t){this._reject(t)},a=function(e,t){t.promiseRejectionQueued=!0,t.bindingPromise._then(o,o,null,this,e)},s=function(e,t){0===(50397184&this._bitField)&&this._resolveCallback(t.target)},l=function(e,t){t.promiseRejectionQueued||this._reject(e)};e.prototype.bind=function(o){i||(i=!0,e.prototype._propagateFrom=r.propagateFromFunction(),e.prototype._boundValue=r.boundValueFunction());var u=n(o),c=new e(t);c._propagateFrom(this,1);var h=this._target();if(c._setBoundTo(u),u instanceof e){var p={promiseRejectionQueued:!1,promise:c,target:h,bindingPromise:u};h._then(t,a,void 0,c,p),u._then(s,l,void 0,c,p),c._setOnCancel(u)}else c._resolveCallback(h);return c},e.prototype._setBoundTo=function(e){void 0!==e?(this._bitField=2097152|this._bitField,this._boundTo=e):this._bitField=this._bitField&-2097153},e.prototype._isBound=function(){return 2097152===(2097152&this._bitField)},e.bind=function(t,n){return e.resolve(n).bind(t)}}}}),montageDefine("020234c","js/release/cancel",{dependencies:["./util"],factory:function(e,t,n){"use strict";n.exports=function(t,n,r,i){var o=e("./util"),a=o.tryCatch,s=o.errorObj,l=t._async;t.prototype["break"]=t.prototype.cancel=function(){if(!i.cancellation())return this._warn("cancellation is disabled");for(var e=this,t=e;e._isCancellable();){if(!e._cancelBy(t)){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}var n=e._cancellationParent;if(null==n||!n._isCancellable()){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}e._isFollowing()&&e._followee().cancel(),e._setWillBeCancelled(),t=e,e=n}},t.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},t.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},t.prototype._cancelBy=function(e){return e===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},t.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},t.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),l.invoke(this._cancelPromises,this,void 0))},t.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},t.prototype._unsetOnCancel=function(){this._onCancelField=void 0},t.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},t.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},t.prototype._doInvokeOnCancel=function(e,t){if(o.isArray(e))for(var n=0;n<e.length;++n)this._doInvokeOnCancel(e[n],t);else if(void 0!==e)if("function"==typeof e){if(!t){var r=a(e).call(this._boundValue());r===s&&(this._attachExtraTrace(r.e),l.throwLater(r.e))}}else e._resultCancelled(this)},t.prototype._invokeOnCancel=function(){var e=this._onCancel();this._unsetOnCancel(),l.invoke(this._doInvokeOnCancel,this,e)},t.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},t.prototype._resultCancelled=function(){this.cancel()}}}}),montageDefine("020234c","js/release/direct_resolve",{dependencies:[],factory:function(e,t,n){"use strict";n.exports=function(e){function t(){return this.value}function n(){throw this.reason}e.prototype["return"]=e.prototype.thenReturn=function(n){return n instanceof e&&n.suppressUnhandledRejections(),this._then(t,void 0,void 0,{value:n},void 0)},e.prototype["throw"]=e.prototype.thenThrow=function(e){return this._then(n,void 0,void 0,{reason:e},void 0)},e.prototype.catchThrow=function(e){if(arguments.length<=1)return this._then(void 0,n,void 0,{reason:e},void 0);var t=arguments[1],r=function(){throw t};return this.caught(e,r)},e.prototype.catchReturn=function(n){if(arguments.length<=1)return n instanceof e&&n.suppressUnhandledRejections(),this._then(void 0,t,void 0,{value:n},void 0);var r=arguments[1];r instanceof e&&r.suppressUnhandledRejections();var i=function(){return r};return this.caught(n,i)}}}}),montageDefine("020234c","js/release/synchronous_inspection",{dependencies:[],factory:function(e,t,n){"use strict";n.exports=function(e){function t(e){void 0!==e?(e=e._target(),this._bitField=e._bitField,this._settledValueField=e._isFateSealed()?e._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}t.prototype._settledValue=function(){return this._settledValueField};var n=t.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},r=t.prototype.error=t.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},i=t.prototype.isFulfilled=function(){return 0!==(33554432&this._bitField)},o=t.prototype.isRejected=function(){return 0!==(16777216&this._bitField)},a=t.prototype.isPending=function(){return 0===(50397184&this._bitField)},s=t.prototype.isResolved=function(){return 0!==(50331648&this._bitField)};t.prototype.isCancelled=function(){return 0!==(8454144&this._bitField)},e.prototype.__isCancelled=function(){return 65536===(65536&this._bitField)},e.prototype._isCancelled=function(){return this._target().__isCancelled()},e.prototype.isCancelled=function(){return 0!==(8454144&this._target()._bitField)},e.prototype.isPending=function(){return a.call(this._target())},e.prototype.isRejected=function(){return o.call(this._target())},e.prototype.isFulfilled=function(){return i.call(this._target())},e.prototype.isResolved=function(){return s.call(this._target())},e.prototype.value=function(){return n.call(this._target())},e.prototype.reason=function(){var e=this._target();return e._unsetRejectionIsUnhandled(),r.call(e)},e.prototype._value=function(){return this._settledValue()},e.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},e.PromiseInspection=t}}}),montageDefine("020234c","js/release/join",{dependencies:["./util"],factory:function(e,t,n){"use strict";n.exports=function(t,n,r,i,o,a){var s,l=e("./util"),u=l.canEvaluate,c=l.tryCatch,h=l.errorObj;if(u){for(var p=function(e){return new Function("value","holder","                             \n            'use strict';                                                    \n            holder.pIndex = value;                                           \n            holder.checkFulfillment(this);                                   \n            ".replace(/Index/g,e))},d=function(e){return new Function("promise","holder","                           \n            'use strict';                                                    \n            holder.pIndex = promise;                                         \n            ".replace(/Index/g,e))},f=function(e){for(var n=new Array(e),r=0;r<n.length;++r)n[r]="this.p"+(r+1);var i=n.join(" = ")+" = null;",a="var promise;\n"+n.map(function(e){return"                                                         \n                promise = "+e+";                                      \n                if (promise instanceof Promise) {                            \n                    promise.cancel();                                        \n                }                                                            \n            "}).join("\n"),s=n.join(", "),l="Holder$"+e,u="return function(tryCatch, errorObj, Promise, async) {    \n            'use strict';                                                    \n            function [TheName](fn) {                                         \n                [TheProperties]                                              \n                this.fn = fn;                                                \n                this.asyncNeeded = true;                                     \n                this.now = 0;                                                \n            }                                                                \n                                                                             \n            [TheName].prototype._callFunction = function(promise) {          \n                promise._pushContext();                                      \n                var ret = tryCatch(this.fn)([ThePassedArguments]);           \n                promise._popContext();                                       \n                if (ret === errorObj) {                                      \n                    promise._rejectCallback(ret.e, false);                   \n                } else {                                                     \n                    promise._resolveCallback(ret);                           \n                }                                                            \n            };                                                               \n                                                                             \n            [TheName].prototype.checkFulfillment = function(promise) {       \n                var now = ++this.now;                                        \n                if (now === [TheTotal]) {                                    \n                    if (this.asyncNeeded) {                                  \n                        async.invoke(this._callFunction, this, promise);     \n                    } else {                                                 \n                        this._callFunction(promise);                         \n                    }                                                        \n                                                                             \n                }                                                            \n            };                                                               \n                                                                             \n            [TheName].prototype._resultCancelled = function() {              \n                [CancellationCode]                                           \n            };                                                               \n                                                                             \n            return [TheName];                                                \n        }(tryCatch, errorObj, Promise, async);                               \n        ";return u=u.replace(/\[TheName\]/g,l).replace(/\[TheTotal\]/g,e).replace(/\[ThePassedArguments\]/g,s).replace(/\[TheProperties\]/g,i).replace(/\[CancellationCode\]/g,a),new Function("tryCatch","errorObj","Promise","async",u)(c,h,t,o)},v=[],g=[],m=[],_=0;_<8;++_)v.push(f(_+1)),g.push(p(_+1)),m.push(d(_+1));s=function(e){this._reject(e)}}t.join=function(){var e,o=arguments.length-1;if(o>0&&"function"==typeof arguments[o]&&(e=arguments[o],o<=8&&u)){var c=new t(i);c._captureStackTrace();for(var h=v[o-1],p=new h(e),d=g,f=0;f<o;++f){var _=r(arguments[f],c);if(_ instanceof t){_=_._target();var y=_._bitField;0===(50397184&y)?(_._then(d[f],s,void 0,c,p),m[f](_,p),p.asyncNeeded=!1):0!==(33554432&y)?d[f].call(c,_._value(),p):0!==(16777216&y)?c._reject(_._reason()):c._cancel()}else d[f].call(c,_,p)}if(!c._isFateSealed()){if(p.asyncNeeded){var b=a();null!==b&&(p.fn=l.domainBind(b,p.fn))}c._setAsyncGuaranteed(),c._setOnCancel(p)}return c}for(var w=arguments.length,O=new Array(w),j=0;j<w;++j)O[j]=arguments[j];e&&O.pop();var c=new n(O).promise();return void 0!==e?c.spread(e):c}}}}),montageDefine("020234c","js/release/call_get",{dependencies:["./util"],factory:function(e,t,n){"use strict";var r=Object.create;if(r){var i=r(null),o=r(null);i[" size"]=o[" size"]=0}n.exports=function(t){function n(e,n){var r;if(null!=e&&(r=e[n]),"function"!=typeof r){var i="Object "+c.classString(e)+" has no method '"+c.toString(n)+"'";throw new t.TypeError(i)}return r}function r(e){var t=this.pop(),r=n(e,t);return r.apply(e,this)}function a(e){return e[this]}function s(e){var t=+this;return t<0&&(t=Math.max(0,t+e.length)),e[t]}var l,u,c=e("./util"),h=c.canEvaluate,p=c.isIdentifier,d=function(e){return new Function("ensureMethod","                                    \n        return function(obj) {                                               \n            'use strict'                                                     \n            var len = this.length;                                           \n            ensureMethod(obj, 'methodName');                                 \n            switch(len) {                                                    \n                case 1: return obj.methodName(this[0]);                      \n                case 2: return obj.methodName(this[0], this[1]);             \n                case 3: return obj.methodName(this[0], this[1], this[2]);    \n                case 0: return obj.methodName();                             \n                default:                                                     \n                    return obj.methodName.apply(obj, this);                  \n            }                                                                \n        };                                                                   \n        ".replace(/methodName/g,e))(n)},f=function(e){return new Function("obj","                                             \n        'use strict';                                                        \n        return obj.propertyName;                                             \n        ".replace("propertyName",e))},v=function(e,t,n){var r=n[e];if("function"!=typeof r){if(!p(e))return null;if(r=t(e),n[e]=r,n[" size"]++,n[" size"]>512){for(var i=Object.keys(n),o=0;o<256;++o)delete n[i[o]];n[" size"]=i.length-256}}return r};l=function(e){return v(e,d,i)},u=function(e){return v(e,f,o)},t.prototype.call=function(e){for(var t=arguments.length,n=new Array(Math.max(t-1,0)),i=1;i<t;++i)n[i-1]=arguments[i];if(h){var o=l(e);if(null!==o)return this._then(o,void 0,void 0,n,void 0)}return n.push(e),this._then(r,void 0,void 0,n,void 0)},t.prototype.get=function(e){var t,n="number"==typeof e;if(n)t=s;else if(h){var r=u(e);t=null!==r?r:a}else t=a;return this._then(t,void 0,void 0,e,void 0)}}}}),montageDefine("020234c","js/release/generators",{dependencies:["./errors","./util"],factory:function(e,t,n){"use strict";n.exports=function(t,n,r,i,o,a){function s(e,n,r){for(var o=0;o<n.length;++o){r._pushContext();var a=d(n[o])(e);if(r._popContext(),a===p){r._pushContext();var s=t.reject(p.e);return r._popContext(),s}var l=i(a,r);if(l instanceof t)return l}return null}function l(e,n,i,o){if(a.cancellation()){var s=new t(r),l=this._finallyPromise=new t(r);this._promise=s.lastly(function(){return l}),s._captureStackTrace(),s._setOnCancel(this)}else{var u=this._promise=new t(r);u._captureStackTrace()}this._stack=o,this._generatorFunction=e,this._receiver=n,this._generator=void 0,this._yieldHandlers="function"==typeof i?[i].concat(f):f,this._yieldedPromise=null,this._cancellationPhase=!1}var u=e("./errors"),c=u.TypeError,h=e("./util"),p=h.errorObj,d=h.tryCatch,f=[];h.inherits(l,o),l.prototype._isResolved=function(){return null===this._promise},l.prototype._cleanup=function(){this._promise=this._generator=null,a.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},l.prototype._promiseCancelled=function(){if(!this._isResolved()){var e,n="undefined"!=typeof this._generator["return"];if(n)this._promise._pushContext(),e=d(this._generator["return"]).call(this._generator,void 0),this._promise._popContext();else{var r=new t.CancellationError("generator .return() sentinel");t.coroutine.returnSentinel=r,this._promise._attachExtraTrace(r),this._promise._pushContext(),e=d(this._generator["throw"]).call(this._generator,r),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(e)}},l.prototype._promiseFulfilled=function(e){this._yieldedPromise=null,this._promise._pushContext();var t=d(this._generator.next).call(this._generator,e);this._promise._popContext(),this._continue(t)},l.prototype._promiseRejected=function(e){this._yieldedPromise=null,this._promise._attachExtraTrace(e),this._promise._pushContext();var t=d(this._generator["throw"]).call(this._generator,e);this._promise._popContext(),this._continue(t)},l.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof t){var e=this._yieldedPromise;this._yieldedPromise=null,e.cancel()}},l.prototype.promise=function(){return this._promise},l.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},l.prototype._continue=function(e){var n=this._promise;if(e===p)return this._cleanup(),this._cancellationPhase?n.cancel():n._rejectCallback(e.e,!1);var r=e.value;if(e.done===!0)return this._cleanup(),this._cancellationPhase?n.cancel():n._resolveCallback(r);var o=i(r,this._promise);if(!(o instanceof t)&&(o=s(o,this._yieldHandlers,this._promise),null===o))return void this._promiseRejected(new c("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",String(r))+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")));o=o._target();var a=o._bitField;0===(50397184&a)?(this._yieldedPromise=o,o._proxy(this,null)):0!==(33554432&a)?t._async.invoke(this._promiseFulfilled,this,o._value()):0!==(16777216&a)?t._async.invoke(this._promiseRejected,this,o._reason()):this._promiseCancelled()},t.coroutine=function(e,t){if("function"!=typeof e)throw new c("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var n=Object(t).yieldHandler,r=l,i=(new Error).stack;return function(){var t=e.apply(this,arguments),o=new r((void 0),(void 0),n,i),a=o.promise();return o._generator=t,o._promiseFulfilled(void 0),a}},t.coroutine.addYieldHandler=function(e){if("function"!=typeof e)throw new c("expecting a function but got "+h.classString(e));f.push(e)},t.spawn=function(e){if(a.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof e)return n("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var r=new l(e,this),i=r.promise();return r._run(t.spawn),i}}}}),montageDefine("020234c","js/release/map",{dependencies:["./util"],factory:function(e,t,n){"use strict";n.exports=function(t,n,r,i,o,a){function s(e,t,n,r){this.constructor$(e),this._promise._captureStackTrace();var i=u();this._callback=null===i?t:c.domainBind(i,t),this._preservedValues=r===o?new Array(this.length()):null,this._limit=n,this._inFlight=0,this._queue=[],d.invoke(this._asyncInit,this,void 0)}function l(e,n,i,o){if("function"!=typeof n)return r("expecting a function but got "+c.classString(n));var a=0;if(void 0!==i){if("object"!=typeof i||null===i)return t.reject(new TypeError("options argument must be an object but it is "+c.classString(i)));if("number"!=typeof i.concurrency)return t.reject(new TypeError("'concurrency' must be a number but it is "+c.classString(i.concurrency)));a=i.concurrency}return a="number"==typeof a&&isFinite(a)&&a>=1?a:0,new s(e,n,a,o).promise()}var u=t._getDomain,c=e("./util"),h=c.tryCatch,p=c.errorObj,d=t._async;c.inherits(s,n),s.prototype._asyncInit=function(){this._init$(void 0,-2)},s.prototype._init=function(){},s.prototype._promiseFulfilled=function(e,n){var r=this._values,o=this.length(),s=this._preservedValues,l=this._limit;if(n<0){if(n=n*-1-1,r[n]=e,l>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(l>=1&&this._inFlight>=l)return r[n]=e,this._queue.push(n),!1;null!==s&&(s[n]=e);var u=this._promise,c=this._callback,d=u._boundValue();u._pushContext();var f=h(c).call(d,e,n,o),v=u._popContext();if(a.checkForgottenReturns(f,v,null!==s?"Promise.filter":"Promise.map",u),f===p)return this._reject(f.e),!0;var g=i(f,this._promise);if(g instanceof t){g=g._target();var m=g._bitField;if(0===(50397184&m))return l>=1&&this._inFlight++,r[n]=g,g._proxy(this,(n+1)*-1),!1;if(0===(33554432&m))return 0!==(16777216&m)?(this._reject(g._reason()),!0):(this._cancel(),!0);f=g._value()}r[n]=f}var _=++this._totalResolved;return _>=o&&(null!==s?this._filter(r,s):this._resolve(r),!0)},s.prototype._drainQueue=function(){for(var e=this._queue,t=this._limit,n=this._values;e.length>0&&this._inFlight<t;){if(this._isResolved())return;var r=e.pop();this._promiseFulfilled(n[r],r)}},s.prototype._filter=function(e,t){for(var n=t.length,r=new Array(n),i=0,o=0;o<n;++o)e[o]&&(r[i++]=t[o]);r.length=i,this._resolve(r)},s.prototype.preservedValues=function(){return this._preservedValues},t.prototype.map=function(e,t){return l(this,e,t,null)},t.map=function(e,t,n,r){return l(e,t,n,r)}}}}),montageDefine("020234c","js/release/nodeify",{dependencies:["./util"],factory:function(e,t,n){"use strict";n.exports=function(t){function n(e,t){var n=this;if(!o.isArray(e))return r.call(n,e,t);var i=s(t).apply(n._boundValue(),[null].concat(e));i===l&&a.throwLater(i.e)}function r(e,t){var n=this,r=n._boundValue(),i=void 0===e?s(t).call(r,null):s(t).call(r,null,e);i===l&&a.throwLater(i.e)}function i(e,t){var n=this;if(!e){var r=new Error(e+"");r.cause=e,e=r}var i=s(t).call(n._boundValue(),e);i===l&&a.throwLater(i.e)}var o=e("./util"),a=t._async,s=o.tryCatch,l=o.errorObj;t.prototype.asCallback=t.prototype.nodeify=function(e,t){if("function"==typeof e){var o=r;void 0!==t&&Object(t).spread&&(o=n),this._then(o,i,void 0,this,e)}return this}}}}),montageDefine("020234c","js/release/promisify",{dependencies:["./util","./nodeback","./errors"],factory:function(e,t,n){"use strict";n.exports=function(t,n){function r(e){return!O.test(e)}function i(e){try{return e.__isPromisified__===!0}catch(t){return!1}}function o(e,t,n){var r=d.getDataPropertyOrDefault(e,t+n,b);return!!r&&i(r)}function a(e,t,n){for(var r=0;r<e.length;r+=2){var i=e[r];if(n.test(i))for(var o=i.replace(n,""),a=0;a<e.length;a+=2)if(e[a]===o)throw new _("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",t))}}function s(e,t,n,r){for(var s=d.inheritedDataKeys(e),l=[],u=0;u<s.length;++u){var c=s[u],h=e[c],p=r===j||j(c,h,e);"function"!=typeof h||i(h)||o(e,c,t)||!r(c,h,e,p)||l.push(c,h)}return a(l,t,n),l}function l(e,r,i,o,a,s){function l(){var i=r;r===p&&(i=this);var o=new t(n);o._captureStackTrace();var a="string"==typeof c&&this!==u?this[c]:e,l=f(o,s);try{a.apply(i,v(arguments,l))}catch(h){o._rejectCallback(g(h),!0,!0)}return o._isFateSealed()||o._setAsyncGuaranteed(),o}var u=function(){return this}(),c=e;return"string"==typeof c&&(e=o),d.notEnumerableProp(l,"__isPromisified__",!0),l}function u(e,t,n,r,i){for(var o=new RegExp(E(t)+"$"),a=s(e,t,o,n),l=0,u=a.length;l<u;l+=2){var c=a[l],h=a[l+1],f=c+t;if(r===x)e[f]=x(c,p,c,h,t,i);else{var v=r(h,function(){return x(c,p,c,h,t,i)});d.notEnumerableProp(v,"__isPromisified__",!0),e[f]=v}}return d.toFastProperties(e),
e}function c(e,t,n){return x(e,t,void 0,e,null,n)}var h,p={},d=e("./util"),f=e("./nodeback"),v=d.withAppended,g=d.maybeWrapAsError,m=d.canEvaluate,_=e("./errors").TypeError,y="Async",b={__isPromisified__:!0},w=["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"],O=new RegExp("^(?:"+w.join("|")+")$"),j=function(e){return d.isIdentifier(e)&&"_"!==e.charAt(0)&&"constructor"!==e},E=function(e){return e.replace(/([$])/,"\\$")},C=function(e){for(var t=[e],n=Math.max(0,e-1-3),r=e-1;r>=n;--r)t.push(r);for(var r=e+1;r<=3;++r)t.push(r);return t},D=function(e){return d.filledRange(e,"_arg","")},P=function(e){return d.filledRange(Math.max(e,3),"_arg","")},T=function(e){return"number"==typeof e.length?Math.max(Math.min(e.length,1024),0):0};h=function(e,r,i,o,a,s){function l(e){var t,n=D(e).join(", "),i=e>0?", ":"";return t=m?"ret = callback.call(this, {{args}}, nodeback); break;\n":void 0===r?"ret = callback({{args}}, nodeback); break;\n":"ret = callback.call(receiver, {{args}}, nodeback); break;\n",t.replace("{{args}}",n).replace(", ",i)}function u(){for(var e="",t=0;t<h.length;++t)e+="case "+h[t]+":"+l(h[t]);return e+="                                                             \n        default:                                                             \n            var args = new Array(len + 1);                                   \n            var i = 0;                                                       \n            for (var i = 0; i < len; ++i) {                                  \n               args[i] = arguments[i];                                       \n            }                                                                \n            args[i] = nodeback;                                              \n            [CodeForCall]                                                    \n            break;                                                           \n        ".replace("[CodeForCall]",m?"ret = callback.apply(this, args);\n":"ret = callback.apply(receiver, args);\n")}var c=Math.max(0,T(o)-1),h=C(c),m="string"==typeof e||r===p,_="string"==typeof e?"this != null ? this['"+e+"'] : fn":"fn",y="'use strict';                                                \n        var ret = function (Parameters) {                                    \n            'use strict';                                                    \n            var len = arguments.length;                                      \n            var promise = new Promise(INTERNAL);                             \n            promise._captureStackTrace();                                    \n            var nodeback = nodebackForPromise(promise, "+s+");   \n            var ret;                                                         \n            var callback = tryCatch([GetFunctionCode]);                      \n            switch(len) {                                                    \n                [CodeForSwitchCase]                                          \n            }                                                                \n            if (ret === errorObj) {                                          \n                promise._rejectCallback(maybeWrapAsError(ret.e), true, true);\n            }                                                                \n            if (!promise._isFateSealed()) promise._setAsyncGuaranteed();     \n            return promise;                                                  \n        };                                                                   \n        notEnumerableProp(ret, '__isPromisified__', true);                   \n        return ret;                                                          \n    ".replace("[CodeForSwitchCase]",u()).replace("[GetFunctionCode]",_);return y=y.replace("Parameters",P(c)),new Function("Promise","fn","receiver","withAppended","maybeWrapAsError","nodebackForPromise","tryCatch","errorObj","notEnumerableProp","INTERNAL",y)(t,o,r,v,g,f,d.tryCatch,d.errorObj,d.notEnumerableProp,n)};var x=m?h:l;t.promisify=function(e,t){if("function"!=typeof e)throw new _("expecting a function but got "+d.classString(e));if(i(e))return e;t=Object(t);var n=void 0===t.context?p:t.context,o=!!t.multiArgs,a=c(e,n,o);return d.copyDescriptors(e,a,r),a},t.promisifyAll=function(e,t){if("function"!=typeof e&&"object"!=typeof e)throw new _("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");t=Object(t);var n=!!t.multiArgs,r=t.suffix;"string"!=typeof r&&(r=y);var i=t.filter;"function"!=typeof i&&(i=j);var o=t.promisifier;if("function"!=typeof o&&(o=x),!d.isIdentifier(r))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var a=d.inheritedDataKeys(e),s=0;s<a.length;++s){var l=e[a[s]];"constructor"!==a[s]&&d.isClass(l)&&(u(l.prototype,r,i,o,n),u(l,r,i,o,n))}return u(e,r,i,o,n)}}}}),montageDefine("020234c","js/release/props",{dependencies:["./util","./es5"],factory:function(e,t,n){"use strict";n.exports=function(t,n,r,i){function o(e){var t,n=!1;if(void 0!==s&&e instanceof s)t=h(e),n=!0;else{var r=c.keys(e),i=r.length;t=new Array(2*i);for(var o=0;o<i;++o){var a=r[o];t[o]=e[a],t[o+i]=a}}this.constructor$(t),this._isMap=n,this._init$(void 0,n?-6:-3)}function a(e){var n,a=r(e);return u(a)?(n=a instanceof t?a._then(t.props,void 0,void 0,void 0,void 0):new o(a).promise(),a instanceof t&&n._propagateFrom(a,2),n):i("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}var s,l=e("./util"),u=l.isObject,c=e("./es5");"function"==typeof Map&&(s=Map);var h=function(){function e(e,r){this[t]=e,this[t+n]=r,t++}var t=0,n=0;return function(r){n=r.size,t=0;var i=new Array(2*r.size);return r.forEach(e,i),i}}(),p=function(e){for(var t=new s,n=e.length/2|0,r=0;r<n;++r){var i=e[n+r],o=e[r];t.set(i,o)}return t};l.inherits(o,n),o.prototype._init=function(){},o.prototype._promiseFulfilled=function(e,t){this._values[t]=e;var n=++this._totalResolved;if(n>=this._length){var r;if(this._isMap)r=p(this._values);else{r={};for(var i=this.length(),o=0,a=this.length();o<a;++o)r[this._values[o+i]]=this._values[o]}return this._resolve(r),!0}return!1},o.prototype.shouldCopyValues=function(){return!1},o.prototype.getActualLength=function(e){return e>>1},t.prototype.props=function(){return a(this)},t.props=function(e){return a(e)}}}}),montageDefine("020234c","js/release/race",{dependencies:["./util"],factory:function(e,t,n){"use strict";n.exports=function(t,n,r,i){function o(e,o){var l=r(e);if(l instanceof t)return s(l);if(e=a.asArray(e),null===e)return i("expecting an array or an iterable object but got "+a.classString(e));var u=new t(n);void 0!==o&&u._propagateFrom(o,3);for(var c=u._fulfill,h=u._reject,p=0,d=e.length;p<d;++p){var f=e[p];(void 0!==f||p in e)&&t.cast(f)._then(c,h,void 0,u,null)}return u}var a=e("./util"),s=function(e){return e.then(function(t){return o(t,e)})};t.race=function(e){return o(e,void 0)},t.prototype.race=function(){return o(this,void 0)}}}}),montageDefine("020234c","js/release/reduce",{dependencies:["./util"],factory:function(e,t,n){"use strict";n.exports=function(t,n,r,i,o,a){function s(e,n,r,i){this.constructor$(e);var a=p();this._fn=null===a?n:d.domainBind(a,n),void 0!==r&&(r=t.resolve(r),r._attachCancellationCallback(this)),this._initialValue=r,this._currentCancellable=null,i===o?this._eachValues=Array(this._length):0===i?this._eachValues=null:this._eachValues=void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function l(e,t){this.isFulfilled()?t._resolve(e):t._reject(e)}function u(e,t,n,i){if("function"!=typeof t)return r("expecting a function but got "+d.classString(t));var o=new s(e,t,n,i);return o.promise()}function c(e){this.accum=e,this.array._gotAccum(e);var n=i(this.value,this.array._promise);return n instanceof t?(this.array._currentCancellable=n,n._then(h,void 0,void 0,this,void 0)):h.call(this,n)}function h(e){var n=this.array,r=n._promise,i=f(n._fn);r._pushContext();var o;o=void 0!==n._eachValues?i.call(r._boundValue(),e,this.index,this.length):i.call(r._boundValue(),this.accum,e,this.index,this.length),o instanceof t&&(n._currentCancellable=o);var s=r._popContext();return a.checkForgottenReturns(o,s,void 0!==n._eachValues?"Promise.each":"Promise.reduce",r),o}var p=t._getDomain,d=e("./util"),f=d.tryCatch;d.inherits(s,n),s.prototype._gotAccum=function(e){void 0!==this._eachValues&&null!==this._eachValues&&e!==o&&this._eachValues.push(e)},s.prototype._eachComplete=function(e){return null!==this._eachValues&&this._eachValues.push(e),this._eachValues},s.prototype._init=function(){},s.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},s.prototype.shouldCopyValues=function(){return!1},s.prototype._resolve=function(e){this._promise._resolveCallback(e),this._values=null},s.prototype._resultCancelled=function(e){return e===this._initialValue?this._cancel():void(this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof t&&this._currentCancellable.cancel(),this._initialValue instanceof t&&this._initialValue.cancel()))},s.prototype._iterate=function(e){this._values=e;var n,r,i=e.length;if(void 0!==this._initialValue?(n=this._initialValue,r=0):(n=t.resolve(e[0]),r=1),this._currentCancellable=n,!n.isRejected())for(;r<i;++r){var o={accum:null,value:e[r],index:r,length:i,array:this};n=n._then(c,void 0,void 0,o,void 0)}void 0!==this._eachValues&&(n=n._then(this._eachComplete,void 0,void 0,this,void 0)),n._then(l,l,void 0,n,this)},t.prototype.reduce=function(e,t){return u(this,e,t,null)},t.reduce=function(e,t,n,r){return u(e,t,n,r)}}}}),montageDefine("020234c","js/release/settle",{dependencies:["./util"],factory:function(e,t,n){"use strict";n.exports=function(t,n,r){function i(e){this.constructor$(e)}var o=t.PromiseInspection,a=e("./util");a.inherits(i,n),i.prototype._promiseResolved=function(e,t){this._values[e]=t;var n=++this._totalResolved;return n>=this._length&&(this._resolve(this._values),!0)},i.prototype._promiseFulfilled=function(e,t){var n=new o;return n._bitField=33554432,n._settledValueField=e,this._promiseResolved(t,n)},i.prototype._promiseRejected=function(e,t){var n=new o;return n._bitField=16777216,n._settledValueField=e,this._promiseResolved(t,n)},t.settle=function(e){return r.deprecated(".settle()",".reflect()"),new i(e).promise()},t.prototype.settle=function(){return t.settle(this)}}}}),montageDefine("020234c","js/release/some",{dependencies:["./util","./errors","./errors"],factory:function(e,t,n){"use strict";n.exports=function(t,n,r){function i(e){this.constructor$(e),this._howMany=0,this._unwrap=!1,this._initialized=!1}function o(e,t){if((0|t)!==t||t<0)return r("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var n=new i(e),o=n.promise();return n.setHowMany(t),n.init(),o}var a=e("./util"),s=e("./errors").RangeError,l=e("./errors").AggregateError,u=a.isArray,c={};a.inherits(i,n),i.prototype._init=function(){if(this._initialized){if(0===this._howMany)return void this._resolve([]);this._init$(void 0,-5);var e=u(this._values);!this._isResolved()&&e&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},i.prototype.init=function(){this._initialized=!0,this._init()},i.prototype.setUnwrap=function(){this._unwrap=!0},i.prototype.howMany=function(){return this._howMany},i.prototype.setHowMany=function(e){this._howMany=e},i.prototype._promiseFulfilled=function(e){return this._addFulfilled(e),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},i.prototype._promiseRejected=function(e){return this._addRejected(e),this._checkOutcome()},i.prototype._promiseCancelled=function(){return this._values instanceof t||null==this._values?this._cancel():(this._addRejected(c),this._checkOutcome())},i.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var e=new l,t=this.length();t<this._values.length;++t)this._values[t]!==c&&e.push(this._values[t]);return e.length>0?this._reject(e):this._cancel(),!0}return!1},i.prototype._fulfilled=function(){return this._totalResolved},i.prototype._rejected=function(){return this._values.length-this.length()},i.prototype._addRejected=function(e){this._values.push(e)},i.prototype._addFulfilled=function(e){this._values[this._totalResolved++]=e},i.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},i.prototype._getRangeError=function(e){var t="Input array must contain at least "+this._howMany+" items but contains only "+e+" items";return new s(t)},i.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},t.some=function(e,t){return o(e,t)},t.prototype.some=function(e){return o(this,e)},t._SomePromiseArray=i}}}),montageDefine("020234c","js/release/timers",{dependencies:["./util"],factory:function(e,t,n){"use strict";n.exports=function(t,n,r){function i(e){this.handle=e}function o(e){return clearTimeout(this.handle),e}function a(e){throw clearTimeout(this.handle),e}var s=e("./util"),l=t.TimeoutError;i.prototype._resultCancelled=function(){clearTimeout(this.handle)};var u=function(e){return c(+this).thenReturn(e)},c=t.delay=function(e,o){var a,s;return void 0!==o?(a=t.resolve(o)._then(u,null,null,e,void 0),r.cancellation()&&o instanceof t&&a._setOnCancel(o)):(a=new t(n),s=setTimeout(function(){a._fulfill()},+e),r.cancellation()&&a._setOnCancel(new i(s)),a._captureStackTrace()),a._setAsyncGuaranteed(),a};t.prototype.delay=function(e){return c(e,this)};var h=function(e,t,n){var r;r="string"!=typeof t?t instanceof Error?t:new l("operation timed out"):new l(t),s.markAsOriginatingFromRejection(r),e._attachExtraTrace(r),e._reject(r),null!=n&&n.cancel()};t.prototype.timeout=function(e,t){e=+e;var n,s,l=new i(setTimeout(function(){n.isPending()&&h(n,t,s)},e));return r.cancellation()?(s=this.then(),n=s._then(o,a,void 0,l,void 0),n._setOnCancel(l)):n=this._then(o,a,void 0,l,void 0),n}}}}),montageDefine("020234c","js/release/using",{dependencies:["./util","./errors","./util"],factory:function(e,t,n){"use strict";n.exports=function(t,n,r,i,o,a){function s(e){setTimeout(function(){throw e},0)}function l(e){var t=r(e);return t!==e&&"function"==typeof e._isDisposable&&"function"==typeof e._getDisposer&&e._isDisposable()&&t._setDisposable(e._getDisposer()),t}function u(e,n){function i(){if(a>=u)return c._fulfill();var o=l(e[a++]);if(o instanceof t&&o._isDisposable()){try{o=r(o._getDisposer().tryDispose(n),e.promise)}catch(h){return s(h)}if(o instanceof t)return o._then(i,s,null,null,null)}i()}var a=0,u=e.length,c=new t(o);return i(),c}function c(e,t,n){this._data=e,this._promise=t,this._context=n}function h(e,t,n){this.constructor$(e,t,n)}function p(e){return c.isDisposer(e)?(this.resources[this.index]._setDisposable(e),e.promise()):e}function d(e){this.length=e,this.promise=null,this[e-1]=null}var f=e("./util"),v=e("./errors").TypeError,g=e("./util").inherits,m=f.errorObj,_=f.tryCatch,y={};c.prototype.data=function(){return this._data},c.prototype.promise=function(){return this._promise},c.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():y},c.prototype.tryDispose=function(e){var t=this.resource(),n=this._context;void 0!==n&&n._pushContext();var r=t!==y?this.doDispose(t,e):null;return void 0!==n&&n._popContext(),this._promise._unsetDisposable(),this._data=null,r},c.isDisposer=function(e){return null!=e&&"function"==typeof e.resource&&"function"==typeof e.tryDispose},g(h,c),h.prototype.doDispose=function(e,t){var n=this.data();return n.call(e,e,t)},d.prototype._resultCancelled=function(){for(var e=this.length,n=0;n<e;++n){var r=this[n];r instanceof t&&r.cancel()}},t.using=function(){var e=arguments.length;if(e<2)return n("you must pass at least 2 arguments to Promise.using");var i=arguments[e-1];if("function"!=typeof i)return n("expecting a function but got "+f.classString(i));var o,s=!0;2===e&&Array.isArray(arguments[0])?(o=arguments[0],e=o.length,s=!1):(o=arguments,e--);for(var l=new d(e),h=0;h<e;++h){var v=o[h];if(c.isDisposer(v)){var g=v;v=v.promise(),v._setDisposable(g)}else{var y=r(v);y instanceof t&&(v=y._then(p,null,null,{resources:l,index:h},void 0))}l[h]=v}for(var b=new Array(l.length),h=0;h<b.length;++h)b[h]=t.resolve(l[h]).reflect();var w=t.all(b).then(function(e){for(var t=0;t<e.length;++t){var n=e[t];if(n.isRejected())return m.e=n.error(),m;if(!n.isFulfilled())return void w.cancel();e[t]=n.value()}O._pushContext(),i=_(i);var r=s?i.apply(void 0,e):i(e),o=O._popContext();return a.checkForgottenReturns(r,o,"Promise.using",O),r}),O=w.lastly(function(){var e=new t.PromiseInspection(w);return u(l,e)});return l.promise=O,O._setOnCancel(l),O},t.prototype._setDisposable=function(e){this._bitField=131072|this._bitField,this._disposer=e},t.prototype._isDisposable=function(){return(131072&this._bitField)>0},t.prototype._getDisposer=function(){return this._disposer},t.prototype._unsetDisposable=function(){this._bitField=this._bitField&-131073,this._disposer=void 0},t.prototype.disposer=function(e){if("function"==typeof e)return new h(e,this,i());throw new v}}}}),montageDefine("020234c","js/release/any",{dependencies:[],factory:function(e,t,n){"use strict";n.exports=function(e){function t(e){var t=new n(e),r=t.promise();return t.setHowMany(1),t.setUnwrap(),t.init(),r}var n=e._SomePromiseArray;e.any=function(e){return t(e)},e.prototype.any=function(){return t(this)}}}}),montageDefine("020234c","js/release/each",{dependencies:[],factory:function(e,t,n){"use strict";n.exports=function(e,t){function n(){return o(this)}function r(e,n){return i(e,n,t,t)}var i=e.reduce,o=e.all;e.prototype.each=function(e){return i(this,e,t,0)._then(n,void 0,void 0,this,void 0)},e.prototype.mapSeries=function(e){return i(this,e,t,t)},e.each=function(e,r){return i(e,r,t,0)._then(n,void 0,void 0,e,void 0)},e.mapSeries=r}}}),montageDefine("020234c","js/release/filter",{dependencies:[],factory:function(e,t,n){"use strict";n.exports=function(e,t){var n=e.map;e.prototype.filter=function(e,r){return n(this,e,r,t)},e.filter=function(e,r,i){return n(e,r,i,t)}}}}),montageDefine("020234c","js/release/schedule",{dependencies:["./util"],factory:function(e,t,n){"use strict";var r,i=e("./util"),o=function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")},a=i.getNativePromise();if(i.isNode&&"undefined"==typeof MutationObserver){var s=global.setImmediate,l=process.nextTick;r=i.isRecentNode?function(e){s.call(global,e)}:function(e){l.call(process,e)}}else if("function"==typeof a&&"function"==typeof a.resolve){var u=a.resolve();r=function(e){u.then(e)}}else r="undefined"!=typeof MutationObserver&&("undefined"==typeof window||!window.navigator||!window.navigator.standalone&&!window.cordova)&&"classList"in document.documentElement?function(){var e=document.createElement("div"),t={attributes:!0},n=!1,r=document.createElement("div"),i=new MutationObserver(function(){e.classList.toggle("foo"),n=!1});i.observe(r,t);var o=function(){n||(n=!0,r.classList.toggle("foo"))};return function(n){var r=new MutationObserver(function(){r.disconnect(),n()});r.observe(e,t),o()}}():"undefined"!=typeof setImmediate?function(e){setImmediate(e)}:"undefined"!=typeof setTimeout?function(e){setTimeout(e,0)}:o;n.exports=r}}),montageDefine("020234c","js/release/queue",{dependencies:[],factory:function(e,t,n){"use strict";function r(e,t,n,r,i){for(var o=0;o<i;++o)n[o+r]=e[o+t],e[o+t]=void 0}function i(e){this._capacity=e,this._length=0,this._front=0}i.prototype._willBeOverCapacity=function(e){return this._capacity<e},i.prototype._pushOne=function(e){var t=this.length();this._checkCapacity(t+1);var n=this._front+t&this._capacity-1;this[n]=e,this._length=t+1},i.prototype.push=function(e,t,n){var r=this.length()+3;if(this._willBeOverCapacity(r))return this._pushOne(e),this._pushOne(t),void this._pushOne(n);var i=this._front+r-3;this._checkCapacity(r);var o=this._capacity-1;this[i+0&o]=e,this[i+1&o]=t,this[i+2&o]=n,this._length=r},i.prototype.shift=function(){var e=this._front,t=this[e];return this[e]=void 0,this._front=e+1&this._capacity-1,this._length--,t},i.prototype.length=function(){return this._length},i.prototype._checkCapacity=function(e){this._capacity<e&&this._resizeTo(this._capacity<<1)},i.prototype._resizeTo=function(e){var t=this._capacity;this._capacity=e;var n=this._front,i=this._length,o=n+i&t-1;r(this,0,this,t,o)},n.exports=i}}),montageDefine("c2ad217","shim",{dependencies:["./shim-array","./shim-object","./shim-function","./shim-regexp"],factory:function(e,t,n){e("./shim-array"),e("./shim-object"),e("./shim-function"),e("./shim-regexp")}}),montageDefine("c2ad217","map",{dependencies:["./_map","./listen/property-changes","./listen/map-changes"],factory:function(e,t,n){"use strict";var r=e("./_map"),i=e("./listen/property-changes"),o=e("./listen/map-changes");n.exports=r,void 0===global.Map||"function"!=typeof global.Set.prototype.values?(Object.addEach(r.prototype,i.prototype),Object.addEach(r.prototype,o.prototype)):(Object.defineEach(r.prototype,i.prototype,!1,!0,!1,!0),Object.defineEach(r.prototype,o.prototype,!1,!0,!1,!0))}}),montageDefine("c2ad217","set",{dependencies:["./_set","./listen/property-changes","./listen/range-changes","./listen/map-changes","./list","./fast-set"],factory:function(e,t,n){"use strict";function r(){var t=o.CollectionsSet,r=function c(e,n,r,i){return t._init(c,this,e,n,r,i)};r.Set=r,r.from=t.from,o.CollectionsSet=r,r.prototype=new t,r.prototype.constructor=r;var i=e("./list"),l=e("./fast-set");r.prototype.Order=i,r.prototype.Store=l,Object.defineProperty(r.prototype,"_dispatchEmptyArray",{value:[]}),r.prototype.add=function(e){var t=new this.order.Node(e);if(!this.store.has(t)){var n=this.length,r=[e];return this.dispatchBeforeOwnPropertyChange(u,n),this.dispatchesRangeChanges&&this.dispatchBeforeRangeChange(r,this._dispatchEmptyArray,n),this.order.add(e),t=this.order.head.prev,this.store.add(t),this.length++,this.dispatchesRangeChanges&&this.dispatchRangeChange(r,this._dispatchEmptyArray,n),this.dispatchOwnPropertyChange(u,n+1),!0}return!1},r.prototype["delete"]=function(e,t){if(t)throw new Error("Set#delete does not support second argument: equals");var n=new this.order.Node(e);if(this.store.has(n)){n=this.store.get(n);var r=[e];return this.dispatchBeforeOwnPropertyChange(u,this.length),this.dispatchesRangeChanges&&this.dispatchBeforeRangeChange(this._dispatchEmptyArray,r,n.index),this.store["delete"](n),this.order.splice(n,1),this.length--,this.dispatchesRangeChanges&&this.dispatchRangeChange(this._dispatchEmptyArray,r,n.index),this.dispatchOwnPropertyChange(u,this.length),!0}return!1},r.prototype.clear=function(){var e,t=this.length;t&&this.dispatchBeforeOwnPropertyChange(u,t),this.dispatchesRangeChanges&&(e=this.toArray(),this.dispatchBeforeRangeChange(this._dispatchEmptyArray,e,0)),this._clear(),this.dispatchesRangeChanges&&this.dispatchRangeChange(this._dispatchEmptyArray,e,0),t&&this.dispatchOwnPropertyChange(u,0)},Object.addEach(o.CollectionsSet.prototype,a.prototype),Object.addEach(o.CollectionsSet.prototype,s.prototype),o.CollectionsSet.prototype.makeObservable=function(){this.order.makeObservable()},n.exports=r}var i,o=e("./_set"),a=e("./listen/property-changes"),s=e("./listen/range-changes"),l=e("./listen/map-changes"),u="size";if(void 0!==global.Set&&"function"==typeof global.Set.prototype.values){i=global.Set,n.exports=o;var c,h={}.__proto__===Object.prototype;c=h?function(){this.__proto__=g}:function(){Object.defineProperties(this,v)},Object.defineProperty(i.prototype,"makeObservable",{value:c,writable:!0,configurable:!0,enumerable:!1});var p=i.prototype.clear,d=i.prototype.add,f=i.prototype["delete"],v={_dispatchEmptyArray:{value:[]},clear:{value:function(){var e,t=this.size;t&&this.dispatchBeforeOwnPropertyChange(u,t),this.dispatchesRangeChanges&&(e=this.toArray(),this.dispatchBeforeRangeChange(this._dispatchEmptyArray,e,0)),p.call(this),this.dispatchesRangeChanges&&this.dispatchRangeChange(this._dispatchEmptyArray,e,0),t&&this.dispatchOwnPropertyChange(u,0)},writable:!0,configurable:!0},add:{value:function(e){if(!this.has(e)){var t=this.size,n=[e];return this.dispatchBeforeOwnPropertyChange(u,t),this.dispatchesRangeChanges&&this.dispatchBeforeRangeChange(n,this._dispatchEmptyArray,t),d.call(this,e),this.dispatchesRangeChanges&&this.dispatchRangeChange(n,this._dispatchEmptyArray,t),this.dispatchOwnPropertyChange(u,t+1),!0}return!1},writable:!0,configurable:!0},"delete":{value:function(e,t){if(this.has(e)){var n=this.size;if(void 0===t){var r=this.values();for(t=0;r.next().value!==e;)t++}this.dispatchBeforeOwnPropertyChange(u,n);var i=[e];return this.dispatchesRangeChanges&&this.dispatchBeforeRangeChange(this._dispatchEmptyArray,i,t),f.call(this,e),this.dispatchesRangeChanges&&this.dispatchRangeChange(this._dispatchEmptyArray,i,t),this.dispatchOwnPropertyChange(u,n-1),!0}return!1}}},g=Object.create(i.prototype,v);Object.defineEach(o.prototype,a.prototype,!1,!0,!1,!0),Object.defineProperty(o.prototype,"makePropertyObservable",{value:function(){},writable:!0,configurable:!0,enumerable:!1}),Object.defineEach(o.prototype,s.prototype,!1,!0,!1,!0),Object.defineEach(o.prototype,l.prototype,!1,!0,!1,!0),Object.defineProperty(o,"_setupCollectionSet",{value:r,writable:!0,configurable:!0,enumerable:!1})}else r()}}),montageDefine("c2ad217","listen/property-changes",{dependencies:["../shim","../_map","../weak-map","./change-descriptor"],factory:function(e,t,n){function r(){throw new Error("This is an abstract interface. Mix it. Don't construct it")}function i(e,t,n,r){if(e&&e._current){var i,o,a,s,l,c=e.specificHandlerMethodName,h=e.genericHandlerMethodName,p=u;if(Array.isArray(e._current)){for(i=e.removeCurrentGostListenersIfNeeded(),a=0,s=i.length;a<s;a++)if((l=i[a])!==p){if(o=l[c]||l[h]||l,!o.call)throw new Error("No event listener for "+e.specificHandlerName+" or "+e.genericHandlerName+" or call on "+o);o.call(l,n,t,r)}}else{if(l=e._current,o=l[c]||l[h]||l,!o.call)throw new Error("No event listener for "+e.specificHandlerName+" or "+e.genericHandlerName+" or call on "+o);o.call(l,n,t,r)}}}Object.prototype.hasOwnProperty,n.exports=r,e("../shim");var o=e("../_map"),a=e("../weak-map"),s=e("./change-descriptor"),l=s.ObjectChangeDescriptor,u=s.ListenerGhost;r.debug=!0;var c=new a,h=new o;r.ObjectChangeDescriptor=function(){},r.prototype.getOwnPropertyChangeDescriptor=function(e){var t,n=c.get(this);if(n||(n=Object.create(null),c.set(this,n)),void 0===(t=n[e])){var r=h.get(e);return r||(r=String(e),r=r&&r[0].toUpperCase()+r.slice(1),h.set(e,r)),n[e]=new l(r)}return t},r.prototype.hasOwnPropertyChangeDescriptor=function(e){var t=c.get(this);return!(!t||e&&void 0===t[e])},r.prototype.addOwnPropertyChangeListener=function(e,t,n){this.makeObservable&&!this.isObservable&&this.makeObservable();var i=r.getOwnPropertyChangeDescriptor(this,e),o=n?i.willChangeListeners:i.changeListeners;r.makePropertyObservable(this,e),o._current?Array.isArray(o._current)?o._current.push(t):o._current=[o._current,t]:o._current=t;var a=this;return function(){r.removeOwnPropertyChangeListener(a,e,t,n),a=null}},r.prototype.addBeforeOwnPropertyChangeListener=function(e,t){return r.addOwnPropertyChangeListener(this,e,t,!0)},r.prototype.removeOwnPropertyChangeListener=function f(e,t,n){var i,o=r.getOwnPropertyChangeDescriptor(this,e);if(i=n?o._willChangeListeners:o._changeListeners,i&&i._current)if(i._current===t)i._current=null;else{var a=i._current.lastIndexOf(t);if(a===-1)throw new Error("Can't remove property change listener: does not exist: property name"+JSON.stringify(e));o.isActive?(i.ghostCount=i.ghostCount+1,i._current[a]=f.ListenerGhost):i._current.spliceOne(a)}},r.prototype.removeOwnPropertyChangeListener.ListenerGhost=u,r.prototype.removeBeforeOwnPropertyChangeListener=function(e,t){return r.removeOwnPropertyChangeListener(this,e,t,!0)},r.prototype.dispatchOwnPropertyChange=function v(e,t,n){var i,o=r.getOwnPropertyChangeDescriptor(this,e);if(!o.isActive){o.isActive=!0,i=n?o._willChangeListeners:o._changeListeners;try{v.dispatchEach(i,e,t,this)}finally{o.isActive=!1}}},r.prototype.dispatchOwnPropertyChange.dispatchEach=i,i.ListenerGhost=u,r.prototype.dispatchBeforeOwnPropertyChange=function(e,t){return r.dispatchOwnPropertyChange(this,e,t,!0)};var p=new a,d=(new a,{get:void 0,set:void 0,configurable:!0,enumerable:!1});r.prototype.makePropertyObservable=function(e){var t=p.get(this);if(!t||void 0===t.get(e)){if(!t){if(Array.isArray(this))return;if(!Object.isExtensible(this))throw new Error("Can't make property "+JSON.stringify(e)+" observable on "+this+" because object is not extensible");t=new o,p.set(this,t)}var n,r=this;do{if(n=Object.getOwnPropertyDescriptor(r,e))break;r=Object.getPrototypeOf(r)}while(r);if(n){if(!n.configurable)return;if(!n.writable&&!n.set)return}else n={value:void 0,enumerable:!0,writable:!0,configurable:!0};t.set(e,n),"value"in n?(d.get=function a(){return a.overriddenDescriptor.value},d.set=function s(e){var t,n,r=s.overriddenDescriptor;if(e!==r.value){if(!(n=(t=s.descriptor).isActive)){t.isActive=!0;try{s.dispatchEach(t._willChangeListeners,s.key,r.value,this)}finally{}}if(r.value=e,!n)try{s.dispatchEach(t._changeListeners,s.key,e,this)}finally{t.isActive=!1}}},d.set.dispatchEach=i,d.set.key=e,d.get.overriddenDescriptor=d.set.overriddenDescriptor=n,d.set.descriptor=c.get(this)[e],d.enumerable=n.enumerable,d.configurable=!0):(d.get=n.get,d.set=function l(){var t,n,r,i=l.overriddenGetter.call(this);if(1===arguments.length?l.overriddenSetter.call(this,arguments[0]):2===arguments.length?l.overriddenSetter.call(this,arguments[0],arguments[1]):l.overriddenSetter.apply(this,arguments),(r=l.overriddenGetter.call(this))!==i){if(t=l.descriptor,!(n=t.isActive)){t.isActive=!0;try{l.dispatchEach(t._willChangeListeners,e,i,this)}finally{}}if(!n)try{l.dispatchEach(t._changeListeners,e,r,this)}finally{t.isActive=!1}}},d.enumerable=n.enumerable,d.configurable=!0,d.set.dispatchEach=i,d.set.overriddenSetter=n.set,d.set.overriddenGetter=n.get,d.set.descriptor=c.get(this)[e]),Object.defineProperty(this,e,d)}},r.getOwnPropertyChangeDescriptor=function(e,t){return e.getOwnPropertyChangeDescriptor?e.getOwnPropertyChangeDescriptor(t):r.prototype.getOwnPropertyChangeDescriptor.call(e,t)},r.hasOwnPropertyChangeDescriptor=function(e,t){return e.hasOwnPropertyChangeDescriptor?e.hasOwnPropertyChangeDescriptor(t):r.prototype.hasOwnPropertyChangeDescriptor.call(e,t)},r.addOwnPropertyChangeListener=function(e,t,n,r){if(Object.isObject(e))return e.addOwnPropertyChangeListener?e.addOwnPropertyChangeListener(t,n,r):this.prototype.addOwnPropertyChangeListener.call(e,t,n,r)},r.removeOwnPropertyChangeListener=function(e,t,n,i){if(Object.isObject(e))return e.removeOwnPropertyChangeListener?e.removeOwnPropertyChangeListener(t,n,i):r.prototype.removeOwnPropertyChangeListener.call(e,t,n,i)},r.dispatchOwnPropertyChange=function(e,t,n,i){if(Object.isObject(e))return e.dispatchOwnPropertyChange?e.dispatchOwnPropertyChange(t,n,i):r.prototype.dispatchOwnPropertyChange.call(e,t,n,i)},r.addBeforeOwnPropertyChangeListener=function(e,t,n){return r.addOwnPropertyChangeListener(e,t,n,!0)},r.removeBeforeOwnPropertyChangeListener=function(e,t,n){return r.removeOwnPropertyChangeListener(e,t,n,!0)},r.dispatchBeforeOwnPropertyChange=function(e,t,n){return r.dispatchOwnPropertyChange(e,t,n,!0)},r.makePropertyObservable=function(e,t){return e.makePropertyObservable?e.makePropertyObservable(t):r.prototype.makePropertyObservable.call(e,t)}}}),montageDefine("c2ad217","shim-array",{dependencies:["./shim-function","./generic-collection","./generic-order","./weak-map"],factory:function(e,t,n){"use strict";function r(e,t){Object.defineProperty(Array.prototype,e,{value:t,writable:!0,configurable:!0,enumerable:!1})}function i(e,t){"undefined"!=typeof console&&"function"==typeof console.warn&&t!==!0&&p.hasOwnProperty(e)===!1&&(console.warn(e),
p[e]++)}function o(e,t,n){this.array=e,this.start=null==t?0:t,this.end=n}var a=(e("./shim-function"),e("./generic-collection")),s=e("./generic-order"),l=e("./weak-map");n.exports=Array;var u=Array.prototype.splice,c=Array.prototype.slice;Array.empty=[],Object.freeze&&Object.freeze(Array.empty),Array.nativeFrom=Array.from;var h="undefined"!=typeof Symbol;Array.from=function(e,t,n){if(h&&e&&("function"==typeof e[Symbol.iterator]||"function"==typeof t))return Array.nativeFrom(e,t,n);var r=[];return r.addEach(e),r},Array.unzip=function(e){for(var t=[],n=1/0,r=0;r<e.length;r++){var i=e[r];e[r]=i.toArray(),i.length<n&&(n=i.length)}for(var r=0;r<e.length;r++)for(var i=e[r],o=0;o<i.length;o++)o<n&&o in i&&(t[o]=t[o]||[],t[o][r]=i[o]);return t},r("addEach",a.prototype.addEach),r("deleteEach",a.prototype.deleteEach),r("toArray",a.prototype.toArray),r("toObject",a.prototype.toObject),r("all",a.prototype.all),r("any",a.prototype.any),r("min",a.prototype.min),r("max",a.prototype.max),r("sum",a.prototype.sum),r("average",a.prototype.average),r("only",a.prototype.only),r("flatten",a.prototype.flatten),r("zip",a.prototype.zip),r("enumerate",a.prototype.enumerate),r("group",a.prototype.group),r("sorted",a.prototype.sorted),r("reversed",a.prototype.reversed),r("constructClone",function(e){var t=new this.constructor;return t.addEach(e),t}),r("has",function(e,t){return this.findValue(e,t)!==-1}),r("get",function(e,t){if(+e!==e)throw new Error("Indicies must be numbers");return!e in this?t:this[e]}),r("set",function(e,t){return this[e]=t,!0}),r("add",function(e){return this.push(e),!0}),r("delete",function(e,t){var n=this.findValue(e,t);return n!==-1&&(this.spliceOne(n),!0)}),r("deleteAll",function(e,t){t=t||this.contentEquals||Object.equals;for(var n=0,r=0;r<this.length;)t(e,this[r])?(this.swap(r,1),n++):r++;return n}),Array.prototype.find||r("find",function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var r=arguments[1],i=0;i<n;){var o=t[i];if(e.call(r,o,i,t))return o;i++}});var p={},d=Object.getOwnPropertyDescriptor(Array.prototype,"find").value;r("find",function(e,t,n){return"function"==typeof arguments[0]&&this instanceof Array?d.apply(this,arguments):(i("Array#find usage is deprecated please use Array#findValue"),this.findValue.apply(this,arguments))}),r("findValue",function(e,t,n){if(n)throw new Error("Array#findValue does not support third argument: index");t=t||this.contentEquals||Object.equals;for(var n=0;n<this.length;n++)if(n in this&&t(e,this[n]))return n;return-1}),r("findLast",function(e,t){return i("Array#findLast function is deprecated please use Array#findLastValue instead."),this.findLastValue.apply(this,arguments)}),r("findLastValue",function(e,t){t=t||this.contentEquals||Object.equals;var n=this.length;do if(n--,n in this&&t(this[n],e))return n;while(n>0);return-1}),r("swap",function(e,t,n){var r,i,o,a,s;if(e>this.length&&(this.length=e),"undefined"!=typeof n){if(r=[e,t],Array.isArray(n)||(n=c.call(n)),o=0,i=n.length,i<1e3){for(o;o<i;o++)r[o+2]=n[o];return u.apply(this,r)}for(s=u.apply(this,r),o;o<i;){for(r=[e+o,0],a=2;a<1002&&o<i;a++,o++)r[a]=n[o];u.apply(this,r)}return s}return"undefined"!=typeof t?u.call(this,e,t):"undefined"!=typeof e?u.call(this,e):[]}),r("peek",function(){return this[0]}),r("poke",function(e){this.length>0&&(this[0]=e)}),r("peekBack",function(){if(this.length>0)return this[this.length-1]}),r("pokeBack",function(e){this.length>0&&(this[this.length-1]=e)}),r("one",function(){for(var e in this)if(Object.owns(this,e))return this[e]}),Array.prototype.clear||r("clear",function(){return this.length=0,this}),r("compare",function(e,t){t=t||Object.compare;var n,r,i,o,a;if(this===e)return 0;if(!e||!Array.isArray(e))return s.prototype.compare.call(this,e,t);for(r=this.length<e.length?this.length:e.length,n=0;n<r;n++)if(n in this){if(!(n in e))return-1;if(i=this[n],o=e[n],a=t(i,o))return a}else if(n in e)return 1;return this.length-e.length}),r("equals",function(e,t){t=t||Object.equals;var n,r,i=0,o=this.length;if(this===e)return!0;if(!e||!Array.isArray(e))return s.prototype.equals.call(this,e);if(o!==e.length)return!1;for(;i<o;++i)if(i in this){if(!(i in e))return!1;if(n=this[i],r=e[i],!t(n,r))return!1}else if(i in e)return!1;return!0}),r("clone",function(e,t){if(null==e)e=1/0;else if(0===e)return this;if(t=t||new l,t.has(this))return t.get(this);var n=new Array(this.length);t.set(this,n);for(var r in this)n[r]=Object.clone(this[r],e-1,t);return n}),r("iterate",function(e,t){return new o(this,e,t)}),void 0===Array.prototype.spliceOne&&r("spliceOne",function(e,t){var n=this.length;if(n)if(1===arguments.length){for(;e<n;)this[e]=this[e+1],e++;this.length--}else this[e]=t}),r("Iterator",o),o.prototype.__iterationObject=null,Object.defineProperty(o.prototype,"_iterationObject",{get:function(){return this.__iterationObject||(this.__iterationObject={done:!1,value:null})}}),o.prototype.next=function(){return this.start===(null==this.end?this.array.length:this.end)?(this._iterationObject.done=!0,this._iterationObject.value=void 0):this._iterationObject.value=this.array[this.start++],this._iterationObject}}}),montageDefine("c2ad217","shim-object",{dependencies:["./weak-map","./shim-function"],factory:function(e,t,n){"use strict";var r=e("./weak-map");e("./shim-function"),n.exports=Object,Object.empty=Object.freeze(Object.create(null)),Object.isObject=function(e){return Object(e)===e},Object.getValueOf=function(e){return e&&"function"==typeof e.valueOf&&(e=e.valueOf()),e};var i=new r;Object.hash=function(e){return e&&"function"==typeof e.hash?""+e.hash():Object(e)===e?(i.has(e)||i.set(e,Math.random().toString(36).slice(2)),i.get(e)):""+e};var o=Object.prototype.hasOwnProperty;Object.owns=function(e,t){return o.call(e,t)},Object.has=function(e,t){if("object"!=typeof e)throw new Error("Object.has can't accept non-object: "+typeof e);if(e&&"function"==typeof e.has)return e.has(t);if("string"==typeof t)return t in e&&e[t]!==Object.prototype[t];throw new Error("Key must be a string for Object.has on plain objects")},Object.get=function(e,t,n){if("object"!=typeof e)throw new Error("Object.get can't accept non-object: "+typeof e);return e&&"function"==typeof e.get?e.get(t,n):Object.has(e,t)?e[t]:n},Object.set=function(e,t,n){e&&"function"==typeof e.set?e.set(t,n):e[t]=n},Object.addEach=function(e,t,n){var r=3!==arguments.length||n;if(t)if("function"!=typeof t.forEach||t.hasOwnProperty("forEach"))if("number"==typeof t.length)for(var i=0;i<t.length;i++)e[i]=t[i];else for(var o,a=Object.keys(t),s=0;o=a[s];s++)!r&&Object.owns(e,o)||(e[o]=t[o]);else t.isMap===!0?t.forEach(function(t,n){e[n]=t}):t.forEach(function(t){e[t[0]]=t[1]});return e},Object.defineEach=function(e,t,n,r,i,o){var a=3!==arguments.length||n;if(t)if("function"!=typeof t.forEach||t.hasOwnProperty("forEach"))if("number"==typeof t.length)for(var s=0;s<t.length;s++)Object.defineProperty(e,s,{value:t[s],writable:o,configurable:r,enumerable:i});else for(var l,u=Object.keys(t),c=0;l=u[c];c++)!a&&Object.owns(e,l)||Object.defineProperty(e,l,{value:t[l],writable:o,configurable:r,enumerable:i});else t.isMap===!0?t.forEach(function(t,n){Object.defineProperty(e,n,{value:t,writable:o,configurable:r,enumerable:i})}):t.forEach(function(t){Object.defineProperty(e,t[0],{value:t[1],writable:o,configurable:r,enumerable:i})});return e},Object.forEach=function(e,t,n){for(var r,i=Object.keys(e),o=0;r=i[o];o++)t.call(n,e[r],r,e)},Object.map=function(e,t,n){for(var r,i=Object.keys(e),o=0,a=[];r=i[o];o++)a.push(t.call(n,e[r],r,e));return a},Object.values=function(e){return Object.map(e,Function.identity)},Object.concat=function(){for(var e={},t=0;t<arguments.length;t++)Object.addEach(e,arguments[t]);return e},Object.from=Object.concat,Object.is=function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t},Object.equals=function(e,t,n,i){if(n=n||Object.equals,e=Object.getValueOf(e),t=Object.getValueOf(t),e===t)return!0;if(Object.isObject(e)){if(i=i||new r,i.has(e))return!0;i.set(e,!0)}if(Object.isObject(e)&&"function"==typeof e.equals)return e.equals(t,n,i);if(Object.isObject(t)&&"function"==typeof t.equals)return t.equals(e,n,i);if(Object.isObject(e)&&Object.isObject(t)&&Object.getPrototypeOf(e)===Object.prototype&&Object.getPrototypeOf(t)===Object.prototype){for(var o in e)if(!n(e[o],t[o],n,i))return!1;for(var o in t)if(!(o in e&&n(t[o],e[o],n,i)))return!1;return!0}return e!==e&&t!==t||(!e||!t)&&e===t},Object.compare=function(e,t){if(e=Object.getValueOf(e),t=Object.getValueOf(t),e===t)return 0;var n=typeof e,r=typeof t;return"number"===n&&"number"===r?e-t:"string"===n&&"string"===r?e<t?-(1/0):1/0:e&&"function"==typeof e.compare?e.compare(t):t&&"function"==typeof t.compare?-t.compare(e):0},Object.clone=function(e,t,n){if(e=Object.getValueOf(e),n=n||new r,void 0===t)t=1/0;else if(0===t)return e;if(Object.isObject(e)){if(!n.has(e))if(e&&"function"==typeof e.clone)n.set(e,e.clone(t,n));else{var i=Object.getPrototypeOf(e);if(null!==i&&i!==Object.prototype)throw new Error("Can't clone "+e);var o=Object.create(i);n.set(e,o);for(var a in e)o[a]=Object.clone(e[a],t-1,n)}return n.get(e)}return e},Object.clear=function(e){if(e&&"function"==typeof e.clear)e.clear();else for(var t=Object.keys(e),n=t.length;n;)n--,delete e[t[n]];return e}}}),montageDefine("c2ad217","shim-function",{dependencies:[],factory:function(e,t,n){n.exports=Function,Function.noop=function(){},Function.identity=function(e){return e},Function.by=function(e,t){t=t||Object.compare,e=e||Function.identity;var n=function(n,r){return t(e(n),e(r))};return n.compare=t,n.by=e,n},Function.get=function(e){return function(t){return Object.get(t,e)}}}}),montageDefine("c2ad217","shim-regexp",{dependencies:[],factory:function(e,t,n){if(!RegExp.escape){var r=/[-[\]{}()*+?.\\^$|,#\s]/g;RegExp.escape=function(e){return e.replace(r,"\\$&")}}}}),montageDefine("c2ad217","_map",{dependencies:["./shim","./generic-collection","./_set","./generic-map"],factory:function(e,t,n){"use strict";var r,i,o,a=(e("./shim"),e("./generic-collection"));if(void 0!==global.Map&&"function"==typeof global.Set.prototype.values){r=n.exports=global.Map,i=r,r.Map=r;var s,l={}.__proto__===Object.prototype;s=l?function(){this.__proto__=g}:function(){Object.defineProperties(this,observableSetProperties)},Object.defineProperty(r.prototype,"makeObservable",{value:s,writable:!0,configurable:!0,enumerable:!1}),Object.defineProperty(r.prototype,"makePropertyObservable",{value:function(){},writable:!0,configurable:!0,enumerable:!1}),r.prototype.constructClone=function(e){return new this.constructor(e)},r.prototype.isMap=!0,r.prototype.addEach=function(e){if(e&&Object(e)===e)if("function"==typeof e.forEach)e.isMap===!0?e.forEach(function(e,t){this.set(t,e)},this):e.forEach(function(e){this.set(e[0],e[1])},this);else if("number"==typeof e.length)for(var t=0;t<e.length;t++)this.add(e[t],t);else Object.keys(e).forEach(function(t){this.set(t,e[t])},this);else if(e&&"number"==typeof e.length)for(var t=0;t<e.length;t++)this.add(e[t],t);return this},r.prototype.add=function(e,t){return this.set(t,e)},r.prototype.reduce=function(e,t){var n=arguments[2];return this.forEach(function(r,i,o){t=e.call(n,t,r,i,this)}),t},r.prototype.reduceRight=function(e,t){for(var n,r=arguments[2],i=this.keys(),o=this.size,a=new Array(this.size),s=0;n=i.next().value;)a[--o]=n;for(;s++<o;)t=e.call(r,t,this.get(a[s]),a[s],this);return t},r.prototype.equals=function(e,t){if(t=t||Object.equals,this===e)return!0;if(e&&"function"==typeof e.every)return e.size===this.size&&e.every(function(e,n){return t(this.get(n),e)},this);var n=Object.keys(e);return n.length===this.size&&Object.keys(e).every(function(n){return t(this.get(n),e[n])},this)};var u=function(e,t){return t};r.prototype.keysArray=function(){return this.map(u)};var c=function(e,t){return e};r.prototype.valuesArray=function(){return this.map(c)};var h=function(e,t){return[t,e]};r.prototype.entriesArray=function(){return this.map(h)},r.prototype.toJSON=function(){return this.entriesArray()},r.prototype.items=function(){return this.entriesArray()},r.from=function(e){var t=new this;return t.addEach(e),t},Object.defineProperty(r.prototype,"length",{get:function(){return this.size},enumerable:!0,configurable:!0});var p=r.prototype.clear,d=r.prototype.set,f=r.prototype["delete"],v={clear:{value:function(){var e;this.dispatchesMapChanges&&(this.forEach(function(e,t){this.dispatchBeforeMapChange(t,e)},this),e=this.keysArray()),p.call(this),this.dispatchesMapChanges&&e.forEach(function(e){this.dispatchMapChange(e)},this)},writable:!0,configurable:!0},set:{value:function(e,t){var n=this.get(e);return n?(this.dispatchesMapChanges&&this.dispatchBeforeMapChange(e,n),d.call(this,e,t),this.dispatchesMapChanges&&this.dispatchMapChange(e,t)):(this.dispatchesMapChanges&&this.dispatchBeforeMapChange(e,void 0),d.call(this,e,t),this.dispatchesMapChanges&&this.dispatchMapChange(e,t)),this},writable:!0,configurable:!0},"delete":{value:function(e){return!!this.has(e)&&(this.dispatchesMapChanges&&this.dispatchBeforeMapChange(e,this.get(e)),f.call(this,e),this.dispatchesMapChanges&&this.dispatchMapChange(e,void 0),!0)}}};Object.addEach(r.prototype,a.prototype,!1);var g=Object.create(r.prototype,v)}var m=e("./_set").CollectionsSet,_=e("./generic-map");o=r=function y(e,t,n,r){return this instanceof y?(t=t||Object.equals,n=n||Object.hash,r=r||Function.noop,this.contentEquals=t,this.contentHash=n,this.getDefault=r,this.store=new m((void 0),function(e,n){return t(e.key,n.key)},function(e){return n(e.key)}),this.length=0,void this.addEach(e)):new y(e,t,n,r)},r.Map=r,Object.addEach(r.prototype,a.prototype),Object.addEach(r.prototype,_.prototype),Object.defineProperty(r.prototype,"size",a._sizePropertyDescriptor),r.from=a.from,r.prototype.constructClone=function(e){return new this.constructor(e,this.contentEquals,this.contentHash,this.getDefault)},r.prototype.log=function(e,t,n,r){t=t||this.logNode,this.store.log(e,function(e,n,r){t(e.value.value,n,r)},n,r)},r.prototype.logNode=function(e,t){t(" key: "+e.key),t(" value: "+e.value)},i?(n.exports=i,i.CollectionsMap=o):n.exports=o}}),montageDefine("c2ad217","listen/map-changes",{dependencies:["../weak-map","../_map","./change-descriptor"],factory:function(e,t,n){"use strict";function r(){throw new Error("Can't construct. MapChanges is a mixin.")}function i(e){this.name=e,this.isActive=!1,this._willChangeListeners=null,this._changeListeners=null}function o(e){var t=f.get(e);return t||(t="handle",t+=e.slice(0,1).toUpperCase(),t+=e.slice(1),t+="MapChange",f.set(e,t)),this.specificHandlerMethodName=t,this}function a(e){var t=v.get(e);return t||(t="handle",t+=e.slice(0,1).toUpperCase(),t+=e.slice(1),t+="MapWillChange",v.set(e,t)),this.specificHandlerMethodName=t,this}var s=e("../weak-map"),l=e("../_map"),u=e("./change-descriptor"),c=u.ObjectChangeDescriptor,h=u.ChangeListenersRecord,p=u.ListenerGhost;n.exports=r;var d=(Object.prototype.hasOwnProperty,new s);i.prototype=new c,i.prototype.constructor=i,i.prototype.changeListenersRecordConstructor=o,i.prototype.willChangeListenersRecordConstructor=a;var f=new l;o.prototype=new h,o.prototype.constructor=o,o.prototype.genericHandlerMethodName="handleMapChange";var v=new l;a.prototype=new h,a.prototype.constructor=a,a.prototype.genericHandlerMethodName="handleMapWillChange",r.prototype.getAllMapChangeDescriptors=function(){return d.has(this)||d.set(this,new l),d.get(this)},r.prototype.getMapChangeDescriptor=function(e){var t=this.getAllMapChangeDescriptors();return e=e||"",t.has(e)||t.set(e,new i(e)),t.get(e)};var g=new s,m=function(){return g.get(this)},_=function(e){return g.set(this,e)},y="dispatchesMapChanges",b={get:m,set:_,configurable:!0,enumerable:!1};r.prototype.addMapChangeListener=function(e,t,n){!this.isObservable&&this.makeObservable&&this.makeObservable();var r,i=this.getMapChangeDescriptor(t);r=n?i.willChangeListeners:i.changeListeners,r._current?Array.isArray(r._current)?r._current.push(e):r._current=[r._current,e]:r._current=e,void 0===Object.getOwnPropertyDescriptor(this.__proto__||Object.getPrototypeOf(this),y)&&Object.defineProperty(this.__proto__||Object.getPrototypeOf(this),y,b),this.dispatchesMapChanges=!0;var o=this;return function(){o&&(o.removeMapChangeListener(e,t,n),o=null)}},r.prototype.removeMapChangeListener=function(e,t,n){var r,i=this.getMapChangeDescriptor(t);if(r=n?i.willChangeListeners:i.changeListeners,r._current)if(r._current===e)r._current=null;else{var o=r._current.lastIndexOf(e);if(o===-1)throw new Error("Can't remove map change listener: does not exist: token "+JSON.stringify(t));i.isActive?(r.ghostCount=r.ghostCount+1,r._current[o]=p):r._current.spliceOne(o)}},r.prototype.dispatchMapChange=function(e,t,n){var r=this.getAllMapChangeDescriptors(),i=p;r.forEach(function(r,o){if(!r.isActive){var a=n?r.willChangeListeners:r.changeListeners;if(a&&a._current){var s=a.specificHandlerMethodName;if(Array.isArray(a._current)){if(a._current.length){var l,u,c,h=a.removeCurrentGostListenersIfNeeded();r.isActive=!0;try{for(l=0,u=h.length;l<u;l++)if((c=h[l])!==i)if(c[s])c[s](t,e,this);else{if(!c.call)throw new Error("Handler "+c+" has no method "+s+" and is not callable");c.call(c,t,e,this)}}finally{r.isActive=!1}}}else{r.isActive=!0;try{if(c=a._current,c[s])c[s](t,e,this);else{if(!c.call)throw new Error("Handler "+c+" has no method "+s+" and is not callable");c.call(c,t,e,this)}}finally{r.isActive=!1}}}}},this)},r.prototype.addBeforeMapChangeListener=function(e,t){return this.addMapChangeListener(e,t,!0)},r.prototype.removeBeforeMapChangeListener=function(e,t){return this.removeMapChangeListener(e,t,!0)},r.prototype.dispatchBeforeMapChange=function(e,t){return this.dispatchMapChange(e,t,!0)}}}),montageDefine("c2ad217","_set",{dependencies:["./shim","./generic-collection","./generic-set","./_list","./_fast-set","./iterator"],factory:function(e,t,n){"use strict";var r,i,o=(e("./shim"),e("./generic-collection")),a=e("./generic-set");void 0!==global.Set&&"function"==typeof global.Set.prototype.values&&(r=n.exports=global.Set,r.Set=r,r.prototype.reduce=function(e,t){var n=arguments[2];return this.forEach(function(r){t=e.call(n,t,r,this)}),t},r.prototype.reduceRight=function(e,t){for(var n,r=arguments[2],i=this.values(),o=this.size,a=new Array(this.size),s=o;n=i.next().value;)a[--s]=n;for(;s<o;)t=e.call(r,t,a[s++],this);return t},r.prototype.equals=function(e,t){var n=this;return e&&"function"==typeof e.reduce&&this.size===(e.size||e.length)&&e.reduce(function(e,r){return e&&n.has(r,t)},!0)},r.prototype.constructClone=function(e){return new this.constructor(e,this.contentEquals,this.contentHash,this.getDefault)},r.prototype.toJSON=function(){return this.entriesArray()},r.prototype.one=function(){if(this.size>0)return this.values().next().value},r.prototype.pop=function(){if(this.size){for(var e,t,n=this.values();e=n.next().value;)t=e;return this["delete"](t,this.size-1),t}},r.prototype.shift=function(){if(this.size){var e=this.values().next().value;return this["delete"](e,0),e}},Object.defineProperty(r.prototype,"length",{get:function(){return this.size},enumerable:!0,configurable:!0}),r.from=function(e){var t=new this;return t.addEach(e),t},Object.addEach(r.prototype,o.prototype,!1),Object.addEach(r.prototype,a.prototype,!1));var s=e("./_list"),l=e("./_fast-set"),u=e("./iterator");i=function c(e,t,n,r){return c._init(c,this,e,t,n,r)},i._init=function(e,t,n,r,i,o){return t instanceof e?(r=r||Object.equals,i=i||Object.hash,o=o||Function.noop,t.contentEquals=r,t.contentHash=i,t.getDefault=o,t.order=new t.Order((void 0),r),t.store=new t.Store((void 0),function(e,t){return r(e.value,t.value)},function(e){return i(e.value)}),t.length=0,void t.addEach(n)):new e(n,r,i,o)},i.Set=i,i.CollectionsSet=i,Object.addEach(i.prototype,o.prototype),Object.addEach(i.prototype,a.prototype),i.from=o.from,Object.defineProperty(i.prototype,"size",o._sizePropertyDescriptor),i.prototype.Order=s,i.prototype.Store=l,i.prototype.constructClone=function(e){return new this.constructor(e,this.contentEquals,this.contentHash,this.getDefault)},i.prototype.has=function(e){var t=new this.order.Node(e);return this.store.has(t)},i.prototype.get=function(e,t){if(t)throw new Error("Set#get does not support second argument: equals");var n=new this.order.Node(e);return n=this.store.get(n),n?n.value:this.getDefault(e)},i.prototype.add=function(e){var t=new this.order.Node(e);return!this.store.has(t)&&(this.length,this.order.add(e),t=this.order.head.prev,this.store.add(t),this.length++,!0)},i.prototype["delete"]=function(e,t){if(t)throw new Error("Set#delete does not support second argument: equals");var n=new this.order.Node(e);return!!this.store.has(n)&&(n=this.store.get(n),this.store["delete"](n),this.order.splice(n,1),this.length--,!0)},i.prototype.pop=function(){if(this.length){var e=this.order.head.prev.value;return this["delete"](e),e}},i.prototype.shift=function(){if(this.length){var e=this.order.head.next.value;return this["delete"](e),e}},i.prototype.one=function(){if(this.length>0)return this.store.one().value},i.prototype.clear=function(){this.store.clear(),this.order.clear(),this.length=0},Object.defineProperty(i.prototype,"_clear",{value:i.prototype.clear}),i.prototype.reduce=function(e,t){var n=arguments[2],r=this.order,i=0;return r.reduce(function(t,r){return e.call(n,t,r,i++,this)},t,this)},i.prototype.reduceRight=function(e,t){var n=arguments[2],r=this.order,i=this.length-1;return r.reduceRight(function(t,r){return e.call(n,t,r,i--,this)},t,this)},i.prototype.iterate=function(){return this.order.iterate()},i.prototype.values=function(){return new u(this.valuesArray(),(!0))},i.prototype.log=function(){var e=this.store;return e.log.apply(e,arguments)},r?(r.prototype.valuesArray=a.prototype.valuesArray,r.prototype.entriesArray=a.prototype.entriesArray,n.exports=r,r.CollectionsSet=i):n.exports=i}}),montageDefine("c2ad217","listen/range-changes",{dependencies:["../weak-map","../_map","./change-descriptor"],factory:function(e,t,n){"use strict";function r(e){this.name=e,this.isActive=!1,this._willChangeListeners=null,this._changeListeners=null}function i(e){var t=f.get(e);return t||(t="handle",t+=e.slice(0,1).toUpperCase(),t+=e.slice(1),t+="RangeChange",f.set(e,t)),this.specificHandlerMethodName=t,this}function o(e){var t=v.get(e);return t||(t="handle",t+=e.slice(0,1).toUpperCase(),t+=e.slice(1),t+="RangeWillChange",v.set(e,t)),this.specificHandlerMethodName=t,this}function a(){throw new Error("Can't construct. RangeChanges is a mixin.")}var s=e("../weak-map"),l=e("../_map"),u=e("./change-descriptor"),c=u.ObjectChangeDescriptor,h=u.ChangeListenersRecord,p=u.ListenerGhost,d=new s;r.prototype=new c,r.prototype.constructor=r,r.prototype.changeListenersRecordConstructor=i,r.prototype.willChangeListenersRecordConstructor=o,Object.defineProperty(r.prototype,"active",{get:function(){return this._active||(this._active=this._current?this._current.slice():[])}});var f=new l;i.prototype=new h,i.prototype.constructor=i;var v=new l;o.prototype=new h,o.prototype.constructor=o,n.exports=a,a.prototype.getAllRangeChangeDescriptors=function(){return d.has(this)||d.set(this,new l),d.get(this)},a.prototype.getRangeChangeDescriptor=function(e){var t=this.getAllRangeChangeDescriptors();return e=e||"",t.has(e)||t.set(e,new r(e)),t.get(e)};var g=new s,m=function(){return g.get(this)},_=function(e){return g.set(this,e)},y="dispatchesRangeChanges",b={get:m,set:_,configurable:!0,enumerable:!1};a.prototype.addRangeChangeListener=function(e,t,n){!this.isObservable&&this.makeObservable&&this.makeObservable();var r,i=this.getRangeChangeDescriptor(t);r=n?i.willChangeListeners:i.changeListeners,r._current?Array.isArray(r._current)?r._current.push(e):r._current=[r._current,e]:r._current=e,void 0===Object.getOwnPropertyDescriptor(this.__proto__||Object.getPrototypeOf(this),y)&&Object.defineProperty(this.__proto__||Object.getPrototypeOf(this),y,b),this.dispatchesRangeChanges=!0;var o=this;return function(){o&&(o.removeRangeChangeListener(e,t,n),o=null)}},a.prototype.removeRangeChangeListener=function(e,t,n){var r,i=this.getRangeChangeDescriptor(t);if(r=n?i._willChangeListeners:i._changeListeners,r._current)if(r._current===e)r._current=null;else{var o=r._current.lastIndexOf(e);if(o===-1)throw new Error("Can't remove range change listener: does not exist: token "+JSON.stringify(t));i.isActive?(r.ghostCount=r.ghostCount+1,r._current[o]=p):r._current.spliceOne(o)}},a.prototype.dispatchRangeChange=function(e,t,n,r){var i,o,a,s,l,u,c,h,d=this.getAllRangeChangeDescriptors(),f=d.values();for(d.dispatchBeforeChange=r;i=f.next().value;){if(i.isActive)return;if(o=r?i._willChangeListeners:i._changeListeners,o&&o._current)if(a=o.specificHandlerMethodName,Array.isArray(o._current)){if(o._current.length){i.isActive=!0;try{for(c=o.removeCurrentGostListenersIfNeeded(),h=p,s=0,l=c.length;s<l;s++)if((u=c[s])!==h)if(u[a])u[a](e,t,n,this,r);else{if(!u.call)throw new Error("Handler "+u+" has no method "+a+" and is not callable");u.call(this,e,t,n,this,r)}}finally{i.isActive=!1}}}else{i.isActive=!0;try{if(u=o._current,u[a])u[a](e,t,n,this,r);else{if(!u.call)throw new Error("Handler "+u+" has no method "+a+" and is not callable");u.call(this,e,t,n,this,r)}}finally{i.isActive=!1}}}},a.prototype.addBeforeRangeChangeListener=function(e,t){return this.addRangeChangeListener(e,t,!0)},a.prototype.removeBeforeRangeChangeListener=function(e,t){return this.removeRangeChangeListener(e,t,!0)},a.prototype.dispatchBeforeRangeChange=function(e,t,n){return this.dispatchRangeChange(e,t,n,!0)}}}),montageDefine("c2ad217","list",{dependencies:["./_list","./listen/property-changes","./listen/range-changes"],factory:function(e,t,n){"use strict";function r(e,t,n){return i._init(r,this,e,t,n)}var i=e("./_list"),o=e("./listen/property-changes"),a=e("./listen/range-changes");n.exports=r,r.prototype=new i,r.prototype.constructor=r,r.List=r,r.from=i.from,Object.addEach(r.prototype,o.prototype),Object.addEach(r.prototype,a.prototype),r.prototype.makeObservable=function(){this.head.index=-1,this.updateIndexes(this.head.next,0),this.dispatchesRangeChanges=!0},Object.defineProperties(r.prototype,{_dispatchEmptyArray:{value:[]}}),r.prototype["delete"]=function(e,t){var n=this.findLast(e,t);if(n){if(this.dispatchesRangeChanges){var r=[],i=[e];this.dispatchBeforeRangeChange(r,i,n.index)}return n["delete"](),this.length--,this.dispatchesRangeChanges&&(this.updateIndexes(n.next,n.index),this.dispatchRangeChange(r,i,n.index)),!0}return!1},Object.defineProperty(r.prototype,"superClear",{value:i.prototype.clear,enumerable:!1,configurable:!0,writable:!0}),r.prototype.clear=function(){var e,t;this.dispatchesRangeChanges&&(t=this.toArray(),e=[],this.dispatchBeforeRangeChange(e,t,0)),this.superClear(),this.dispatchesRangeChanges&&this.dispatchRangeChange(e,t,0)},r.prototype.add=function(e){var t=new this.Node(e);return this.dispatchesRangeChanges&&(t.index=this.length,this.dispatchBeforeRangeChange([e],[],t.index)),this._addNode(t),this.dispatchesRangeChanges&&this.dispatchRangeChange([e],[],t.index),!0},Object.defineProperty(r.prototype,"superPush",{value:i.prototype.push,enumerable:!1,configurable:!0,writable:!0}),r.prototype.push=function(){if(this.dispatchesRangeChanges){var e=Array.prototype.slice.call(arguments),t=[],n=this.length;this.dispatchBeforeRangeChange(e,t,n);var r=this.head.prev}1===arguments.length?this.superPush.call(this,arguments[0]):2===arguments.length?this.superPush.call(this,arguments[0],arguments[1]):this.superPush.apply(this,arguments),this.dispatchesRangeChanges&&(this.updateIndexes(r.next,void 0===r.index?0:r.index+1),this.dispatchRangeChange(e,t,n))},Object.defineProperty(r.prototype,"superUnshift",{value:i.prototype.unshift,enumerable:!1,configurable:!0,writable:!0}),r.prototype.unshift=function(){if(this.dispatchesRangeChanges){var e=Array.prototype.slice.call(arguments),t=[];this.dispatchBeforeRangeChange(e,t,0)}1===arguments.length?this.superUnshift.call(this,arguments[0]):2===arguments.length?this.superUnshift.call(this,arguments[0],arguments[1]):this.superUnshift.apply(this,arguments),this.dispatchesRangeChanges&&(this.updateIndexes(this.head.next,0),this.dispatchRangeChange(e,t,0))},Object.defineProperty(r.prototype,"_beforePop",{value:function(e,t){var n;return this.dispatchesRangeChanges&&(n=[e],this.dispatchBeforeRangeChange(this._dispatchEmptyArray,n,t)),n},enumerable:!1,configurable:!0,writable:!0}),Object.defineProperty(r.prototype,"_afterPop",{value:function(e,t,n){this.dispatchesRangeChanges&&this.dispatchRangeChange(this._dispatchEmptyArray,n,t)},enumerable:!1,configurable:!0,writable:!0}),Object.defineProperty(r.prototype,"superPop",{value:i.prototype.pop,enumerable:!1,configurable:!0,writable:!0}),r.prototype.pop=function(){return this.superPop(this._beforePop,this._afterPop)},Object.defineProperty(r.prototype,"_beforeShift",{value:function(e,t){var n;return this.dispatchesRangeChanges&&(n=[e],this.dispatchBeforeRangeChange(this._dispatchEmptyArray,n,t)),n},enumerable:!1,configurable:!0,writable:!0}),Object.defineProperty(r.prototype,"_afterShift",{value:function(e,t,n){this.dispatchesRangeChanges&&(this.updateIndexes(this.head.next,t),this.dispatchRangeChange(this._dispatchEmptyArray,n,t))},enumerable:!1,configurable:!0,writable:!0}),Object.defineProperty(r.prototype,"superShift",{value:i.prototype.shift,enumerable:!1,configurable:!0,writable:!0}),r.prototype.shift=function(){return this.superShift(this._beforeShift,this._afterShift)},Object.defineProperty(r.prototype,"superSwap",{value:i.prototype.swap,enumerable:!1,configurable:!0,writable:!0}),r.prototype.swap=function(e,t,n){var r,i,o=function(e,t,n){this.dispatchesRangeChanges&&(r=e===this.head?this.length:e.prev===this.head?0:e.index,i=e.prev,this.dispatchBeforeRangeChange(t,n,r))},a=function(e,t,n){this.dispatchesRangeChanges&&(e===this.head?this.updateIndexes(this.head.next,0):this.updateIndexes(i.next,i.index+1),this.dispatchRangeChange(t,n,r))};return this.superSwap(e,t,n,o,a)},Object.defineProperty(r.prototype,"superReverse",{value:i.prototype.reverse,enumerable:!1,configurable:!0,writable:!0}),r.prototype.reverse=function(){if(this.dispatchesRangeChanges){var e=this.toArray(),t=e.reversed();this.dispatchBeforeRangeChange(t,e,0)}return this.superReverse(),this.dispatchesRangeChanges&&this.dispatchRangeChange(t,e,0),this}}}),montageDefine("c2ad217","fast-set",{dependencies:["./shim","./_fast-set","./listen/property-changes"],factory:function(e,t,n){"use strict";var r=(e("./shim"),e("./_fast-set")),i=e("./listen/property-changes");n.exports=r,Object.addEach(r.prototype,i.prototype)}}),montageDefine("c2ad217","listen/change-descriptor",{dependencies:["../_map"],factory:function(e,t,n){function r(e){var t=l.get(e);return t||(t="handle",t+=e,t+="Change",l.set(e,t)),this._current=null,this._current=null,this.specificHandlerMethodName=t,this}function i(e){var t=u.get(e);return t||(t="handle",t+=e,t+="WillChange",u.set(e,t)),this.specificHandlerMethodName=t,this}var o=e("../_map"),a=n.exports.ObjectChangeDescriptor=function(e){return this.name=e,this.isActive=!1,this._willChangeListeners=null,this._changeListeners=null,this};Object.defineProperties(a.prototype,{name:{value:null,writable:!0},isActive:{value:!1,writable:!0},_willChangeListeners:{value:null,writable:!0},willChangeListeners:{get:function(){return this._willChangeListeners||(this._willChangeListeners=new this.willChangeListenersRecordConstructor(this.name))}},_changeListeners:{value:null,writable:!0},changeListeners:{get:function(){return this._changeListeners||(this._changeListeners=new this.changeListenersRecordConstructor(this.name))}},changeListenersRecordConstructor:{value:r,writable:!0},willChangeListenersRecordConstructor:{value:i,writable:!0}});var s=n.exports.ListenerGhost=Object.create(null),l=new o;n.exports.ChangeListenersRecord=r,Object.defineProperties(r.prototype,{_current:{
value:null,writable:!0},current:{get:function(){return this._current},set:function(e){this._current=e}},ListenerGhost:{value:s,writable:!0},ghostCount:{value:0,writable:!0},maxListenerGhostRatio:{value:.3,writable:!0},listenerGhostFilter:{value:function(e){return e!==this.ListenerGhost}},removeCurrentGostListenersIfNeeded:{value:function(){return this._current&&this.ghostCount/this._current.length>this.maxListenerGhostRatio&&(this.ghostCount=0,this._current=this._current.filter(this.listenerGhostFilter,this)),this._current}},dispatchBeforeChange:{value:!1,writable:!0},genericHandlerMethodName:{value:"handlePropertyChange",writable:!0}}),n.exports.WillChangeListenersRecord=i;var u=new o;i.prototype=new r,i.prototype.constructor=i,i.prototype.genericHandlerMethodName="handlePropertyWillChange"}}),montageDefine("c2ad217","listen/array-changes",{dependencies:["../shim","./property-changes","./range-changes","./map-changes"],factory:function(e,t,n){e("../shim");var r,i=(Array.prototype.splice,Array.prototype.spliceOne),o=Array.prototype.slice,a=(Array.prototype.reverse,Array.prototype.sort),s=Array.prototype.swap,l=Array.prototype.push,u={}.__proto__===Object.prototype,c="length";r=u?function(){this.__proto__=p}:function(){Object.defineProperties(this,h)},Object.defineProperty(Array.prototype,"makeObservable",{value:r,writable:!0,configurable:!0,enumerable:!1}),Object.defineProperty(Array.prototype,"makePropertyObservable",{value:function(){},writable:!0,configurable:!0,enumerable:!1});var h={isObservable:{value:!0,writable:!0,configurable:!0},makeObservable:{value:Function.noop,writable:!0,configurable:!0},reverse:{value:function(){var e=this.constructClone(this);return e.reverse(),this.swap(0,this.length,e),this},writable:!0,configurable:!0},sort:{value:function(){var e,t;for(this.dispatchBeforeRangeChange(this,this,0),e=0,t=this.length;e<t;e++)d.dispatchBeforeOwnPropertyChange(this,e,this[e]),this.dispatchBeforeMapChange(e,this[e]);for(a.apply(this,arguments),e=0,t=this.length;e<t;e++)d.dispatchOwnPropertyChange(this,e,this[e]),this.dispatchMapChange(e,this[e]);return this.dispatchRangeChange(this,this,0),this},writable:!0,configurable:!0},_dispatchBeforeOwnPropertyChange:{value:function(e,t){for(var n=e,r=e+t;n<r;n++)d.dispatchBeforeOwnPropertyChange(this,n,this[n]),this.dispatchBeforeMapChange(n,this[n])}},_dispatchOwnPropertyChange:{value:function(e,t){for(var n=e,r=e+t;n<r;n++)this.dispatchOwnPropertyChange(n,this[n]),this.dispatchMapChange(n,this[n])}},swap:{value:function(e,t,n){var r,i,a,l;if(n?Array.isArray(n)||(n=o.call(n)):n=Array.empty,l=n.length,e<0)e=this.length+e;else if(e>this.length){var u=e-this.length,h=Array(u+l);for(i=0,a=u;i<l;i++,a++)i in n&&(h[a]=n[i]);n=h,l=n.length,e=this.length}var p;if(0===t){if(0===l)return[];p=Array.empty}else p=o.call(this,e,e+t);var f=l-p.length,v=this.length,g=Math.max(this.length+f,e+l),m=v>g?v:g;f&&d.dispatchBeforeOwnPropertyChange(this,c,this.length),this.dispatchBeforeRangeChange(n,p,e),0===f?this._dispatchBeforeOwnPropertyChange(e,l):(r=d.hasOwnPropertyChangeDescriptor(this))&&this._dispatchBeforeOwnPropertyChange(e,m-e),e>v&&(this.length=e);var _=s.call(this,e,t,n);return 0===f?this._dispatchOwnPropertyChange(e,l):r&&this._dispatchOwnPropertyChange(e,m-e),this.dispatchRangeChange(n,p,e),f&&this.dispatchOwnPropertyChange(c,this.length),_},writable:!0,configurable:!0},splice:{value:function(e,t){return e>this.length&&(e=this.length),this.swap.call(this,e,t,o.call(arguments,2))},writable:!0,configurable:!0},spliceOne:{value:function(e,t){var n,r,o,a,s,l=this.length,u=arguments.length;1===u?(d.dispatchBeforeOwnPropertyChange(this,c,this.length),o=this.length-1,n=Array.empty):(n=[t],o=this.length),r=[this[e]],a=l>o?l:o,this.dispatchBeforeRangeChange(n,r,e),2===u?this._dispatchBeforeOwnPropertyChange(e,1):(s=d.hasOwnPropertyChangeDescriptor(this))&&this._dispatchBeforeOwnPropertyChange(e,a-e),1===u?i.call(this,e):i.call(this,e,t),2===u?this._dispatchOwnPropertyChange(e,1):s&&this._dispatchOwnPropertyChange(e,a-e),this.dispatchRangeChange(n,r,e),1===u&&this.dispatchOwnPropertyChange(c,this.length)},writable:!0,configurable:!0},_setSwapBuffer:{get:function(){return this.__setSwapBuffer||Object.defineProperty(this,"__setSwapBuffer",{value:[],writable:!0,configurable:!0,enumerable:!1}).__setSwapBuffer},enumerable:!1},set:{value:function(e,t){var n,r,i,o,a=void 0!==typeof t,s=a?[]:Array.empty;return e>=this.length?(s[e-this.length]=t,n=e+1-this.length,i=this.length):(s[0]=t,n=0,i=e),r=0===n?[this[e]]:Array.empty,n>0&&d.dispatchBeforeOwnPropertyChange(this,c,this.length),this.dispatchBeforeRangeChange(s,r,i),0===n?this._dispatchBeforeOwnPropertyChange(i,1):(o=d.hasOwnPropertyChangeDescriptor(this))&&this._dispatchBeforeOwnPropertyChange(i,n),this[e]=t,0===n?this._dispatchOwnPropertyChange(i,1):o&&this._dispatchOwnPropertyChange(i,n),this.dispatchRangeChange(s,r,i),n&&this.dispatchOwnPropertyChange(c,this.length),!0},writable:!0,configurable:!0},shift:{value:function(){return this.splice(0,1)[0]},writable:!0,configurable:!0},pop:{value:function(){if(this.length)return this.splice(this.length-1,1)[0]},writable:!0,configurable:!0},push:{value:function(e){var t,n,r=this.length,i=arguments.length;t=1===i?[arguments[0]]:Array.apply(null,arguments),i>0&&(d.dispatchBeforeOwnPropertyChange(this,c,r),this.dispatchBeforeRangeChange(t,Array.empty,r),(n=d.hasOwnPropertyChangeDescriptor(this))&&this._dispatchBeforeOwnPropertyChange(r,i)),l.apply(this,arguments),i>0&&(n&&this._dispatchOwnPropertyChange(r,i),this.dispatchRangeChange(t,Array.empty,r),this.dispatchOwnPropertyChange(c,this.length))},writable:!0,configurable:!0},unshift:{value:function(e){if(1===arguments.length)return this.splice(0,0,e);var t=o.call(arguments);return this.swap(0,0,t)},writable:!0,configurable:!0},clear:{value:function(){return this.splice(0,this.length)},writable:!0,configurable:!0}},p=Object.create(Array.prototype,h);t.observableArrayProperties=h;var d=e("./property-changes"),f=e("./range-changes"),v=e("./map-changes");Object.defineEach(Array.prototype,d.prototype,!1,!0,!1,!0),Object.defineEach(Array.prototype,f.prototype,!1,!0,!1,!0),Object.defineEach(Array.prototype,v.prototype,!1,!0,!1,!0)}}),montageDefine("c2ad217","sorted-array",{dependencies:["./shim","./generic-collection","./listen/property-changes","./listen/range-changes"],factory:function(e,t,n){"use strict";function r(e,t,n,i){return this instanceof r?(Array.isArray(e)?(this.array=e,e=e.splice(0,e.length)):this.array=[],this.contentEquals=t||Object.equals,this.contentCompare=n||Object.compare,this.getDefault=i||Function.noop,this.length=0,void this.addEach(e)):new r(e,t,n,i)}function i(e,t,n){for(var r=0,i=e.length-1;r<=i;){var o=r+i>>1,a=n(t,e[o]);if(a>0)r=o+1;else{if(!(a<0))return o;i=o-1}}return-(r+1)}function o(e,t,n,r,i){for(var o=e,a=e;o>0&&0===r(n,t[o-1]);)o--;for(;a<t.length-1&&0===r(n,t[a+1]);)a++;return{start:o,end:a}}function a(e,t,n,r){var a=i(e,t,n);if(a<0)return-1;for(var s=o(a,e,t,n,r),l=s.start;l<=s.end;l++)if(r(t,e[l]))return l;return-1}function s(e,t,n,r){var a=i(e,t,n);if(a<0)return-1;for(var s=o(a,e,t,n,r),l=s.end;l>=s.start;l--)if(r(t,e[l]))return l;return-1}function l(e,t,n){var r=i(e,t,n);if(r<0)return-r-1;for(var o=e.length-1;r<o&&0===n(t,e[r+1]);)r++;return r}function u(e,t){"undefined"!=typeof console&&"function"==typeof console.warn&&t!==!0&&d.hasOwnProperty(e)===!1&&(console.warn(e),d[e]++)}n.exports=r;var c=(e("./shim"),e("./generic-collection")),h=e("./listen/property-changes"),p=e("./listen/range-changes");r.SortedArray=r,r.from=c.from,Object.addEach(r.prototype,c.prototype),Object.addEach(r.prototype,h.prototype),Object.addEach(r.prototype,p.prototype),r.prototype.isSorted=!0,r.prototype.constructClone=function(e){return new this.constructor(e,this.contentEquals,this.contentCompare,this.getDefault)},r.prototype.has=function(e,t){if(t)throw new Error("SortedSet#has does not support second argument: equals");var n=a(this.array,e,this.contentCompare,this.contentEquals);return n!==-1},r.prototype.get=function(e,t){if(t)throw new Error("SortedArray#get does not support second argument: equals");var n=a(this.array,e,this.contentCompare,this.contentEquals);return n!==-1?this.array[n]:this.getDefault(e)},r.prototype.add=function(e){var t=l(this.array,e,this.contentCompare);return this.dispatchesRangeChanges&&this.dispatchBeforeRangeChange([e],Array.empty,t),this.array.splice(t,0,e),this.length++,this.dispatchesRangeChanges&&this.dispatchRangeChange([e],Array.empty,t),!0},r.prototype["delete"]=function(e,t){if(t)throw new Error("SortedArray#delete does not support second argument: equals");var n=a(this.array,e,this.contentCompare,this.contentEquals);return n!==-1&&(this.dispatchesRangeChanges&&this.dispatchBeforeRangeChange(Array.empty,[e],n),this.array.spliceOne(n),this.length--,this.dispatchesRangeChanges&&this.dispatchRangeChange(Array.empty,[e],n),!0)},r.prototype.deleteAll=function(e,t){if(t){var n=this.array.deleteAll(e,t);return this.length-=n,n}var r=a(this.array,e,this.contentCompare,this.contentEquals);if(r!==-1){for(var i=r;this.contentEquals(e,this.array[i]);)i++;var o=this.slice(r,i);return this.dispatchesRangeChanges&&this.dispatchBeforeRangeChange(Array.empty,o,r),this.array.splice(r,o.length),this.length-=o.length,this.dispatchesRangeChanges&&this.dispatchRangeChange(Array.empty,o,r),o.length}return 0},r.prototype.indexOf=function(e){return a(this.array,e,this.contentCompare,this.contentEquals)},r.prototype.lastIndexOf=function(e){return s(this.array,e,this.contentCompare,this.contentEquals)};var d={};r.prototype.find=function(e,t,n){return u("This SortedArray#find usage is deprecated please use SortedArray#findValue"),this.findValue.apply(this,arguments)},r.prototype.findValue=function(e,t,n){if(t)throw new Error("SortedArray#findValue does not support second argument: equals");if(n)throw new Error("SortedArray#findValue does not support third argument: index");return a(this.array,e,this.contentCompare,this.contentEquals)},r.prototype.findLast=function(e,t,n){return u("This SortedArray#findLast usage is deprecated please use SortedArray#findLastValue"),this.findLastValue.apply(this,arguments)},r.prototype.findLastValue=function(e,t,n){if(t)throw new Error("SortedArray#findLastValue does not support second argument: equals");if(n)throw new Error("SortedArray#findLastValue does not support third argument: index");return s(this.array,e,this.contentCompare,this.contentEquals)},r.prototype.push=function(){this.addEach(arguments)},r.prototype.unshift=function(){this.addEach(arguments)},r.prototype.pop=function(){var e=this.array.pop();return this.length=this.array.length,e},r.prototype.shift=function(){var e=this.array.shift();return this.length=this.array.length,e},r.prototype.slice=function(){return this.array.slice.apply(this.array,arguments)},r.prototype.splice=function(e,t){return this.swap(e,t,Array.prototype.slice.call(arguments,2))},r.prototype.swap=function(e,t,n){if(void 0===e&&void 0===t)return Array.empty;e=e||0,e<0&&(e+=this.length),void 0===t&&(t=1/0);var r=this.slice(e,e+t);return this.dispatchesRangeChanges&&this.dispatchBeforeRangeChange(n,r,e),this.array.splice(e,t),this.length-=r.length,this.dispatchesRangeChanges&&this.dispatchRangeChange(Array.empty,r,e),this.addEach(n),r},r.prototype.reduce=function(e,t){var n=arguments[2];return this.array.reduce(function(t,r,i){return e.call(n,t,r,i,this)},t,this)},r.prototype.reduceRight=function(){var e=arguments[2];return this.array.reduceRight(function(t,n,r){return callback.call(e,t,n,r,this)},basis,this)},r.prototype.min=function(){if(this.length)return this.array[0]},r.prototype.max=function(){if(this.length)return this.array[this.length-1]},r.prototype.one=function(){return this.array.one()},r.prototype.clear=function(){var e;this.dispatchesRangeChanges&&(e=this.array.slice(),this.dispatchBeforeRangeChange(Array.empty,e,0)),this.length=0,this.array.clear(),this.dispatchesRangeChanges&&this.dispatchRangeChange(Array.empty,e,0)},r.prototype.equals=function(e,t){return this.array.equals(e,t)},r.prototype.compare=function(e,t){return this.array.compare(e,t)},r.prototype.iterate=function(e,t){return new this.Iterator(this.array,e,t)},r.prototype.toJSON=function(){return this.toArray()},r.prototype.Iterator=Array.prototype.Iterator}}),montageDefine("c2ad217","sorted-set",{dependencies:["./shim","./generic-collection","./generic-set","./listen/property-changes","./listen/range-changes","./tree-log"],factory:function(e,t,n){"use strict";function r(e,t,n,i){return this instanceof r?(this.contentEquals=t||Object.equals,this.contentCompare=n||Object.compare,this.getDefault=i||Function.noop,this.root=null,this.length=0,void this.addEach(e)):new r(e,t,n,i)}function i(e){this.value=e,this.left=null,this.right=null,this.length=1}function o(e,t,n){if(this.set=e,this.prev=null,this.end=n,t){var r=this.set.findLeastGreaterThanOrEqual(t);r&&(this.set.splay(r.value),this.prev=r.getPrevious())}}n.exports=r;var a=(e("./shim"),e("./generic-collection")),s=e("./generic-set"),l=e("./listen/property-changes"),u=e("./listen/range-changes"),c=e("./tree-log");r.SortedSet=r,Object.addEach(r.prototype,a.prototype),Object.addEach(r.prototype,s.prototype),Object.addEach(r.prototype,l.prototype),Object.addEach(r.prototype,u.prototype),Object.defineProperty(r.prototype,"size",a._sizePropertyDescriptor),r.from=a.from,r.prototype.isSorted=!0,r.prototype.constructClone=function(e){return new this.constructor(e,this.contentEquals,this.contentCompare,this.getDefault)},r.prototype.has=function(e,t){if(t)throw new Error("SortedSet#has does not support second argument: equals");return!!this.root&&(this.splay(e),this.contentEquals(e,this.root.value))},r.prototype.get=function(e,t){if(t)throw new Error("SortedSet#get does not support second argument: equals");return this.root&&(this.splay(e),this.contentEquals(e,this.root.value))?this.root.value:this.getDefault(e)},r.prototype.add=function(e){var t=new this.Node(e);if(!this.root)return this.dispatchesRangeChanges&&this.dispatchBeforeRangeChange([e],[],0),this.root=t,this.length++,this.dispatchesRangeChanges&&this.dispatchRangeChange([e],[],0),!0;if(this.splay(e),!this.contentEquals(e,this.root.value)){var n=this.contentCompare(e,this.root.value);if(0===n)throw new Error("SortedSet cannot contain incomparable but inequal values: "+e+" and "+this.root.value);return this.dispatchesRangeChanges&&this.dispatchBeforeRangeChange([e],[],this.root.index),n<0?(t.right=this.root,t.left=this.root.left,this.root.left=null,this.root.touch()):(t.left=this.root,t.right=this.root.right,this.root.right=null,this.root.touch()),t.touch(),this.root=t,this.length++,this.dispatchesRangeChanges&&this.dispatchRangeChange([e],[],this.root.index),!0}return!1},r.prototype["delete"]=function(e,t){if(t)throw new Error("SortedSet#delete does not support second argument: equals");if(this.root&&(this.splay(e),this.contentEquals(e,this.root.value))){var n=this.root.index;if(this.dispatchesRangeChanges&&this.dispatchBeforeRangeChange([],[e],n),this.root.left){var r=this.root.right;this.root=this.root.left,this.splay(e),this.root.right=r}else this.root=this.root.right;return this.length--,this.root&&this.root.touch(),this.dispatchesRangeChanges&&this.dispatchRangeChange([],[e],n),!0}return!1},r.prototype.indexOf=function(e,t){if(t)throw new Error("SortedSet#indexOf does not support second argument: startIndex");return this.root&&(this.splay(e),this.contentEquals(e,this.root.value))?this.root.index:-1},r.prototype.find=function(e,t,n){if(t)throw new Error("SortedSet#find does not support second argument: equals");if(n)throw new Error("SortedSet#find does not support third argument: index");if(this.root&&(this.splay(e),this.contentEquals(e,this.root.value)))return this.root},r.prototype.findGreatest=function(e){if(this.root){for(e=e||this.root;e.right;)e=e.right;return e}},r.prototype.findLeast=function(e){if(this.root){for(e=e||this.root;e.left;)e=e.left;return e}},r.prototype.findGreatestLessThanOrEqual=function(e){if(this.root)return this.splay(e),this.contentCompare(this.root.value,e)>0?this.root.getPrevious():this.root},r.prototype.findGreatestLessThan=function(e){if(this.root)return this.splay(e),this.contentCompare(this.root.value,e)>=0?this.root.getPrevious():this.root},r.prototype.findLeastGreaterThanOrEqual=function(e){if(this.root)return this.splay(e),this.contentCompare(this.root.value,e)>=0?this.root:this.root.getNext()},r.prototype.findLeastGreaterThan=function(e){if(this.root)return this.splay(e),this.contentCompare(this.root.value,e)<=0?this.root.getNext():this.root},r.prototype.pop=function(){if(this.root){var e=this.findGreatest();return this["delete"](e.value),e.value}},r.prototype.shift=function(){if(this.root){var e=this.findLeast();return this["delete"](e.value),e.value}},r.prototype.push=function(){this.addEach(arguments)},r.prototype.unshift=function(){this.addEach(arguments)},r.prototype.slice=function(e,t){e=e||0,t=t||this.length,e<0&&(e+=this.length),t<0&&(t+=this.length);var n=[];if(this.root)for(this.splayIndex(e);this.root.index<t&&(n.push(this.root.value),this.root.right);)this.splay(this.root.getNext().value);return n},r.prototype.splice=function(e,t){return this.swap(e,t,Array.prototype.slice.call(arguments,2))},r.prototype.swap=function(e,t,n){if(void 0===e&&void 0===t)return[];e=e||0,e<0&&(e+=this.length),void 0===t&&(t=1/0);var r=[];if(this.root){this.splayIndex(e);for(var i=0;i<t;i++){r.push(this.root.value);var o=this.root.getNext();if(this["delete"](this.root.value),!o)break;this.splay(o.value)}}return this.addEach(n),r},r.prototype.splay=function(e){var t,n,r,o,a,s;if(this.root){for(t=n=r=new this.Node,s=new this.Node,a=this.root;;){var l=this.contentCompare(e,a.value);if(l<0){if(!a.left)break;if(this.contentCompare(e,a.left.value)<0&&(o=a.left,a.left=o.right,a.touch(),o.right=a,o.touch(),a=o,!a.left))break;o=new i,o.right=a,o.left=s.left,s.left=o,r.left=a,r.touch(),r=a,a=a.left}else{if(!(l>0))break;if(!a.right)break;if(this.contentCompare(e,a.right.value)>0&&(o=a.right,a.right=o.left,a.touch(),o.left=a,o.touch(),a=o,!a.right))break;o=new i,o.left=a,o.right=s.right,s.right=o,n.right=a,n.touch(),n=a,a=a.right}}for(n.right=a.left,n.touch(),r.left=a.right,r.touch(),a.left=t.right,a.right=t.left;s.left;)s.left.right.touch(),s.left=s.left.left;for(;s.right;)s.right.left.touch(),s.right=s.right.right;a.touch(),this.root=a}},r.prototype.splayIndex=function(e){if(this.root){for(var t=this.root,n=this.root.index;n!==e;)if(n>e&&t.left)t=t.left,n-=1+(t.right?t.right.length:0);else{if(!(n<e&&t.right))break;t=t.right,n+=1+(t.left?t.left.length:0)}return this.splay(t.value),this.root.index===e}return!1},r.prototype.reduce=function(e,t,n){return this.root&&(t=this.root.reduce(e,t,0,n,this)),t},r.prototype.reduceRight=function(e,t,n){return this.root&&(t=this.root.reduceRight(e,t,this.length-1,n,this)),t},r.prototype.min=function(e){var t=this.findLeast(e);if(t)return t.value},r.prototype.max=function(e){var t=this.findGreatest(e);if(t)return t.value},r.prototype.one=function(){return this.min()},r.prototype.clear=function(){var e;this.dispatchesRangeChanges&&(e=this.toArray(),this.dispatchBeforeRangeChange([],e,0)),this.root=null,this.length=0,this.dispatchesRangeChanges&&this.dispatchRangeChange([],e,0)},r.prototype.iterate=function(e,t){return new this.Iterator(this,e,t)},r.prototype.Iterator=o,r.prototype.summary=function(){return this.root?this.root.summary():"()"},r.prototype.log=function(e,t,n,r){e=e||c.unicodeRound,t=t||this.logNode,n||(n=console.log,r=console),n=n.bind(r),this.root&&this.root.log(e,t,n,n)},r.prototype.logNode=function(e,t,n){t(" "+e.value)},r.logCharsets=c,r.prototype.Node=i,i.prototype.reduce=function(e,t,n,r,i,o){if(o=o||0,this.left){var a=this.left.length;t=this.left.reduce(e,t,n,r,i,o+1),n+=a}return t=e.call(r,t,this.value,n,i,this,o),n+=1,this.right&&(t=this.right.reduce(e,t,n,r,i,o+1)),t},i.prototype.reduceRight=function(e,t,n,r,i,o){return o=o||0,this.right&&(t=this.right.reduceRight(e,t,n,r,i,o+1),n-=this.right.length),t=e.call(r,t,this.value,this.value,i,this,o),n-=1,this.left&&(t=this.left.reduceRight(e,t,n,r,i,o+1)),t},i.prototype.touch=function(){this.length=1+(this.left?this.left.length:0)+(this.right?this.right.length:0),this.index=this.left?this.left.length:0},i.prototype.checkIntegrity=function(){var e=1;if(e+=this.left?this.left.checkIntegrity():0,e+=this.right?this.right.checkIntegrity():0,this.length!==e)throw new Error("Integrity check failed: "+this.summary());return e},i.prototype.getNext=function(){var e=this;if(e.right){for(e=e.right;e.left;)e=e.left;return e}},i.prototype.getPrevious=function(){var e=this;if(e.left){for(e=e.left;e.right;)e=e.right;return e}},i.prototype.summary=function(){var e=this.value||"-";return e+=" <"+this.length,this.left||this.right?"("+e+" "+(this.left?this.left.summary():"()")+", "+(this.right?this.right.summary():"()")+")":"("+e+")"},i.prototype.log=function(e,t,n,r){var i,o=this;i=this.left&&this.right?e.intersection:this.left?e.branchUp:this.right?e.branchDown:e.through;var a;this.left&&this.left.log(e,t,function(t){a?r(e.strafe+" "+t):(a=!0,r(e.fromBelow+e.through+t))},function(e){r("  "+e)});var s;t(this,function(t){s?n((o.right?e.strafe:" ")+t):(s=!0,n(i+t))},function(t){r((o.left?e.strafe:" ")+t)});var l;this.right&&this.right.log(e,t,function(t){l?n("  "+t):(l=!0,n(e.fromAbove+e.through+t))},function(t){n(e.strafe+" "+t)})},o.prototype.__iterationObject=null,Object.defineProperty(o.prototype,"_iterationObject",{get:function(){return this.__iterationObject||(this.__iterationObject={done:!1,value:null})}}),o.prototype.next=function(){var e;return e=this.prev?this.set.findLeastGreaterThan(this.prev.value):this.set.findLeast(),e?void 0!==this.end&&this.set.contentCompare(e.value,this.end)>=0?(this._iterationObject.done=!0,this._iterationObject.value=void 0):(this.prev=e,this._iterationObject.value=e.value):(this._iterationObject.done=!0,this._iterationObject.value=void 0),this._iterationObject}}}),montageDefine("c2ad217","heap",{dependencies:["./listen/array-changes","./shim","./generic-collection","./listen/map-changes","./listen/range-changes","./listen/property-changes"],factory:function(e,t,n){function r(e,t,n){return this instanceof r?(this.contentEquals=t||Object.equals,this.contentCompare=n||Object.compare,this.content=[],this.length=0,void this.addEach(e)):new r(e,t,n)}var i=(e("./listen/array-changes"),e("./shim"),e("./generic-collection")),o=e("./listen/map-changes"),a=e("./listen/range-changes"),s=e("./listen/property-changes");n.exports=r,r.Heap=r,Object.addEach(r.prototype,i.prototype),Object.addEach(r.prototype,s.prototype),Object.addEach(r.prototype,a.prototype),Object.addEach(r.prototype,o.prototype),r.from=i.from,r.prototype.constructClone=function(e){return new this.constructor(e,this.contentEquals,this.contentCompare)},r.prototype.push=function(e){this.content.push(e),this["float"](this.content.length-1),this.length++},r.prototype.pop=function(){var e=this.content[0],t=this.content.pop();return this.content.length>0&&(this.content.set(0,t),this.sink(0)),this.length--,e},r.prototype.add=function(e){this.push(e)},r.prototype.indexOf=function(e){for(var t=0;t<this.length;t++)if(this.contentEquals(this.content[t],e))return t;return-1},r.prototype["delete"]=function(e,t){if(t)throw new Error("Heap#delete does not support second argument: equals");var n=this.indexOf(e);if(n===-1)return!1;var r=this.content.pop();if(this.length=this.content.length,n===this.content.length)return!0;this.content.set(n,r);var i=this.contentCompare(r,e);return i>0?this["float"](n):i<0&&this.sink(n),!0},r.prototype.peek=function(){if(this.length)return this.content[0]},r.prototype.max=function(){return this.peek()},r.prototype.one=function(){return this.peek()},r.prototype["float"]=function(e){for(var t=this.content[e];e>0;){var n=Math.floor((e+1)/2)-1,r=this.content[n];if(!(this.contentCompare(r,t)<0))break;this.content.set(n,t),this.content.set(e,r),e=n}},r.prototype.sink=function(e){for(var t,n,r,i,o,a,s=this.content.length,l=this.content[e];;){if(i=2*(e+1),r=i-1,a=!1,r<s){var t=this.content[r],u=this.contentCompare(t,l);u>0&&(o=r,a=!0)}if(i<s){var n=this.content[i],u=this.contentCompare(n,a?t:l);u>0&&(o=i,a=!0)}if(!a)break;this.content.set(e,this.content[o]),this.content.set(o,l),e=o}},r.prototype.clear=function(){this.content.clear(),this.length=0},r.prototype.reduce=function(e,t){var n=arguments[2];return this.content.reduce(function(t,r,i){return e.call(n,t,r,i,this)},t,this)},r.prototype.reduceRight=function(e,t){var n=arguments[2];return this.content.reduceRight(function(t,r,i){return e.call(n,t,r,i,this)},t,this)},r.prototype.toJSON=function(){return this.toArray()},r.prototype.makeObservable=function(){this.content.addRangeChangeListener(this,"content"),this.content.addBeforeRangeChangeListener(this,"content"),this.content.addMapChangeListener(this,"content"),this.content.addBeforeMapChangeListener(this,"content")},r.prototype.handleContentRangeChange=function(e,t,n){this.dispatchRangeChange(e,t,n)},r.prototype.handleContentRangeWillChange=function(e,t,n){this.dispatchBeforeRangeChange(e,t,n)},r.prototype.handleContentMapChange=function(e,t){this.dispatchMapChange(t,e)},r.prototype.handleContentMapWillChange=function(e,t){this.dispatchBeforeMapChange(t,e)}}}),montageDefine("c2ad217","generic-collection",{dependencies:["./shim-array"],factory:function(e,t,n){"use strict";function r(){throw new Error("Can't construct. GenericCollection is a mixin.")}n.exports=r;var i=global.DOMTokenList||function(){};r.EmptyArray=Object.freeze([]),r.prototype.addEach=function(e,t,n){if(e&&(e instanceof Array||e instanceof i||e instanceof String))if(t)for(var r=0;r<e.length;r++)this.add(t.call(n,e[r]),r);else for(var r=0;r<e.length;r++)this.add(e[r],r);else if(e&&Object(e)===e)if("function"==typeof e.forEach)t?e.map(t,n).forEach(this.add,this):e.forEach(this.add,this);else if("function"==typeof e.next){var o,r=0;if(t)for(;o=e.next().value;)this.add(t.call(n,o),r++);else for(;o=e.next().value;)this.add(o,r++)}else if("number"==typeof e.length)if(t)for(var r=0;r<e.length;r++)this.add(t.call(n,e[r]),r);else for(var r=0;r<e.length;r++)this.add(e[r],r);else t?Object.keys(e).forEach(function(r){this.add(t.call(n,e[r]),r)},this):Object.keys(e).forEach(function(t){this.add(e[t],t)},this);return this},r.prototype.deleteEach=function(e,t){return e.forEach(function(e){this["delete"](e,t)},this),this},r.prototype.forEach=function(e){var t=arguments[1];return this.reduce(function(n,r,i,o,a){e.call(t,r,i,o,a)},void 0)},r.prototype.map=function(e){var t=arguments[1],n=[];return this.reduce(function(r,i,o,a,s){n.push(e.call(t,i,o,a,s))},void 0),n},r.prototype.enumerate=function(e){null==e&&(e=0);var t=[];return this.reduce(function(n,r){t.push([e++,r])},void 0),t},r.prototype.group=function(e,t,n){n=n||Object.equals;var r=[],i=[];return this.forEach(function(o,a,s){var l,a=e.call(t,o,a,s),u=i.indexOf(a,n);u===-1?(l=[],r.push([a,l]),i.push(a)):l=r[u][1],l.push(o)}),r},r.prototype.toArray=function(){return this.map(Function.identity)},r.prototype.toObject=function(){var e={};return this.reduce(function(t,n,r){e[r]=n},void 0),e},r.from=function(){return this.apply(this,arguments)},r.prototype.filter=function(e){var t=arguments[1],n=this.constructClone();return this.reduce(function(r,i,o,a,s){e.call(t,i,o,a,s)&&n.add(i,o)},void 0),n},r.prototype.every=function(e){var t=arguments[1];return this.reduce(function(n,r,i,o,a){return n&&e.call(t,r,i,o,a)},!0)},r.prototype.some=function(e){var t=arguments[1];return this.reduce(function(n,r,i,o,a){return n||e.call(t,r,i,o,a)},!1)},r.prototype.all=function(){return this.every(Boolean)},r.prototype.any=function(){return this.some(Boolean)},r.prototype.min=function(e){e=e||this.contentCompare||Object.compare;var t=!0;return this.reduce(function(n,r){return t?(t=!1,r):e(r,n)<0?r:n},void 0)},r.prototype.max=function(e){e=e||this.contentCompare||Object.compare;var t=!0;return this.reduce(function(n,r){return t?(t=!1,r):e(r,n)>0?r:n},void 0)},r.prototype.sum=function(e){return e=void 0===e?0:e,this.reduce(function(e,t){return e+t},e)},r.prototype.average=function(e){var t=void 0===e?0:e,n=void 0===e?0:e;return this.reduce(function(e,r){t+=r,n+=1},void 0),t/n},r.prototype.concat=function(){for(var e=this.constructClone(this),t=0;t<arguments.length;t++)e.addEach(arguments[t]);return e},r.prototype.flatten=function(){var e=this;return this.reduce(function(t,n){return n.forEach(function(e){this.push(e)},t,e),t},[])},r.prototype.zip=function(){var e=Array.prototype.slice.call(arguments);return e.unshift(this),Array.unzip(e)},r.prototype.join=function(e){return this.reduce(function(t,n){return void 0===t?n:t+e+n},void 0)},r.prototype.sorted=function(e,t,n){return e=e||this.contentCompare||Object.compare,e.by?(t=e.by,e=e.compare||this.contentCompare||Object.compare):t=t||Function.identity,void 0===n&&(n=1),this.map(function(e){return{by:t(e),value:e}}).sort(function(t,r){return e(t.by,r.by)*n}).map(function(e){return e.value})},r.prototype.reversed=function(){return this.constructClone(this).reverse()},r.prototype.clone=function(e,t){if(void 0===e)e=1/0;else if(0===e)return this;var n=this.constructClone();return this.forEach(function(r,i){n.add(Object.clone(r,e-1,t),i)},this),n},r.prototype.only=function(){if(1===this.length)return this.one()},r.prototype.iterator=function(){return this.iterate.apply(this,arguments)},r._sizePropertyDescriptor={get:function(){return this.length},enumerable:!1,configurable:!0},Object.defineProperty(r.prototype,"size",r._sizePropertyDescriptor),e("./shim-array")}}),montageDefine("c2ad217","generic-order",{dependencies:["./shim-object"],factory:function(e,t,n){function r(){throw new Error("Can't construct. GenericOrder is a mixin.")}var i=e("./shim-object");n.exports=r,r.prototype.equals=function(e,t){return t=t||this.contentEquals||i.equals,this===e||!!e&&(this.length===e.length&&this.zip(e).every(function(e){return t(e[0],e[1])}))},r.prototype.compare=function(e,t){if(t=t||this.contentCompare||i.compare,this===e)return 0;if(!e)return 1;var n=Math.min(this.length,e.length),r=this.zip(e).reduce(function(e,r,i){return 0===e?i>=n?e:t(r[0],r[1]):e},0);return 0===r?this.length-e.length:r},r.prototype.toJSON=function(){return this.toArray()}}}),montageDefine("c2ad217","generic-map",{dependencies:["./shim-object","./iterator"],factory:function(e,t,n){"use strict";function r(){throw new Error("Can't construct. GenericMap is a mixin.")}function i(e,t){this.key=e,this.value=t}var o=e("./shim-object"),a=e("./iterator");n.exports=r,r.prototype.isMap=!0,r.prototype.addEach=function(e){var t;if(e&&o(e)===e)if("function"==typeof e.forEach)e.isMap===!0?e.forEach(function(e,t){this.set(t,e)},this):e.forEach(function(e){this.set(e[0],e[1])},this);else if("number"==typeof e.length)for(t=0;t<e.length;t++)this.add(e[t],t);else o.keys(e).forEach(function(t){this.set(t,e[t])},this);else if(e&&"number"==typeof e.length)for(t=0;t<e.length;t++)this.add(e[t],t);return this},r.prototype.get=function(e,t){var n=this.store.get(new this.Item(e));return n?n.value:arguments.length>1?(console.log("Use of a second argument as default value is deprecated to match standards"),t):this.getDefault(e)},r.prototype.set=function(e,t){var n=new this.Item(e,t),r=this.store.get(n),i=!1;return r?(this.dispatchesMapChanges&&this.dispatchBeforeMapChange(e,r.value),r.value=t,this.dispatchesMapChanges&&this.dispatchMapChange(e,t)):(this.dispatchesMapChanges&&this.dispatchBeforeMapChange(e,void 0),this.store.add(n)&&(this.length++,i=!0),this.dispatchesMapChanges&&this.dispatchMapChange(e,t)),this},r.prototype.add=function(e,t){return this.set(t,e)},r.prototype.has=function(e){return this.store.has(new this.Item(e))},r.prototype["delete"]=function(e){var t=new this.Item(e);if(this.store.has(t)){var n=this.store.get(t).value;return this.dispatchesMapChanges&&this.dispatchBeforeMapChange(e,n),
this.store["delete"](t),this.length--,this.dispatchesMapChanges&&this.dispatchMapChange(e,void 0),!0}return!1},r.prototype.clear=function(){var e,t;if(this.dispatchesMapChanges&&(this.forEach(function(e,t){this.dispatchBeforeMapChange(t,e)},this),e=this.keysArray()),this.store.clear(),this.length=0,this.dispatchesMapChanges)for(var n=0;t=e[n];n++)this.dispatchMapChange(t)},r.prototype.reduce=function(e,t,n){return this.store.reduce(function(t,r){return e.call(n,t,r.value,r.key,this)},t,this)},r.prototype.reduceRight=function(e,t,n){return this.store.reduceRight(function(t,r){return e.call(n,t,r.value,r.key,this)},t,this)},r.prototype.keysArray=function(){return this.map(function(e,t){return t})},r.prototype.keys=function(){return new a(this.keysArray(),(!0))},r.prototype.valuesArray=function(){return this.map(Function.identity)},r.prototype.values=function(){return new a(this.valuesArray(),(!0))},r.prototype.entriesArray=function(){return this.map(function(e,t){return[t,e]})},r.prototype.entries=function(){return new a(this.entriesArray(),(!0))},r.prototype.items=function(){return this.entriesArray()},r.prototype.equals=function(e,t){if(t=t||o.equals,this===e)return!0;if(e&&"function"==typeof e.every)return e.length===this.length&&e.every(function(e,n){return t(this.get(n),e)},this);var n=o.keys(e);return n.length===this.length&&o.keys(e).every(function(n){return t(this.get(n),e[n])},this)},r.prototype.toJSON=function(){return this.entriesArray()},r.prototype.Item=i,i.prototype.equals=function(e){return o.equals(this.key,e.key)&&o.equals(this.value,e.value)},i.prototype.compare=function(e){return o.compare(this.key,e.key)}}}),montageDefine("c2ad217","generic-set",{dependencies:[],factory:function(e,t,n){function r(){throw new Error("Can't construct. GenericSet is a mixin.")}n.exports=r,r.prototype.isSet=!0,r.prototype.union=function(e){var t=this.constructClone(this);return t.addEach(e),t},r.prototype.intersection=function(e){return this.constructClone(this.filter(function(t){return e.has(t)}))},r.prototype.difference=function(e){var t=this.constructClone(this);return t.deleteEach(e),t},r.prototype.symmetricDifference=function(e){var t=this.union(e),n=this.intersection(e);return t.difference(n)},r.prototype.deleteAll=function(e){return+this["delete"](e)},r.prototype.equals=function(e,t){var n=this;return e&&"function"==typeof e.reduce&&this.length===e.length&&e.reduce(function(e,r){return e&&n.has(r,t)},!0)},r.prototype.forEach=function(e){var t=arguments[1];return this.reduce(function(n,r,i,o,a){e.call(t,r,r,o,a)},void 0)},r.prototype.toJSON=function(){return this.toArray()},r.prototype.contains=function(e){return this.has(e)},r.prototype.remove=function(e){return this["delete"](e)},r.prototype.toggle=function(e){this.has(e)?this["delete"](e):this.add(e)};var i=function(e,t){return e};r.prototype.valuesArray=function(){return this.map(i)};var o=function(e,t){return[t,e]};r.prototype.entriesArray=function(){return this.map(o)}}}),montageDefine("c2ad217","_list",{dependencies:["./shim","./generic-collection","./generic-order"],factory:function(e,t,n){"use strict";function r(e,t,n){return r._init(r,this,e,t,n)}function i(e){this.head=e,this.at=e.next}function o(e){this.value=e,this.prev=null,this.next=null}n.exports=r;var a=(e("./shim"),e("./generic-collection")),s=e("./generic-order");r._init=function(e,t,n,r,i){if(!(t instanceof e))return new e(n,r,i);var o=t.head=new t.Node;o.next=o,o.prev=o,t.contentEquals=r||Object.equals,t.getDefault=i||Function.noop,t.length=0,t.addEach(n)},r.List=r,Object.addEach(r.prototype,a.prototype),Object.addEach(r.prototype,s.prototype),r.from=a.from,r.prototype.constructClone=function(e){return new this.constructor(e,this.contentEquals,this.getDefault)},r.prototype.find=function(e,t,n){t=t||this.contentEquals;for(var r=this.head,i=this.scan(n,r.next);i!==r;){if(t(i.value,e))return i;i=i.next}},r.prototype.findLast=function(e,t,n){t=t||this.contentEquals;for(var r=this.head,i=this.scan(n,r.prev);i!==r;){if(t(i.value,e))return i;i=i.prev}},r.prototype.has=function(e,t){return!!this.find(e,t)},r.prototype.get=function(e,t){var n=this.find(e,t);return n?n.value:this.getDefault(e)},r.prototype["delete"]=function(e,t){var n=this.findLast(e,t);return!!n&&(n["delete"](),this.length--,!0)},r.prototype.deleteAll=function(e,t){t=t||this.contentEquals;for(var n=this.head,r=n.next,i=0;r!==n;)t(e,r.value)&&(r["delete"](),i++),r=r.next;return this.length-=i,i},r.prototype.clear=function(){this.head.next=this.head.prev=this.head,this.length=0},r.prototype.add=function(e){var t=new this.Node(e);return this._addNode(t)},r.prototype._addNode=function(e){return this.head.addBefore(e),this.length++,!0},r.prototype.push=function(){for(var e=this.head,t=0;t<arguments.length;t++){var n=arguments[t],r=new this.Node(n);e.addBefore(r)}this.length+=arguments.length},r.prototype.unshift=function(){for(var e=this.head,t=0;t<arguments.length;t++){var n=arguments[t],r=new this.Node(n);e.addAfter(r),e=r}this.length+=arguments.length},r.prototype._shouldPop=function(){var e,t=this.head;return t.prev!==t&&(e=t.prev.value),e},r.prototype.pop=function(e,t){var n,r=this.head;if(r.prev!==r){n=r.prev.value;var i=this.length-1,o=e?e.call(this,n,i):void 0;r.prev["delete"](),this.length--,t?t.call(this,n,i,o):void 0}return n},r.prototype.shift=function(e,t){var n,r=this.head;if(r.prev!==r){n=r.next.value;var i=e?e.call(this,n,0):void 0;r.next["delete"](),this.length--,t?t.call(this,n,0,i):void 0}return n},r.prototype.peek=function(){if(this.head!==this.head.next)return this.head.next.value},r.prototype.poke=function(e){this.head!==this.head.next?this.head.next.value=e:this.push(e)},r.prototype.one=function(){return this.peek()},r.prototype.scan=function(e,t){var n=this.head;if("number"==typeof e){var r=e;if(r>=0)for(e=n.next;r&&(r--,e=e.next,e!=n););else for(e=n;r<0&&(r++,e=e.prev,e!=n););return e}return e||t},r.prototype.slice=function(e,t){var n=[],r=this.head;for(e=this.scan(e,r.next),t=this.scan(t,r);e!==t&&e!==r;)n.push(e.value),e=e.next;return n},r.prototype.splice=function(e,t){return this.swap(e,t,Array.prototype.slice.call(arguments,2))},r.prototype.swap=function(e,t,n,r,i){var o=e;e=this.scan(e,this.head),null==t&&(t=1/0),n=Array.from(n);for(var a=[],s=e;t--&&t>=0&&s!==this.head;)a.push(s.value),s=s.next;var l;l=r?r.call(this,e,n,a):void 0;for(var s=e,u=0,s=e;u<a.length;u++,s=s.next)s["delete"]();null==o&&s===this.head&&(s=this.head.next);for(var u=0;u<n.length;u++){var c=new this.Node(n[u]);s.addBefore(c)}return this.length+=n.length-a.length,i?i.call(this,e,n,a):void 0,a},r.prototype.reverse=function(){var e=this.head;do{var t=e.next;e.next=e.prev,e.prev=t,e=e.next}while(e!==this.head);return this},r.prototype.sort=function(){this.swap(0,this.length,this.sorted.apply(this,arguments))},r.prototype.reduce=function(e,t){for(var n=arguments[2],r=this.head,i=r.next;i!==r;)t=e.call(n,t,i.value,i,this),i=i.next;return t},r.prototype.reduceRight=function(e,t){for(var n=arguments[2],r=this.head,i=r.prev;i!==r;)t=e.call(n,t,i.value,i,this),i=i.prev;return t},r.prototype.updateIndexes=function(e,t){for(;e!==this.head;)e.index=t++,e=e.next},r.prototype.iterate=function(){return new i(this.head)},i.prototype.__iterationObject=null,Object.defineProperty(i.prototype,"_iterationObject",{get:function(){return this.__iterationObject||(this.__iterationObject={done:!1,value:null})}}),i.prototype.next=function(){if(this.at===this.head)this._iterationObject.done=!0,this._iterationObject.value=void 0;else{var e=this.at.value;this.at=this.at.next,this._iterationObject.value=e}return this._iterationObject},r.prototype.Node=o,o.prototype["delete"]=function(){this.prev.next=this.next,this.next.prev=this.prev},o.prototype.addBefore=function(e){var t=this.prev;this.prev=e,e.prev=t,t.next=e,e.next=this},o.prototype.addAfter=function(e){var t=this.next;this.next=e,e.next=t,t.prev=e,e.prev=this}}}),montageDefine("c2ad217","_fast-set",{dependencies:["./shim","./_dict","./_list","./generic-collection","./generic-set","./tree-log"],factory:function(e,t,n){"use strict";function r(e,t,n,i){if(!(this instanceof r))return new r(e,t,n,i);t=t||Object.equals,n=n||Object.hash,i=i||Function.noop,this.contentEquals=t,this.contentHash=n,this.getDefault=i;var o=this;this.buckets=new this.Buckets(null,function(){return new o.Bucket}),this.length=0,this.addEach(e)}var i=(e("./shim"),e("./_dict")),o=e("./_list"),a=e("./generic-collection"),s=e("./generic-set"),l=e("./tree-log");Object.prototype.hasOwnProperty,n.exports=r,r.FastSet=r,Object.addEach(r.prototype,a.prototype),Object.addEach(r.prototype,s.prototype),r.from=a.from,r.prototype.Buckets=i,r.prototype.Bucket=o,r.prototype.constructClone=function(e){return new this.constructor(e,this.contentEquals,this.contentHash,this.getDefault)},r.prototype.has=function(e){var t=this.contentHash(e);return this.buckets.get(t).has(e)},r.prototype.get=function(e,t){if(t)throw new Error("FastSet#get does not support second argument: equals");var n=this.contentHash(e),r=this.buckets;return r.has(n)?r.get(n).get(e):this.getDefault(e)},r.prototype["delete"]=function(e,t){if(t)throw new Error("FastSet#delete does not support second argument: equals");var n=this.contentHash(e),r=this.buckets;if(r.has(n)){var i=r.get(n);if(i["delete"](e))return this.length--,0===i.length&&r["delete"](n),!0}return!1},r.prototype.clear=function(){this.buckets.clear(),this.length=0},r.prototype.add=function(e){var t=this.contentHash(e),n=this.buckets;return n.has(t)||n.set(t,new this.Bucket(null,this.contentEquals)),!n.get(t).has(e)&&(n.get(t).add(e),this.length++,!0)},r.prototype.reduce=function(e,t){var n=arguments[2],r=this.buckets,i=0;return r.reduce(function(t,r){return r.reduce(function(t,r){return e.call(n,t,r,i++,this)},t,this)},t,this)},r.prototype.one=function(){if(this.length>0)return this.buckets.one().one()},r.prototype.iterate=function(){return this.buckets.valuesArray().flatten().iterate()},r.prototype.log=function(e,t,n,r){e=e||l.unicodeSharp,t=t||this.logNode,n||(n=console.log,r=console),n=n.bind(r);for(var i,o,a,s,u=this.buckets,c=u.size,h=u.keys(),p=0;i=h.next().value;)p===c-1?(o=e.fromAbove,a=" "):0===p?(o=e.branchDown,a=e.strafe):(o=e.fromBoth,a=e.strafe),s=u.get(i),n.call(r,o+e.through+e.branchDown+" "+i),s.forEach(function(i,o){var l,u,c;o===s.head.prev?(l=e.fromAbove,u=" "):(l=e.fromBoth,u=e.strafe),t(o,function(t){c?n.call(r,a+" "+u+"  "+t):(n.call(r,a+" "+l+e.through+e.through+t),c=!0)},function(t){n.call(r,a+" "+e.strafe+"  "+t)})}),p++},r.prototype.logNode=function(e,t){var n=e.value;Object(n)===n?JSON.stringify(n,null,4).split("\n").forEach(function(e){t(" "+e)}):t(" "+n)}}}),montageDefine("c2ad217","iterator",{dependencies:["./shim-object","./generic-collection"],factory:function(e,t,n){"use strict";function r(e,t){var n=t&&e&&e.values&&e.values();if(n&&"function"==typeof n.next)return n;if(!(this instanceof r))return new r(e);if(Array.isArray(e)||"string"==typeof e)return r.iterate(e);if(e=i(e),e instanceof r)return e;if(e.next)this.next=function(){return e.next()};else if(e.iterate){var o=e.iterate();this.next=function(){return o.next()}}else{if("[object Function]"!==i.prototype.toString.call(e))throw new TypeError("Can't iterate "+e);this.next=e}}n.exports=r;var i=e("./shim-object"),o=e("./generic-collection");r.prototype.forEach=o.prototype.forEach,r.prototype.map=o.prototype.map,r.prototype.filter=o.prototype.filter,r.prototype.every=o.prototype.every,r.prototype.some=o.prototype.some,r.prototype.any=o.prototype.any,r.prototype.all=o.prototype.all,r.prototype.min=o.prototype.min,r.prototype.max=o.prototype.max,r.prototype.sum=o.prototype.sum,r.prototype.average=o.prototype.average,r.prototype.flatten=o.prototype.flatten,r.prototype.zip=o.prototype.zip,r.prototype.enumerate=o.prototype.enumerate,r.prototype.sorted=o.prototype.sorted,r.prototype.group=o.prototype.group,r.prototype.reversed=o.prototype.reversed,r.prototype.toArray=o.prototype.toArray,r.prototype.toObject=o.prototype.toObject,r.prototype.iterator=o.prototype.iterator,r.prototype.__iterationObject=null,i.defineProperty(r.prototype,"_iterationObject",{get:function(){return this.__iterationObject||(this.__iterationObject={done:!1,value:void 0})}}),r.prototype.constructClone=function(e){var t=[];return t.addEach(e),t},r.prototype.mapIterator=function(e){var t=r(this),n=arguments[1],o=0;if("[object Function]"!=i.prototype.toString.call(e))throw new TypeError;return new t.constructor(function(){if(t._iterationObject.done!==!0){var r=e.call(n,t.next().value,o++,t);t._iterationObject.value=r}return t._iterationObject})},r.prototype.filterIterator=function(e){var t=r(this),n=arguments[1],o=0;if("[object Function]"!=i.prototype.toString.call(e))throw new TypeError;return new t.constructor(function(){for(var r;;){if(r=t.next(),r.done===!0)return r;if(e.call(n,r.value,o++,t))return r}})},r.prototype.reduce=function(e){var t,n=r(this),o=arguments[1],a=arguments[2],s=0;if("[object Function]"!=i.prototype.toString.call(e))throw new TypeError;if(t=n.next(),t.done===!0){if(arguments.length>1)return arguments[1];throw TypeError("cannot reduce a value from an empty iterator with no initial value")}for(o=arguments.length>1?e.call(a,o,t.value,s,n):t.value,s++;;){if(t=n.next(),t.done===!0)return o;o=e.call(a,o,t.value,s,n),s++}},r.prototype.concat=function(){return r.concat(Array.prototype.concat.apply(this,arguments))},r.prototype.dropWhile=function(e){var t,n,o=r(this),a=arguments[1],s=!1,l=0;if("[object Function]"!=i.prototype.toString.call(e))throw new TypeError;for(;n=o.next(),n.done!==!0;){if(!e.call(a,n.value,l,o)){s=!0,t=n.value;break}l++}return s?o.constructor([t]).concat(o):o.constructor([])},r.prototype.takeWhile=function(e){var t=r(this),n=arguments[1],o=0;if("[object Function]"!=i.prototype.toString.call(e))throw new TypeError;return new t.constructor(function(){if(t._iterationObject.done!==!0){var r=t.next().value;e.call(n,r,o++,t)?t._iterationObject.value=r:(t._iterationObject.done=!0,t._iterationObject.value=void 0)}return t._iterationObject})},r.prototype.zipIterator=function(){return r.unzip(Array.prototype.concat.apply(this,arguments))},r.prototype.enumerateIterator=function(e){return r.count(e).zipIterator(this)},r.iterate=function(e){var t;return t=0,new r(function(){if("object"==typeof e)for(;!(t in e);){if(t>=e.length){this._iterationObject.done=!0,this._iterationObject.value=void 0;break}t+=1}else t>=e.length&&(this._iterationObject.done=!0,this._iterationObject.value=void 0);return this._iterationObject.done||(this._iterationObject.value=e[t],t+=1),this._iterationObject})},r.cycle=function(e,t){var n;return arguments.length<2&&(t=1/0),new r(function(){var i,o;return n&&(o=n()),n&&o.done!==!0||(t>0?(t--,i=r.iterate(e),o=(n=i.next.bind(i))()):(this._iterationObject.done=!0,o=this._iterationObject)),o})},r.concat=function(e){e=r(e);var t;return new r(function(){var n,i;return t&&(i=t()),i&&i.done!==!0?i:(i=e.next(),i.done===!1?(n=r(i.value),(t=n.next.bind(n))()):i)})},r.unzip=function(e){return e=r(e).map(r),new r(0===e.length?[]:function(){var t,n,r=e.map(function(e){return n=e.next(),n.done===!0&&(t=!0),n.value});return t?(this._iterationObject.done=!0,this._iterationObject.value=void 0):this._iterationObject.value=r,this._iterationObject})},r.zip=function(){return r.unzip(Array.prototype.slice.call(arguments))},r.chain=function(){return r.concat(Array.prototype.slice.call(arguments))},r.range=function(e,t,n){return arguments.length<3&&(n=1),arguments.length<2&&(t=e,e=0),e=e||0,n=n||1,new r(function(){e>=t&&(this._iterationObject.done=!0,this._iterationObject.value=void 0);var r=e;return e+=n,this._iterationObject.value=r,this._iterationObject})},r.count=function(e,t){return r.range(e,1/0,t)},r.repeat=function(e,t){return new r.range(t).mapIterator(function(){return e})}}}),montageDefine("c2ad217","tree-log",{dependencies:[],factory:function(e,t,n){"use strict";function r(){}n.exports=r,r.ascii={intersection:"+",through:"-",branchUp:"+",branchDown:"+",fromBelow:".",fromAbove:"'",fromBoth:"+",strafe:"|"},r.unicodeRound={intersection:"╋",through:"━",branchUp:"┻",branchDown:"┳",fromBelow:"╭",fromAbove:"╰",fromBoth:"┣",strafe:"┃"},r.unicodeSharp={intersection:"╋",through:"━",branchUp:"┻",branchDown:"┳",fromBelow:"┏",fromAbove:"┗",fromBoth:"┣",strafe:"┃"}}}),montageDefine("c2ad217","_dict",{dependencies:["./shim","./generic-collection","./generic-map"],factory:function(e,t,n){"use strict";function r(e,t){return this instanceof r?(t=t||Function.noop,this.getDefault=t,this.store=Object.create(null),this.length=0,void this.addEach(e)):new r(e,t)}var i=(e("./shim"),e("./generic-collection")),o=e("./generic-map");n.exports=r,r.Dict=r,Object.addEach(r.prototype,i.prototype),Object.addEach(r.prototype,o.prototype),r.from=i.from,r.prototype.constructClone=function(e){return new this.constructor(e,this.getDefault)},r.prototype.assertString=function(e){if("string"!=typeof e)throw new TypeError("key must be a string but Got "+e)},Object.defineProperty(r.prototype,"$__proto__",{writable:!0}),Object.defineProperty(r.prototype,"_hasProto",{get:function(){return this.hasOwnProperty("$__proto__")&&"undefined"!=typeof this._protoValue}}),Object.defineProperty(r.prototype,"_protoValue",{get:function(){return this.$__proto__},set:function(e){this.$__proto__=e}}),Object.defineProperty(r.prototype,"size",i._sizePropertyDescriptor),r.prototype.get=function(e,t){return this.assertString(e),"__proto__"===e?this._hasProto?this._protoValue:arguments.length>1?t:this.getDefault(e):e in this.store?this.store[e]:arguments.length>1?t:this.getDefault(e)},r.prototype.set=function(e,t){this.assertString(e);var n="__proto__"===e;return(n?this._hasProto:e in this.store)?(this.dispatchesMapChanges&&this.dispatchBeforeMapChange(e,n?this._protoValue:this.store[e]),n?this._protoValue=t:this.store[e]=t,this.dispatchesMapChanges&&this.dispatchMapChange(e,t),!1):(this.dispatchesMapChanges&&this.dispatchBeforeMapChange(e,void 0),this.length++,n?this._protoValue=t:this.store[e]=t,this.dispatchesMapChanges&&this.dispatchMapChange(e,t),!0)},r.prototype.has=function(e){return this.assertString(e),"__proto__"===e?this._hasProto:e in this.store},r.prototype["delete"]=function(e){return this.assertString(e),"__proto__"===e?!!this._hasProto&&(this.dispatchesMapChanges&&this.dispatchBeforeMapChange(e,this._protoValue),this._protoValue=void 0,this.length--,this.dispatchesMapChanges&&this.dispatchMapChange(e,void 0),!0):e in this.store&&(this.dispatchesMapChanges&&this.dispatchBeforeMapChange(e,this.store[e]),delete this.store[e],this.length--,this.dispatchesMapChanges&&this.dispatchMapChange(e,void 0),!0)},r.prototype.clear=function(){var e;this._hasProto&&(this.dispatchesMapChanges&&this.dispatchBeforeMapChange("__proto__",this._protoValue),this._protoValue=void 0,this.dispatchesMapChanges&&this.dispatchMapChange("__proto__",void 0));for(e in this.store)this.dispatchesMapChanges&&this.dispatchBeforeMapChange(e,this.store[e]),delete this.store[e],this.dispatchesMapChanges&&this.dispatchMapChange(e,void 0);this.length=0},r.prototype.reduce=function(e,t,n){this._hasProto&&(t=e.call(n,t,"$__proto__","__proto__",this));var r=this.store;for(var i in this.store)t=e.call(n,t,r[i],i,this);return t},r.prototype.reduceRight=function(e,t,n){var r=this,i=this.store;return t=Object.keys(this.store).reduceRight(function(t,o){return e.call(n,t,i[o],o,r)},t),this._hasProto?e.call(n,t,this._protoValue,"__proto__",r):t},r.prototype.one=function(){var e;for(e in this.store)return this.store[e];return this._protoValue},r.prototype.toJSON=function(){return this.toObject()}}}),montageDefine("f7560f2","proxy.min",{dependencies:[],factory:function(e,t,n){!function(e){function t(e){return!!e&&("object"==typeof e||"function"==typeof e)}if(!e.Proxy){var n=null;e.a=function(e,r){function i(){}if(!t(e)||!t(r))throw new TypeError("Cannot create proxy with a non-object as target or handler");n=function(){i=function(e){throw new TypeError("Cannot perform '"+e+"' on a proxy that has been revoked")}};var o=r;r={get:null,set:null,apply:null,construct:null};for(var a in o){if(!(a in r))throw new TypeError("Proxy polyfill does not support trap '"+a+"'");r[a]=o[a]}"function"==typeof o&&(r.apply=o.apply.bind(o));var s=this,l=!1,u="function"==typeof e;(r.apply||r.construct||u)&&(s=function(){var t=this&&this.constructor===s,n=Array.prototype.slice.call(arguments);if(i(t?"construct":"apply"),t&&r.construct)return r.construct.call(this,e,n);if(!t&&r.apply)return r.apply(e,this,n);if(u)return t?(n.unshift(e),new(e.bind.apply(e,n))):e.apply(this,n);throw new TypeError(t?"not a constructor":"not a function")},l=!0);var c=r.get?function(e){return i("get"),r.get(this,e,s)}:function(e){return i("get"),this[e]},h=r.set?function(e,t){i("set"),r.set(this,e,t,s)}:function(e,t){i("set"),this[e]=t},p={};if(Object.getOwnPropertyNames(e).forEach(function(t){l&&t in s||(Object.defineProperty(s,t,{enumerable:!!Object.getOwnPropertyDescriptor(e,t).enumerable,get:c.bind(e,t),set:h.bind(e,t)}),p[t]=!0)}),o=!0,Object.setPrototypeOf?Object.setPrototypeOf(s,Object.getPrototypeOf(e)):s.__proto__?s.__proto__=e.__proto__:o=!1,r.get||!o)for(var d in e)p[d]||Object.defineProperty(s,d,{get:c.bind(e,d)});return Object.seal(e),Object.seal(s),s},e.a.b=function(t,r){return{proxy:new e.a(t,r),revoke:n}},e.a.revocable=e.a.b,e.Proxy=e.a}}("undefined"!=typeof process&&"[object process]"=={}.toString.call(process)?global:self)}}),montageDefine("f610e91","parse",{dependencies:["collections/shim","./grammar","collections/map"],factory:function(e,t,n){function r(e,t){var n;if(Array.isArray(e))return{type:"tuple",args:e.map(function(e){return r(e,t)})};if(!t&&(n=a.get(e)))return n;try{var o=i.parse(e,t||Object.empty);return t||a.set(e,o),o}catch(s){throw s.message=s.message.replace(/[\s\.]+$/,"")+"  on line "+s.line+" column "+s.column,s}}e("collections/shim");var i=e("./grammar"),o=e("collections/map"),a=new o;n.exports=r}}),montageDefine("f610e91","evaluate",{dependencies:["./parse","./compile-evaluator","./scope"],factory:function(e,t,n){function r(e,t,n,r,s){var l;l="string"==typeof e?i(e):e;var u=o(l),c=new a(t);return c.parameters=n,c.document=r,c.components=s,u(c)}var i=e("./parse"),o=e("./compile-evaluator"),a=e("./scope");n.exports=r}}),montageDefine("f610e91","assign",{dependencies:["./parse","./compile-assigner","./scope"],factory:function(e,t,n){function r(e,t,n,r,s,l){var u;u="string"==typeof t?i(t):t;var c=o(u),h=new a(e);return h.parameters=r,h.document=s,h.components=l,c(n,h)}var i=e("./parse"),o=e("./compile-assigner"),a=e("./scope");n.exports=r}}),montageDefine("f610e91","bind",{dependencies:["./parse","./algebra","./stringify","./compile-observer","./compile-binder","./compile-assigner","./observers","./binders","./scope"],factory:function(e,t,n){function r(e,t,n){n.target=e,n.targetPath=t;var r=n.source=n.source||e,u=n.twoWay=m in n,c=n.sourcePath=u?n[m]||"":n[v],h=n.parameters=n.parameters||r,p=n.document,d=n.components,_=n.trace,y=new f(r),b=new f(e);if(y.parameters=h,y.document=p,y.components=d,b.parameters=h,b.document=p,b.components=d,n.converter){var w=n.converter;w.convert&&(n.convert=w.convert.bind(w)),w.revert&&(n.revert=w.revert.bind(w))}else if(n.reverter){var O=n.reverter;O.convert&&(n.revert=O.convert.bind(O)),O.revert&&(n.convert=O.revert.bind(O))}var j=n.convert,E=n.revert,C=n.sourceSyntax=a(c),D=n.targetSyntax=a(t),P=s(D,C);if(D=P[0],C=P[1],u&&"rangeContent"===D.type)return o(b,D.args[0],y,C,j,E,n,_?{sourcePath:l(C),targetPath:l(D.args[0])}:null);_&&console.log("DEFINE BINDING",t,v,c,e);var T=i(b,D,y,C,j,n,_),P=s(C,D);C=P[0],D=P[1];var x=Function.noop;return u&&(_&&console.log("DEFINE BINDING",t,g,c,r),x=i(y,C,b,D,E,n,_)),function(){T(),x()}}function i(e,t,n,r,i,o,a){var s=u(r);i&&(s=p.makeConverterObserver(s,i,n));var h=c(t);return h(s,n,e,o,a?{sourcePath:l(r),targetPath:l(t)}:null)}function o(e,t,n,r,i,o,a,s){function l(e,t,n){y||(y=!0,s&&console.log("RANGE CONTENT PROPAGATED",s.targetPath,v,s.sourcePath,"PLUS",e,"MINUS",t,"AT",n),f.swap(n,t.length,e),y=!1)}function c(e,t,n){y||(y=!0,s&&console.log("RANGE CONTENT PROPAGATED",s.targetPath,g,s.sourcePath,"PLUS",e,"MINUS",t,"AT",n),_.swap(n,t.length,e),y=!1)}function p(){if(_!==f){s&&console.log("RANGE CONTENT BOUND",s.targetPath,m,s.sourcePath),y=!0;var t=d(_,l,n),r=d(f,c,e);return y=!1,function(){s&&console.log("RANGE CONTENT UNBOUND",s.targetPath,m,s.sourcePath),t(),r()}}}var f,_,y,b=u(r),w=u(t),O=h(r),j=h(t),E=Function.noop;y=!0;var C=w(function(e){E(),E=Function.noop,s&&console.log("RANGE CONTENT TARGET",s.targetPath,"SET TO",e),e&&e.addRangeChangeListener&&(f=e,_&&f?(s&&console.log("RANGE CONTENT TARGET REPLACES SOURCE",s.targetPath,g,s.sourcePath,"WITH",f),y=!0,_.swap(0,_.length,f),y=!1,E=p()):_||y||(s&&console.log("RANGE CONTENT TARGET INITIALIZED TO COPY OF SOURCE",s.targetPath,v,tarce.sourcePath,"WITH",_),O(f.clone(),n)))},e);y=!1;var D=b(function(t){E(),E=Function.noop,s&&console.log("RANGE CONTENT SOURCE",s.sourcePath,"SET TO",t),t&&t.addRangeChangeListener&&(_=t,f&&_?(s&&console.log("RANGE CONTENT SOURCE REPLACES TARGET",s.targetPath,v,s.sourcePath,"WITH",_),y=!0,f.swap(0,f.length,_),y=!1,E=p()):f||j(_.clone(),e))},n);return f||_||O([],n),function(){E(),C(),D()}}var a=e("./parse"),s=e("./algebra"),l=e("./stringify"),u=e("./compile-observer"),c=e("./compile-binder"),h=e("./compile-assigner"),p=e("./observers"),d=p.observeRangeChange,f=(e("./binders"),e("./scope")),v="<-",g="->",m="<->";n.exports=r}}),montageDefine("f610e91","compile-observer",{dependencies:["./observers","./operators"],factory:function(e,t,n){function r(e){return d.compile(e)}var i=e("./observers"),o=e("./operators"),a="literal",s="value",l="parameters",u="element",c="component",h="record";n.exports=r;for(var p,d=r.semantics={compilers:{property:i.makePropertyObserver,get:i.makeGetObserver,path:i.makePathObserver,"with":i.makeWithObserver,"if":i.makeConditionalObserver,parent:i.makeParentObserver,not:i.makeNotObserver,and:i.makeAndObserver,or:i.makeOrObserver,"default":i.makeDefaultObserver,defined:i.makeDefinedObserver,rangeContent:Function.identity,mapContent:Function.identity,keys:i.makeKeysObserver,keysArray:i.makeKeysObserver,values:i.makeValuesObserver,valuesArray:i.makeValuesObserver,items:i.makeEntriesObserver,entries:i.makeEntriesObserver,entriesArray:i.makeEntriesObserver,toMap:i.makeToMapObserver,mapBlock:i.makeMapBlockObserver,filterBlock:i.makeFilterBlockObserver,everyBlock:i.makeEveryBlockObserver,someBlock:i.makeSomeBlockObserver,sortedBlock:i.makeSortedBlockObserver,sortedSetBlock:i.makeSortedSetBlockObserver,groupBlock:i.makeGroupBlockObserver,groupMapBlock:i.makeGroupMapBlockObserver,minBlock:i.makeMinBlockObserver,maxBlock:i.makeMaxBlockObserver,min:i.makeMinObserver,max:i.makeMaxObserver,enumerate:i.makeEnumerationObserver,reversed:i.makeReversedObserver,flatten:i.makeFlattenObserver,concat:i.makeConcatObserver,view:i.makeViewObserver,sum:i.makeSumObserver,average:i.makeAverageObserver,last:i.makeLastObserver,only:i.makeOnlyObserver,one:i.makeOneObserver,has:i.makeHasObserver,tuple:i.makeArrayObserver,range:i.makeRangeObserver,startsWith:i.makeStartsWithObserver,endsWith:i.makeEndsWithObserver,contains:i.makeContainsObserver,join:i.makeJoinObserver,toArray:i.makeToArrayObserver,asArray:i.makeToArrayObserver},compile:function(e){var t=this.compilers,n=e.type;if(e.type===a)return i.makeLiteralObserver(e.value);if(n===s)return i.observeValue;if(n===l)return i.observeParameters;if(n===u)return i.makeElementObserver(e.id);if(n===c)return i.makeComponentObserver(e.label,e);if(n===h){for(var r={},o=e.args,d=Object.keys(o),f=0;p=d[f];f++)r[p]=this.compile(o[p]);return i.makeObjectObserver(r)}t.hasOwnProperty(n)||(t[n]=i.makeMethodObserverMaker(n));for(var v=[],f=0,o=e.args,g=o.length;f<g;f++)v[f]=this.compile(o[f]);return 1===g?t[n].call(null,v[0]):2===g?t[n].call(null,v[0],v[1]):t[n].apply(null,v)}},f=d.compilers,v=Object.keys(o),g=0;p=v[g];g++)f[p]||(f[p]=i.makeOperatorObserverMaker(o[p]));f.toString=i.makeOperatorObserverMaker(o.toString)}}),montageDefine("f610e91","scope",{dependencies:[],factory:function(e,t,n){function r(e){this.parent=null,this.value=e}n.exports=r,r.prototype.nest=function(e){var t=Object.create(this);return t.value=e,t.parent=this,t}}}),montageDefine("f610e91","observers",{dependencies:["collections/shim","collections/listen/property-changes","collections/listen/array-changes","collections/sorted-array","collections/sorted-set","collections/map","collections/set","collections/heap","./scope","./operators","./parse","./compile-observer","./merge"],factory:function(e,t,n){function r(e){return function(t){return t(e)}}function i(e,t){return e(t.value)}function o(e,t){return e(t.parameters)}function a(e){return function(t,n){return t(n.document.getElementById(e))}}function s(e,t){return function(t,n){var r=n.components,i=r.getObjectByLabel||r.getComponentByLabel,o=i.call(r,e);return t(o)}}function l(e,t,n,r){function i(e,t,r){o&&o(),o=n(e,t,r)}if(null==e)return n();var o;return Ce.addOwnPropertyChangeListener(e,t,i,r.beforeChange),i(e[t],t,e),function(){o&&o(),Ce.removeOwnPropertyChangeListener(e,t,i,r.beforeChange)}}function u(e,t){return function(n,r){return t(function(t){function i(e){return null==e?i.emit():e.observeProperty?e.observeProperty(t,i.emit,i.scope):i.observeProperty(e,t,i.emit,i.scope)}return"string"!=typeof t&&"number"!=typeof t?n():(i.observeProperty=Ae,i.emit=n,i.scope=r,e(i,r))},r)}}function c(e,t,n,r){function i(e,r,i){a(t,r)&&(o&&o(),o=n(e,t,i))}var o,a=e.contentEquals||Object.equals;return i(e.get(t),t,e),e.addMapChangeListener(i,r.beforeChange),function(){o&&o(),e.removeMapChangeListener(i)}}function h(e,t){return function(n,r){return e(function(e){function i(t){return null==t?n():e.observeGet?e.observeGet(t,n,r):i.observeGet(e,t,n,r)}return e?(i.observeGet=Se,t(i,r)):n()},r)}}function p(e,t){return function(n,r){return n=we(n),t(function(t){return e(function(e){return e?e.addRangeChangeListener?Z(e,function(){return n((e.has||e.contains).call(e,t))},r):e.addMapChangeListener?se(e,function(){return n(e.has(t))},r):n():n()},r)},r)}}function d(e){return function(t,n){for(var r=[],i=[],o=0,a=e.length;o<a;o++)r[o]=void 0,i[o]=function(e,t){return e(function(e){r.set(t,e)},n)}(e[o],o);var s=t(r);return function(){s&&s();for(var e=0,t=i.length;e<t;e++)s=i[e],s&&s()}}}function f(e){return function(t,n){var r,i={},o={},a=Object.keys(e);for(r=0;name=a[r];r++)!function(e,t){o[e]=void 0,i[e]=t(function(t){o[e]=t},n)}(name,e[name]);var s=t(o);return function(){s&&s();var e,t=Object.keys(i);for(e=0;name=t[e];e++)s=i[name],s&&s()}}}function v(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return d(e)}function g(e){return function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];var r=d(t),i=oe(r);return function(t,n){return i(function(n){return n.every(ke.defined)?t(1===n.length?e.call(void 0,n[0]):2===n.length?e.call(void 0,n[0],n[1]):e.apply(void 0,n)):t()},n)}}}function m(e){var t=e.slice(0,1).toUpperCase();t+=e.slice(1);var n="make";n+=t,n+="Observer";var r="observe";return r+=t,function(){var t=arguments[0],i=Array.prototype.slice.call(arguments,1),o=d(i),a=oe(o);return function(o,s){return t(function(t){return t?t[n]?1===i.length?t[n].call(t,i[0])(o,s):2===i.length?t[n].call(t,i[0],i[1])(o,s):t[n].apply(t,i)(o,s):t[r]?t[r](o,s):a(function(n){return n.every(ke.defined)&&"function"==typeof t[e]?o(1===n.length?t[e].call(t,n[0]):2===n.length?t[e].call(t,n[0],n[1]):t[e].apply(t,n)):o()},s):o()},s)}}}function _(e){return function(t,n){return e(function(e){return t(!e)},n)}}function y(e,t){return function(n,r){return e(function(e){return e?t(n,r):n(e)},r)}}function b(e,t){return function(n,r){return e(function(e){return e?n(e):t(n,r)},r)}}function w(e,t,n){return function(r,i){return e(function(e){return null==e?r():e?t(r,i):n(r,i)},i)}}function O(e){return function(t,n){return e(function(e){return t(null!=e)},n)}}function j(e,t){return function(n,r){
return e(function(e){return null==e?t(n,r):n(e)},r)}}function E(e,t){return function(n,r){return e(function(e){function i(t){for(var n=0,r=e.length;n<r;n++)s[n].index=n}function o(e,n,o){function u(e,t,n,r,i,o,a,s){function l(e){d?i.set(u.index,e):o[t]=e}var u=r[n+t];return a(l,s.nest(e))}var c,h,p=[];for(c=0,h=e.length;c<h;c++)p[c]={index:o+c};Ee(s,o,n.length,p),i(o+e.length);var d,f,v=[],g=o,m=o+n.length;for(g=o,m=o+n.length;g<m;g++)f=l[g],f&&f();for(c=0,h=e.length;c<h;c++)p[c]=u(e[c],c,o,s,a,v,t,r);Ee(l,o,n.length,p),d=!0,a.swap(o,n.length,v)}if(!e)return n();var a=[],s=[],l=[],u=Z(e,o,r),c=n(a,e);return function(){c&&c();for(var e=0,t=l.length;e<t;e++)c=l[e],c&&c();u()}},r)}}function C(e,t){var n=E(e,t);return function(e,t){return n(function(n,r){function i(e){for(;e<n.length;e++)l[e+1]=l[e]+!!n[e]}function o(e,t,n){var o=r.slice(n,n+e.length),s=t.map(Boolean).sum(),u=o.filter(function(t,n){return e[n]}),c=l[n],h=a.slice(c,c+s);(h.length!==u.length||h.some(function(e,t){return e!==u[t]}))&&a.swap(c,s,u),i(c)}if(!r)return e();var a=[],s=[],l=[0],u=Z(n,o,t),c=e(a);return function(){c&&c();for(var e=0,t=s.length;e<t;e++)c=s[e],c&&c();u()}},t)}}function D(e,t){var n=x(t),r=E(e,n),i=function(e,t){return r(function(n){function r(e,t){o.deleteEach(t),o.addEach(e)}if(!n)return e();var i=[],o=De(i,P,T),a=Z(n,r,t),s=e(i);return function(){s&&s(),a()}},t)};return Le(i,he)}function P(e,t){return Object.equals(e[1],t[1])}function T(e,t){return Object.compare(e[1],t[1])}function x(e){return function(t,n){return e(function(e){return t([n.value,e])},n)}}function k(e,t){var n=x(t),r=E(e,n),i=R(r,de),o=E(i,Q(de));return function(e,t){function n(e,t){return e=s.get(e),t=s.get(t),Object.compare(e,t)}function r(e,t){return e=s.get(e),t=s.get(t),Object.equals(e,t)}function i(e,t){var n,r,i;for(n=0,r=t.length;n<r;n++)i=t[n],l["delete"](i[0]),s["delete"](i[0]);for(n=0,r=e.length;n<r;n++)i=e[n],s.set(i[0],i[1]),l.add(i[0])}function a(e){return l.clear(),Z(e,i,t)}var s=new Te,l=new Pe(null,r,n),u=e(l),c=o(a,t);return function(){u&&u(),c()}}}function A(e){return function(t,n){return e(function(e){function r(e,t,n){var r=i.length-n-t.length;i.swap(r,t.length,e.reversed())}if(!e)return t();var i=[],o=Z(e,r,n),a=t(i);return function(){a&&a(),o()}},n)}}function S(e){return function(t,n){return e(function(e){function r(t){for(var n=t;n<e.length;n++)l[n].index=n,e[n]?s[n+1]=s[n]+e[n].length:s[n+1]=s[n]}function i(e,t,i){var u=s[i],c=s[i+t.length],h=c-u;o.swap(u,h,[]),Ee(l,i,t.length,e.map(function(){return{index:null}})),r(i);for(var p,d=i,c=i+t.length;d<c;d++)p=a[d],p&&p();Ee(a,i,t.length,e.map(function(e,t){function a(e,t,n){r(u.index);var i=s[u.index]+n,a=s[u.index]+n+t.length,l=a-i;o.swap(i,l,e)}var u=l[i+t];return Z(e,a,n)}))}if(!e)return t();var o=[],a=[],s=[0],l=[],u=Z(e,i,n),c=t(o);return function(){c&&c();for(var e=0,t=a.length;e<t;e++)c=a[e],c&&c();u()}},n)}}function L(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return Fe(d(e))}function M(e,t){var n=Me(e,t),r=u(n,Re);return ge(r,Boolean)}function F(e,t){var n=ge(t,ke.not),r=Me(e,n),i=u(r,Re);return ge(i,ke.not)}function R(e,t){var n=z(e,t);return Be(n)}function z(e,t){var n=x(t),r=E(e,n);return function(e,t){return r(function(n,r){function i(e,t,n){var i,a,s,l,u;for(i=0,a=t.length;i<a;i++)s=t[i],l=o.get(s[1]),1===l.length?o["delete"](s[1]):l["delete"](s[0]);for(i=0,a=e.length;i<a;i++)s=e[i],u=!o.has(s[1]),l=u?r.constructClone():o.get(s[1]),l.add(s[0]),u&&o.set(s[1],l)}if(!n)return e();var o=new Te,a=Z(n,i,t),s=e(o);return function(){a(),s&&s()}},t)}}function I(e,t,n){function r(e,t){return Object.compare(e[1],t[1])*n}var i=x(t),o=E(e,i);return function(e,t){return o(function(n){function i(e,t){a.addEach(e),a.deleteEach(t)}function o(t,n){if(0===n)return t?e(t[0]):e()}if(!n)return e();var a=new xe(null,P,r),s=Z(n,i,t),l=se(a,o,t);return function(){s(),l()}},t)}}function N(e,t){return I(e,t,1)}function B(e,t){return I(e,t,-1)}function W(e){return I(e,i,1)}function V(e){return I(e,i,-1)}function q(e){return function(t){return function(n,r){return n=we(n),t(function(t){if(!t)return n();var i=e(t,n);return Z(t,function(e,t,r){return n(i(e,t,r))},r)},r)}}}function U(e){return"number"==typeof e&&!isNaN(e)}function H(e,t,n){return n||(n=t,t=ze),function(r,i){return e(function(e){function o(t,n,r){if(h){var i=t.length-n.length;r<=s?i>0?(c.swap(0,0,e.slice(s,s+i)),c.splice(a,c.length-a)):(c.splice(0,-i),c.swap(c.length,0,e.slice(s+c.length,s+a))):r<s+a&&(c.swap(r-s,n.length,t),i>0?c.splice(a,c.length-a):c.swap(c.length,0,e.slice(s+c.length,s+a)))}}if(!e)return r();var a,s,l,u,c=[],h=!1,p=Z(e,o,i),d=n(function(t){t=+t,isNaN(t)&&(t=void 0);var n="number"==typeof t&&"number"==typeof s,r=Math.max(0,t);"number"==typeof u&&(r=Math.min(r,e.length-u)),h!==n?(n?c.swap(0,0,e.slice(u,u+r)):c.clear(),h=n):h&&l!==r&&(r<l?c.splice(t,l-r):c.swap(l,0,e.slice(u+l,u+r))),a=t,l=r},i),f=t(function(t){t=+t,isNaN(t)&&(t=void 0);var n="number"==typeof a&&"number"==typeof t,r=Math.max(0,t);"number"==typeof a&&(r=Math.min(r,e.length));var i=Math.max(0,a);if("number"==typeof r&&(i=Math.min(i,e.length-r)),h!==n)n?c.swap(0,c.length,e.slice(r,r+i)):c.clear(),h=n;else if(h&&u!==r){var o=Math.abs(r-u);o<l&&r<u?(c.swap(0,0,e.slice(r,u)),c.splice(i,c.length-i)):o<l&&r>u?(c.swap(c.length,0,e.slice(u+l,r+i)),c.splice(0,c.length-i)):c.swap(0,c.length,e.slice(r,r+i))}s=t,u=r,l=i},i),v=r(c);return function(){v&&v(),d(),f(),p()}},i)}}function G(e){return function(t,n){return e(function(e){function r(e){for(;e<o.length;e++)o[e].set(0,e)}function i(e,t,n){o.swap(n,t.length,e.map(function(e,t){return[n+t,e]})),r(n+e.length)}if(!e)return t();var o=[],a=Z(e,i,n),s=t(o);return function(){s&&s(),a()}},n)}}function X(e){return function(t,n){var r=[],i=t(r),o=e(function(e){if(e>>>=0,null==e)r.clear();else if(e>r.length){for(var t=[],n=r.length;n<e;n++)t.push(n);r.swap(r.length,0,t)}else e<r.length&&r.splice(e,r.length)},n);return function(){i&&i(),o&&o()}}}function Y(e,t){return function(n,r){return t(function(t){if("string"!=typeof t)return n();var i=new RegExp("^"+RegExp.escape(t));return e(function(e){return"string"!=typeof e?n():n(i.test(e))},r)},r)}}function $(e,t){return function(n,r){return t(function(t){if("string"!=typeof t)return n();var i=new RegExp(RegExp.escape(t)+"$");return e(function(e){return"string"!=typeof e?n():n(i.test(e))},r)},r)}}function J(e,t){return function(n,r){return t(function(t){if("string"!=typeof t)return n();var i=new RegExp(RegExp.escape(t));return e(function(e){return"string"!=typeof e?n():n(i.test(e))},r)},r)}}function K(e,t){return t=t||Ie,function(n,r){return e(function(e){return e?t(function(t){function i(){o&&o(),o=n(e.join(t))}if("string"!=typeof t)return n();var o,a=Z(e,i,r);return function(){a(),o&&o()}},r):n()},r)}}function Z(e,t,n){function r(e,n,r){i&&i(),i=t(e,n,r)}if(!e||!e.toArray||!e.addRangeChangeListener)return Function.noop;var i,o;return r(Array.isArray(e)?e:e.toArray(),Array.empty,0),o=e.addRangeChangeListener(r,null,n.beforeChange),function(){i&&i(),o()}}function Q(e){return function(t,n){return e(function(e){return Ne(e,t,n)},n)}}function ee(e,t,n){function r(n,r,s){if(o+=n.length-r.length,!(s+r.length<o&&s+n.length<o)){var l=o<0?null:e.get(o);i&&i(),i=t(l),a=l}}var i,o=-1,a=null,s=Z(e,r,n);return function(){i&&i(),s&&s()}}function te(e){return function(t,n){return e(we(function(e){return ne(e,t,n)}),n)}}function ne(e,t,n){function r(n,r,o){return i+=n.length-r.length,1!==i?t():t(e.only())}var i=0;return Z(e,r,n)}function re(e){return function(t,n){return e(we(function(e){return ie(e,t,n)}),n)}}function ie(e,t,n){function r(n,r,o){return i+=n.length-r.length,0===i?t():t(e.one())}var i=0;return Z(e,r,n)}function oe(e){return function(t,n){return e(function(e){return e&&e.addRangeChangeListener?Z(e,function(){return t(e)},n):t(e)},n)}}function ae(e){return function(t,n){return e(function(e){return e&&e.addMapChangeListener?se(e,function(){return t(e)},n):t(e)},n)}}function se(e,t,n){function r(e,n,r){var o=i.get(n);i["delete"](n),o&&o(),o=t(e,n,r),void 0===e?o&&o():i.set(n,o)}if(e.addMapChangeListener){var i=new Te;e.forEach(r);var o=e.addMapChangeListener(r,n.beforeChange);return function(){i.forEach(function(e){e&&e()}),o()}}}function le(e){return function(t,n){return e(function(e){return e?ue(e,t,n):t()},n)}}function ue(e,t,n){function r(e,t,n){var r,a;o.has(t)?null==e?(r=o.get(t),o["delete"](t),a=i.indexOf(r),i.splice(a,1)):(r=o.get(t),r.set(1,e)):(r=[t,e],o.set(t,r),i.push(r))}var i=[],o=new Te,a=t(i),s=se(e,r,n);return function(){a&&a(),s&&s()}}function ce(e){var t=Be(e);return Le(t,he)}function he(e,t){return t.value?e(t.value[0]):e()}function pe(e){var t=Be(e);return Le(t,de)}function de(e,t){return t.value?e(t.value[1]):e()}function fe(e){return function(t,n){var r=new Te,i=t(r),o=e(function(e){if(r.clear(),e&&"object"==typeof e){if(e.addRangeChangeListener)return We(function(e){function t(e,t){var n,i;for(n=0,i=t.length;n<i;n++)r["delete"](t[n][0]);for(n=0,i=e.length;n<i;n++)r.set(e[n][0],e[n][1])}return Z(e,t,n)},n.nest(e));if(e.addMapChangeListener)return se(e,function(e,t){void 0===e?r["delete"](t):r.set(t,e)},n);var t=[],i=0;for(var o in e)t[i++]=Ae(e,o,function(e){void 0===e?r["delete"](o):r.set(o,e)},n);return function(){for(var e=0,n=t.length;e<n;e++)t[e]()}}},n)||Function.noop;return function(){i&&i(),o()}}}function ve(e){return function(t,n){return n.parent?e(t,n.parent):t()}}function ge(e,t,n){return function(r,i){return r=we(r),e(function(e){return r(t.call(n,e))},i)}}function me(e,t,n){return function(r,i){return r=we(r),e(function(e){if(e&&e.every(ke.defined))return r(1===e.length?t.call(n,e[0]):2===e.length?t.call(n,e[0],e[1]):t.apply(n,e))},i)}}function _e(t,n){var r=e("./parse"),i=e("./compile-observer");return function(e,o){return e=we(e),n(function(n){if(null==n)return e();var a,s;try{a=r(n),s=i(a)}catch(l){return e()}return t(function(t){return s(e,o.nest(t))},o)},o)}}function ye(e,t){return function(n,r){return e(function(e){return null==e?n():t(function(e){return null==e?n():n(e)},r.nest(e))},r)}}function be(e){return function(){var t;return t=1===arguments.length?e.call(this,arguments[0]):2===arguments.length?e.call(this,arguments[0],arguments[1]):e.apply(this,arguments),function(e,n){var r=[],i=t(function(e){function t(e,t,n){r.swap(n,t.length,e)}return e&&e.addRangeChangeListener?(Ve(r,e),e.addRangeChangeListener(t,null,n.beforeChange),function(){e.removeRangeChangeListener(t,null,n.beforeChange)}):void r.clear()},n),o=e(r);return function(){i&&i(),o&&o()}}}}function we(e){var t;return function(n){if(n!==t){var r;return r=1===arguments.length?e.call(this,arguments[0]):2===arguments.length?e.apply(this,arguments[0],arguments[1]):e.apply(this,arguments),t=n,r}}}function Oe(e){e.forEach(function(e){e&&e()})}function je(e){var t;return function(){if(t&&t(),1===arguments.length)t=e.call(void 0,arguments[0]);else if(2===arguments.length)t=e.call(void 0,arguments[0],arguments[1]);else if(3===arguments.length)t=e.call(void 0,arguments[0],arguments[1],arguments[2]);else{for(var n=new Array(arguments.length),r=0,i=arguments.length;r<i;r++)n[r]=arguments[r];t=e.apply(void 0,n)}return function(){t&&t(),t=void 0}}}function Ee(e,t,n,r){t<0?t=e.length+t:t>e.length&&(e.length=t),t+n>e.length?n=e.length-t:n<0&&(n=0);var i=r.length-n,o=e.length,a=e.length+i;if(i>0)for(var s=o-1;s>=t+n;s--){var l=s+i;s in e?e[l]=e[s]:(e[l]=void 0,delete e[l])}for(var s=0;s<r.length;s++)s in r?e[t+s]=r[s]:(e[t+s]=void 0,delete e[t+s]);if(i<0)for(var s=t+r.length;s<o-i;s++){var l=s-i;l in e?e[s]=e[l]:(e[s]=void 0,delete e[s])}e.length=a}e("collections/shim");var Ce=e("collections/listen/property-changes");e("collections/listen/array-changes");var De=e("collections/sorted-array"),Pe=e("collections/sorted-set"),Te=e("collections/map"),xe=(e("collections/set"),e("collections/heap")),ke=(e("./scope"),e("./operators"));t.makeLiteralObserver=r,t.observeValue=i,t.observeParameters=o,t.makeElementObserver=a,t.makeComponentObserver=s,t.observeProperty=l;var Ae=l;t.makePropertyObserver=u,t.observeKey=c,t.observeGet=c;var Se=c;t.makeGetObserver=h,t.makeHasObserver=p,t.makeObserversObserver=d,t.makeRecordObserver=f,t.makeObjectObserver=f,t.makeTupleObserver=v,t.makeArrayObserver=v,t.makeOperatorObserverMaker=g,t.makeMethodObserverMaker=m,t.makeNotObserver=_,t.makeAndObserver=y,t.makeOrObserver=b,t.makeConditionalObserver=w,t.makeDefinedObserver=O,t.makeDefaultObserver=j;var Le=t.makeMapBlockObserver=be(E),Me=t.makeFilterBlockObserver=be(C);t.makeSortedBlockObserver=D,t.makeSortedSetBlockObserver=k,t.makeReversedObserver=be(A);var Fe=t.makeFlattenObserver=be(S);t.makeConcatObserver=L,t.makeSomeBlockObserver=M,t.makeEveryBlockObserver=F,t.makeGroupBlockObserver=R,t.makeGroupMapBlockObserver=z,t.makeMaxBlockObserver=N,t.makeMinBlockObserver=B,t.makeMaxObserver=W,t.makeMinObserver=V;var Re=r("length");t.makeSumObserver=q(function(){var e=0;return function(t,n,r){return t=t.filter(U),n=n.filter(U),e+=t.sum()-n.sum()}}),t.makeAverageObserver=q(function(){var e=0,t=0;return function(n,r,i){return n=n.filter(U),r=r.filter(U),e+=n.sum()-r.sum(),t+=n.length-r.length,e/t}}),t.makeViewObserver=be(H);var ze=r(0);t.makeEnumerateObserver=be(G),t.makeEnumerationObserver=t.makeEnumerateObserver,t.makeRangeObserver=X,t.makeStartsWithObserver=Y,t.makeEndsWithObserver=$,t.makeContainsObserver=J,t.makeJoinObserver=K;var Ie=r("");t.observeRangeChange=Z,t.makeLastObserver=Q,t.observeLast=ee;var Ne=ee;t.makeOnlyObserver=te,t.observeOnly=ne,t.makeOneObserver=re,t.observeOne=ie,t.makeRangeContentObserver=oe,t.makeMapContentObserver=ae,t.observeMapChange=se;var Be=t.makeEntriesObserver=be(le);t.observeEntries=ue,t.makeKeysObserver=ce,t.observeEntryKey=he,t.makeValuesObserver=pe,t.observeEntryValue=de,t.makeToMapObserver=fe;var We=Le(R(i,he),Q(de));t.makeParentObserver=ve,t.makeConverterObserver=ge,t.makeComputerObserver=me,t.makePathObserver=_e,t.makeExpressionObserver=_e,t.makeWithObserver=ye,t.makeToArrayObserver=be(Function.identity),t.makeAsArrayObserver=t.makeToArrayObserver;var Ve=e("./merge").merge;t.makeUniq=we,t.cancelEach=Oe,t.autoCancelPrevious=je}}),montageDefine("f610e91","stringify",{dependencies:["./parse","./language","./language","./language"],factory:function(e,t,n){"use strict";function r(e,t){return r.semantics.stringify(e,t)}function i(e){return function(t,n,r){var i=e+"{"+r(t.args[1],n)+"}";return"value"===t.args[0].type?i:r(t.args[0],n)+"."+i}}var o=(e("./parse"),e("./language").precedence),a=e("./language").operatorTypes;e("./language").operatorTokens,n.exports=r,r.semantics={makeBlockStringifier:i,stringify:function(e,t,n){function r(e){var n=a(e,t);return n?n:"this"}var i,a=this.stringify.bind(this),s=this.stringifiers;if(s[e.type])i=s[e.type](e,t,a);else if(e.inline)i="&"+e.type+"("+e.args.map(r).join(", ")+")";else{var l;1===e.args.length&&"mapBlock"===e.args[0].type?(l=e.type+"{"+a(e.args[0].args[1],t)+"}",e=e.args[0]):l=e.type+"("+e.args.slice(1).map(r).join(", ")+")",i="value"===e.args[0].type?l:a(e.args[0],t)+"."+l}return!n||n.type===e.type&&"if"!==n.type||o.get(n.type).has(e.type)?i:"("+i+")"},stringifiers:{value:function(e,t,n){return""},literal:function(e,t,n){return"string"==typeof e.value?"'"+e.value.replace("'","\\'")+"'":""+e.value},parameters:function(e,t,n){return"$"},record:function(e,t,n){return"{"+Object.map(e.args,function(e,r){var i;return i="value"===e.type?"this":n(e,t),r+": "+i}).join(", ")+"}"},tuple:function(e,t,n){return"["+Object.map(e.args,function(e){return"value"===e.type?"this":n(e)}).join(", ")+"]"},component:function(e,t){var n;return t&&t.components&&e.component?t.components.getObjectLabel?n=t.components.getObjectLabel(e.component):t.components.getLabelForObject&&(n=t.components.getLabelForObject(e.component)):n=e.label,"@"+n},element:function(e){return"#"+e.id},mapBlock:i("map"),filterBlock:i("filter"),someBlock:i("some"),everyBlock:i("every"),sortedBlock:i("sorted"),sortedSetBlock:i("sortedSet"),groupBlock:i("group"),groupMapBlock:i("groupMap"),minBlock:i("min"),maxBlock:i("max"),property:function(e,t,n){return"value"===e.args[0].type?"string"==typeof e.args[1].value?e.args[1].value:"literal"===e.args[1].type?"."+e.args[1].value:"this["+n(e.args[1],t)+"]":"parameters"===e.args[0].type?"$"+e.args[1].value:"literal"===e.args[1].type&&/^[\w\d_]+$/.test(e.args[1].value)?n(e.args[0],t,{type:"scope"})+"."+e.args[1].value:n(e.args[0],{type:"scope"},t)+"["+n(e.args[1],t)+"]"},"with":function(e,t,n){var r=n(e.args[1],t,e);return n(e.args[0],t)+"."+r},not:function(e,t,n){return"equals"===e.args[0].type?n(e.args[0].args[0],t,{type:"equals"})+" != "+n(e.args[0].args[1],t,{type:"equals"}):"!"+n(e.args[0],t,e)},neg:function(e,t,n){return"-"+n(e.args[0],t,e)},toNumber:function(e,t,n){return"+"+n(e.args[0],t,e)},parent:function(e,t,n){return"^"+n(e.args[0],t,e)},"if":function(e,t,n){return n(e.args[0],t,e)+" ? "+n(e.args[1],t)+" : "+n(e.args[2],t)},event:function(e,t,n){return e.when+" "+e.event+" -> "+n(e.listener,t)},binding:function(e,t,n,r){var i=r(t.args[0],n)+" "+e+" "+r(t.args[1],n),o="",a=t.descriptor;if(a)for(var s in a)o+=", "+s+": "+r(a[s],n);return i+o},bind:function(e,t,n){return this.binding("<-",e,t,n)},bind2:function(e,t,n){return this.binding("<->",e,t,n)},assign:function(e,t,n){return n(e.args[0],t)+": "+n(e.args[1],t)},block:function(e,t,n){var r="@"+e.label;return e.connection&&("prototype"===e.connection?r+=" < ":"object"===e.connection&&(r+=" : "),r+=n({type:"literal",value:e.module}),e.exports&&"value"!==e.exports.type&&(r+=" "+n(e.exports,t))),r+" {\n"+e.statements.map(function(e){return"    "+n(e,t)+";\n"}).join("")+"}\n"},sheet:function(e,t,n){return"\n"+e.blocks.map(function(e){return n(e,t)}).join("\n")+"\n"}}},a.forEach(function(e,t){r.semantics.stringifiers[t]=function(t,n,r){return t.args.map(function(e){return r(e,n,t)}).join(" "+e+" ").trim()}})}}),montageDefine("f610e91","expand",{dependencies:["collections/set","collections/map","./operators"],factory:function(e,t,n){function r(e,t){var n=r.semantics.expand.bind(r.semantics);return n(e,t,n)}var i=e("collections/set"),o=e("collections/map");e("./operators"),n.exports=r,r.semantics={reflexive:new i(["literal","element","rangeContent","mapContent"]),traverseLeft:new i(["with","mapBlock","filterBlock","someBlock","everyBlock","sortedBlock","groupBlock","groupMapBlock"]),expanders:new o([["value",function(e,t){return t.value||{type:"value"}}],["parameters",function(e,t){return t.parameters||{type:"parameters"}}],["record",function(e,t,n){var r={type:"record",args:[]};for(var i in e.args)r.args[i]=n(e.args[i],t,n);return r}],["component",function(e,t,n){return t.components&&e.component?{type:"component",label:t.components.getObjectLabel(e.component)}:e}]]),expand:function(e,t,n){return this.expanders.has(e.type)?this.expanders.get(e.type)(e,t,n):this.traverseLeft.has(e.type)?{type:e.type,args:[n(e.args[0],t,n)].concat(e.args.slice(1))}:this.reflexive.has(e.type)?e:{type:e.type,args:e.args.map(function(e){return n(e,t,n)})}}}}}),montageDefine("f610e91","bindings",{dependencies:["collections/map","./bind","./compute","./observe","./stringify"],factory:function(e,t,n){function r(e,t,n){if(t)for(var r in t)i(e,r,t[r],n);return e}function i(e,n,r,o){o=o||i.empty;var a,s,l=i.getBindings(e);if(l.has(n))throw new Error("Can't bind to already bound target, "+JSON.stringify(n));return d in r||f in r||v in r?(l.set(n,r),r.target=e,(a=r.parameters||o.parameters)&&(r.parameters=a),(s=r.document||o.document)&&(r.document=s),r.components=r.components||o.components,r.cancel=v in r?i.compute(e,n,r):i.bind(e,n,r),t.count++):(g in r||m in r||_ in r||(r.writable=!0),y in r||(r.configurable=!0),b in r||(r.enumerable=!0),Object.defineProperty(e,n,r)),e}function o(e){var t;return p.get(e)||p.set(e,t=new u)&&t}function a(e,t){var n=o(e);return n.get(t)}function s(e){for(var t=o(e),n=t.keys();name=n.next().value;)l(e,name,t)}function l(e,n,r){if(!r&&(r=o(e),!r.has(n)))throw new Error("Can't cancel non-existent binding to "+JSON.stringify(n));var i=r.get(n);i&&i.cancel&&(i.cancel(),r["delete"](n),t.count--,r.size<1&&p["delete"](e))}var u=e("collections/map"),c=e("./bind"),h=e("./compute"),p=(e("./observe"),e("./stringify"),new u),d=(Object.prototype.hasOwnProperty,"<-"),f="<->",v="compute",g="get",m="set",_="writable",y="configurable",b="enumerable";t.count=0,t.bindings=p,t.defineBindings=r,t.defineBinding=i,i.empty=Object.empty,i.getBindings=o,i.compute=h,i.bind=c,t.getBindings=o,t.getBinding=a,t.cancelBindings=s,t.cancelBinding=l}}),montageDefine("f610e91","grammar",{dependencies:[],factory:function(e,t,n){n.exports=function(){function e(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}function t(e,t,n,r,i){function o(e,t){function n(e){function t(e){return e.charCodeAt(0).toString(16).toUpperCase()}return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(e){return"\\x0"+t(e)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(e){return"\\x"+t(e)}).replace(/[\u0180-\u0FFF]/g,function(e){return"\\u0"+t(e)}).replace(/[\u1080-\uFFFF]/g,function(e){return"\\u"+t(e)})}var r,i;switch(e.length){case 0:r="end of input";break;case 1:r=e[0];break;default:r=e.slice(0,-1).join(", ")+" or "+e[e.length-1]}return i=t?'"'+n(t)+'"':"end of input","Expected "+r+" but "+i+" found."}this.expected=e,this.found=t,this.offset=n,this.line=r,this.column=i,this.name="SyntaxError",this.message=o(e,t)}function n(e){function n(t){function n(t,n,r){var i,o;for(i=n;i<r;i++)o=e.charAt(i),"\n"===o?(t.seenCR||t.line++,t.column=1,t.seenCR=!1):"\r"===o||"\u2028"===o||"\u2029"===o?(t.line++,t.column=1,t.seenCR=!0):(t.column++,t.seenCR=!1)}return Hr!==t&&(Hr>t&&(Hr=0,Gr={line:1,column:1,seenCR:!1}),n(Gr,Hr,t),Hr=t),Gr}function r(e){qr<Xr||(qr>Xr&&(Xr=qr,Yr=[]),Yr.push(e))}function i(e){var t=0;for(e.sort();t<e.length;)e[t-1]===e[t]?e.splice(t,1):t++}function o(){var e,t;return $r++,e=l(),$r--,null===e&&(t=null,0===$r&&r(Q)),e}function a(){var t,n,i,a,s,l,u;if(t=qr,n=o(),null!==n){for(i=[],a=qr,44===e.charCodeAt(qr)?(s=te,qr++):(s=null,0===$r&&r(ne)),null!==s?(l=B(),null!==l?(u=o(),null!==u?(s=[s,l,u],a=s):(qr=a,a=ee)):(qr=a,a=ee)):(qr=a,a=ee);null!==a;)i.push(a),a=qr,44===e.charCodeAt(qr)?(s=te,qr++):(s=null,0===$r&&r(ne)),null!==s?(l=B(),null!==l?(u=o(),null!==u?(s=[s,l,u],a=s):(qr=a,a=ee)):(qr=a,a=ee)):(qr=a,a=ee);null!==i?(a=B(),null!==a?(Ur=t,n=re(n,i),null===n?(qr=t,t=n):t=n):(qr=t,t=ee)):(qr=t,t=ee)}else qr=t,t=ee;return t}function s(){var t,n,i,o;return t=qr,40===e.charCodeAt(qr)?(n=ie,qr++):(n=null,0===$r&&r(oe)),null!==n?(i=B(),null!==i?(41===e.charCodeAt(qr)?(o=ae,qr++):(o=null,0===$r&&r(se)),null!==o?(Ur=t,n=le(),null===n?(qr=t,t=n):t=n):(qr=t,t=ee)):(qr=t,t=ee)):(qr=t,t=ee),null===t&&(t=qr,40===e.charCodeAt(qr)?(n=ie,qr++):(n=null,0===$r&&r(oe)),null!==n?(i=a(),null!==i?(41===e.charCodeAt(qr)?(o=ae,qr++):(o=null,0===$r&&r(se)),null!==o?(Ur=t,n=ue(i),null===n?(qr=t,t=n):t=n):(qr=t,t=ee)):(qr=t,t=ee)):(qr=t,t=ee)),t}function l(){var t,n,i,a,s,l,c,h,p,d,f;return t=qr,n=u(),null!==n?(i=B(),null!==i?(a=qr,63===e.charCodeAt(qr)?(s=he,qr++):(s=null,0===$r&&r(pe)),null!==s?(l=B(),null!==l?(c=o(),null!==c?(h=B(),null!==h?(58===e.charCodeAt(qr)?(p=de,qr++):(p=null,0===$r&&r(fe)),null!==p?(d=B(),null!==d?(f=o(),null!==f?(s=[s,l,c,h,p,d,f],a=s):(qr=a,a=ee)):(qr=a,a=ee)):(qr=a,a=ee)):(qr=a,a=ee)):(qr=a,a=ee)):(qr=a,a=ee)):(qr=a,a=ee),null===a&&(a=ce),null!==a?(Ur=t,n=ve(n,a),null===n?(qr=t,t=n):t=n):(qr=t,t=ee)):(qr=t,t=ee)):(qr=t,t=ee),t}function u(){var t,n,i,o,a,s,l,u;if(t=qr,n=c(),null!==n){for(i=[],o=qr,a=B(),null!==a?(e.substr(qr,2)===ge?(s=ge,qr+=2):(s=null,0===$r&&r(me)),null!==s?(l=B(),null!==l?(u=c(),null!==u?(a=[a,s,l,u],o=a):(qr=o,o=ee)):(qr=o,o=ee)):(qr=o,o=ee)):(qr=o,o=ee);null!==o;)i.push(o),o=qr,a=B(),null!==a?(e.substr(qr,2)===ge?(s=ge,qr+=2):(s=null,0===$r&&r(me)),null!==s?(l=B(),null!==l?(u=c(),null!==u?(a=[a,s,l,u],o=a):(qr=o,o=ee)):(qr=o,o=ee)):(qr=o,o=ee)):(qr=o,o=ee);null!==i?(Ur=t,n=_e(n,i),null===n?(qr=t,t=n):t=n):(qr=t,t=ee)}else qr=t,t=ee;return t}function c(){var t,n,i,o,a,s,l,u;if(t=qr,n=h(),null!==n){for(i=[],o=qr,a=B(),null!==a?(e.substr(qr,2)===ye?(s=ye,qr+=2):(s=null,0===$r&&r(be)),null!==s?(l=B(),null!==l?(u=h(),null!==u?(a=[a,s,l,u],o=a):(qr=o,o=ee)):(qr=o,o=ee)):(qr=o,o=ee)):(qr=o,o=ee);null!==o;)i.push(o),o=qr,a=B(),null!==a?(e.substr(qr,2)===ye?(s=ye,qr+=2):(s=null,0===$r&&r(be)),null!==s?(l=B(),null!==l?(u=h(),null!==u?(a=[a,s,l,u],o=a):(qr=o,o=ee)):(qr=o,o=ee)):(qr=o,o=ee)):(qr=o,o=ee);null!==i?(Ur=t,n=_e(n,i),null===n?(qr=t,t=n):t=n):(qr=t,t=ee)}else qr=t,t=ee;return t}function h(){var t,n,i,o,a,s,l,u,c;return t=qr,n=p(),null!==n?(i=qr,o=B(),null!==o?(a=qr,e.substr(qr,3)===we?(s=we,qr+=3):(s=null,0===$r&&r(Oe)),null===s&&(e.substr(qr,2)===je?(s=je,qr+=2):(s=null,0===$r&&r(Ee)),null===s&&(e.substr(qr,2)===Ce?(s=Ce,qr+=2):(s=null,0===$r&&r(De)),null===s&&(s=qr,60===e.charCodeAt(qr)?(l=Pe,qr++):(l=null,0===$r&&r(Te)),null!==l?(u=qr,$r++,45===e.charCodeAt(qr)?(c=xe,qr++):(c=null,0===$r&&r(ke)),$r--,null===c?u=ce:(qr=u,u=ee),null!==u?(l=[l,u],s=l):(qr=s,s=ee)):(qr=s,s=ee),null===s&&(62===e.charCodeAt(qr)?(s=Ae,qr++):(s=null,0===$r&&r(Se)),null===s&&(e.substr(qr,2)===Le?(s=Le,qr+=2):(s=null,0===$r&&r(Me)),null===s&&(e.substr(qr,2)===Fe?(s=Fe,qr+=2):(s=null,0===$r&&r(Re)))))))),null!==s&&(s=e.substring(a,qr)),a=s,null!==a?(s=B(),null!==s?(l=p(),null!==l?(o=[o,a,s,l],i=o):(qr=i,i=ee)):(qr=i,i=ee)):(qr=i,i=ee)):(qr=i,i=ee),null===i&&(i=ce),null!==i?(Ur=t,n=ze(n,i),null===n?(qr=t,t=n):t=n):(qr=t,t=ee)):(qr=t,t=ee),t}function p(){var t,n,i,o,a,s,l,u;if(t=qr,n=d(),null!==n){for(i=[],o=qr,a=B(),null!==a?(s=qr,43===e.charCodeAt(qr)?(l=Ie,qr++):(l=null,0===$r&&r(Ne)),null===l&&(45===e.charCodeAt(qr)?(l=xe,qr++):(l=null,0===$r&&r(ke))),null!==l&&(l=e.substring(s,qr)),s=l,null!==s?(l=B(),null!==l?(u=d(),null!==u?(a=[a,s,l,u],o=a):(qr=o,o=ee)):(qr=o,o=ee)):(qr=o,o=ee)):(qr=o,o=ee);null!==o;)i.push(o),o=qr,a=B(),null!==a?(s=qr,43===e.charCodeAt(qr)?(l=Ie,qr++):(l=null,0===$r&&r(Ne)),null===l&&(45===e.charCodeAt(qr)?(l=xe,qr++):(l=null,0===$r&&r(ke))),null!==l&&(l=e.substring(s,qr)),s=l,null!==s?(l=B(),null!==l?(u=d(),null!==u?(a=[a,s,l,u],o=a):(qr=o,o=ee)):(qr=o,o=ee)):(qr=o,o=ee)):(qr=o,o=ee);null!==i?(Ur=t,n=_e(n,i),null===n?(qr=t,t=n):t=n):(qr=t,t=ee)}else qr=t,t=ee;return t}function d(){var t,n,i,o,a,s,l,u;if(t=qr,n=f(),null!==n){for(i=[],o=qr,a=B(),null!==a?(s=qr,42===e.charCodeAt(qr)?(l=Be,qr++):(l=null,0===$r&&r(We)),null===l&&(47===e.charCodeAt(qr)?(l=Ve,qr++):(l=null,0===$r&&r(qe)),null===l&&(37===e.charCodeAt(qr)?(l=Ue,qr++):(l=null,0===$r&&r(He)),null===l&&(e.substr(qr,3)===Ge?(l=Ge,qr+=3):(l=null,0===$r&&r(Xe))))),null!==l&&(l=e.substring(s,qr)),s=l,null!==s?(l=B(),null!==l?(u=f(),null!==u?(a=[a,s,l,u],o=a):(qr=o,o=ee)):(qr=o,o=ee)):(qr=o,o=ee)):(qr=o,o=ee);null!==o;)i.push(o),o=qr,a=B(),null!==a?(s=qr,42===e.charCodeAt(qr)?(l=Be,qr++):(l=null,0===$r&&r(We)),null===l&&(47===e.charCodeAt(qr)?(l=Ve,qr++):(l=null,0===$r&&r(qe)),null===l&&(37===e.charCodeAt(qr)?(l=Ue,qr++):(l=null,0===$r&&r(He)),null===l&&(e.substr(qr,3)===Ge?(l=Ge,qr+=3):(l=null,0===$r&&r(Xe))))),null!==l&&(l=e.substring(s,qr)),s=l,null!==s?(l=B(),null!==l?(u=f(),null!==u?(a=[a,s,l,u],o=a):(qr=o,o=ee)):(qr=o,o=ee)):(qr=o,o=ee)):(qr=o,o=ee);null!==i?(Ur=t,n=_e(n,i),null===n?(qr=t,t=n):t=n):(qr=t,t=ee)}else qr=t,t=ee;return t}function f(){var t,n,i,o,a,s,l,u;if(t=qr,n=v(),null!==n){for(i=[],o=qr,a=B(),null!==a?(s=qr,e.substr(qr,2)===Ye?(l=Ye,qr+=2):(l=null,0===$r&&r($e)),null===l&&(e.substr(qr,2)===Je?(l=Je,qr+=2):(l=null,0===$r&&r(Ke)),null===l&&(e.substr(qr,2)===Ze?(l=Ze,qr+=2):(l=null,0===$r&&r(Qe)))),null!==l&&(l=e.substring(s,qr)),s=l,null!==s?(l=B(),null!==l?(u=v(),null!==u?(a=[a,s,l,u],o=a):(qr=o,o=ee)):(qr=o,o=ee)):(qr=o,o=ee)):(qr=o,o=ee);null!==o;)i.push(o),o=qr,a=B(),null!==a?(s=qr,e.substr(qr,2)===Ye?(l=Ye,qr+=2):(l=null,0===$r&&r($e)),null===l&&(e.substr(qr,2)===Je?(l=Je,qr+=2):(l=null,0===$r&&r(Ke)),null===l&&(e.substr(qr,2)===Ze?(l=Ze,qr+=2):(l=null,0===$r&&r(Qe)))),null!==l&&(l=e.substring(s,qr)),s=l,null!==s?(l=B(),null!==l?(u=v(),null!==u?(a=[a,s,l,u],o=a):(qr=o,o=ee)):(qr=o,o=ee)):(qr=o,o=ee)):(qr=o,o=ee);null!==i?(Ur=t,n=_e(n,i),null===n?(qr=t,t=n):t=n):(qr=t,t=ee)}else qr=t,t=ee;return t}function v(){var t,n,i,o,a,s,l,u;if(t=qr,n=g(),null!==n){for(i=[],o=qr,a=B(),null!==a?(e.substr(qr,2)===et?(s=et,qr+=2):(s=null,0===$r&&r(tt)),null!==s?(l=B(),null!==l?(u=g(),null!==u?(a=[a,s,l,u],o=a):(qr=o,o=ee)):(qr=o,o=ee)):(qr=o,o=ee)):(qr=o,o=ee);null!==o;)i.push(o),o=qr,a=B(),null!==a?(e.substr(qr,2)===et?(s=et,qr+=2):(s=null,0===$r&&r(tt)),null!==s?(l=B(),null!==l?(u=g(),null!==u?(a=[a,s,l,u],o=a):(qr=o,o=ee)):(qr=o,o=ee)):(qr=o,o=ee)):(qr=o,o=ee);null!==i?(Ur=t,n=_e(n,i),null===n?(qr=t,t=n):t=n):(qr=t,t=ee)}else qr=t,t=ee;return t}function g(){var t,n,i;return t=qr,n=qr,33===e.charCodeAt(qr)?(i=nt,qr++):(i=null,0===$r&&r(rt)),null===i&&(43===e.charCodeAt(qr)?(i=Ie,qr++):(i=null,0===$r&&r(Ne)),null===i&&(45===e.charCodeAt(qr)?(i=xe,qr++):(i=null,0===$r&&r(ke)))),null!==i&&(i=e.substring(n,qr)),n=i,null!==n?(i=g(),null!==i?(Ur=t,n=it(n,i),null===n?(qr=t,t=n):t=n):(qr=t,t=ee)):(qr=t,t=ee),null===t&&(t=m()),t}function m(){var e,t,n,r;if(e=qr,t=b(),null!==t){for(n=[],r=_();null!==r;)n.push(r),r=_();null!==n?(Ur=e,t=ot(t,n),null===t?(qr=e,e=t):e=t):(qr=e,e=ee)}else qr=e,e=ee;return e}function _(){var t,n,i,a;return t=qr,46===e.charCodeAt(qr)?(n=at,qr++):(n=null,0===$r&&r(st)),null!==n?(i=y(),null!==i?(Ur=t,n=lt(i),null===n?(qr=t,t=n):t=n):(qr=t,t=ee)):(qr=t,t=ee),null===t&&(t=qr,91===e.charCodeAt(qr)?(n=ut,qr++):(n=null,0===$r&&r(ct)),null!==n?(i=o(),null!==i?(93===e.charCodeAt(qr)?(a=ht,qr++):(a=null,0===$r&&r(pt)),null!==a?(Ur=t,n=dt(i),null===n?(qr=t,t=n):t=n):(qr=t,t=ee)):(qr=t,t=ee)):(qr=t,t=ee)),t}function y(){var t,n,i,a,l,u,c;return t=qr,n=qr,i=w(),null!==i&&(i=e.substring(n,qr)),n=i,null!==n?(123===e.charCodeAt(qr)?(i=ft,qr++):(i=null,0===$r&&r(vt)),null!==i?(a=B(),null!==a?(l=o(),null!==l?(u=B(),null!==u?(125===e.charCodeAt(qr)?(c=gt,qr++):(c=null,0===$r&&r(mt)),null!==c?(Ur=t,n=_t(n,l),null===n?(qr=t,t=n):t=n):(qr=t,t=ee)):(qr=t,t=ee)):(qr=t,t=ee)):(qr=t,t=ee)):(qr=t,t=ee)):(qr=t,t=ee),null===t&&(t=qr,n=qr,i=w(),null!==i&&(i=e.substring(n,qr)),n=i,null!==n?(i=s(),null!==i?(Ur=t,n=yt(n,i),null===n?(qr=t,t=n):t=n):(qr=t,t=ee)):(qr=t,t=ee),null===t&&(t=qr,n=R(),null!==n&&(Ur=t,n=bt(n)),null===n?(qr=t,t=n):t=n,null===t&&(t=qr,n=qr,i=w(),null!==i&&(i=e.substring(n,qr)),n=i,null!==n&&(Ur=t,n=wt(n)),null===n?(qr=t,t=n):t=n,null===t&&(t=qr,n=P(),null!==n&&(Ur=t,n=Ot(n)),null===n?(qr=t,t=n):t=n,null===t&&(t=qr,n=T(),null!==n&&(Ur=t,n=Ot(n)),null===n?(qr=t,t=n):t=n,null===t&&(t=qr,40===e.charCodeAt(qr)?(n=ie,qr++):(n=null,0===$r&&r(oe)),null!==n?(i=o(),null!==i?(41===e.charCodeAt(qr)?(a=ae,qr++):(a=null,0===$r&&r(se)),null!==a?(Ur=t,n=Ot(i),null===n?(qr=t,t=n):t=n):(qr=t,t=ee)):(qr=t,t=ee)):(qr=t,t=ee))))))),t}function b(){var t,n,i,a;return t=P(),null===t&&(t=T(),null===t&&(t=O(),null===t&&(t=A(),null===t&&(t=qr,e.substr(qr,4)===jt?(n=jt,qr+=4):(n=null,0===$r&&r(Et)),null!==n&&(Ur=t,n=Ct()),null===n?(qr=t,t=n):t=n,null===t&&(t=qr,e.substr(qr,4)===Dt?(n=Dt,qr+=4):(n=null,0===$r&&r(Pt)),null!==n&&(Ur=t,n=Tt()),null===n?(qr=t,t=n):t=n,null===t&&(t=qr,e.substr(qr,5)===xt?(n=xt,qr+=5):(n=null,0===$r&&r(kt)),null!==n&&(Ur=t,n=At()),null===n?(qr=t,t=n):t=n,null===t&&(t=qr,e.substr(qr,4)===St?(n=St,qr+=4):(n=null,0===$r&&r(Lt)),null!==n&&(Ur=t,n=Mt()),null===n?(qr=t,t=n):t=n,null===t&&(t=qr,64===e.charCodeAt(qr)?(n=Ft,qr++):(n=null,0===$r&&r(Rt)),null!==n?(i=qr,a=G(),null!==a&&(a=e.substring(i,qr)),i=a,null!==i?(Ur=t,n=zt(i),null===n?(qr=t,t=n):t=n):(qr=t,t=ee)):(qr=t,t=ee),null===t&&(t=qr,36===e.charCodeAt(qr)?(n=It,qr++):(n=null,0===$r&&r(Nt)),null!==n?(i=qr,a=w(),null!==a&&(a=e.substring(i,qr)),i=a,null!==i?(Ur=t,n=Bt(i),null===n?(qr=t,t=n):t=n):(qr=t,t=ee)):(qr=t,
t=ee),null===t&&(t=qr,36===e.charCodeAt(qr)?(n=It,qr++):(n=null,0===$r&&r(Nt)),null!==n&&(Ur=t,n=Wt()),null===n?(qr=t,t=n):t=n,null===t&&(t=qr,35===e.charCodeAt(qr)?(n=Vt,qr++):(n=null,0===$r&&r(qt)),null!==n?(i=qr,a=w(),null!==a&&(a=e.substring(i,qr)),i=a,null!==i?(Ur=t,n=Ut(i),null===n?(qr=t,t=n):t=n):(qr=t,t=ee)):(qr=t,t=ee),null===t&&(t=qr,38===e.charCodeAt(qr)?(n=Ht,qr++):(n=null,0===$r&&r(Gt)),null!==n?(i=qr,a=w(),null!==a&&(a=e.substring(i,qr)),i=a,null!==i?(a=s(),null!==a?(Ur=t,n=Xt(i,a),null===n?(qr=t,t=n):t=n):(qr=t,t=ee)):(qr=t,t=ee)):(qr=t,t=ee),null===t&&(t=qr,94===e.charCodeAt(qr)?(n=Yt,qr++):(n=null,0===$r&&r($t)),null!==n?(i=b(),null!==i?(Ur=t,n=Jt(i),null===n?(qr=t,t=n):t=n):(qr=t,t=ee)):(qr=t,t=ee),null===t&&(t=qr,40===e.charCodeAt(qr)?(n=ie,qr++):(n=null,0===$r&&r(oe)),null!==n?(i=o(),null!==i?(41===e.charCodeAt(qr)?(a=ae,qr++):(a=null,0===$r&&r(se)),null!==a?(Ur=t,n=Kt(i),null===n?(qr=t,t=n):t=n):(qr=t,t=ee)):(qr=t,t=ee)):(qr=t,t=ee),null===t&&(t=qr,n=y(),null!==n&&(Ur=t,n=Zt(n)),null===n?(qr=t,t=n):t=n,null===t&&(t=qr,n=[],null!==n&&(Ur=t,n=Qt()),null===n?(qr=t,t=n):t=n)))))))))))))))),t}function w(){var t,n;if($r++,t=[],tn.test(e.charAt(qr))?(n=e.charAt(qr),qr++):(n=null,0===$r&&r(nn)),null!==n)for(;null!==n;)t.push(n),tn.test(e.charAt(qr))?(n=e.charAt(qr),qr++):(n=null,0===$r&&r(nn));else t=ee;return $r--,null===t&&(n=null,0===$r&&r(en)),t}function O(){var t,n,i,o;if($r++,t=qr,39===e.charCodeAt(qr)?(n=on,qr++):(n=null,0===$r&&r(an)),null!==n){for(i=[],o=j();null!==o;)i.push(o),o=j();null!==i?(39===e.charCodeAt(qr)?(o=on,qr++):(o=null,0===$r&&r(an)),null!==o?(Ur=t,n=sn(i),null===n?(qr=t,t=n):t=n):(qr=t,t=ee)):(qr=t,t=ee)}else qr=t,t=ee;if(null===t)if(t=qr,34===e.charCodeAt(qr)?(n=ln,qr++):(n=null,0===$r&&r(un)),null!==n){for(i=[],o=E();null!==o;)i.push(o),o=E();null!==i?(34===e.charCodeAt(qr)?(o=ln,qr++):(o=null,0===$r&&r(un)),null!==o?(Ur=t,n=sn(i),null===n?(qr=t,t=n):t=n):(qr=t,t=ee)):(qr=t,t=ee)}else qr=t,t=ee;return $r--,null===t&&(n=null,0===$r&&r(rn)),t}function j(){var t,n;return cn.test(e.charAt(qr))?(t=e.charAt(qr),qr++):(t=null,0===$r&&r(hn)),null===t&&(t=qr,e.substr(qr,2)===pn?(n=pn,qr+=2):(n=null,0===$r&&r(dn)),null!==n&&(Ur=t,n=fn()),null===n?(qr=t,t=n):t=n,null===t&&(t=C())),t}function E(){var t,n;return vn.test(e.charAt(qr))?(t=e.charAt(qr),qr++):(t=null,0===$r&&r(gn)),null===t&&(t=qr,e.substr(qr,2)===mn?(n=mn,qr+=2):(n=null,0===$r&&r(_n)),null!==n&&(Ur=t,n=yn()),null===n?(qr=t,t=n):t=n,null===t&&(t=C())),t}function C(){var t,n,i,o,a,s,l,u;return t=qr,e.substr(qr,2)===bn?(n=bn,qr+=2):(n=null,0===$r&&r(wn)),null!==n&&(Ur=t,n=On()),null===n?(qr=t,t=n):t=n,null===t&&(t=qr,e.substr(qr,2)===jn?(n=jn,qr+=2):(n=null,0===$r&&r(En)),null!==n&&(Ur=t,n=Cn()),null===n?(qr=t,t=n):t=n,null===t&&(t=qr,e.substr(qr,2)===Dn?(n=Dn,qr+=2):(n=null,0===$r&&r(Pn)),null!==n&&(Ur=t,n=Tn()),null===n?(qr=t,t=n):t=n,null===t&&(t=qr,e.substr(qr,2)===xn?(n=xn,qr+=2):(n=null,0===$r&&r(kn)),null!==n&&(Ur=t,n=An()),null===n?(qr=t,t=n):t=n,null===t&&(t=qr,e.substr(qr,2)===Sn?(n=Sn,qr+=2):(n=null,0===$r&&r(Ln)),null!==n&&(Ur=t,n=Mn()),null===n?(qr=t,t=n):t=n,null===t&&(t=qr,e.substr(qr,2)===Fn?(n=Fn,qr+=2):(n=null,0===$r&&r(Rn)),null!==n&&(Ur=t,n=zn()),null===n?(qr=t,t=n):t=n,null===t&&(t=qr,e.substr(qr,2)===In?(n=In,qr+=2):(n=null,0===$r&&r(Nn)),null!==n&&(Ur=t,n=Bn()),null===n?(qr=t,t=n):t=n,null===t&&(t=qr,e.substr(qr,2)===Wn?(n=Wn,qr+=2):(n=null,0===$r&&r(Vn)),null!==n&&(Ur=t,n=qn()),null===n?(qr=t,t=n):t=n,null===t&&(t=qr,e.substr(qr,2)===Un?(n=Un,qr+=2):(n=null,0===$r&&r(Hn)),null!==n?(i=qr,o=qr,a=D(),null!==a?(s=D(),null!==s?(l=D(),null!==l?(u=D(),null!==u?(a=[a,s,l,u],o=a):(qr=o,o=ee)):(qr=o,o=ee)):(qr=o,o=ee)):(qr=o,o=ee),null!==o&&(o=e.substring(i,qr)),i=o,null!==i?(Ur=t,n=Gn(i),null===n?(qr=t,t=n):t=n):(qr=t,t=ee)):(qr=t,t=ee))))))))),t}function D(){var t;return Xn.test(e.charAt(qr))?(t=e.charAt(qr),qr++):(t=null,0===$r&&r(Yn)),t}function P(){var t,n,i,o,s,l;return t=qr,91===e.charCodeAt(qr)?(n=ut,qr++):(n=null,0===$r&&r(ct)),null!==n?(i=B(),null!==i?(93===e.charCodeAt(qr)?(o=ht,qr++):(o=null,0===$r&&r(pt)),null!==o?(Ur=t,n=$n(),null===n?(qr=t,t=n):t=n):(qr=t,t=ee)):(qr=t,t=ee)):(qr=t,t=ee),null===t&&(t=qr,91===e.charCodeAt(qr)?(n=ut,qr++):(n=null,0===$r&&r(ct)),null!==n?(i=B(),null!==i?(o=a(),null!==o?(s=B(),null!==s?(93===e.charCodeAt(qr)?(l=ht,qr++):(l=null,0===$r&&r(pt)),null!==l?(Ur=t,n=Jn(o),null===n?(qr=t,t=n):t=n):(qr=t,t=ee)):(qr=t,t=ee)):(qr=t,t=ee)):(qr=t,t=ee)):(qr=t,t=ee)),t}function T(){var t,n,i,o,a,s;return t=qr,123===e.charCodeAt(qr)?(n=ft,qr++):(n=null,0===$r&&r(vt)),null!==n?(i=B(),null!==i?(125===e.charCodeAt(qr)?(o=gt,qr++):(o=null,0===$r&&r(mt)),null!==o?(a=B(),null!==a?(Ur=t,n=Kn(),null===n?(qr=t,t=n):t=n):(qr=t,t=ee)):(qr=t,t=ee)):(qr=t,t=ee)):(qr=t,t=ee),null===t&&(t=qr,123===e.charCodeAt(qr)?(n=ft,qr++):(n=null,0===$r&&r(vt)),null!==n?(i=B(),null!==i?(o=x(),null!==o?(125===e.charCodeAt(qr)?(a=gt,qr++):(a=null,0===$r&&r(mt)),null!==a?(s=B(),null!==s?(Ur=t,n=Zn(o),null===n?(qr=t,t=n):t=n):(qr=t,t=ee)):(qr=t,t=ee)):(qr=t,t=ee)):(qr=t,t=ee)):(qr=t,t=ee)),t}function x(){var t,n,i,o,a,s,l;if(t=qr,n=k(),null!==n){for(i=[],o=qr,44===e.charCodeAt(qr)?(a=te,qr++):(a=null,0===$r&&r(ne)),null!==a?(s=B(),null!==s?(l=k(),null!==l?(a=[a,s,l],o=a):(qr=o,o=ee)):(qr=o,o=ee)):(qr=o,o=ee);null!==o;)i.push(o),o=qr,44===e.charCodeAt(qr)?(a=te,qr++):(a=null,0===$r&&r(ne)),null!==a?(s=B(),null!==s?(l=k(),null!==l?(a=[a,s,l],o=a):(qr=o,o=ee)):(qr=o,o=ee)):(qr=o,o=ee);null!==i?(Ur=t,n=Qn(n,i),null===n?(qr=t,t=n):t=n):(qr=t,t=ee)}else qr=t,t=ee;return t}function k(){var t,n,i,a,s;return t=qr,n=qr,i=w(),null!==i&&(i=e.substring(n,qr)),n=i,null!==n?(58===e.charCodeAt(qr)?(i=de,qr++):(i=null,0===$r&&r(fe)),null!==i?(a=B(),null!==a?(s=o(),null!==s?(Ur=t,n=er(n,s),null===n?(qr=t,t=n):t=n):(qr=t,t=ee)):(qr=t,t=ee)):(qr=t,t=ee)):(qr=t,t=ee),t}function A(){var t,n,i;return $r++,t=qr,n=qr,i=S(),null!==i&&(i=e.substring(n,qr)),n=i,null!==n&&(Ur=t,n=nr(n)),null===n?(qr=t,t=n):t=n,$r--,null===t&&(n=null,0===$r&&r(tr)),t}function S(){var e,t,n,r;return e=qr,t=L(),null!==t?(n=M(),null!==n?(r=F(),null!==r?(t=[t,n,r],e=t):(qr=e,e=ee)):(qr=e,e=ee)):(qr=e,e=ee),null===e&&(e=qr,t=L(),null!==t?(n=M(),null!==n?(t=[t,n],e=t):(qr=e,e=ee)):(qr=e,e=ee),null===e&&(e=qr,t=L(),null!==t?(n=F(),null!==n?(t=[t,n],e=t):(qr=e,e=ee)):(qr=e,e=ee),null===e&&(e=L()))),e}function L(){var t,n,i,o;return t=qr,n=N(),null!==n?(i=R(),null!==i?(n=[n,i],t=n):(qr=t,t=ee)):(qr=t,t=ee),null===t&&(t=I(),null===t&&(t=qr,45===e.charCodeAt(qr)?(n=xe,qr++):(n=null,0===$r&&r(ke)),null!==n?(i=N(),null!==i?(o=R(),null!==o?(n=[n,i,o],t=n):(qr=t,t=ee)):(qr=t,t=ee)):(qr=t,t=ee),null===t&&(t=qr,45===e.charCodeAt(qr)?(n=xe,qr++):(n=null,0===$r&&r(ke)),null!==n?(i=I(),null!==i?(n=[n,i],t=n):(qr=t,t=ee)):(qr=t,t=ee)))),t}function M(){var t,n,i;return t=qr,46===e.charCodeAt(qr)?(n=at,qr++):(n=null,0===$r&&r(st)),null!==n?(i=R(),null!==i?(n=[n,i],t=n):(qr=t,t=ee)):(qr=t,t=ee),t}function F(){var e,t,n;return e=qr,t=z(),null!==t?(n=R(),null!==n?(t=[t,n],e=t):(qr=e,e=ee)):(qr=e,e=ee),e}function R(){var e,t;if(e=[],t=I(),null!==t)for(;null!==t;)e.push(t),t=I();else e=ee;return e}function z(){var t,n,i;return t=qr,rr.test(e.charAt(qr))?(n=e.charAt(qr),qr++):(n=null,0===$r&&r(ir)),null!==n?(or.test(e.charAt(qr))?(i=e.charAt(qr),qr++):(i=null,0===$r&&r(ar)),null===i&&(i=ce),null!==i?(n=[n,i],t=n):(qr=t,t=ee)):(qr=t,t=ee),t}function I(){var t;return sr.test(e.charAt(qr))?(t=e.charAt(qr),qr++):(t=null,0===$r&&r(lr)),t}function N(){var t;return ur.test(e.charAt(qr))?(t=e.charAt(qr),qr++):(t=null,0===$r&&r(cr)),t}function B(){var e,t;for(e=[],t=W(),null===t&&(t=V());null!==t;)e.push(t),t=W(),null===t&&(t=V());return e}function W(){var t,n;return $r++,pr.test(e.charAt(qr))?(t=e.charAt(qr),qr++):(t=null,0===$r&&r(dr)),null===t&&(fr.test(e.charAt(qr))?(t=e.charAt(qr),qr++):(t=null,0===$r&&r(vr))),$r--,null===t&&(n=null,0===$r&&r(hr)),t}function V(){var t,n;return $r++,mr.test(e.charAt(qr))?(t=e.charAt(qr),qr++):(t=null,0===$r&&r(_r)),$r--,null===t&&(n=null,0===$r&&r(gr)),t}function q(){var e,t,n,r;if(e=qr,t=B(),null!==t){for(n=[],r=U();null!==r;)n.push(r),r=U();null!==n?(r=B(),null!==r?(Ur=e,t=yr(n),null===t?(qr=e,e=t):e=t):(qr=e,e=ee)):(qr=e,e=ee)}else qr=e,e=ee;return e}function U(){var t,n,i,o,a,s,l,u,c,h;return t=qr,64===e.charCodeAt(qr)?(n=Ft,qr++):(n=null,0===$r&&r(Rt)),null!==n?(i=qr,o=G(),null!==o&&(o=e.substring(i,qr)),i=o,null!==i?(o=B(),null!==o?(a=H(),null===a&&(a=ce),null!==a?(123===e.charCodeAt(qr)?(s=ft,qr++):(s=null,0===$r&&r(vt)),null!==s?(l=B(),null!==l?(u=X(),null!==u?(125===e.charCodeAt(qr)?(c=gt,qr++):(c=null,0===$r&&r(mt)),null!==c?(h=B(),null!==h?(Ur=t,n=br(i,a,u),null===n?(qr=t,t=n):t=n):(qr=t,t=ee)):(qr=t,t=ee)):(qr=t,t=ee)):(qr=t,t=ee)):(qr=t,t=ee)):(qr=t,t=ee)):(qr=t,t=ee)):(qr=t,t=ee)):(qr=t,t=ee),t}function H(){var t,n,i,a,s,l,u,c;return t=qr,60===e.charCodeAt(qr)?(n=Pe,qr++):(n=null,0===$r&&r(Te)),null===n&&(58===e.charCodeAt(qr)?(n=de,qr++):(n=null,0===$r&&r(fe))),null!==n?(i=B(),null!==i?(a=O(),null===a&&(a=ce),null!==a?(s=B(),null!==s?(l=qr,u=qr,$r++,123===e.charCodeAt(qr)?(c=ft,qr++):(c=null,0===$r&&r(vt)),$r--,null===c?u=ce:(qr=u,u=ee),null!==u?(c=o(),null!==c?(u=[u,c],l=u):(qr=l,l=ee)):(qr=l,l=ee),null===l&&(l=ce),null!==l?(u=B(),null!==u?(Ur=t,n=wr(n,a,l),null===n?(qr=t,t=n):t=n):(qr=t,t=ee)):(qr=t,t=ee)):(qr=t,t=ee)):(qr=t,t=ee)):(qr=t,t=ee)):(qr=t,t=ee),null===t&&(t=qr,n=B(),null!==n&&(Ur=t,n=Or()),null===n?(qr=t,t=n):t=n),t}function G(){var t,n,i,o,a,s,l;if(t=qr,n=[],jr.test(e.charAt(qr))?(i=e.charAt(qr),qr++):(i=null,0===$r&&r(Er)),null!==i)for(;null!==i;)n.push(i),jr.test(e.charAt(qr))?(i=e.charAt(qr),qr++):(i=null,0===$r&&r(Er));else n=ee;if(null!==n){if(i=[],o=qr,58===e.charCodeAt(qr)?(a=de,qr++):(a=null,0===$r&&r(fe)),null!==a){if(s=[],jr.test(e.charAt(qr))?(l=e.charAt(qr),qr++):(l=null,0===$r&&r(Er)),null!==l)for(;null!==l;)s.push(l),jr.test(e.charAt(qr))?(l=e.charAt(qr),qr++):(l=null,0===$r&&r(Er));else s=ee;null!==s?(a=[a,s],o=a):(qr=o,o=ee)}else qr=o,o=ee;for(;null!==o;)if(i.push(o),o=qr,58===e.charCodeAt(qr)?(a=de,qr++):(a=null,0===$r&&r(fe)),null!==a){if(s=[],jr.test(e.charAt(qr))?(l=e.charAt(qr),qr++):(l=null,0===$r&&r(Er)),null!==l)for(;null!==l;)s.push(l),jr.test(e.charAt(qr))?(l=e.charAt(qr),qr++):(l=null,0===$r&&r(Er));else s=ee;null!==s?(a=[a,s],o=a):(qr=o,o=ee)}else qr=o,o=ee;null!==i?(n=[n,i],t=n):(qr=t,t=ee)}else qr=t,t=ee;return t}function X(){var t,n,i,o,a,s,l,u,c;if(t=qr,n=Y(),null!==n)if(i=B(),null!==i){for(o=[],a=qr,59===e.charCodeAt(qr)?(s=Cr,qr++):(s=null,0===$r&&r(Dr)),null!==s?(l=B(),null!==l?(u=Y(),null!==u?(c=B(),null!==c?(s=[s,l,u,c],a=s):(qr=a,a=ee)):(qr=a,a=ee)):(qr=a,a=ee)):(qr=a,a=ee);null!==a;)o.push(a),a=qr,59===e.charCodeAt(qr)?(s=Cr,qr++):(s=null,0===$r&&r(Dr)),null!==s?(l=B(),null!==l?(u=Y(),null!==u?(c=B(),null!==c?(s=[s,l,u,c],a=s):(qr=a,a=ee)):(qr=a,a=ee)):(qr=a,a=ee)):(qr=a,a=ee);null!==o?(59===e.charCodeAt(qr)?(a=Cr,qr++):(a=null,0===$r&&r(Dr)),null===a&&(a=ce),null!==a?(s=B(),null!==s?(Ur=t,n=re(n,o),null===n?(qr=t,t=n):t=n):(qr=t,t=ee)):(qr=t,t=ee)):(qr=t,t=ee)}else qr=t,t=ee;else qr=t,t=ee;return null===t&&(t=qr,n=Y(),null!==n?(i=B(),null!==i?(59===e.charCodeAt(qr)?(o=Cr,qr++):(o=null,0===$r&&r(Dr)),null===o&&(o=ce),null!==o?(a=B(),null!==a?(Ur=t,n=Pr(n),null===n?(qr=t,t=n):t=n):(qr=t,t=ee)):(qr=t,t=ee)):(qr=t,t=ee)):(qr=t,t=ee),null===t&&(t=qr,n=B(),null!==n&&(Ur=t,n=le()),null===n?(qr=t,t=n):t=n)),t}function Y(){var t,n,i,a,s,l,u,c,h,p,d,f,v,g,m,_,y;if(t=qr,e.substr(qr,2)===Tr?(n=Tr,qr+=2):(n=null,0===$r&&r(xr)),null===n&&(e.substr(qr,6)===kr?(n=kr,qr+=6):(n=null,0===$r&&r(Ar))),null!==n?(32===e.charCodeAt(qr)?(i=Sr,qr++):(i=null,0===$r&&r(Lr)),null!==i?(a=B(),null!==a?(s=qr,l=w(),null!==l&&(l=e.substring(s,qr)),s=l,null!==s?(l=B(),null!==l?(e.substr(qr,2)===Mr?(u=Mr,qr+=2):(u=null,0===$r&&r(Fr)),null!==u?(c=B(),null!==c?(h=o(),null!==h?(p=B(),null!==p?(Ur=t,n=Rr(n,s,h),null===n?(qr=t,t=n):t=n):(qr=t,t=ee)):(qr=t,t=ee)):(qr=t,t=ee)):(qr=t,t=ee)):(qr=t,t=ee)):(qr=t,t=ee)):(qr=t,t=ee)):(qr=t,t=ee)):(qr=t,t=ee),null===t){if(t=qr,n=o(),null!==n)if(i=B(),null!==i)if(58===e.charCodeAt(qr)?(a=de,qr++):(a=null,0===$r&&r(fe)),null===a&&(e.substr(qr,3)===zr?(a=zr,qr+=3):(a=null,0===$r&&r(Ir)),null===a&&(e.substr(qr,2)===Nr?(a=Nr,qr+=2):(a=null,0===$r&&r(Br)))),null!==a)if(s=B(),null!==s)if(l=o(),null!==l)if(u=B(),null!==u){for(c=[],h=qr,44===e.charCodeAt(qr)?(p=te,qr++):(p=null,0===$r&&r(ne)),null!==p?(d=B(),null!==d?(f=qr,v=w(),null!==v&&(v=e.substring(f,qr)),f=v,null!==f?(v=B(),null!==v?(58===e.charCodeAt(qr)?(g=de,qr++):(g=null,0===$r&&r(fe)),null!==g?(m=B(),null!==m?(_=o(),null!==_?(y=B(),null!==y?(p=[p,d,f,v,g,m,_,y],h=p):(qr=h,h=ee)):(qr=h,h=ee)):(qr=h,h=ee)):(qr=h,h=ee)):(qr=h,h=ee)):(qr=h,h=ee)):(qr=h,h=ee)):(qr=h,h=ee);null!==h;)c.push(h),h=qr,44===e.charCodeAt(qr)?(p=te,qr++):(p=null,0===$r&&r(ne)),null!==p?(d=B(),null!==d?(f=qr,v=w(),null!==v&&(v=e.substring(f,qr)),f=v,null!==f?(v=B(),null!==v?(58===e.charCodeAt(qr)?(g=de,qr++):(g=null,0===$r&&r(fe)),null!==g?(m=B(),null!==m?(_=o(),null!==_?(y=B(),null!==y?(p=[p,d,f,v,g,m,_,y],h=p):(qr=h,h=ee)):(qr=h,h=ee)):(qr=h,h=ee)):(qr=h,h=ee)):(qr=h,h=ee)):(qr=h,h=ee)):(qr=h,h=ee)):(qr=h,h=ee);null!==c?(Ur=t,n=Wr(n,a,l,c),null===n?(qr=t,t=n):t=n):(qr=t,t=ee)}else qr=t,t=ee;else qr=t,t=ee;else qr=t,t=ee;else qr=t,t=ee;else qr=t,t=ee;else qr=t,t=ee;null===t&&(t=qr,n=qr,i=w(),null!==i&&(i=e.substring(n,qr)),n=i,null!==n?(i=B(),null!==i?(a=o(),null!==a?(s=B(),null!==s?(Ur=t,n=Vr(n,a),null===n?(qr=t,t=n):t=n):(qr=t,t=ee)):(qr=t,t=ee)):(qr=t,t=ee)):(qr=t,t=ee))}return t}var $,J=arguments.length>1?arguments[1]:{},K={expression:o,sheet:q},Z=o,Q="expression",ee=null,te=",",ne='","',re=function(e,t){for(var n=[e],r=0;r<t.length;r++)n.push(t[r][2]);return n},ie="(",oe='"("',ae=")",se='")"',le=function(){return[]},ue=function(e){return e},ce="",he="?",pe='"?"',de=":",fe='":"',ve=function(e,t){if(t){var n=t[2],r=t[6];return{type:"if",args:[e,n,r]}}return e},ge="||",me='"||"',_e=function(e,t){for(var n=0;n<t.length;n++)e={type:Jr[t[n][1]],args:[e,t[n][3]]};return e},ye="&&",be='"&&"',we="<=>",Oe='"<=>"',je="<=",Ee='"<="',Ce=">=",De='">="',Pe="<",Te='"<"',xe="-",ke='"-"',Ae=">",Se='">"',Le="==",Me='"=="',Fe="!=",Re='"!="',ze=function(e,t){if(t){var n=t[1],r=t[3];return"!="===n?{type:"not",args:[{type:"equals",args:[e,r]}]}:{type:Jr[n],args:[e,r]}}return e},Ie="+",Ne='"+"',Be="*",We='"*"',Ve="/",qe='"/"',Ue="%",He='"%"',Ge="rem",Xe='"rem"',Ye="**",$e='"**"',Je="//",Ke='"//"',Ze="%%",Qe='"%%"',et="??",tt='"??"',nt="!",rt='"!"',it=function(e,t){return{type:Kr[e],args:[t]}},ot=function(e,t){for(var n=0;n<t.length;n++)e=t[n](e);return e},at=".",st='"."',lt=function(e){return e},ut="[",ct='"["',ht="]",pt='"]"',dt=function(e){return function(t){return{type:"property",args:[t,e]}}},ft="{",vt='"{"',gt="}",mt='"}"',_t=function(e,t){return Zr[e]?function(n){return{type:Zr[e],args:[n,t]}}:"value"===t.type?function(t){return{type:e,args:[t]}}:function(n){return{type:e,args:[{type:"mapBlock",args:[n,t]}]}}},yt=function(e,t){return function(n){return{type:e,args:[n].concat(t)}}},bt=function(e){return function(t){return{type:"property",args:[t,{type:"literal",value:+e.join("")}]}}},wt=function(e){return function(t){return{type:"property",args:[t,{type:"literal",value:e}]}}},Ot=function(e){return function(t){return{type:"with",args:[t,e]}}},jt="this",Et='"this"',Ct=function(){return{type:"value"}},Dt="true",Pt='"true"',Tt=function(){return{type:"literal",value:!0}},xt="false",kt='"false"',At=function(){return{type:"literal",value:!1}},St="null",Lt='"null"',Mt=function(){return{type:"literal",value:null}},Ft="@",Rt='"@"',zt=function(e){return{type:"component",label:e}},It="$",Nt='"$"',Bt=function(e){return{type:"property",args:[{type:"parameters"},{type:"literal",value:e}]}},Wt=function(){return{type:"parameters"}},Vt="#",qt='"#"',Ut=function(e){return{type:"element",id:e}},Ht="&",Gt='"&"',Xt=function(e,t){return{type:e,args:t,inline:!0}},Yt="^",$t='"^"',Jt=function(e){return{type:"parent",args:[e]}},Kt=function(e){return e},Zt=function(e){return e({type:"value"})},Qt=function(){return{type:"value"}},en="word",tn=/^[a-zA-Z_0-9\-]/,nn="[a-zA-Z_0-9\\-]",rn="string",on="'",an='"\'"',sn=function(e){return{type:"literal",value:e.join("")}},ln='"',un='"\\""',cn=/^[^'\\\0-\x1F]/,hn="[^'\\\\\\0-\\x1F]",pn="\\'",dn='"\\\\\'"',fn=function(){return"'"},vn=/^[^"\\\0-\x1F]/,gn='[^"\\\\\\0-\\x1F]',mn='\\"',_n='"\\\\\\""',yn=function(){return'"'},bn="\\\\",wn='"\\\\\\\\"',On=function(){return"\\"},jn="\\/",En='"\\\\/"',Cn=function(){return"/"},Dn="\\b",Pn='"\\\\b"',Tn=function(){return"\b"},xn="\\f",kn='"\\\\f"',An=function(){return"\f"},Sn="\\n",Ln='"\\\\n"',Mn=function(){return"\n"},Fn="\\r",Rn='"\\\\r"',zn=function(){return"\r"},In="\\t",Nn='"\\\\t"',Bn=function(){return"\t"},Wn="\\0",Vn='"\\\\0"',qn=function(){return"\0"},Un="\\u",Hn='"\\\\u"',Gn=function(e){return String.fromCharCode(parseInt(e,16))},Xn=/^[0-9a-fA-F]/,Yn="[0-9a-fA-F]",$n=function(){return{type:"tuple",args:[]}},Jn=function(e){return{type:"tuple",args:e}},Kn=function(){return{type:"record",args:[]}},Zn=function(e){return{type:"record",args:e}},Qn=function(e,t){var n={};n[e[0]]=e[1];for(var r=0;r<t.length;r++)n[t[r][2][0]]=t[r][2][1];return n},er=function(e,t){return[e,t]},tr="number",nr=function(e){return{type:"literal",value:+e}},rr=/^[eE]/,ir="[eE]",or=/^[+\-]/,ar="[+\\-]",sr=/^[0-9]/,lr="[0-9]",ur=/^[1-9]/,cr="[1-9]",hr="whitespace",pr=/^[\t\x0B\f \xA0\uFEFF]/,dr="[\\t\\x0B\\f \\xA0\\uFEFF]",fr=/^[ \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000]/,vr="[ \\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000]",gr="line terminator",mr=/^[\n\r\u2028\u2029]/,_r="[\\n\\r\\u2028\\u2029]",yr=function(e){return{type:"sheet",blocks:e}},br=function(e,t,n){return{type:"block",connection:t.connection,module:t.module,exports:t.exports,label:e,statements:n}},wr=function(e,t,n){return{connection:{"<":"prototype",":":"object"}[e],module:t&&t.value,exports:""!==n?n[1]:void 0}},Or=function(){return{}},jr=/^[a-zA-Z_0-9]/,Er="[a-zA-Z_0-9]",Cr=";",Dr='";"',Pr=function(e){return[e]},Tr="on",xr='"on"',kr="before",Ar='"before"',Sr=" ",Lr='" "',Mr="->",Fr='"->"',Rr=function(e,t,n){return{type:"event",when:e,event:t,listener:n}},zr="<->",Ir='"<->"',Nr="<-",Br='"<-"',Wr=function(e,t,n,r){var i={type:Qr[t],args:[e,n]};if(r.length){for(var o={},a=0;a<r.length;a++)o[r[a][2]]=r[a][6];i.descriptor=o}return i},Vr=function(e,t){return{type:"unit",name:e,value:t}},qr=0,Ur=0,Hr=0,Gr={line:1,column:1,seenCR:!1},Xr=0,Yr=[],$r=0;if("startRule"in J){if(!(J.startRule in K))throw new Error("Can't start parsing from rule \""+J.startRule+'".');Z=K[J.startRule]}var Jr={"**":"pow","//":"root","%%":"log","*":"mul","/":"div","%":"mod",rem:"rem","+":"add","-":"sub","<":"lt",">":"gt","<=":"le",">=":"ge","==":"equals","<=>":"compare","??":"default","&&":"and","||":"or","<-":"bind","<->":"bind2",":":"assign"},Kr={"+":"toNumber","-":"neg","!":"not","^":"parent"},Zr={map:"mapBlock",filter:"filterBlock",some:"someBlock",every:"everyBlock",sorted:"sortedBlock",sortedSet:"sortedSetBlock",group:"groupBlock",groupMap:"groupMapBlock",min:"minBlock",max:"maxBlock"},Qr={":":"assign","<-":"bind","<->":"bind2"};if($=Z(),null!==$&&qr===e.length)return $;throw i(Yr),Ur=Math.max(qr,Xr),new t(Yr,Ur<e.length?e.charAt(Ur):null,Ur,n(Ur).line,n(Ur).column)}return e(t,Error),{SyntaxError:t,parse:n}}()}}),montageDefine("f610e91","compile-evaluator",{dependencies:["collections/shim-object","collections/map","collections/sorted-set","./operators","./scope","./parse"],factory:function(e,t,n){function r(e){return r.semantics.compile(e)}var i=e("collections/shim-object"),o=e("collections/map"),a=e("collections/sorted-set"),s=e("./operators");e("./scope"),n.exports=r;var l={literal:function(e){return function(){return e.value}},value:function(e){return function(e){return e.value}},parameters:function(e){return function(e){return e.parameters}},element:function(e){return function(t){return t.document.getElementById(e.id)}},component:function(e){return function(t){return t.components.getObjectByLabel(e.label)}},tuple:function(e){var t=e.args.map(this.compile,this);return function(e){return t.map(function(t){return t(e)})}},record:function(e){var t,n,r=e.args,o={},a=i.keys(r);for(n=0;t=a[n];n++)o[t]=this.compile(r[t]);return function(e){var r={},a=i.keys(o);for(n=0;t=a[n];n++)r[t]=o[t](e);return r}}},u={mapBlock:function(e,t){return function(n){return e(n).map(function(e){return t(n.nest(e))})}},filterBlock:function(e,t){return function(n){return e(n).filter(function(e){return t(n.nest(e))})}},someBlock:function(e,t){return function(n){return e(n).some(function(e){return t(n.nest(e))})}},everyBlock:function(e,t){return function(n){return e(n).every(function(e){return t(n.nest(e))})}},sortedBlock:function(e,t){return function(n){return e(n).sorted(Function.by(function(e){return t(n.nest(e))}))}},sortedSetBlock:function(e,t){return function(n){function r(e){return t(n.nest(e))}function o(e,t){return i.compare(r(e),r(t))}function s(e,t){return i.equals(r(e),r(t))}return new a(e(n),s,o)}},groupBlock:function(e,t){return function(n){return e(n).group(function(e){return t(n.nest(e))})}},groupMapBlock:function(e,t){return function(n){return new o(e(n).group(function(e){return t(n.nest(e))}))}},minBlock:function(e,t){return function(n){return e(n).min(Function.by(function(e){return t(n.nest(e))}))}},maxBlock:function(e,t){return function(n){return e(n).max(Function.by(function(e){return t(n.nest(e))}))}},parent:function(e){return function(t){return e(t.parent)}},"with":function(e,t){return function(n){return t(n.nest(e(n)))}},"if":function(e,t,n){return function(r){var i=e(r);if(null!=i)return i?t(r):n(r)}},not:function(e){return function(t){return!e(t)}},and:function(e,t){return function(n){return e(n)&&t(n)}},or:function(e,t){return function(n){return e(n)||t(n)}},"default":function(e,t){return function(n){var r=e(n);return null==r&&(r=t(n)),r}},defined:function(e){return function(t){var n=e(t);return null!=n}},path:function(t,n){return function(i){var o=t(i),a=n(i),s=e("./parse");try{var l=s(a),u=r(l);return u(i.nest(o))}catch(c){}}}},c=i.clone(s,1);i.addEach(c,{property:function(e,t){return e[t]},get:function(e,t){return e.get(t)},mapContent:Function.identity,rangeContent:Function.identity,view:function(e,t,n){return e.slice(t,t+n)}}),r.semantics={compilers:l,argCompilers:u,operators:c,compile:function(e){var t=this.compilers,n=this.argCompilers,r=this.operators;if(t.hasOwnProperty(e.type))return t[e.type].call(this,e);if(n.hasOwnProperty(e.type)){var i=e.args.map(this.compile,this);return 1===i.length?n[e.type].call(null,i[0]):2===i.length?n[e.type].call(null,i[0],i[1]):n[e.type].apply(null,i)}r.hasOwnProperty(e.type)||(r[e.type]=function(t){var n=Array.prototype.slice.call(arguments,1);if(!t[e.type])throw new TypeError("Can't call "+JSON.stringify(e.type)+" of "+t);return 1===n.length?t[e.type].call(t,n[0]):2===n.length?t[e.type].call(t,n[0],n[1]):t[e.type].apply(t,n)});var o=r[e.type],i=e.args.map(this.compile,this);return function(e){var t=i.map(function(t){return t(e)});if(t.every(s.defined))return 1===t.length?o.call(null,t[0]):2===t.length?o.call(null,t[0],t[1]):o.apply(null,t)}}}}}),montageDefine("f610e91","compile-assigner",{dependencies:["./compile-evaluator","./algebra","./scope"],factory:function(e,t,n){function r(e){return r.semantics.compile(e)}var i=e("./compile-evaluator"),o=e("./algebra"),a=(e("./scope"),{type:"value"}),s={type:"literal",value:!0},l={type:"literal",value:!1};n.exports=r,r.semantics={compile:function(e){var t=this.compilers;if("equals"===e.type){var n=this.compile(e.args[0]),r=this.compileEvaluator(e.args[1]);return t.equals(n,r)}if("if"===e.type){var i=this.compileEvaluator(e.args[0]),s=this.compile(e.args[1]),l=this.compile(e.args[2]);return t["if"](i,s,l)}if("and"===e.type||"or"===e.type){var u=o(e.args[0],a),c=o(e.args[1],a),h=this.compileEvaluator(e.args[0]),r=this.compileEvaluator(e.args[1]),p=this.compileEvaluator(u[1]),d=this.compileEvaluator(c[1]),n=this.compile(u[0]),f=this.compile(c[0]);return t[e.type](n,f,h,r,p,d)}if("everyBlock"===e.type){var v=this.compileEvaluator(e.args[0]),g=o(e.args[1],{type:"literal",value:!0}),m=this.compile(g[0]),_=this.compileEvaluator(g[1]);return t.everyBlock(v,m,_)}if("parent"===e.type){var y=this.compile(e.args[0]);return function(e,t){return y(e,t.parent)}}if(t.hasOwnProperty(e.type)){var b=e.args.map(this.compileEvaluator,this.compileEvaluator.semantics);return 1===b.length?t[e.type].call(null,b[0]):2===b.length?t[e.type].call(null,b[0],b[1]):t[e.type].apply(null,b)}throw new Error("Can't compile assigner for "+JSON.stringify(e.type))},compileEvaluator:i,compilers:{property:function(e,t){return function(n,r){var i=e(r);if(i){var o=t(r);null!=o&&(Array.isArray(i)?i.set(o,n):i[o]=n)}}},get:function(e,t){return function(n,r){var i=e(r);if(i){var o=t(r);null!=o&&i.set(o,n)}}},has:function(e,t){return function(n,r){var i=e(r);if(i){var o=t(r);null!=n&&(n?(i.has||i.contains).call(i,o)||i.add(o):(i.has||i.contains).call(i,o)&&(i.remove||i["delete"]).call(i,o))}}},equals:function(e,t){return function(n,r){if(n)return e(t(r),r)}},"if":function(e,t,n){return function(r,i){var o=e(i);if(null!=o)return o?t(r,i):n(r,i)}},and:function(e,t,n,r,i,o){return function(a,l){null!=a&&(a?(e(i(s),l),t(o(s),l)):e(n(l)&&!r(l),l))}},or:function(e,t,n,r,i,o){return function(a,s){null!=a&&(a?e(n(s)||!r(s),s):(e(i(l),s),t(o(l),s)))}},rangeContent:function(e){return function(t,n){var r=e(n);r&&(t?r.swap(0,r.length,t):r.clear())}},mapContent:function(e){return function(t,n){var r=e(n);r&&(r.clear(),n.value&&r.addEach(t))}},reversed:function(e){return function(t,n){var r=e(n);r&&r.swap(0,r.length,t.reversed())}},everyBlock:function(e,t,n){return function(r,i){if(r){var o=e(i),a=n(i);o.forEach(function(e){t(a,i.nest(e))})}}}}}}}),montageDefine("f610e91","algebra",{dependencies:[],factory:function(e,t,n){function r(e,t){return r.semantics.solve(e,t)}n.exports=r,r.semantics={solve:function(e,t){for(;;){for(;this.simplifiers.hasOwnProperty(e.type);){var n=this.simplifiers[e.type](e);if(!n)break;e=n}var r=this.rotateTargetToSource.hasOwnProperty(e.type),i=this.rotateSourceToTarget.hasOwnProperty(t.type);if(!r&&!i)break;r?(t=this.rotateTargetToSource[e.type](e,t),e=e.args[0]):i&&(e=this.rotateSourceToTarget[t.type](e,t),t=t.args[0])}return[e,t]},simplifiers:{not:function(e){var t=e.args[0];if("not"===t.type)return t.args[0]},add:function(e){var t=e.args[0];if("literal"===t.type&&""===t.value)return{type:"toString",args:[e.args[1]]}},someBlock:function(e){return{type:"not",args:[{type:"everyBlock",args:[e.args[0],{type:"not",args:[e.args[1]]}]}]}}},rotateTargetToSource:{reflect:function(e,t){return{type:e.type,args:[t]}},invert:function(e,t,n){return{type:n,args:[t,e.args[1]]}},toNumber:function(e,t){return this.reflect(e,t)},toString:function(e,t){return this.reflect(e,t)},not:function(e,t){return this.reflect(e,t)},neg:function(e,t){return this.reflect(e,t)},add:function(e,t){return this.invert(e,t,"sub")},sub:function(e,t){return this.invert(e,t,"add")},mul:function(e,t){return this.invert(e,t,"div")},div:function(e,t){return this.invert(e,t,"mul")},pow:function(e,t){return this.invert(e,t,"root")},root:function(e,t){return this.invert(e,t,"pow")},join:function(e,t){return this.invert(e,t,"split")},split:function(e,t){return this.invert(e,t,"join")}},rotateSourceToTarget:{rangeContent:function(e,t){return"rangeContent"===e.type?e:{type:t.type,args:[e]}}}}}}),montageDefine("f610e91","compile-binder",{dependencies:["./compile-observer","./observers","./binders","./algebra"],factory:function(e,t,n){function r(e){return r.semantics.compile(e)}var i=e("./compile-observer"),o=(e("./observers"),e("./binders")),a=e("./algebra"),s={type:"value"},l={type:"literal",value:!0};n.exports=r,r.semantics={compilers:{property:o.makePropertyBinder,get:o.makeGetBinder,has:o.makeHasBinder,only:o.makeOnlyBinder,one:o.makeOneBinder,rangeContent:o.makeRangeContentBinder,mapContent:o.makeMapContentBinder,reversed:o.makeReversedBinder,and:o.makeAndBinder,or:o.makeOrBinder},syntaxTypeCompile:{"default":function(e){return this.compile(e.args[0])},literal:function(e){if(null==e.value)return Function.noop;throw new Error("Can't bind to literal: "+e.value)},equals:function(e){return o.makeEqualityBinder(this.compile(e.args[0]),i(e.args[1]))},"if":function(e){return o.makeConditionalBinder(i(e.args[0]),this.compile(e.args[1]),this.compile(e.args[2]))},and_or:function(e){var t=a(e.args[0],s),n=a(e.args[1],s),r=this.compile(t[0]),o=this.compile(n[0]),l=i(t[1]),u=i(n[1]),c=i(e.args[0]),h=i(e.args[1]);return this.compilers[e.type](r,o,c,h,l,u)},everyBlock:function(e){var t=i(e.args[0]),n=a(e.args[1],l),r=this.compile(n[0]),s=i(n[1]);return o.makeEveryBlockBinder(t,r,s)},rangeContent:function(e){var t,n=i(e.args[0]);try{t=this.compile(e.args[0])}catch(r){t=Function.noop}return o.makeRangeContentBinder(n,t)},defined:function(e){var t=this.compile(e.args[0]);return o.makeDefinedBinder(t)},parent:function(e){var t=this.compile(e.args[0]);return o.makeParentBinder(t)},"with":function(e){var t=i(e.args[0]),n=this.compile(e.args[1]);return o.makeWithBinder(t,n)}},compile:function(e){var t,n=this.compilers;if(t=this.syntaxTypeCompile[e.type])return t.call(this,e);if(n.hasOwnProperty(e.type)){for(var r=[],o=i.semantics,a=0,s=e.args.length;a<s;a++)r.push(i.call(o,e.args[a]));return 1===r.length?n[e.type].call(null,r[0]):2===r.length?n[e.type].call(null,r[0],r[1]):n[e.type].apply(null,r)}throw new Error("Can't compile binder for "+JSON.stringify(e.type))}},r.semantics.syntaxTypeCompile.and=r.semantics.syntaxTypeCompile.or=r.semantics.syntaxTypeCompile.and_or}}),montageDefine("f610e91","binders",{dependencies:["./scope","./observers"],factory:function(e,t,n){function r(){return new Error("").stack.replace(/^.*\n.*\n/,"\n")}function i(e,t,n,i,o,a){return n(C(function(n){if(!o.isActive)try{o.isActive=!0,a&&console.log("SET",a.targetPath,"TO",n,"ON",e,"BECAUSE",a.sourcePath,r()),Array.isArray(e)&&t>>>0===t?e.set(t,n):e[t]=n}finally{o.isActive=!1}}),i)}function o(e,t){return function(n,r,i,o,a){return t(C(function(t){function s(e){return null==e?void 0:e.bindProperty?e.bindProperty(t,n,r,o,a):s.bindProperty(e,t,n,r,o,a)}if(null!=t)return s.bindProperty=M,e(C(s),i)}),i)}}function a(e,t,n,i,o,a){return n(C(function(n){if(!o.isActive)try{o.isActive=!0,a&&console.log("SET FOR KEY",t,"TO",n,"ON",e,"BECAUSE",a.sourcePath,r()),e.set(t,n)}finally{o.isActive=!1}}),i)}function s(e,t){return function(n,r,i,o,a){return e(C(function(e){function s(t){return null==t?void 0:s.bindGet(e,t,n,r,o,a)}if(e)return s.bindGet=F,t(C(s),i)}),i)}}function l(e,t){return function(n,i,o,a,s){return e(C(function(e){if(e)return t(C(function(t){function o(e){if(e)o.set.has(t)||(s&&console.log("ADD",t,"TO",s.targetPath,"BECAUSE",s.sourcePath,r()),o.set.add(t));else for(;o.set.has(t);)s&&console.log("REMOVE",t,"FROM",s.targetPath,"BECAUSE",s.sourcePath,r()),o.set["delete"](t)}if(null!=t)return o.set=e,n(C(o),i)}),o)}),o)}}function u(e,t){return function(n,i,o,a,s){return n(C(function(n){if(n)return s&&console.log("BIND",s.targetPath,"TO",s.sourcePath,r()),e(t,i,i,a,s),function(){s&&console.log("UNBIND",s.targetPath,"FROM",s.sourcePath,r())}}),o)}}function c(e,t,n){return function(r,i,o,a,s){return r(C(function(r){if(r)return e(C(function(e){function r(e,t,l){r.cancelEach(i.slice(l,l+t.length));for(var u,c=[],h=0,p=e.length;h<p;h++)u=o.nest(e[h]),c.push(r.bindCondition(n,u,u,a,s));i.swap(l,t.length,c)}if(e){var i=[];r.cancelEach=P,r.bindCondition=t;var l=D(e,r,o);return function(){P(i),l()}}}),o)}),i)}}function h(e,t,n,r,i,o){var a=T(r),s=k(n,a);return function(n,r,a,l,u){return n(C(function(n){if(null!=n){if(n){var r=e(i,S,a,l,u),c=t(o,S,a,l,u);return function(){r(),c()}}return e(s,a,a,l,u)}}),r)}}function p(e,t,n,r,i,o){
var a=T(r),s=x(n,a);return function(n,r,a,l,u){return n(C(function(n){if(null!=n){if(n)return e(s,a,a,l,u);var r=e(i,L,a,l,u),c=t(o,L,a,l,u);return function(){r(),c()}}}),r)}}function d(e,t,n){return function(r,i,o,a,s){return e(C(function(e){if(null!=e)return e?t(r,i,o,a,s):n(r,i,o,a,s)}),i)}}function f(e){return function(t,n,r,i,o){return e(C(function(e){if(e)return t(C(function(t){null!=t&&(e.splice?e.splice(0,e.length,t):e.clear&&e.add&&(e.clear(),e.add(t)))}),n)}),r)}}function v(e){return function(t,n,r,i,o){return e(C(function(e){if(e)return t(C(function(t){null!=t&&t!==e.one()&&(e.splice?e.splice(0,e.length,t):e.clear&&e.add&&(e.clear(),e.add(t)))}),n)}),r)}}function g(e,t){return function(n,i,o,a,s){return e(C(function(e){return e?n(C(function(t){function n(t,n,i){if(!O(e))if(s&&console.log("SWAPPING",n,"FOR",t,"AT",i,"ON",s.targetPath,r()),e.swap)e.swap(i,n.length,t);else if(e.add&&(e.remove||e["delete"])){var o,a,l,u;for(o=0,a=t.length,l;l=t[o];o++)e.add(l);for(u=e.remove||e["delete"],o=0,a=n.length,l;l=n[o];o++)e.deleteMethod(l)}}if(t!==e){if(!t)return void e.clear();if(t.addRangeChangeListener)return t.addRangeChangeListener(n),n(Array.from(t),Array.from(e),0),function(){t.removeRangeChangeListener(n)}}}),i):t(E.makeLiteralObserver([]),i,o,a,s)}),o)}}function m(e){return function(t,n,i,o,a){return e(C(function(e){if(e)return t(C(function(t){function n(t,n){if(!o.isActive)try{o.isActive=!0,void 0===t?(a&&a&&console.log("DELETED",a.targetPath,"FOR KEY",n,"ON",e,"BECAUSE",a.sourcePath,r()),Array.isArray(e)?e.splice(n,1):e["delete"](n)):(a&&a&&console.log("SET",a.targetPath,"FOR KEY",n,"TO",t,"ON",e,"BECAUSE",a.sourcePath,r()),e.set(n,t))}finally{o.isActive=!1}}return t?(e.clear(),t.forEach(n),t.addMapChangeListener(n)):void e.clear()}),n)}),i)}}function _(e){return function(t,n,r,i,o){return e(C(function(e){if(e)return t(C(function(t){function n(t,n,r){if(!O(e)){var i=e.length-r-n.length;e.swap(i,n.length,t.reversed())}}return t?(t.addRangeChangeListener(n),n(t,e,0),function(){t.removeRangeChangeListener(n)}):void e.clear()}),n)}),r)}}function y(e){return function(t,n,r,i,o){return t(C(function(t){return t?Function.noop:e(A,n,r,i,o)}),r)}}function b(e){return function(t,n,r,i,o){if(r.parent)return e(t,n,r.parent,i,o)}}function w(e,t){return function(n,r,i,o,a){return e(C(function(e){if(null!=e)return t(n,r,i.nest(e),o,a)}),i)}}function O(e){return e.getRangeChangeDescriptor&&e.getRangeChangeDescriptor().isActive}var j=e("./scope"),E=e("./observers"),C=E.autoCancelPrevious,D=E.observeRangeChange,P=E.cancelEach,T=E.makeNotObserver,x=E.makeOrObserver,k=E.makeAndObserver,A=(E.observeValue,E.makeLiteralObserver()),S=new j((!0)),L=new j((!1));t.bindProperty=i;var M=i;t.makePropertyBinder=o,t.bindGet=a;var F=a;t.makeGetBinder=s,t.makeHasBinder=l,t.makeEqualityBinder=u,t.makeEveryBlockBinder=c,t.makeAndBinder=h,t.makeOrBinder=p,t.makeConditionalBinder=d,t.makeOnlyBinder=f,t.makeOneBinder=v,t.makeRangeContentBinder=g,t.makeMapContentBinder=m,t.makeReversedBinder=_,t.makeDefinedBinder=y,t.makeParentBinder=b,t.makeWithBinder=w}}),montageDefine("f610e91","operators",{dependencies:["collections/shim-object","collections/shim-regexp","collections/map","collections/set"],factory:function(e,t,n){e("collections/shim-object"),e("collections/shim-regexp");var r=e("collections/map"),i=e("collections/set");t.toNumber=function(e){return+e},t.toString=function(e){return null==e?e:"string"==typeof e||"number"==typeof e?""+e:null},t.toArray=Array.from,t.toMap=r.from.bind(r),t.toSet=i.from.bind(i),t.not=function(e){return!e},t.neg=function(e){return-e},t.pow=function(e,t){return Math.pow(e,t)},t.root=function(e,t){return Math.pow(e,1/t)},t.log=function(e,t){return Math.log(e)/Math.log(t)},t.mul=function(e,t){return e*t},t.div=function(e,t){return e/t},t.mod=function(e,t){return(e%t+t)%t},t.rem=function(e,t){return e%t},t.add=function(e,t){return e+t},t.sub=function(e,t){return e-t},t.ceil=function(e){return Math.ceil(e)},t.floor=function(e){return Math.floor(e)},t.round=function(e){return Math.round(e)},t.lt=function(e,t){return Object.compare(e,t)<0},t.gt=function(e,t){return Object.compare(e,t)>0},t.le=function(e,t){return Object.compare(e,t)<=0},t.ge=function(e,t){return Object.compare(e,t)>=0},t.equals=Object.equals,t.compare=Object.compare,t.and=function(e,t){return e&&t},t.or=function(e,t){return e||t},t.defined=function(e){return null!=e},t.startsWith=function(e,t){var n=new RegExp("^"+RegExp.escape(t));return n.test(e)},t.endsWith=function(e,t){var n=new RegExp(RegExp.escape(t)+"$");return n.test(e)},t.contains=function(e,t){var n=new RegExp(RegExp.escape(t));return n.test(e)},t.join=function(e,t){return e.join(t||"")},t.split=function(e,t){return e.split(t||"")},t.range=function(e){for(var t=[],n=0;n<e;n++)t.push(n);return t},t.last=function(e){return e.get(e.length-1)}}}),montageDefine("f610e91","language",{dependencies:["collections/set","collections/map"],factory:function(e,t,n){for(var r,i,o,a,s=e("collections/set"),l=e("collections/map"),u=t.precedence=new l,c=t.precedenceLevels=[["tuple","record"],["literal","value","parameters","property","element","component","mapBlock","filterBlock","sortedBlock","groupBlock","groupMapBlock","with"],["not","neg","number","parent"],["scope"],["default"],["pow","root","log"],["mul","div","mod","rem"],["add","sub"],["equals","lt","gt","le","ge","compare"],["and"],["or"],["if"]],h=0,p=c.length;h<p;h++)for(i=c[h],r=new s(u.keysArray()),o=0,a=i.length;o<a;o++)u.set(i[o],r);var d=t.operatorTokens=l.from({"**":"pow","//":"root","%%":"log","*":"mul","/":"div","%":"mod",rem:"rem","+":"add","-":"sub","<":"lt",">":"gt","<=":"le",">=":"ge","==":"equals","<=>":"compare","!=":"notEquals","??":"default","&&":"and","||":"or","?":"then",":":"else"});t.operatorTypes=new l(d.map(function(e,t){return[e,t]}))}}),montageDefine("f610e91","compute",{dependencies:["./parse","./compile-observer","./compile-binder","./observers","./scope"],factory:function(e,t,n){function r(e,t,n){n.target=e,n.targetPath=t;var r=n.source=n.source||e,u=n.args,c=n.compute,h=n.parameters=n.parameters||r,p=n.document,d=n.components,f=n.trace,v=new l(r);v.parameters=h,v.document=p,v.components=d;var g=new l(e);g.parameters=h,g.document=p,g.components=d;for(var m,_,y,b,w=[],O=0;m=u[O];O++)_=i(m),"rangeContent"===_.type?(y=o(_.args[0]),b=s.makeRangeContentObserver(y)):"mapContent"===_.type?(y=o(_.args[0]),b=s.makeMapContentObserver(y)):b=o(_),w.push(b);var j=s.makeRangeContentObserver(s.makeObserversObserver(w)),E=s.makeComputerObserver(j,c,e),C=i(t),D=a(C);return D(E,v,g,n,f?{sourcePath:u.join(", "),targetPath:t}:void 0)}var i=e("./parse"),o=e("./compile-observer"),a=e("./compile-binder"),s=e("./observers"),l=e("./scope");n.exports=r}}),montageDefine("f610e91","observe",{dependencies:["./parse","./compile-observer","./observers","./scope"],factory:function(e,t,n){function r(e,t,n){var r;r="function"==typeof n?{change:n}:n,r=r||u,r.source=e,r.sourcePath=t;var c=r.parameters=r.parameters||e,h=r.document,p=r.components,d=r.beforeChange,f=r.contentChange,v=new l(e);v.parameters=c,v.document=h,v.components=p,v.beforeChange=d;var g=i(t),m=o(g);return f===!0&&(m=a.makeRangeContentObserver(m)),m(s(function(t){if(t){if("function"!=typeof f)return 1===arguments.length?r.change.call(e,arguments[0]):2===arguments.length?r.change.call(e,arguments[0],arguments[1]):r.change.apply(e,arguments);if("function"==typeof f)return t.addRangeChangeListener(f),function(){t.removeRangeChangeListener(f)}}}),v)}var i=e("./parse"),o=e("./compile-observer"),a=e("./observers"),s=a.autoCancelPrevious,l=e("./scope");n.exports=r;var u={}}}),montageDefine("f610e91","merge",{dependencies:["collections/shim"],factory:function(e,t,n){"use strict";function r(e,t){for(var n,r=(t.length+1)*(e.length+1),i=Array(r),o=Array(t.length+1),a=Array(t.length+1),s=0;s<e.length+1;s++){for(var l=0;l<t.length+1;l++){var u,c;if(0===s&&0===l)u=" ",c=0;else if(0===s)u="insert",c=l;else if(0===l)u="delete",c=s;else if(e[s-1]===t[l-1])u="retain",c=a[l-1];else{var h=o[l-1],p=a[l];p<h?(u="delete",c=p+1):(u="insert",c=h+1)}i[s+l*(e.length+1)]=u,o[l]=c}n=o,o=a,a=n}return{edges:i,cost:a[t.length],source:t,target:e}}function i(e){for(var t,n,r=[],i=e.edges,o=t=e.target.length,a=e.source.length;t||a;){var s=i[t+a*(o+1)];if("delete"===s){if(n&&"delete"===n[0])n[1]++;else{var l=["delete",1];n=l,r.push(l)}t--}else if("insert"===s){if(n&&"insert"===n[0])n[1]++;else{var l=["insert",1];n=l,r.push(l)}a--}else if("retain"===s){var l=["retain",1];n&&"retain"===n[0]?n[1]++:(n=l,r.push(l)),t--,a--}}return r.reverse(),r}function o(e,t){return i(r(e,t))}function a(e,t){for(var n=o(e,t),r=[],i=0,a=0,s=0;s<n.length;){var l=n[s++];if("insert"===l[0])r.push([a,0,t.slice(a,a+l[1])]),a+=l[1];else if("delete"===l[0])if(s<n.length&&"insert"===n[s][0]){var u=n[s++];r.push([a,l[1],t.slice(a,a+u[1])]),i+=l[1],a+=u[1]}else r.push([a,l[1]]),i+=l[1];else"retain"==l[0]&&(i+=l[1],a+=l[1])}return r}function s(e,t){for(var n=0;n<t.length;n++)e.swap.apply(e,t[n])}function l(e,t){s(e,a(e,t))}e("collections/shim"),t.graphOt=r,t.traceOt=i,t.ot=o,t.diff=a,t.apply=s,t.merge=l}}),montageDefine("05dc941","index",{dependencies:[],factory:function(e,t,n){function r(e,t,n,r){var i=-1,o=e?e.length:0;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function i(e){return e.split("")}function o(e){return e.match(C)||[]}function a(e){return function(t){return null==e?void 0:e[t]}}function s(e){return fe.test(e)}function l(e){return ve.test(e)}function u(e){return s(e)?c(e):i(e)}function c(e){return e.match(pe)||[]}function h(e){return e.match(de)||[]}function p(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),n=n>i?i:n,n<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(i);++r<i;)o[r]=e[r+t];return o}function d(e){if("string"==typeof e)return e;if(_(e))return Ce?Ce.call(e):"";var t=e+"";return"0"==t&&1/e==-j?"-0":t}function f(e,t,n){var r=e.length;return n=void 0===n?r:n,!t&&n>=r?e:p(e,t,n)}function v(e){return function(t){t=y(t);var n=s(t)?u(t):void 0,r=n?n[0]:t.charAt(0),i=n?f(n,1).join(""):t.slice(1);return r[e]()+i}}function g(e){return function(t){return r(O(w(t).replace(ce,"")),e,"")}}function m(e){return!!e&&"object"==typeof e}function _(e){return"symbol"==typeof e||m(e)&&Oe.call(e)==E}function y(e){return null==e?"":d(e)}function b(e){return Pe(y(e).toLowerCase())}function w(e){return e=y(e),e&&e.replace(D,be).replace(he,"")}function O(e,t,n){return e=y(e),t=n?void 0:t,void 0===t?l(e)?h(e):o(e):e.match(t)||[]}var j=1/0,E="[object Symbol]",C=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,D=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,P="\\ud800-\\udfff",T="\\u0300-\\u036f\\ufe20-\\ufe23",x="\\u20d0-\\u20f0",k="\\u2700-\\u27bf",A="a-z\\xdf-\\xf6\\xf8-\\xff",S="\\xac\\xb1\\xd7\\xf7",L="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",M="\\u2000-\\u206f",F=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",R="A-Z\\xc0-\\xd6\\xd8-\\xde",z="\\ufe0e\\ufe0f",I=S+L+M+F,N="['’]",B="["+P+"]",W="["+I+"]",V="["+T+x+"]",q="\\d+",U="["+k+"]",H="["+A+"]",G="[^"+P+I+q+k+A+R+"]",X="\\ud83c[\\udffb-\\udfff]",Y="(?:"+V+"|"+X+")",$="[^"+P+"]",J="(?:\\ud83c[\\udde6-\\uddff]){2}",K="[\\ud800-\\udbff][\\udc00-\\udfff]",Z="["+R+"]",Q="\\u200d",ee="(?:"+H+"|"+G+")",te="(?:"+Z+"|"+G+")",ne="(?:"+N+"(?:d|ll|m|re|s|t|ve))?",re="(?:"+N+"(?:D|LL|M|RE|S|T|VE))?",ie=Y+"?",oe="["+z+"]?",ae="(?:"+Q+"(?:"+[$,J,K].join("|")+")"+oe+ie+")*",se=oe+ie+ae,le="(?:"+[U,J,K].join("|")+")"+se,ue="(?:"+[$+V+"?",V,J,K,B].join("|")+")",ce=RegExp(N,"g"),he=RegExp(V,"g"),pe=RegExp(X+"(?="+X+")|"+ue+se,"g"),de=RegExp([Z+"?"+H+"+"+ne+"(?="+[W,Z,"$"].join("|")+")",te+"+"+re+"(?="+[W,Z+ee,"$"].join("|")+")",Z+"?"+ee+"+"+ne,Z+"+"+re,q,le].join("|"),"g"),fe=RegExp("["+Q+P+T+x+z+"]"),ve=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ge={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"ss"},me="object"==typeof global&&global&&global.Object===Object&&global,_e="object"==typeof self&&self&&self.Object===Object&&self,ye=me||_e||Function("return this")(),be=a(ge),we=Object.prototype,Oe=we.toString,je=ye.Symbol,Ee=je?je.prototype:void 0,Ce=Ee?Ee.toString:void 0,De=g(function(e,t,n){return t=t.toLowerCase(),e+(n?b(t):t)}),Pe=v("toUpperCase");n.exports=De}}),montageDefine("4acd5ac","index",{dependencies:[],factory:function(e,t,n){function r(e,t,n,r){var i=-1,o=e?e.length:0;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function i(e){return e.match(m)||[]}function o(e){return function(t){return null==e?void 0:e[t]}}function a(e){return re.test(e)}function s(e){return e.match(ne)||[]}function l(e){if("string"==typeof e)return e;if(h(e))return de?de.call(e):"";var t=e+"";return"0"==t&&1/e==-v?"-0":t}function u(e){return function(t){return r(f(d(t).replace(ee,"")),e,"")}}function c(e){return!!e&&"object"==typeof e}function h(e){return"symbol"==typeof e||c(e)&&ce.call(e)==g}function p(e){return null==e?"":l(e)}function d(e){return e=p(e),e&&e.replace(_,le).replace(te,"")}function f(e,t,n){return e=p(e),t=n?void 0:t,void 0===t?a(e)?s(e):i(e):e.match(t)||[]}var v=1/0,g="[object Symbol]",m=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,_=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,y="\\ud800-\\udfff",b="\\u0300-\\u036f\\ufe20-\\ufe23",w="\\u20d0-\\u20f0",O="\\u2700-\\u27bf",j="a-z\\xdf-\\xf6\\xf8-\\xff",E="\\xac\\xb1\\xd7\\xf7",C="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",D="\\u2000-\\u206f",P=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",T="A-Z\\xc0-\\xd6\\xd8-\\xde",x="\\ufe0e\\ufe0f",k=E+C+D+P,A="['’]",S="["+k+"]",L="["+b+w+"]",M="\\d+",F="["+O+"]",R="["+j+"]",z="[^"+y+k+M+O+j+T+"]",I="\\ud83c[\\udffb-\\udfff]",N="(?:"+L+"|"+I+")",B="[^"+y+"]",W="(?:\\ud83c[\\udde6-\\uddff]){2}",V="[\\ud800-\\udbff][\\udc00-\\udfff]",q="["+T+"]",U="\\u200d",H="(?:"+R+"|"+z+")",G="(?:"+q+"|"+z+")",X="(?:"+A+"(?:d|ll|m|re|s|t|ve))?",Y="(?:"+A+"(?:D|LL|M|RE|S|T|VE))?",$=N+"?",J="["+x+"]?",K="(?:"+U+"(?:"+[B,W,V].join("|")+")"+J+$+")*",Z=J+$+K,Q="(?:"+[F,W,V].join("|")+")"+Z,ee=RegExp(A,"g"),te=RegExp(L,"g"),ne=RegExp([q+"?"+R+"+"+X+"(?="+[S,q,"$"].join("|")+")",G+"+"+Y+"(?="+[S,q+H,"$"].join("|")+")",q+"?"+H+"+"+X,q+"+"+Y,M,Q].join("|"),"g"),re=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ie={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"ss"},oe="object"==typeof global&&global&&global.Object===Object&&global,ae="object"==typeof self&&self&&self.Object===Object&&self,se=oe||ae||Function("return this")(),le=o(ie),ue=Object.prototype,ce=ue.toString,he=se.Symbol,pe=he?he.prototype:void 0,de=pe?pe.toString:void 0,fe=u(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()});n.exports=fe}}),montageDefine("62c9bb4","weak-map",{dependencies:[],factory:function(e,t,n){!function(){"use strict";function e(t){t.permitHostObjects___&&t.permitHostObjects___(e)}function t(e){return!(e.substr(0,d.length)==d&&"___"===e.substr(e.length-3))}function r(e){if(e!==Object(e))throw new TypeError("Not an object: "+e);var t=e[f];if(t&&t.key===e)return t;if(p(e)){t={key:e};try{return h(e,f,{value:t,writable:!1,enumerable:!1,configurable:!1}),t}catch(n){return}}}function i(e){return e.prototype=null,Object.freeze(e)}function o(){_||"undefined"==typeof console||(_=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}if("undefined"==typeof ses||!ses.ok||ses.ok()){"undefined"!=typeof ses&&(ses.weakMapPermitHostObjects=e);var a=!1;if("function"==typeof WeakMap){var s=WeakMap;if("undefined"!=typeof navigator&&/Firefox/.test(navigator.userAgent));else{var l=new s,u=Object.freeze({});if(l.set(u,1),1===l.get(u))return void(n.exports=WeakMap);a=!0}}var c=(Object.prototype.hasOwnProperty,Object.getOwnPropertyNames),h=Object.defineProperty,p=Object.isExtensible,d="weakmap:",f=d+"ident:"+Math.random()+"___";if("undefined"!=typeof crypto&&"function"==typeof crypto.getRandomValues&&"function"==typeof ArrayBuffer&&"function"==typeof Uint8Array){var v=new ArrayBuffer(25),g=new Uint8Array(v);crypto.getRandomValues(g),f=d+"rand:"+Array.prototype.map.call(g,function(e){return(e%36).toString(36)}).join("")+"___"}if(h(Object,"getOwnPropertyNames",{value:function(e){return c(e).filter(t)}}),"getPropertyNames"in Object){var m=Object.getPropertyNames;h(Object,"getPropertyNames",{value:function(e){return m(e).filter(t)}})}!function(){var e=Object.freeze;h(Object,"freeze",{value:function(t){return r(t),e(t)}});var t=Object.seal;h(Object,"seal",{value:function(e){return r(e),t(e)}});var n=Object.preventExtensions;h(Object,"preventExtensions",{value:function(e){return r(e),n(e)}})}();var _=!1,y=0,b=function(){function e(e,t){var n,i=r(e);return i?u in i?i[u]:t:(n=s.indexOf(e),n>=0?l[n]:t)}function t(e){var t=r(e);return t?u in t:s.indexOf(e)>=0}function n(e,t){var n,i=r(e);return i?i[u]=t:(n=s.indexOf(e),n>=0?l[n]=t:(n=s.length,l[n]=t,s[n]=e)),this}function a(e){var t,n,i=r(e);return i?u in i&&delete i[u]:(t=s.indexOf(e),!(t<0||(n=s.length-1,s[t]=void 0,l[t]=l[n],s[t]=s[n],s.length=n,l.length=n,0)))}this instanceof b||o();var s=[],l=[],u=y++;return Object.create(b.prototype,{get___:{value:i(e)},has___:{value:i(t)},set___:{value:i(n)},delete___:{value:i(a)}})};b.prototype=Object.create(Object.prototype,{get:{value:function(e,t){return this.get___(e,t)},writable:!0,configurable:!0},has:{value:function(e){return this.has___(e)},writable:!0,configurable:!0},set:{value:function(e,t){return this.set___(e,t)},writable:!0,configurable:!0},"delete":{value:function(e){return this.delete___(e)},writable:!0,configurable:!0}}),"function"==typeof s?!function(){function t(){function t(e,t){return c?u.has(e)?u.get(e):c.get___(e,t):u.get(e,t)}function n(e){return u.has(e)||!!c&&c.has___(e)}function r(e){var t=!!u["delete"](e);return c?c.delete___(e)||t:t}this instanceof b||o();var l,u=new s,c=void 0,h=!1;return l=a?function(e,t){return u.set(e,t),u.has(e)||(c||(c=new b),c.set(e,t)),this}:function(e,t){if(h)try{u.set(e,t)}catch(n){c||(c=new b),c.set___(e,t)}else u.set(e,t);return this},Object.create(b.prototype,{get___:{value:i(t)},has___:{value:i(n)},set___:{value:i(l)},delete___:{value:i(r)},permitHostObjects___:{value:i(function(t){if(t!==e)throw new Error("bogus call to permitHostObjects___");h=!0})}})}a&&"undefined"!=typeof Proxy&&(Proxy=void 0),t.prototype=b.prototype,n.exports=t,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():("undefined"!=typeof Proxy&&(Proxy=void 0),n.exports=b)}}()}});