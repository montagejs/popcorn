"use strict";var util=require("./util"),schedule,noAsyncScheduler=function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")},NativePromise=util.getNativePromise();if(util.isNode&&"undefined"==typeof MutationObserver){var GlobalSetImmediate=global.setImmediate,ProcessNextTick=process.nextTick;schedule=util.isRecentNode?function(e){GlobalSetImmediate.call(global,e)}:function(e){ProcessNextTick.call(process,e)}}else if("function"==typeof NativePromise&&"function"==typeof NativePromise.resolve){var nativePromise=NativePromise.resolve();schedule=function(e){nativePromise.then(e)}}else schedule="undefined"!=typeof MutationObserver&&("undefined"==typeof window||!window.navigator||!window.navigator.standalone&&!window.cordova)&&"classList"in document.documentElement?function(){var e=document.createElement("div"),t={attributes:!0},o=!1,n=document.createElement("div"),i=new MutationObserver(function(){e.classList.toggle("foo"),o=!1});i.observe(n,t);var s=function(){o||(o=!0,n.classList.toggle("foo"))};return function(o){var n=new MutationObserver(function(){n.disconnect(),o()});n.observe(e,t),s()}}():"undefined"!=typeof setImmediate?function(e){setImmediate(e)}:"undefined"!=typeof setTimeout?function(e){setTimeout(e,0)}:noAsyncScheduler;module.exports=schedule;