"use strict";module.exports=function(t,r){function e(e,n){if(i(e)){if(e instanceof t)return e;var o=u(e);if(o===a){n&&n._pushContext();var f=t.reject(o.e);return n&&n._popContext(),f}if("function"==typeof o){if(c(e)){var f=new t(r);return e._then(f._fulfill,f._reject,void 0,f,null),f}return l(e,o,n)}}return e}function n(t){return t.then}function u(t){try{return n(t)}catch(r){return a.e=r,a}}function c(t){try{return f.call(t,"_promise0")}catch(r){return!1}}function l(e,n,u){function c(t){i&&(i._resolveCallback(t),i=null)}function l(t){i&&(i._rejectCallback(t,_,!0),i=null)}var i=new t(r),f=i;u&&u._pushContext(),i._captureStackTrace(),u&&u._popContext();var _=!0,p=o.tryCatch(n).call(e,c,l);return _=!1,i&&p===a&&(i._rejectCallback(p.e,!0,!0),i=null),f}var o=require("./util"),a=o.errorObj,i=o.isObject,f={}.hasOwnProperty;return e};