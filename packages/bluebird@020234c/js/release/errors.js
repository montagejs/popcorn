"use strict";function subError(r,e){function o(t){return this instanceof o?(notEnumerableProp(this,"message","string"==typeof t?t:e),notEnumerableProp(this,"name",r),void(Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this))):new o(t)}return inherits(o,Error),o}function OperationalError(r){return this instanceof OperationalError?(notEnumerableProp(this,"name","OperationalError"),notEnumerableProp(this,"message",r),this.cause=r,this.isOperational=!0,void(r instanceof Error?(notEnumerableProp(this,"message",r.message),notEnumerableProp(this,"stack",r.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor))):new OperationalError(r)}var es5=require("./es5"),Objectfreeze=es5.freeze,util=require("./util"),inherits=util.inherits,notEnumerableProp=util.notEnumerableProp,_TypeError,_RangeError,Warning=subError("Warning","warning"),CancellationError=subError("CancellationError","cancellation error"),TimeoutError=subError("TimeoutError","timeout error"),AggregateError=subError("AggregateError","aggregate error");try{_TypeError=TypeError,_RangeError=RangeError}catch(e){_TypeError=subError("TypeError","type error"),_RangeError=subError("RangeError","range error")}for(var methods="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),i=0;i<methods.length;++i)"function"==typeof Array.prototype[methods[i]]&&(AggregateError.prototype[methods[i]]=Array.prototype[methods[i]]);es5.defineProperty(AggregateError.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),AggregateError.prototype.isOperational=!0;var level=0;AggregateError.prototype.toString=function(){var r=Array(4*level+1).join(" "),e="\n"+r+"AggregateError of:\n";level++,r=Array(4*level+1).join(" ");for(var o=0;o<this.length;++o){for(var t=this[o]===this?"[Circular AggregateError]":this[o]+"",a=t.split("\n"),n=0;n<a.length;++n)a[n]=r+a[n];t=a.join("\n"),e+=t+"\n"}return level--,e},inherits(OperationalError,Error);var errorTypes=Error.__BluebirdErrorTypes__;errorTypes||(errorTypes=Objectfreeze({CancellationError:CancellationError,TimeoutError:TimeoutError,OperationalError:OperationalError,RejectionError:OperationalError,AggregateError:AggregateError}),es5.defineProperty(Error,"__BluebirdErrorTypes__",{value:errorTypes,writable:!1,enumerable:!1,configurable:!1})),module.exports={Error:Error,TypeError:_TypeError,RangeError:_RangeError,CancellationError:errorTypes.CancellationError,OperationalError:errorTypes.OperationalError,TimeoutError:errorTypes.TimeoutError,AggregateError:errorTypes.AggregateError,Warning:Warning};