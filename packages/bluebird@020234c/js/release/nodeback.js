"use strict";function isUntypedError(r){return r instanceof Error&&es5.getPrototypeOf(r)===Error.prototype}function wrapAsOperationalError(r){var e;if(isUntypedError(r)){e=new OperationalError(r),e.name=r.name,e.message=r.message,e.stack=r.stack;for(var a=es5.keys(r),o=0;o<a.length;++o){var t=a[o];rErrorKey.test(t)||(e[t]=r[t])}return e}return util.markAsOriginatingFromRejection(r),r}function nodebackForPromise(r,e){return function(a,o){if(null!==r){if(a){var t=wrapAsOperationalError(maybeWrapAsError(a));r._attachExtraTrace(t),r._reject(t)}else if(e){for(var n=arguments.length,s=new Array(Math.max(n-1,0)),i=1;i<n;++i)s[i-1]=arguments[i];r._fulfill(s)}else r._fulfill(o);r=null}}}var util=require("./util"),maybeWrapAsError=util.maybeWrapAsError,errors=require("./errors"),OperationalError=errors.OperationalError,es5=require("./es5"),rErrorKey=/^(?:name|message|stack|cause)$/;module.exports=nodebackForPromise;