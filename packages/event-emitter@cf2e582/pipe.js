"use strict";var aFrom=require("es5-ext/array/from"),remove=require("es5-ext/array/#/remove"),value=require("es5-ext/object/valid-object"),d=require("d"),emit=require("./").methods.emit,defineProperty=Object.defineProperty,hasOwnProperty=Object.prototype.hasOwnProperty,getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor;module.exports=function(e,r){var t,o,i,p;return value(e)&&value(r),p=arguments[2],void 0===p&&(p="emit"),o={close:function(){remove.call(t,r)}},hasOwnProperty.call(e,"__eePipes__")?((t=e.__eePipes__).push(r),o):(defineProperty(e,"__eePipes__",d("c",t=[r])),i=getOwnPropertyDescriptor(e,p),i?(delete i.get,delete i.set):i=d("c",void 0),i.value=function(){var e,r,o=aFrom(t);for(emit.apply(this,arguments),e=0;r=o[e];++e)emit.apply(r,arguments)},defineProperty(e,p,i),o)};