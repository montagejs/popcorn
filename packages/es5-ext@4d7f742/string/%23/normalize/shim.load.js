montageDefine("4d7f742","string/%23/normalize/shim",{dependencies:["../../../object/primitive-set","../../../object/valid-value","./_data"],factory:function(t,r,e){"use strict";var i,n,o,s,u,a,h,f,c,l,p,C,g,d=t("../../../object/primitive-set"),B=t("../../../object/valid-value"),w=t("./_data"),v=Math.floor,m=d("NFC","NFD","NFKC","NFKD"),y=[null,0,{}],F=10,x=44032,S=4352,N=4449,b=4519,D=19,j=21,K=28,A=j*K,E=D*A,k={},z=[];i=function(t,r){this.codepoint=t,this.feature=r},function(){for(var t=0;t<=255;++t)z[t]=0}(),n=function(t,r,e){var i=k[r];return i||(i=t(r,e),Boolean(i.feature)&&++z[r>>8&255]>F&&(k[r]=i)),i},o=function(t,r){var e=65280&r,n=i.udata[e]||{},o=n[r];return o?new i(r,o):new i(r,y)},s=function(t,r,e){return e?t(r,e):new i(r,null)},u=function(t,r,e){var n,o,s,u,a,h,f,c;if(r<S||S+D<=r&&r<x||x+E<r)return t(r,e);if(S<=r&&r<S+D){for(n={},o=(r-S)*j,s=0;s<j;++s)n[N+s]=x+K*(s+o);return u=new Array(3),u[2]=n,new i(r,u)}if(a=r-x,h=a%K,f=[],0===h)for(f[0]=[S+v(a/A),N+v(a%A/K)],f[2]={},c=1;c<K;++c)f[2][b+c]=r+c;else f[0]=[x+a-h,b+h];return new i(r,f)},a=function(t,r,e){return r<60||r>13311&&r<42607?new i(r,y):t(r,e)},h=[a,n,s,u,o],i.fromCharCode=h.reduceRight(function(t,r){return function(e,i){return r(t,e,i)}},null),i.isHighSurrogate=function(t){return t>=55296&&t<=56319},i.isLowSurrogate=function(t){return t>=56320&&t<=57343},i.prototype.prepFeature=function(){this.feature||(this.feature=i.fromCharCode(this.codepoint,!0).feature)},i.prototype.toString=function(){var t;return this.codepoint<65536?String.fromCharCode(this.codepoint):(t=this.codepoint-65536,String.fromCharCode(v(t/1024)+55296,t%1024+56320))},i.prototype.getDecomp=function(){return this.prepFeature(),this.feature[0]||null},i.prototype.isCompatibility=function(){return this.prepFeature(),Boolean(this.feature[1])&&256&this.feature[1]},i.prototype.isExclude=function(){return this.prepFeature(),Boolean(this.feature[1])&&512&this.feature[1]},i.prototype.getCanonicalClass=function(){return this.prepFeature(),this.feature[1]?255&this.feature[1]:0},i.prototype.getComposite=function(t){var r;return this.prepFeature(),this.feature[2]?(r=this.feature[2][t.codepoint],r?i.fromCharCode(r):null):null},f=function(t){this.str=t,this.cursor=0},f.prototype.next=function(){if(Boolean(this.str)&&this.cursor<this.str.length){var t,r=this.str.charCodeAt(this.cursor++);return i.isHighSurrogate(r)&&this.cursor<this.str.length&&i.isLowSurrogate(t=this.str.charCodeAt(this.cursor))&&(r=1024*(r-55296)+(t-56320)+65536,++this.cursor),i.fromCharCode(r)}return this.str=null,null},c=function(t,r){this.it=t,this.canonical=r,this.resBuf=[]},c.prototype.next=function(){var t,r;if(t=function(r,e){var n,o,s,u,a=e.getDecomp();if(Boolean(a)&&(!r||!e.isCompatibility())){for(n=[],o=0;o<a.length;++o)for(s=t(r,i.fromCharCode(a[o])),u=0;u<s.length;++u)n.push(s[u]);return n}return[e]},0===this.resBuf.length){if(r=this.it.next(),!r)return null;this.resBuf=t(this.canonical,r)}return this.resBuf.shift()},l=function(t){this.it=t,this.resBuf=[]},l.prototype.next=function(){var t,r,e,i,n;if(0===this.resBuf.length)do{if(r=this.it.next(),!r)break;if(t=r.getCanonicalClass(),e=this.resBuf.length,0!==t)for(e;e>0&&(i=this.resBuf[e-1],n=i.getCanonicalClass(),!(n<=t));--e);this.resBuf.splice(e,0,r)}while(0!==t);return this.resBuf.shift()},p=function(t){this.it=t,this.procBuf=[],this.resBuf=[],this.lastClass=null},p.prototype.next=function(){for(var t,r,e,i;0===this.resBuf.length;){if(t=this.it.next(),!t){this.resBuf=this.procBuf,this.procBuf=[];break}0===this.procBuf.length?(this.lastClass=t.getCanonicalClass(),this.procBuf.push(t)):(r=this.procBuf[0],e=r.getComposite(t),i=t.getCanonicalClass(),Boolean(e)&&(this.lastClass<i||0===this.lastClass)?this.procBuf[0]=e:(0===i&&(this.resBuf=this.procBuf,this.procBuf=[]),this.lastClass=i,this.procBuf.push(t)))}return this.resBuf.shift()},C=function(t,r){switch(t){case"NFD":return new l(new c(new f(r),(!0)));case"NFKD":return new l(new c(new f(r),(!1)));case"NFC":return new p(new l(new c(new f(r),(!0))));case"NFKC":return new p(new l(new c(new f(r),(!1))));default:throw new Error(t+" is invalid")}},g=function(t,r){for(var e,i=C(t,r),n="";e=i.next();)n+=e.toString();return n},i.udata=w,e.exports=function(){var t=String(B(this)),r=arguments[0];if(r=void 0===r?"NFC":String(r),!m[r])throw new RangeError("Invalid normalization form: "+r);return g(r,t)}}});