"use strict";var isCallable=require("../object/is-callable"),value=require("../object/valid-value"),call=Function.prototype.call;module.exports=function(e){return e=Object(value(e)),function(l){var r=this;return value(r),l=String(l),l.replace(/%([a-zA-Z]+)|\\([\u0000-\uffff])/g,function(l,a,t){var u,c;if(t)return t;for(u=a;u&&!(c=e[u]);)u=u.slice(0,-1);return c?(isCallable(c)&&(c=call.call(c,r)),c+a.slice(u.length)):l})}};