montageDefine("e0490f6","index",{dependencies:["es5-ext/array/#/clear","es5-ext/object/assign","es5-ext/object/valid-callable","es5-ext/object/valid-value","d","d/auto-bind","es6-symbol"],factory:function(_,t,e){"use strict";var n,i=_("es5-ext/array/#/clear"),o=_("es5-ext/object/assign"),s=_("es5-ext/object/valid-callable"),r=_("es5-ext/object/valid-value"),d=_("d"),h=_("d/auto-bind"),c=_("es6-symbol"),l=Object.defineProperty,a=Object.defineProperties;e.exports=n=function(_,t){if(!(this instanceof n))throw new TypeError("Constructor requires 'new'");a(this,{__list__:d("w",r(_)),__context__:d("w",t),__nextIndex__:d("w",0)}),t&&(s(t.on),t.on("_add",this._onAdd),t.on("_delete",this._onDelete),t.on("_clear",this._onClear))},delete n.prototype.constructor,a(n.prototype,o({_next:d(function(){var _;if(this.__list__)return this.__redo__&&(_=this.__redo__.shift(),void 0!==_)?_:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:void this._unBind()}),next:d(function(){return this._createResult(this._next())}),_createResult:d(function(_){return void 0===_?{done:!0,value:void 0}:{done:!1,value:this._resolve(_)}}),_resolve:d(function(_){return this.__list__[_]}),_unBind:d(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:d(function(){return"[object "+(this[c.toStringTag]||"Object")+"]"})},h({_onAdd:d(function(_){if(!(_>=this.__nextIndex__)){if(++this.__nextIndex__,!this.__redo__)return void l(this,"__redo__",d("c",[_]));this.__redo__.forEach(function(t,e){t>=_&&(this.__redo__[e]=++t)},this),this.__redo__.push(_)}}),_onDelete:d(function(_){var t;_>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(t=this.__redo__.indexOf(_),t!==-1&&this.__redo__.splice(t,1),this.__redo__.forEach(function(t,e){t>_&&(this.__redo__[e]=--t)},this)))}),_onClear:d(function(){this.__redo__&&i.call(this.__redo__),this.__nextIndex__=0})}))),l(n.prototype,c.iterator,d(function(){return this}))}});