montageDefine("b2c6b9c","lib/FeedHandler",{dependencies:["./index.js","util"],factory:function(e,t,i){function n(e){this.init(e,{ignoreWhitespace:!0})}function r(e,t){return u.getElementsByTagName(e,t,!0)}function a(e,t){return u.getElementsByTagName(e,t,!0,1)[0]}function d(e,t,i){return u.getText(u.getElementsByTagName(e,t,i,1))}var l=e("./index.js"),o=l.DomHandler,u=l.DomUtils;e("util").inherits(n,o),n.prototype.init=o;var s=function(e){return"rss"===e||"feed"===e||"rdf:RDF"===e};n.prototype.onend=function(){var e,t,i={},n=a(s,this.dom);n&&("feed"===n.name?(t=n.children,i.type="atom",(e=d("id",t))&&(i.id=e),(e=d("title",t))&&(i.title=e),(e=a("link",t))&&(e=e.attribs)&&(e=e.href)&&(i.link=e),(e=d("subtitle",t))&&(i.description=e),(e=d("updated",t))&&(i.updated=new Date(e)),(e=d("email",t,!0))&&(i.author=e),i.items=r("entry",t).map(function(e){var t,i={};return e=e.children,(t=d("id",e))&&(i.id=t),(t=d("title",e))&&(i.title=t),(t=a("link",e))&&(t=t.attribs)&&(t=t.href)&&(i.link=t),(t=d("summary",e))&&(i.description=t),(t=d("updated",e))&&(i.pubDate=new Date(t)),i})):(t=a("channel",n.children).children,i.type=n.name.substr(0,3),i.id="",(e=d("title",t))&&(i.title=e),(e=d("link",t))&&(i.link=e),(e=d("description",t))&&(i.description=e),(e=d("lastBuildDate",t))&&(i.updated=new Date(e)),(e=d("managingEditor",t))&&(i.author=e),i.items=r("item",n.children).map(function(e){var t,i={};return e=e.children,(t=d("guid",e))&&(i.id=t),(t=d("title",e))&&(i.title=t),(t=d("link",e))&&(i.link=t),(t=d("description",e))&&(i.description=t),(t=d("pubDate",e))&&(i.pubDate=new Date(t)),i}))),this.dom=i,o.prototype._handleCallback.call(this,n?null:Error("couldn't find root of feed"))},i.exports=n}});