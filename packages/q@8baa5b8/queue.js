function Queue(){var e=Q.defer(),r=Q.defer();return{put:function(r){var o=Q.defer();e.resolve({head:r,tail:o.promise}),e.resolve=o.resolve},get:function(){var o=e.promise.get("head");return e.promise=e.promise.get("tail"),o.fail(function(e){throw r.resolve(e),e})},closed:r.promise,close:function(o){o=o||new Error("Can't get value from closed queue");var t={head:Q.reject(o)};return t.tail=t,e.resolve(t),r.promise}}}var Q=require("./q");module.exports=Queue;