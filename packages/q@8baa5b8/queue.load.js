montageDefine("8baa5b8","queue",{dependencies:["./q"],factory:function(e,r,o){function t(){var e=n.defer(),r=n.defer();return{put:function(r){var o=n.defer();e.resolve({head:r,tail:o.promise}),e.resolve=o.resolve},get:function(){var o=e.promise.get("head");return e.promise=e.promise.get("tail"),o.fail(function(e){throw r.resolve(e),e})},closed:r.promise,close:function(o){o=o||new Error("Can't get value from closed queue");var t={head:n.reject(o)};return t.tail=t,e.resolve(t),r.promise}}}var n=e("./q");o.exports=t}});