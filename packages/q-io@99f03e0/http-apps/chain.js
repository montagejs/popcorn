function Chain(n){var t=Object.create(Chain.prototype);return t.end=n||function(n){return n},t}module.exports=Chain,Chain.prototype.use=function(n){if(!n)throw new Error("App is not defined after "+this.app);var t=Array.prototype.slice.call(arguments,1),r=this;return this.end=function(e){return function i(o){if(r.end!==i&&!o)throw new Error("App chain is broken after "+n);return e(n.apply(null,[o].concat(t)))}}(this.end),this.app=n,this};