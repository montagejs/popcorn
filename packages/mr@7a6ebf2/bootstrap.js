!function(e,t){"function"==typeof define&&define.amd?define("mr",[],t):"object"==typeof module&&module.exports?module.exports=t(require,exports,module):e.Montage=t({},{},{})}(this,function(e,t,r){"use strict";function o(e,t){return t.toUpperCase()}function n(){var e,t,r,n,i,a,c,d;if(!u)for(u={},i=document.getElementsByTagName("script"),e=0;e<i.length;e++)if(n=i[e],n.src&&(r=n.src.match(f))&&(a=r[1]),n.hasAttribute("data-mr-location")&&(a=p(window.location,n.getAttribute("data-mr-location"))),a){if(n.dataset)for(d in n.dataset)n.dataset.hasOwnProperty(d)&&(u[d]=n.dataset[d]);else if(n.attributes)for(t=0;t<n.attributes.length;t++)c=n.attributes[t],r=c.name.match(s),r&&(u[r[1].replace(l,o)]=c.value);n.parentNode.removeChild(n),u.mrLocation=a;break}return u}function i(e,t,r,o){function n(){o&&o(i),i.parentNode&&i.parentNode.removeChild(i)}var i;"undefined"!=typeof document?(i=document.createElement("script"),i.setAttribute("async",""),i.setAttribute("src",e),i.onload=function(){t&&t(i),n()},i.onerror=function(e){r&&r(e,i),n()},document.querySelector("head").appendChild(i)):(r(new Error("document not supported")),n())}function a(){var e=document.querySelector("base"),t=e;return t||(e=document.createElement("base"),e.href=""),function(r,o){r=String(r);var n,i,a=document.querySelector("head"),u=document.createElement("a");if(t||a.appendChild(e),!m.test(r))throw new Error("Can't resolve "+JSON.stringify(o)+" relative to "+JSON.stringify(r));return i=e.href,e.href=r,u.href=o,n=u.href,e.href=i,t||a.removeChild(e),n}}var u,c=eval,d=c("this"),s=/^data-(.*)$/,f=/^(.*)bootstrap.js(?:[\?\.]|$)/i,l=/-([a-z])/g,m=/^[\w\-]+:/,p=a(),h=/interactive|complete/,v=function(e){function t(){u&&c&&e(c,s,f)}function r(){s=a("promise"),c=a("require"),f=a("mini-url"),t()}function o(){document.removeEventListener("DOMContentLoaded",o,!0),u=!0,t()}function a(e){if(!m[e]&&v[e]){var t=m[e]={};m[e]=v[e](a,t)||t}return m[e]}e=e||callbackApplication;var u,c,s,f,l=n(),m={},v={};h.test(document.readyState)?o():document.addEventListener("DOMContentLoaded",o,!0);var w={promise:"node_modules/bluebird/js/browser/bluebird.min.js",require:"require.js","require/browser":"browser.js"};if(!d.preload){var b=p(window.location,l.mrLocation),g=function(){d.bootstrap("bluebird",function(e,t){return window.Promise}),d.bootstrap("promise",function(e,t){return window.Promise})};l.promiseLocation?i(l.promiseLocation,g):i(p(window.location,w.promise),g,function(){i(p(b,w.promise),g)});for(var y in w)w.hasOwnProperty(y)&&"promise"!==y&&i(p(b,w[y]))}d.bootstrap=function(e,t){v[e]=t,delete w[e];for(e in w)if(w.hasOwnProperty(e))return;delete d.bootstrap,r()},d.bootstrap("mini-url",function(e,t){t.resolve=p})},w={getParams:n,bootstrap:v};t.getPlatform=function(){if("undefined"!=typeof window&&window&&window.document)return w;if("undefined"!=typeof process)return e("./node.js");throw new Error("Platform not supported.")},t.Require=null,t.initMontageRequire=function(){var e=t.getPlatform();return e.bootstrap(function(t,r,o){var n={},a=e.getParams(),u=a.module||"",c=o.resolve(t.getLocation(),a["package"]||".");if(d.preload){var s={},f=function(e){return s[e]=s[e]||r.resolve()};d.bundleLoaded=function(e){return f(e).resolve()};var l={promise:new r(function(e,t){l.resolve=e,l.reject=t})};n.preloaded=l.promise;var m=r.resolve();d.preload.forEach(function(e){m=m.then(function(){return r.all(e.map(function(e){return i(e),f(e).promise}))})}),l.resolve(m.then(function(){delete d.preload,delete d.bundleLoaded}))}t.loadPackage({location:a.mrLocation,hash:a.mrHash},n).then(function(e){return e.inject("mini-url",o),e.inject("promise",r),e.inject("require",e),"autoPackage"in a&&e.injectPackageDescription(c,{}),e.loadPackage({location:c,hash:a.applicationHash}).then(function(e){return d.require=d.mr=e,e.async(u)})})})},"undefined"!=typeof window?d.__MONTAGE_REQUIRE_LOADED__?console.warn("MontageRequire already loaded!"):(d.__MONTAGE_REQUIRE_LOADED__=!0,t.initMontageRequire()):t.getPlatform()});