"use strict";var clear=require("es5-ext/array/#/clear"),eIndexOf=require("es5-ext/array/#/e-index-of"),setPrototypeOf=require("es5-ext/object/set-prototype-of"),callable=require("es5-ext/object/valid-callable"),d=require("d"),ee=require("event-emitter"),Symbol=require("es6-symbol"),iterator=require("es6-iterator/valid-iterable"),forOf=require("es6-iterator/for-of"),Iterator=require("./lib/iterator"),isNative=require("./is-native-implemented"),call=Function.prototype.call,defineProperty=Object.defineProperty,getPrototypeOf=Object.getPrototypeOf,SetPoly,getValues,NativeSet;isNative&&(NativeSet=Set),module.exports=SetPoly=function(){var e,t=arguments[0];if(!(this instanceof SetPoly))throw new TypeError("Constructor requires 'new'");return e=isNative&&setPrototypeOf?setPrototypeOf(new NativeSet,getPrototypeOf(this)):this,null!=t&&iterator(t),defineProperty(e,"__setData__",d("c",[])),t?(forOf(t,function(e){eIndexOf.call(this,e)===-1&&this.push(e)},e.__setData__),e):e},isNative&&(setPrototypeOf&&setPrototypeOf(SetPoly,NativeSet),SetPoly.prototype=Object.create(NativeSet.prototype,{constructor:d(SetPoly)})),ee(Object.defineProperties(SetPoly.prototype,{add:d(function(e){return this.has(e)?this:(this.emit("_add",this.__setData__.push(e)-1,e),this)}),clear:d(function(){this.__setData__.length&&(clear.call(this.__setData__),this.emit("_clear"))}),"delete":d(function(e){var t=eIndexOf.call(this.__setData__,e);return t!==-1&&(this.__setData__.splice(t,1),this.emit("_delete",t,e),!0)}),entries:d(function(){return new Iterator(this,"key+value")}),forEach:d(function(e){var t,r,i,o=arguments[1];for(callable(e),t=this.values(),r=t._next();void 0!==r;)i=t._resolve(r),call.call(e,o,i,i,this),r=t._next()}),has:d(function(e){return eIndexOf.call(this.__setData__,e)!==-1}),keys:d(getValues=function(){return this.values()}),size:d.gs(function(){return this.__setData__.length}),values:d(function(){return new Iterator(this)}),toString:d(function(){return"[object Set]"})})),defineProperty(SetPoly.prototype,Symbol.iterator,d(getValues)),defineProperty(SetPoly.prototype,Symbol.toStringTag,d("c","Set"));