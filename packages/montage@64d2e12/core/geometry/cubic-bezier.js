var Montage=require("../core").Montage,Point=require("./point").Point,CubicBezier=exports.CubicBezier=Montage.specialize({init:{enumerable:!1,value:function(i){return null!==i&&(2===i.length?(this.p1=i[0],this.p2=i[1]):4===i.length&&(this.p0=i[0],this.p1=i[1],this.p2=i[2],this.p3=i[3])),this}},position:{enumerable:!1,value:function(i){if(!(i<0||i>1)){i=1-i;var e=i*i*i,t=3*i*i*(1-i),n=3*i*(1-i)*(1-i),p=(1-i)*(1-i)*(1-i);return(new Point).init(this.p0.x*e+this.p1.x*t+this.p2.x*n+this.p3.x*p,this.p0.y*e+this.p1.y*t+this.p2.y*n+this.p3.y*p)}}},split:{enumerable:!1,value:function(i){return this.makeScaffolding(i),(new CubicBezier).init([this.p0,this.p01,this.p012,this.p0123])}},splitToTimingFunction:{enumerable:!1,value:function(i){this.makeScaffolding(i);var e=this.p0123.x,t=this.p0123.y;return(new CubicBezier).init([(new Point).init(this.p01.x/e,this.p01.y/t),(new Point).init(this.p012.x/e,this.p012.y/t)])}},makeScaffolding:{enumerable:!1,value:function(i){i=1-i;var e=1e6;Montage.defineProperty(this,"p01",{value:Point.interpolate(i,this.p0,this.p1,e)}),Montage.defineProperty(this,"p12",{value:Point.interpolate(i,this.p1,this.p2,e)}),Montage.defineProperty(this,"p23",{value:Point.interpolate(i,this.p2,this.p3,e)}),Montage.defineProperty(this,"p012",{value:Point.interpolate(i,this.p01,this.p12,e)}),Montage.defineProperty(this,"p123",{value:Point.interpolate(i,this.p12,this.p23,e)}),Montage.defineProperty(this,"p0123",{value:Point.interpolate(i,this.p012,this.p123,e)})}},p0:{enumerable:!0,value:(new Point).init(0,0)},p1:{enumerable:!0,value:(new Point).init(0,0)},p2:{enumerable:!0,value:(new Point).init(1,1)},p3:{enumerable:!0,value:(new Point).init(1,1)}});