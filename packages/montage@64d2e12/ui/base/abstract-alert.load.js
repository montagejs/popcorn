montageDefine("64d2e12","ui/base/abstract-alert",{dependencies:["../component","../modal-overlay.reel","../../core/promise"],factory:function(e,t,n){var s=e("../component").Component,o=(e("../modal-overlay.reel").ModalOverlay,e("../../core/promise").Promise);t.AbstractAlert=s.specialize({constructor:{value:function r(){if(this.constructor===r)throw new Error("AbstractAlert cannot be instantiated.")}},_overlay:{value:null},_okButton:{value:null},_userActionPromise:{value:null},title:{value:"Alert"},okLabel:{value:"OK"},message:{value:null},enterDocument:{value:function(e){var t;e&&(t=Object.getPrototypeOf(this).constructor,this===t._instance&&t._nextMessagePromiseHandlerResolve(),this._okButton.addEventListener("action",this,!1))}},resolveUserAction:{value:null},rejectUserAction:{value:null},show:{value:function(){if(!this._userActionPromise){this._overlay.hasModalMask=!1,this._overlay.show();var e=this;this._userActionPromise=new o(function(t,n){e.resolveUserAction=t,e.rejectUserAction=n})}return this._userActionPromise}},handleAction:{value:function(e){e.target===this._okButton&&(this.resolveUserAction(),this._userActionPromise=null,this._overlay.hide())}}},{_instance:{value:null},_nextMessagePromiseHandlerResolve:{value:null},_nextMessagePromiseHandlerReject:{value:null},__nextMessagePromise:{value:null},_nextMessagePromise:{set:function(e){this.__nextMessagePromise=e},get:function(){if(!this.hasOwnProperty("__nextMessagePromise")){var e=this;this.__nextMessagePromise=new o(function(t,n){e._nextMessagePromiseHandlerResolve=t,e._nextMessagePromiseHandlerReject=n})}return this.__nextMessagePromise}},_setupInstance:{value:function(){var e;e=this._instance=new this,e.element=e.rootComponent.element.createElement("div"),e.element.ownerDocument.body.appendChild(e.element),e.attachToParentComponent(),e.needsDraw=!0}},show:{value:function(e,t){var n,s=this;return this.hasOwnProperty("_instance")||this._setupInstance(),n=this._instance,this._nextMessagePromise=this._nextMessagePromise.then(function(){return t?n.title=t:n.title=s.prototype.title,n.message=e,n.show()}),this._nextMessagePromise}}})}});