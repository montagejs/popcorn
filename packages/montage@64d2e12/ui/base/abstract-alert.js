var Component=require("../component").Component,ModalOverlay=require("../modal-overlay.reel").ModalOverlay,Promise=require("../../core/promise").Promise;exports.AbstractAlert=Component.specialize({constructor:{value:function e(){if(this.constructor===e)throw new Error("AbstractAlert cannot be instantiated.")}},_overlay:{value:null},_okButton:{value:null},_userActionPromise:{value:null},title:{value:"Alert"},okLabel:{value:"OK"},message:{value:null},enterDocument:{value:function(e){var t;e&&(t=Object.getPrototypeOf(this).constructor,this===t._instance&&t._nextMessagePromiseHandlerResolve(),this._okButton.addEventListener("action",this,!1))}},resolveUserAction:{value:null},rejectUserAction:{value:null},show:{value:function(){if(!this._userActionPromise){this._overlay.hasModalMask=!1,this._overlay.show();var e=this;this._userActionPromise=new Promise(function(t,s){e.resolveUserAction=t,e.rejectUserAction=s})}return this._userActionPromise}},handleAction:{value:function(e){e.target===this._okButton&&(this.resolveUserAction(),this._userActionPromise=null,this._overlay.hide())}}},{_instance:{value:null},_nextMessagePromiseHandlerResolve:{value:null},_nextMessagePromiseHandlerReject:{value:null},__nextMessagePromise:{value:null},_nextMessagePromise:{set:function(e){this.__nextMessagePromise=e},get:function(){if(!this.hasOwnProperty("__nextMessagePromise")){var e=this;this.__nextMessagePromise=new Promise(function(t,s){e._nextMessagePromiseHandlerResolve=t,e._nextMessagePromiseHandlerReject=s})}return this.__nextMessagePromise}},_setupInstance:{value:function(){var e;e=this._instance=new this,e.element=e.rootComponent.element.createElement("div"),e.element.ownerDocument.body.appendChild(e.element),e.attachToParentComponent(),e.needsDraw=!0}},show:{value:function(e,t){var s,n=this;return this.hasOwnProperty("_instance")||this._setupInstance(),s=this._instance,this._nextMessagePromise=this._nextMessagePromise.then(function(){return t?s.title=t:s.title=n.prototype.title,s.message=e,s.show()}),this._nextMessagePromise}}});