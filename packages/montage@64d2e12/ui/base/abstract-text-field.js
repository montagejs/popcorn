var AbstractControl=require("./abstract-control").AbstractControl,KeyComposer=require("../../composer/key-composer").KeyComposer,deprecate=require("../../core/deprecate"),AbstractTextField=exports.AbstractTextField=AbstractControl.specialize({constructor:{value:function e(){if(this.constructor===e)throw new Error("AbstractTextField cannot be instantiated.");this.defineBindings({"classList.has('montage--disabled')":{"<-":"!enabled"}})}},hasTemplate:{value:!1},acceptsActiveTarget:{get:function(){return this.callDelegateMethod("shouldBeginEditing",this)!==!1}},delegate:{value:null},enabled:{value:!0},_placeholder:{value:null},placeholderValue:{set:function(e){deprecate.deprecationWarning("placeholderValue","placeholder"),this.placeholder=e},get:function(){return this.placeholder}},placeholder:{set:function(e){this._placeholder=e,this.needsDraw=!0},get:function(){return this._placeholder}},_value:{value:null},value:{set:function(e){e!==this._value&&(this.hasFocus&&!this.callDelegateMethod("shouldAcceptValue",this,e)||(this._value=e,this.needsDraw=!0))},get:function(){return this._value}},errorMessage:{value:null},converter:{value:null},_hasFocus:{value:!1},hasFocus:{set:function(e){this._hasFocus=e},get:function(){return this._hasFocus}},__keyComposer:{value:null},_keyComposer:{get:function(){return this.__keyComposer||(this.__keyComposer=new KeyComposer,this.__keyComposer.component=this,this.__keyComposer.keys="enter",this.addComposer(this.__keyComposer)),this.__keyComposer}},handleKeyPress:{value:function(e){this.enabled&&e.keyComposer===this._keyComposer&&this.dispatchActionEvent()}},prepareForActivationEvents:{value:function(){this._keyComposer.addEventListener("keyPress",this,!1)}},enterDocument:{value:function(e){e&&(this.element.addEventListener("input",this,!1),this.element.addEventListener("change",this,!1))}},draw:{value:function(){var e,t=this.value,s=this.element.selectionStart,i=this.element.selectionEnd;this.converter&&(t=this.converter.convert(t)),e=typeof t,null===t||"undefined"===e?this.element.value="":"boolean"===e||"object"===e||"number"===e?this.element.value=t.toString():this.element.value=t,this.eventManager.activeTarget===this&&"function"==typeof this.element.setSelectionRange&&this.element.setSelectionRange(s,i),this._placeholder&&this.element.setAttribute("placeholder",this._placeholder),this.element.disabled=!this.enabled}},handleChange:{value:function(){this._updateValueFromDom()}},handleInput:{value:function(e){this._updateValueFromDom()}},willBecomeActiveTarget:{value:function(e){this.hasFocus=!0,this.callDelegateMethod("didBeginEditing",this)}},surrendersActiveTarget:{value:function(e){return this.callDelegateMethod("shouldEndEditing",this)!==!1&&(this._hasFocus=!1,this.callDelegateMethod("didEndEditing",this),!0)}},_updateValueFromDom:{value:function(){var e,t;if(t=e=this.element.value,this.converter)try{t=this.converter.revert(e),this.errorMessage=null}catch(s){this.errorMessage=s.message||s}this._value!==t&&(this._value=t,this.dispatchOwnPropertyChange("value",this._value),this.callDelegateMethod("didChange",this)),this.converter&&(this.needsDraw=!0)}}});