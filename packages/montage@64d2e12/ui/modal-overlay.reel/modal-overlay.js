var Overlay=require("../overlay.reel").Overlay,Promise=require("../../core/promise").Promise,CLASS_PREFIX="montage-ModalOverlay",ModalOverlay=exports.ModalOverlay=Overlay.specialize({enterDocument:{value:function(e){var s;this["super"](e),e&&(s=this.element.ownerDocument.body,s.appendChild(this.modalMaskElement))}},_queue:{value:[]},_showPromise:{value:null},_dismissOnExternalInteraction:{value:!1},hasModalMask:{value:!0},_slotComponent:{value:null},show:{value:function(e){var s,o=this._queue,i=o.indexOf(this);return i===-1?(0===o.length?(this["super"](),s=Promise.resolve()):(s=this._showPromise={},this._showPromise.promise=new Promise(function(e,o){s.resolve=e,s.reject=o}),s=this._showPromise.promise),e&&(this._slotComponent.content=e),o.push(this)):(0===i&&(s=this._showPromise={},this._showPromise.promise=new Promise(function(e,o){s.resolve=e,s.reject=o}),o.push(this)),s=this._showPromise.promise),s}},hide:{value:function(){var e,s=this._queue,o=s.indexOf(this);0===o?(s.shift(),this["super"](),s.length>0&&(e=s[0],e._showPromise.resolve(),Overlay.prototype.show.call(e))):o>0&&(s.splice(o,1),this._showPromise.reject(new Error("Modal Overlay position in the queue is not 0")))}},draw:{value:function(){this["super"](),this._isShown&&this.hasModalMask?this.modalMaskElement.classList.add(CLASS_PREFIX+"-modalMask--visible"):this.modalMaskElement.classList.remove(CLASS_PREFIX+"-modalMask--visible")}}});window.MontageElement&&MontageElement.define("montage-modal-overlay",ModalOverlay);