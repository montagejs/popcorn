montageDefine("64d2e12","ui/cascading-list.reel/cascading-list",{dependencies:["../component","../../core/core","../../core/promise"],factory:function(t,e,n){var i=t("../component").Component,s=t("../../core/core").Montage,o=(t("../../core/promise").Promise,e.CascadingListContext=s.specialize({object:{value:null},userInterfaceDescriptor:{value:null},columnIndex:{value:null},cascadingList:{value:null},cascadingListItem:{value:null},isEditing:{value:!1}}));e.CascadingList=i.specialize({constructor:{value:function(){this.history=[]}},_currentColumnIndex:{value:0},history:{value:null},_root:{value:null},root:{get:function(){return this._root},set:function(t){this._root!==t&&(this._root=t,t&&this.expand(t))}},shouldDispatchCascadingListEvents:{value:!1},exitDocument:{value:function(){this.popAll()}},_delegate:{value:null},delegate:{set:function(t){this._delegate=t,t&&(void 0===t.shouldListEnableSelection&&(t.shouldListEnableSelection=this.shouldListEnableSelection.bind(t)),void 0===t.shouldListBeExpandable&&(t.shouldListBeExpandable=this.shouldListBeExpandable.bind(t)),void 0===t.shouldListAllowMultipleSelectionn&&(t.shouldListAllowMultipleSelectionn=this.shouldListAllowMultipleSelectionn.bind(t)))},get:function(){return this._delegate||this}},shouldListEnableSelection:{value:function(){return!0}},shouldListBeExpandable:{value:function(){return!0}},shouldListAllowMultipleSelectionn:{value:function(){return!1}},push:{value:function(t){this.expand(t,this._currentColumnIndex+1)}},pop:{value:function(){this._pop()}},popAll:{value:function(){for(;this.history.length;)this._pop()}},popAtIndex:{value:function(t){t<=this._currentColumnIndex&&this._currentColumnIndex!==-1&&(this._pop(),t<=this._currentColumnIndex&&this.popAtIndex(t))}},expand:{value:function(t,e,n){if(e=e||this._currentColumnIndex){if(e>0){var i=this.cascadingListItemAtIndex(e-1);i&&i.selectObject(t)}for(var s=this.history.length-e;s>0;s--)this._pop()}else this.popAll();return this._currentColumnIndex=e,this._populateColumnWithObjectAndIndex(t,e,n)}},cascadingListItemAtIndex:{value:function(t){if(this.history[t])return this.history[t].cascadingListItem}},findIndexForObject:{value:function(t){for(var e=this.history.length-1;e>-1;e--)if(this.history[e]===t)return e;return-1}},_push:{value:function(t){this.history.splice(t.columnIndex,1,t),this.needsDraw=!0,this.shouldDispatchCascadingListEvents&&this.dispatchEventNamed("cascadingListPush",!0,!0,t)}},_pop:{value:function(){var t=this.history.pop();return this._currentColumnIndex--,t.isEditing=!1,this.needsDraw=!0,this.shouldDispatchCascadingListEvents&&this.dispatchEventNamed("cascadingListPop",!0,!0,t),t}},_populateColumnWithObjectAndIndex:{value:function(t,e,n){if(!this._populatePromise&&t){var i=this;this._populatePromise=this.loadUserInterfaceDescriptor(t).then(function(s){var o=i._createCascadingListContextWithObjectAndColumnIndex(t,e);return o.userInterfaceDescriptor=s,o.isEditing=!!n,i._push(o),i._populatePromise=null,o})}return this._populatePromise}},_createCascadingListContextWithObjectAndColumnIndex:{value:function(t,e){var n=new o;return n.object=t,n.columnIndex=e,n.cascadingList=this,n}}})}});