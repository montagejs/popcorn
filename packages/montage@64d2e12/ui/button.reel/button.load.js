montageDefine("64d2e12","ui/button.reel/button",{dependencies:["ui/control","composer/key-composer","composer/press-composer"],factory:function(e,t,s){var i=e("ui/control").Control,n=e("composer/key-composer").KeyComposer,r=e("composer/press-composer").PressComposer,o=t.Button=i.specialize({standardElementTagName:{value:"BUTTON"},hasTemplate:{value:!1},drawsFocusOnPointerActivation:{value:!0},_labelNode:{value:void 0,enumerable:!1},_label:{value:void 0,enumerable:!1},defaultLabel:{value:"Button",enumerable:!1},label:{get:function(){return this._label},set:function(e){if("undefined"!=typeof e&&this.converter)try{e=this.converter.convert(e),this.error&&(this.error=null)}catch(t){this.error=t}this._label=void 0!==e&&null!==e?String(e):this.defaultLabel,this.isInputElement&&(this._value=e),this.needsDraw=!0}},_promise:{value:void 0},promise:{get:function(){return this._promise},set:function(e){var t=this,s=function i(){i.promise===t._promise&&(t.classList.remove("montage--pending"),t._promise=void 0)};this._promise!==e&&(this._promise=e,this._promise&&(this.classList.add("montage--pending"),s.promise=e,this._promise.then(s)))}},holdThreshold:{get:function(){return this._pressComposer.longPressThreshold},set:function(e){this._pressComposer.longPressThreshold=e}},__pressComposer:{enumerable:!1,value:null},_pressComposer:{enumerable:!1,get:function(){return this.__pressComposer||(this.__pressComposer=new r,this.addComposer(this.__pressComposer)),this.__pressComposer}},__spaceKeyComposer:{value:null},_spaceKeyComposer:{get:function(){return this.__spaceKeyComposer||(this.__spaceKeyComposer=n.createKey(this,"space","space")),this.__spaceKeyComposer}},_enterKeyComposer:{get:function(){return this.__enterKeyComposer||(this.__enterKeyComposer=n.createKey(this,"enter","enter")),this.__enterKeyComposer}},prepareForActivationEvents:{value:function(){this._pressComposer.addEventListener("pressStart",this,!1),this._spaceKeyComposer.addEventListener("keyPress",this,!1),this._enterKeyComposer.addEventListener("keyPress",this,!1)}},handleKeyPress:{value:function(e){"space"!==e._event.identifier&&"enter"!==e._event.identifier||(this.active=!1,this.dispatchActionEvent())}},addEventListener:{value:function(e,t,s){i.prototype.addEventListener.call(this,e,t,s),"longAction"===e&&this._pressComposer.addEventListener("longPress",this,!1)}},_addEventListeners:{value:function(){this._pressComposer.addEventListener("press",this,!1),this._pressComposer.addEventListener("pressCancel",this,!1),this._pressComposer.addEventListener("longPress",this,!1)}},_removeEventListeners:{value:function(){this._pressComposer.removeEventListener("press",this,!1),this._pressComposer.removeEventListener("pressCancel",this,!1),this._pressComposer.removeEventListener("longPress",this,!1)}},handlePressStart:{value:function(e){this._promise||(this.active=!0,this._addEventListeners())}},handlePress:{value:function(e){this._promise||(this.active=!1,this.dispatchActionEvent(),this._removeEventListeners())}},handleLongPress:{value:function(e){if(!this._promise){this._pressComposer.cancelPress(),this._removeEventListeners();var t=document.createEvent("CustomEvent");t.initCustomEvent("longAction",!0,!0,null),this.dispatchEvent(t)}}},handlePressCancel:{value:function(e){this.active=!1,this._removeEventListeners()}},_isInputElement:{value:void 0,enumerable:!1},isInputElement:{get:function(){return void 0!==this._isInputElement?this._isInputElement:this._isInputElement=!!this.element&&"INPUT"===this.element.tagName},enumerable:!1},enterDocument:{value:function(e){i.prototype.enterDocument&&i.prototype.enterDocument.apply(this,arguments),e&&(this.isInputElement?(Object.defineProperty(this,"value",{get:function(){return this._label},set:function(e){this.label=e}}),void 0===this._label&&(this.label=this.originalElement.value)):(this.originalElement===this.element&&void 0===this._label&&this.originalElement.firstChild&&(this._label=this.originalElement.firstChild.data),this.element.firstChild||this.element.appendChild(document.createTextNode("")),this._labelNode=this.element.firstChild),this.element.setAttribute("role","button"),this.element.addEventListener("keyup",this,!1))}},_drawLabel:{enumerable:!1,value:function(e){"string"!=typeof e&&(e=this.defaultLabel),this.isInputElement?this._element.value=e:this._labelNode&&(this._labelNode.data=e)}},draw:{value:function(){this["super"](),this._drawLabel(this._label)}}});o.addAttributes({formaction:null,formenctype:null,formmethod:null,formnovalidate:{dataType:"boolean"},formtarget:null,type:{value:"button"},name:null,value:null})}});