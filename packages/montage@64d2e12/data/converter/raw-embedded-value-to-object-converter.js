var RawValueToObjectConverter=require("./raw-value-to-object-converter").RawValueToObjectConverter,Promise=require("core/promise").Promise;exports.RawEmbeddedValueToObjectConverter=RawValueToObjectConverter.specialize({convert:{value:function(e){var r,t,o=this;return Promise.all([this._descriptorToFetch,this.service]).then(function(n){var i=n[0],a=n[1];if(Array.isArray(e)){if(e.length){r=[];for(var s,u=0,v=e.length;u<v;u++)t=o._convertOneValue(e[u],i,a,r,u),Promise.is(t)&&(s||(s=[])).push(t);return Promise.all(s).then(function(){return r})}return Promise.resolve(e)}if(e)return this._convertOneValue(e,i,a)})}},_convertOneValue:{value:function(e,r,t,o,n){var i=t.resolveObjectForTypeRawData(r,e);return i=i?i.then(function(e){return o&&(o[n]=e),e}):Promise.resolve()}},revert:{value:function(e){if(e){if(this.compiledRevertSyntax){var r=this.scope;return r.value=e,Promise.resolve(this.compiledRevertSyntax(r))}return Promise.resolve(e)}return Promise.resolve()}}});