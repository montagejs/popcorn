function parseRanges(e){for(var r=[],t=e.split(","),s=0;s<t.length;s++)r.push(exports.parseMediaRange(t[s]));return r}exports.parseMimeType=function(e){for(var r,t,s={},a=e.split(";"),n=0;n<a.length;n++){var p=a[n].split("=");2===p.length&&(s[p[0].trim()]=p[1].trim())}return r=a[0].replace(/^\s+/,"").replace(/\s+$/,""),"*"===r&&(r="*/*"),t=r.split("/"),[t[0],t[1],s]},exports.parseMediaRange=function(e){var r,t=exports.parseMimeType(e);return t[2].q?(r=parseFloat(t[2].q),isNaN(r)?t[2].q="1":(r>1||r<0)&&(t[2].q="1")):t[2].q="1",t},exports.fitnessAndQualityParsed=function(e,r){for(var t=-1,s=0,a=exports.parseMediaRange(e),n=a[0],p=a[1],i=a[2],o=0;o<r.length;o++){var u=r[o],l=u[0],f=u[1],g=u[2];if(!(l!==n&&"*"!==l&&"*"!==n||f!==p&&"*"!==f&&"*"!==p)){var x=0;for(var d in i)"q"!==d&&g[d]&&g[d]===i[d]&&(x+=1);var c=l===n?100:0;c+=f===p?10:0,c+=x,c>t&&(t=c,s=g.q)}}return[t,parseFloat(s)]},exports.qualityParsed=function(e,r){return exports.fitnessAndQualityParsed(e,r)[1]},exports.quality=function(e,r){return exports.qualityParsed(e,parseRanges(r))},exports.bestMatch=function(e,r){for(var t=parseRanges(r),s=[],a=0;a<e.length;a++)s.push([exports.fitnessAndQualityParsed(e[a],t),e[a]]);return s.sort(),s[s.length-1][0][1]?s[s.length-1][1]:""};