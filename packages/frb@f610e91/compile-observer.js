function compile(e){return semantics.compile(e)}var Observers=require("./observers"),Operators=require("./operators"),LITERAL="literal",VALUE="value",PARAMETERS="parameters",ELEMENT="element",COMPONENT="component",RECORD="record";module.exports=compile;for(var semantics=compile.semantics={compilers:{property:Observers.makePropertyObserver,get:Observers.makeGetObserver,path:Observers.makePathObserver,"with":Observers.makeWithObserver,"if":Observers.makeConditionalObserver,parent:Observers.makeParentObserver,not:Observers.makeNotObserver,and:Observers.makeAndObserver,or:Observers.makeOrObserver,"default":Observers.makeDefaultObserver,defined:Observers.makeDefinedObserver,rangeContent:Function.identity,mapContent:Function.identity,keys:Observers.makeKeysObserver,keysArray:Observers.makeKeysObserver,values:Observers.makeValuesObserver,valuesArray:Observers.makeValuesObserver,items:Observers.makeEntriesObserver,entries:Observers.makeEntriesObserver,entriesArray:Observers.makeEntriesObserver,toMap:Observers.makeToMapObserver,mapBlock:Observers.makeMapBlockObserver,filterBlock:Observers.makeFilterBlockObserver,everyBlock:Observers.makeEveryBlockObserver,someBlock:Observers.makeSomeBlockObserver,sortedBlock:Observers.makeSortedBlockObserver,sortedSetBlock:Observers.makeSortedSetBlockObserver,groupBlock:Observers.makeGroupBlockObserver,groupMapBlock:Observers.makeGroupMapBlockObserver,minBlock:Observers.makeMinBlockObserver,maxBlock:Observers.makeMaxBlockObserver,min:Observers.makeMinObserver,max:Observers.makeMaxObserver,enumerate:Observers.makeEnumerationObserver,reversed:Observers.makeReversedObserver,flatten:Observers.makeFlattenObserver,concat:Observers.makeConcatObserver,view:Observers.makeViewObserver,sum:Observers.makeSumObserver,average:Observers.makeAverageObserver,last:Observers.makeLastObserver,only:Observers.makeOnlyObserver,one:Observers.makeOneObserver,has:Observers.makeHasObserver,tuple:Observers.makeArrayObserver,range:Observers.makeRangeObserver,startsWith:Observers.makeStartsWithObserver,endsWith:Observers.makeEndsWithObserver,contains:Observers.makeContainsObserver,join:Observers.makeJoinObserver,toArray:Observers.makeToArrayObserver,asArray:Observers.makeToArrayObserver},compile:function(e){var r=this.compilers,s=e.type;if(e.type===LITERAL)return Observers.makeLiteralObserver(e.value);if(s===VALUE)return Observers.observeValue;if(s===PARAMETERS)return Observers.observeParameters;if(s===ELEMENT)return Observers.makeElementObserver(e.id);if(s===COMPONENT)return Observers.makeComponentObserver(e.label,e);if(s===RECORD){for(var a={},v=e.args,O=Object.keys(v),b=0;name=O[b];b++)a[name]=this.compile(v[name]);return Observers.makeObjectObserver(a)}r.hasOwnProperty(s)||(r[s]=Observers.makeMethodObserverMaker(s));for(var t=[],b=0,v=e.args,m=v.length;b<m;b++)t[b]=this.compile(v[b]);return 1===m?r[s].call(null,t[0]):2===m?r[s].call(null,t[0],t[1]):r[s].apply(null,t)}},compilers=semantics.compilers,operatorsKeys=Object.keys(Operators),i=0,name;name=operatorsKeys[i];i++)compilers[name]||(compilers[name]=Observers.makeOperatorObserverMaker(Operators[name]));compilers.toString=Observers.makeOperatorObserverMaker(Operators.toString);