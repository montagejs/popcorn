montageDefine("f610e91","stringify",{dependencies:["./parse","./language","./language","./language"],factory:function(e,n,r){"use strict";function t(e,n){return t.semantics.stringify(e,n)}function a(e){return function(n,r,t){var a=e+"{"+t(n.args[1],r)+"}";return"value"===n.args[0].type?a:t(n.args[0],r)+"."+a}}var o=(e("./parse"),e("./language").precedence),s=e("./language").operatorTypes;e("./language").operatorTokens;r.exports=t,t.semantics={makeBlockStringifier:a,stringify:function(e,n,r){function t(e){var r=s(e,n);return r?r:"this"}var a,s=this.stringify.bind(this),i=this.stringifiers;if(i[e.type])a=i[e.type](e,n,s);else if(e.inline)a="&"+e.type+"("+e.args.map(t).join(", ")+")";else{var u;1===e.args.length&&"mapBlock"===e.args[0].type?(u=e.type+"{"+s(e.args[0].args[1],n)+"}",e=e.args[0]):u=e.type+"("+e.args.slice(1).map(t).join(", ")+")",a="value"===e.args[0].type?u:s(e.args[0],n)+"."+u}return!r||r.type===e.type&&"if"!==r.type||o.get(r.type).has(e.type)?a:"("+a+")"},stringifiers:{value:function(e,n,r){return""},literal:function(e,n,r){return"string"==typeof e.value?"'"+e.value.replace("'","\\'")+"'":""+e.value},parameters:function(e,n,r){return"$"},record:function(e,n,r){return"{"+Object.map(e.args,function(e,t){var a;return a="value"===e.type?"this":r(e,n),t+": "+a}).join(", ")+"}"},tuple:function(e,n,r){return"["+Object.map(e.args,function(e){return"value"===e.type?"this":r(e)}).join(", ")+"]"},component:function(e,n){var r;return n&&n.components&&e.component?n.components.getObjectLabel?r=n.components.getObjectLabel(e.component):n.components.getLabelForObject&&(r=n.components.getLabelForObject(e.component)):r=e.label,"@"+r},element:function(e){return"#"+e.id},mapBlock:a("map"),filterBlock:a("filter"),someBlock:a("some"),everyBlock:a("every"),sortedBlock:a("sorted"),sortedSetBlock:a("sortedSet"),groupBlock:a("group"),groupMapBlock:a("groupMap"),minBlock:a("min"),maxBlock:a("max"),property:function(e,n,r){return"value"===e.args[0].type?"string"==typeof e.args[1].value?e.args[1].value:"literal"===e.args[1].type?"."+e.args[1].value:"this["+r(e.args[1],n)+"]":"parameters"===e.args[0].type?"$"+e.args[1].value:"literal"===e.args[1].type&&/^[\w\d_]+$/.test(e.args[1].value)?r(e.args[0],n,{type:"scope"})+"."+e.args[1].value:r(e.args[0],{type:"scope"},n)+"["+r(e.args[1],n)+"]"},"with":function(e,n,r){var t=r(e.args[1],n,e);return r(e.args[0],n)+"."+t},not:function(e,n,r){return"equals"===e.args[0].type?r(e.args[0].args[0],n,{type:"equals"})+" != "+r(e.args[0].args[1],n,{type:"equals"}):"!"+r(e.args[0],n,e)},neg:function(e,n,r){return"-"+r(e.args[0],n,e)},toNumber:function(e,n,r){return"+"+r(e.args[0],n,e)},parent:function(e,n,r){return"^"+r(e.args[0],n,e)},"if":function(e,n,r){return r(e.args[0],n,e)+" ? "+r(e.args[1],n)+" : "+r(e.args[2],n)},event:function(e,n,r){return e.when+" "+e.event+" -> "+r(e.listener,n)},binding:function(e,n,r,t){var a=t(n.args[0],r)+" "+e+" "+t(n.args[1],r),o="",s=n.descriptor;if(s)for(var i in s)o+=", "+i+": "+t(s[i],r);return a+o},bind:function(e,n,r){return this.binding("<-",e,n,r)},bind2:function(e,n,r){return this.binding("<->",e,n,r)},assign:function(e,n,r){return r(e.args[0],n)+": "+r(e.args[1],n)},block:function(e,n,r){var t="@"+e.label;return e.connection&&("prototype"===e.connection?t+=" < ":"object"===e.connection&&(t+=" : "),t+=r({type:"literal",value:e.module}),e.exports&&"value"!==e.exports.type&&(t+=" "+r(e.exports,n))),t+" {\n"+e.statements.map(function(e){return"    "+r(e,n)+";\n"}).join("")+"}\n"},sheet:function(e,n,r){return"\n"+e.blocks.map(function(e){return r(e,n)}).join("\n")+"\n"}}},s.forEach(function(e,n){t.semantics.stringifiers[n]=function(n,r,t){return n.args.map(function(e){return t(e,r,n)}).join(" "+e+" ").trim()}})}});