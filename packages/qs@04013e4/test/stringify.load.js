montageDefine("04013e4","test/stringify",{dependencies:["lab","../"],factory:function(t,i,e){var a=t("lab"),n=t("../"),s=a.expect,r=(a.before,a.after,a.experiment),f=a.test;r("#stringify",function(){f("stringifies a querystring object",function(t){s(n.stringify({a:"b"})).to.equal("a=b"),s(n.stringify({a:1})).to.equal("a=1"),s(n.stringify({a:1,b:2})).to.equal("a=1&b=2"),t()}),f("stringifies a nested object",function(t){s(n.stringify({a:{b:"c"}})).to.equal("a%5Bb%5D=c"),s(n.stringify({a:{b:{c:{d:"e"}}}})).to.equal("a%5Bb%5D%5Bc%5D%5Bd%5D=e"),t()}),f("stringifies an array value",function(t){s(n.stringify({a:["b","c","d"]})).to.equal("a%5B0%5D=b&a%5B1%5D=c&a%5B2%5D=d"),t()}),f("stringifies a nested array value",function(t){s(n.stringify({a:{b:["c","d"]}})).to.equal("a%5Bb%5D%5B0%5D=c&a%5Bb%5D%5B1%5D=d"),t()}),f("stringifies an object inside an array",function(t){s(n.stringify({a:[{b:"c"}]})).to.equal("a%5B0%5D%5Bb%5D=c"),s(n.stringify({a:[{b:{c:[1]}}]})).to.equal("a%5B0%5D%5Bb%5D%5Bc%5D%5B0%5D=1"),t()}),f("stringifies a complicated object",function(t){s(n.stringify({a:{b:"c",d:"e"}})).to.equal("a%5Bb%5D=c&a%5Bd%5D=e"),t()}),f("stringifies an empty value",function(t){s(n.stringify({a:""})).to.equal("a="),s(n.stringify({a:"",b:""})).to.equal("a=&b="),s(n.stringify({a:null})).to.equal("a="),s(n.stringify({a:{b:null}})).to.equal("a%5Bb%5D="),t()}),f("drops keys with a value of undefined",function(t){s(n.stringify({a:void 0})).to.equal(""),s(n.stringify({a:{b:void 0,c:null}})).to.equal("a%5Bc%5D="),t()}),f("url encodes values",function(t){s(n.stringify({a:"b c"})).to.equal("a=b%20c"),t()}),f("stringifies a date",function(t){var i=new Date,e="a="+encodeURIComponent(i.toISOString());s(n.stringify({a:i})).to.equal(e),t()}),f("stringifies the weird object from qs",function(t){s(n.stringify({"my weird field":"q1!2\"'w$5&7/z8)?"})).to.equal("my%20weird%20field=q1!2%22'w%245%267%2Fz8)%3F"),t()}),f("skips properties that are part of the object prototype",function(t){Object.prototype.crash="test",s(n.stringify({a:"b"})).to.equal("a=b"),s(n.stringify({a:{b:"c"}})).to.equal("a%5Bb%5D=c"),delete Object.prototype.crash,t()}),f("stringifies boolean values",function(t){s(n.stringify({a:!0})).to.equal("a=true"),s(n.stringify({a:{b:!0}})).to.equal("a%5Bb%5D=true"),s(n.stringify({b:!1})).to.equal("b=false"),s(n.stringify({b:{c:!1}})).to.equal("b%5Bc%5D=false"),t()}),f("stringifies buffer values",function(t){s(n.stringify({a:new Buffer("test")})).to.equal("a=test"),s(n.stringify({a:{b:new Buffer("test")}})).to.equal("a%5Bb%5D=test"),t()}),f("stringifies an object using an alternative delimiter",function(t){s(n.stringify({a:"b",c:"d"},";")).to.equal("a=b;c=d"),t()})})}});