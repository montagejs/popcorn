montageDefine("c2ad217","_fast-set",{dependencies:["./shim","./_dict","./_list","./generic-collection","./generic-set","./tree-log"],factory:function(t,e,n){"use strict";function o(t,e,n,r){if(!(this instanceof o))return new o(t,e,n,r);e=e||Object.equals,n=n||Object.hash,r=r||Function.noop,this.contentEquals=e,this.contentHash=n,this.getDefault=r;var s=this;this.buckets=new this.Buckets(null,function(){return new s.Bucket}),this.length=0,this.addEach(t)}var r=(t("./shim"),t("./_dict")),s=t("./_list"),c=t("./generic-collection"),i=t("./generic-set"),h=t("./tree-log");Object.prototype.hasOwnProperty;n.exports=o,o.FastSet=o,Object.addEach(o.prototype,c.prototype),Object.addEach(o.prototype,i.prototype),o.from=c.from,o.prototype.Buckets=r,o.prototype.Bucket=s,o.prototype.constructClone=function(t){return new this.constructor(t,this.contentEquals,this.contentHash,this.getDefault)},o.prototype.has=function(t){var e=this.contentHash(t);return this.buckets.get(e).has(t)},o.prototype.get=function(t,e){if(e)throw new Error("FastSet#get does not support second argument: equals");var n=this.contentHash(t),o=this.buckets;return o.has(n)?o.get(n).get(t):this.getDefault(t)},o.prototype["delete"]=function(t,e){if(e)throw new Error("FastSet#delete does not support second argument: equals");var n=this.contentHash(t),o=this.buckets;if(o.has(n)){var r=o.get(n);if(r["delete"](t))return this.length--,0===r.length&&o["delete"](n),!0}return!1},o.prototype.clear=function(){this.buckets.clear(),this.length=0},o.prototype.add=function(t){var e=this.contentHash(t),n=this.buckets;return n.has(e)||n.set(e,new this.Bucket(null,this.contentEquals)),!n.get(e).has(t)&&(n.get(e).add(t),this.length++,!0)},o.prototype.reduce=function(t,e){var n=arguments[2],o=this.buckets,r=0;return o.reduce(function(e,o){return o.reduce(function(e,o){return t.call(n,e,o,r++,this)},e,this)},e,this)},o.prototype.one=function(){if(this.length>0)return this.buckets.one().one()},o.prototype.iterate=function(){return this.buckets.valuesArray().flatten().iterate()},o.prototype.log=function(t,e,n,o){t=t||h.unicodeSharp,e=e||this.logNode,n||(n=console.log,o=console),n=n.bind(o);for(var r,s,c,i,u=this.buckets,a=u.size,l=u.keys(),f=0;r=l.next().value;)f===a-1?(s=t.fromAbove,c=" "):0===f?(s=t.branchDown,c=t.strafe):(s=t.fromBoth,c=t.strafe),i=u.get(r),n.call(o,s+t.through+t.branchDown+" "+r),i.forEach(function(r,s){var h,u,a;s===i.head.prev?(h=t.fromAbove,u=" "):(h=t.fromBoth,u=t.strafe),e(s,function(e){a?n.call(o,c+" "+u+"  "+e):(n.call(o,c+" "+h+t.through+t.through+e),a=!0)},function(e){n.call(o,c+" "+t.strafe+"  "+e)})}),f++},o.prototype.logNode=function(t,e){var n=t.value;Object(n)===n?JSON.stringify(n,null,4).split("\n").forEach(function(t){e(" "+t)}):e(" "+n)}}});