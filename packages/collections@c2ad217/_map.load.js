montageDefine("c2ad217","_map",{dependencies:["./shim","./generic-collection","./_set","./generic-map"],factory:function(t,e,r){"use strict";var i,o,n,s=(t("./shim"),t("./generic-collection"));if(void 0!==global.Map&&"function"==typeof global.Set.prototype.values){i=r.exports=global.Map,o=i,i.Map=i;var a,h={}.__proto__===Object.prototype;a=h?function(){this.__proto__=g}:function(){Object.defineProperties(this,observableSetProperties)},Object.defineProperty(i.prototype,"makeObservable",{value:a,writable:!0,configurable:!0,enumerable:!1}),Object.defineProperty(i.prototype,"makePropertyObservable",{value:function(){},writable:!0,configurable:!0,enumerable:!1}),i.prototype.constructClone=function(t){return new this.constructor(t)},i.prototype.isMap=!0,i.prototype.addEach=function(t){if(t&&Object(t)===t)if("function"==typeof t.forEach)t.isMap===!0?t.forEach(function(t,e){this.set(e,t)},this):t.forEach(function(t){this.set(t[0],t[1])},this);else if("number"==typeof t.length)for(var e=0;e<t.length;e++)this.add(t[e],e);else Object.keys(t).forEach(function(e){this.set(e,t[e])},this);else if(t&&"number"==typeof t.length)for(var e=0;e<t.length;e++)this.add(t[e],e);return this},i.prototype.add=function(t,e){return this.set(e,t)},i.prototype.reduce=function(t,e){var r=arguments[2];return this.forEach(function(i,o,n){e=t.call(r,e,i,o,this)}),e},i.prototype.reduceRight=function(t,e){for(var r,i=arguments[2],o=this.keys(),n=this.size,s=new Array(this.size),a=0;r=o.next().value;)s[--n]=r;for(;a++<n;)e=t.call(i,e,this.get(s[a]),s[a],this);return e},i.prototype.equals=function(t,e){if(e=e||Object.equals,this===t)return!0;if(t&&"function"==typeof t.every)return t.size===this.size&&t.every(function(t,r){return e(this.get(r),t)},this);var r=Object.keys(t);return r.length===this.size&&Object.keys(t).every(function(r){return e(this.get(r),t[r])},this)};var c=function(t,e){return e};i.prototype.keysArray=function(){return this.map(c)};var p=function(t,e){return t};i.prototype.valuesArray=function(){return this.map(p)};var u=function(t,e){return[e,t]};i.prototype.entriesArray=function(){return this.map(u)},i.prototype.toJSON=function(){return this.entriesArray()},i.prototype.items=function(){return this.entriesArray()},i.from=function(t){var e=new this;return e.addEach(t),e},Object.defineProperty(i.prototype,"length",{get:function(){return this.size},enumerable:!0,configurable:!0});var f=i.prototype.clear,l=i.prototype.set,y=i.prototype["delete"],d={clear:{value:function(){var t;this.dispatchesMapChanges&&(this.forEach(function(t,e){this.dispatchBeforeMapChange(e,t)},this),t=this.keysArray()),f.call(this),this.dispatchesMapChanges&&t.forEach(function(t){this.dispatchMapChange(t)},this)},writable:!0,configurable:!0},set:{value:function(t,e){var r=this.get(t);return r?(this.dispatchesMapChanges&&this.dispatchBeforeMapChange(t,r),l.call(this,t,e),this.dispatchesMapChanges&&this.dispatchMapChange(t,e)):(this.dispatchesMapChanges&&this.dispatchBeforeMapChange(t,void 0),l.call(this,t,e),this.dispatchesMapChanges&&this.dispatchMapChange(t,e)),this},writable:!0,configurable:!0},"delete":{value:function(t){return!!this.has(t)&&(this.dispatchesMapChanges&&this.dispatchBeforeMapChange(t,this.get(t)),y.call(this,t),this.dispatchesMapChanges&&this.dispatchMapChange(t,void 0),!0)}}};Object.addEach(i.prototype,s.prototype,!1);var g=Object.create(i.prototype,d)}var b=t("./_set").CollectionsSet,v=t("./generic-map");n=i=function M(t,e,r,i){return this instanceof M?(e=e||Object.equals,r=r||Object.hash,i=i||Function.noop,this.contentEquals=e,this.contentHash=r,this.getDefault=i,this.store=new b((void 0),function(t,r){return e(t.key,r.key)},function(t){return r(t.key)}),this.length=0,void this.addEach(t)):new M(t,e,r,i)},i.Map=i,Object.addEach(i.prototype,s.prototype),Object.addEach(i.prototype,v.prototype),Object.defineProperty(i.prototype,"size",s._sizePropertyDescriptor),i.from=s.from,i.prototype.constructClone=function(t){return new this.constructor(t,this.contentEquals,this.contentHash,this.getDefault)},i.prototype.log=function(t,e,r,i){e=e||this.logNode,this.store.log(t,function(t,r,i){e(t.value.value,r,i)},r,i)},i.prototype.logNode=function(t,e){e(" key: "+t.key),e(" value: "+t.value)},o?(r.exports=o,o.CollectionsMap=n):r.exports=n}});