"use strict";function LruSet(t,e,r,s,n){return this instanceof LruSet?(e=e||1/0,r=r||Object.equals,s=s||Object.hash,n=n||Function.noop,this.store=new Set((void 0),r,s),this.contentEquals=r,this.contentHash=s,this.getDefault=n,this.capacity=e,this.length=0,void this.addEach(t)):new LruSet(t,e,r,s,n)}var Shim=require("./shim"),Set=require("./set").CollectionsSet,GenericCollection=require("./generic-collection"),GenericSet=require("./generic-set"),PropertyChanges=require("./listen/property-changes"),RangeChanges=require("./listen/range-changes");module.exports=LruSet,LruSet.LruSet=LruSet,Object.addEach(LruSet.prototype,GenericCollection.prototype),Object.addEach(LruSet.prototype,GenericSet.prototype),Object.addEach(LruSet.prototype,PropertyChanges.prototype),Object.addEach(LruSet.prototype,RangeChanges.prototype),Object.defineProperty(LruSet.prototype,"size",GenericCollection._sizePropertyDescriptor),LruSet.from=GenericCollection.from,LruSet.prototype.constructClone=function(t){return new this.constructor(t,this.capacity,this.contentEquals,this.contentHash,this.getDefault)},LruSet.prototype.has=function(t){return this.store.has(t)},LruSet.prototype.get=function(t,e){if(e)throw new Error("LruSet#get does not support second argument: equals");return t=this.store.get(t),void 0!==t?(this.store["delete"](t),this.store.add(t)):t=this.getDefault(t),t},LruSet.prototype.add=function(t){var e,r=this.store.has(t),s=[],n=[];return r?(this.store["delete"](t),this.store.add(t)):this.capacity>0&&(s.push(t),this.length>=this.capacity&&(e=this.store.order.head.next,n.push(e.value)),this.dispatchesRangeChanges&&this.dispatchBeforeRangeChange(s,n,0),this.store.add(t),n.length>0&&this.store["delete"](e.value),this.length=this.length+s.length-n.length,this.dispatchesRangeChanges&&this.dispatchRangeChange(s,n,0)),s.length!==n.length},LruSet.prototype["delete"]=function(t,e){if(e)throw new Error("LruSet#delete does not support second argument: equals");var r=this.store.has(t);return r&&(this.dispatchesRangeChanges&&this.dispatchBeforeRangeChange([],[t],0),this.store["delete"](t),this.length--,this.dispatchesRangeChanges&&this.dispatchRangeChange([],[t],0)),r},LruSet.prototype.one=function(){if(this.length>0)return this.store.one()},LruSet.prototype.clear=function(){this.store.clear(),this.length=0},LruSet.prototype.reduce=function(t,e){var r=arguments[2],s=this.store,n=0;return s.reduce(function(e,s){return t.call(r,e,s,n++,this)},e,this)},LruSet.prototype.reduceRight=function(t,e){var r=arguments[2],s=this.store,n=this.length-1;return s.reduceRight(function(e,s){return t.call(r,e,s,n--,this)},e,this)},LruSet.prototype.iterate=function(){return this.store.iterate()};