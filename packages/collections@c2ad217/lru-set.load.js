montageDefine("c2ad217","lru-set",{dependencies:["./shim","./set","./generic-collection","./generic-set","./listen/property-changes","./listen/range-changes"],factory:function(t,e,s){"use strict";function n(t,e,s,r,i){return this instanceof n?(e=e||1/0,s=s||Object.equals,r=r||Object.hash,i=i||Function.noop,this.store=new o((void 0),s,r),this.contentEquals=s,this.contentHash=r,this.getDefault=i,this.capacity=e,this.length=0,void this.addEach(t)):new n(t,e,s,r,i)}var o=(t("./shim"),t("./set").CollectionsSet),r=t("./generic-collection"),i=t("./generic-set"),h=t("./listen/property-changes"),a=t("./listen/range-changes");s.exports=n,n.LruSet=n,Object.addEach(n.prototype,r.prototype),Object.addEach(n.prototype,i.prototype),Object.addEach(n.prototype,h.prototype),Object.addEach(n.prototype,a.prototype),Object.defineProperty(n.prototype,"size",r._sizePropertyDescriptor),n.from=r.from,n.prototype.constructClone=function(t){return new this.constructor(t,this.capacity,this.contentEquals,this.contentHash,this.getDefault)},n.prototype.has=function(t){return this.store.has(t)},n.prototype.get=function(t,e){if(e)throw new Error("LruSet#get does not support second argument: equals");return t=this.store.get(t),void 0!==t?(this.store["delete"](t),this.store.add(t)):t=this.getDefault(t),t},n.prototype.add=function(t){var e,s=this.store.has(t),n=[],o=[];return s?(this.store["delete"](t),this.store.add(t)):this.capacity>0&&(n.push(t),this.length>=this.capacity&&(e=this.store.order.head.next,o.push(e.value)),this.dispatchesRangeChanges&&this.dispatchBeforeRangeChange(n,o,0),this.store.add(t),o.length>0&&this.store["delete"](e.value),this.length=this.length+n.length-o.length,this.dispatchesRangeChanges&&this.dispatchRangeChange(n,o,0)),n.length!==o.length},n.prototype["delete"]=function(t,e){if(e)throw new Error("LruSet#delete does not support second argument: equals");var s=this.store.has(t);return s&&(this.dispatchesRangeChanges&&this.dispatchBeforeRangeChange([],[t],0),this.store["delete"](t),this.length--,this.dispatchesRangeChanges&&this.dispatchRangeChange([],[t],0)),s},n.prototype.one=function(){if(this.length>0)return this.store.one()},n.prototype.clear=function(){this.store.clear(),this.length=0},n.prototype.reduce=function(t,e){var s=arguments[2],n=this.store,o=0;return n.reduce(function(e,n){return t.call(s,e,n,o++,this)},e,this)},n.prototype.reduceRight=function(t,e){var s=arguments[2],n=this.store,o=this.length-1;return n.reduceRight(function(e,n){return t.call(s,e,n,o--,this)},e,this)},n.prototype.iterate=function(){return this.store.iterate()}}});