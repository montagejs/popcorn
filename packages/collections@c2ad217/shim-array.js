"use strict";function define(e,t){Object.defineProperty(Array.prototype,e,{value:t,writable:!0,configurable:!0,enumerable:!1})}function deprecatedWarn(e,t){"undefined"!=typeof console&&"function"==typeof console.warn&&t!==!0&&deprecatedWarnNonce.hasOwnProperty(e)===!1&&(console.warn(e),deprecatedWarnNonce[e]++)}function ArrayIterator(e,t,r){this.array=e,this.start=null==t?0:t,this.end=r}var Function=require("./shim-function"),GenericCollection=require("./generic-collection"),GenericOrder=require("./generic-order"),WeakMap=require("./weak-map");module.exports=Array;var array_splice=Array.prototype.splice,array_slice=Array.prototype.slice;Array.empty=[],Object.freeze&&Object.freeze(Array.empty),Array.nativeFrom=Array.from;var isSymbolDefined="undefined"!=typeof Symbol;Array.from=function(e,t,r){if(isSymbolDefined&&e&&("function"==typeof e[Symbol.iterator]||"function"==typeof t))return Array.nativeFrom(e,t,r);var n=[];return n.addEach(e),n},Array.unzip=function(e){for(var t=[],r=1/0,n=0;n<e.length;n++){var i=e[n];e[n]=i.toArray(),i.length<r&&(r=i.length)}for(var n=0;n<e.length;n++)for(var i=e[n],o=0;o<i.length;o++)o<r&&o in i&&(t[o]=t[o]||[],t[o][n]=i[o]);return t},define("addEach",GenericCollection.prototype.addEach),define("deleteEach",GenericCollection.prototype.deleteEach),define("toArray",GenericCollection.prototype.toArray),define("toObject",GenericCollection.prototype.toObject),define("all",GenericCollection.prototype.all),define("any",GenericCollection.prototype.any),define("min",GenericCollection.prototype.min),define("max",GenericCollection.prototype.max),define("sum",GenericCollection.prototype.sum),define("average",GenericCollection.prototype.average),define("only",GenericCollection.prototype.only),define("flatten",GenericCollection.prototype.flatten),define("zip",GenericCollection.prototype.zip),define("enumerate",GenericCollection.prototype.enumerate),define("group",GenericCollection.prototype.group),define("sorted",GenericCollection.prototype.sorted),define("reversed",GenericCollection.prototype.reversed),define("constructClone",function(e){var t=new this.constructor;return t.addEach(e),t}),define("has",function(e,t){return this.findValue(e,t)!==-1}),define("get",function(e,t){if(+e!==e)throw new Error("Indicies must be numbers");return!e in this?t:this[e]}),define("set",function(e,t){return this[e]=t,!0}),define("add",function(e){return this.push(e),!0}),define("delete",function(e,t){var r=this.findValue(e,t);return r!==-1&&(this.spliceOne(r),!0)}),define("deleteAll",function(e,t){t=t||this.contentEquals||Object.equals;for(var r=0,n=0;n<this.length;)t(e,this[n])?(this.swap(n,1),r++):n++;return r}),Array.prototype.find||define("find",function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),r=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var n=arguments[1],i=0;i<r;){var o=t[i];if(e.call(n,o,i,t))return o;i++}});var deprecatedWarnNonce={},ArrayFindPrototype=Object.getOwnPropertyDescriptor(Array.prototype,"find").value;define("find",function(e,t,r){return"function"==typeof arguments[0]&&this instanceof Array?ArrayFindPrototype.apply(this,arguments):(deprecatedWarn("Array#find usage is deprecated please use Array#findValue"),this.findValue.apply(this,arguments))}),define("findValue",function(e,t,r){if(r)throw new Error("Array#findValue does not support third argument: index");t=t||this.contentEquals||Object.equals;for(var r=0;r<this.length;r++)if(r in this&&t(e,this[r]))return r;return-1}),define("findLast",function(e,t){return deprecatedWarn("Array#findLast function is deprecated please use Array#findLastValue instead."),this.findLastValue.apply(this,arguments)}),define("findLastValue",function(e,t){t=t||this.contentEquals||Object.equals;var r=this.length;do if(r--,r in this&&t(this[r],e))return r;while(r>0);return-1}),define("swap",function(e,t,r){var n,i,o,a,l;if(e>this.length&&(this.length=e),"undefined"!=typeof r){if(n=[e,t],Array.isArray(r)||(r=array_slice.call(r)),o=0,i=r.length,i<1e3){for(o;o<i;o++)n[o+2]=r[o];return array_splice.apply(this,n)}for(l=array_splice.apply(this,n),o;o<i;){for(n=[e+o,0],a=2;a<1002&&o<i;a++,o++)n[a]=r[o];array_splice.apply(this,n)}return l}return"undefined"!=typeof t?array_splice.call(this,e,t):"undefined"!=typeof e?array_splice.call(this,e):[]}),define("peek",function(){return this[0]}),define("poke",function(e){this.length>0&&(this[0]=e)}),define("peekBack",function(){if(this.length>0)return this[this.length-1]}),define("pokeBack",function(e){this.length>0&&(this[this.length-1]=e)}),define("one",function(){for(var e in this)if(Object.owns(this,e))return this[e]}),Array.prototype.clear||define("clear",function(){return this.length=0,this}),define("compare",function(e,t){t=t||Object.compare;var r,n,i,o,a;if(this===e)return 0;if(!e||!Array.isArray(e))return GenericOrder.prototype.compare.call(this,e,t);for(n=this.length<e.length?this.length:e.length,r=0;r<n;r++)if(r in this){if(!(r in e))return-1;if(i=this[r],o=e[r],a=t(i,o))return a}else if(r in e)return 1;return this.length-e.length}),define("equals",function(e,t){t=t||Object.equals;var r,n,i=0,o=this.length;if(this===e)return!0;if(!e||!Array.isArray(e))return GenericOrder.prototype.equals.call(this,e);if(o!==e.length)return!1;for(;i<o;++i)if(i in this){if(!(i in e))return!1;if(r=this[i],n=e[i],!t(r,n))return!1}else if(i in e)return!1;return!0}),define("clone",function(e,t){if(null==e)e=1/0;else if(0===e)return this;if(t=t||new WeakMap,t.has(this))return t.get(this);var r=new Array(this.length);t.set(this,r);for(var n in this)r[n]=Object.clone(this[n],e-1,t);return r}),define("iterate",function(e,t){return new ArrayIterator(this,e,t)}),void 0===Array.prototype.spliceOne&&define("spliceOne",function(e,t){var r=this.length;if(r)if(1===arguments.length){for(;e<r;)this[e]=this[e+1],e++;this.length--}else this[e]=t}),define("Iterator",ArrayIterator),ArrayIterator.prototype.__iterationObject=null,Object.defineProperty(ArrayIterator.prototype,"_iterationObject",{get:function(){return this.__iterationObject||(this.__iterationObject={done:!1,value:null})}}),ArrayIterator.prototype.next=function(){return this.start===(null==this.end?this.array.length:this.end)?(this._iterationObject.done=!0,this._iterationObject.value=void 0):this._iterationObject.value=this.array[this.start++],this._iterationObject};