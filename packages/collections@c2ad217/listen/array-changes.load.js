montageDefine("c2ad217","listen/array-changes",{dependencies:["../shim","./property-changes","./range-changes","./map-changes"],factory:function(e,t,r){e("../shim");var h,a=(Array.prototype.splice,Array.prototype.spliceOne),i=Array.prototype.slice,n=(Array.prototype.reverse,Array.prototype.sort),s=Array.prototype.swap,p=Array.prototype.push,o={}.__proto__===Object.prototype,l="length";h=o?function(){this.__proto__=g}:function(){Object.defineProperties(this,c)},Object.defineProperty(Array.prototype,"makeObservable",{value:h,writable:!0,configurable:!0,enumerable:!1}),Object.defineProperty(Array.prototype,"makePropertyObservable",{value:function(){},writable:!0,configurable:!0,enumerable:!1});var c={isObservable:{value:!0,writable:!0,configurable:!0},makeObservable:{value:Function.noop,writable:!0,configurable:!0},reverse:{value:function(){var e=this.constructClone(this);return e.reverse(),this.swap(0,this.length,e),this},writable:!0,configurable:!0},sort:{value:function(){var e,t;for(this.dispatchBeforeRangeChange(this,this,0),e=0,t=this.length;e<t;e++)y.dispatchBeforeOwnPropertyChange(this,e,this[e]),this.dispatchBeforeMapChange(e,this[e]);for(n.apply(this,arguments),e=0,t=this.length;e<t;e++)y.dispatchOwnPropertyChange(this,e,this[e]),this.dispatchMapChange(e,this[e]);return this.dispatchRangeChange(this,this,0),this},writable:!0,configurable:!0},_dispatchBeforeOwnPropertyChange:{value:function(e,t){for(var r=e,h=e+t;r<h;r++)y.dispatchBeforeOwnPropertyChange(this,r,this[r]),this.dispatchBeforeMapChange(r,this[r])}},_dispatchOwnPropertyChange:{value:function(e,t){for(var r=e,h=e+t;r<h;r++)this.dispatchOwnPropertyChange(r,this[r]),this.dispatchMapChange(r,this[r])}},swap:{value:function(e,t,r){var h,a,n,p;if(r?Array.isArray(r)||(r=i.call(r)):r=Array.empty,p=r.length,e<0)e=this.length+e;else if(e>this.length){var o=e-this.length,c=Array(o+p);for(a=0,n=o;a<p;a++,n++)a in r&&(c[n]=r[a]);r=c,p=r.length,e=this.length}var g;if(0===t){if(0===p)return[];g=Array.empty}else g=i.call(this,e,e+t);var f=p-g.length,u=this.length,w=Math.max(this.length+f,e+p),b=u>w?u:w;f&&y.dispatchBeforeOwnPropertyChange(this,l,this.length),this.dispatchBeforeRangeChange(r,g,e),0===f?this._dispatchBeforeOwnPropertyChange(e,p):(h=y.hasOwnPropertyChangeDescriptor(this))&&this._dispatchBeforeOwnPropertyChange(e,b-e),e>u&&(this.length=e);var d=s.call(this,e,t,r);return 0===f?this._dispatchOwnPropertyChange(e,p):h&&this._dispatchOwnPropertyChange(e,b-e),this.dispatchRangeChange(r,g,e),f&&this.dispatchOwnPropertyChange(l,this.length),d},writable:!0,configurable:!0},splice:{value:function(e,t){return e>this.length&&(e=this.length),this.swap.call(this,e,t,i.call(arguments,2))},writable:!0,configurable:!0},spliceOne:{value:function(e,t){var r,h,i,n,s,p=this.length,o=arguments.length;1===o?(y.dispatchBeforeOwnPropertyChange(this,l,this.length),i=this.length-1,r=Array.empty):(r=[t],i=this.length),h=[this[e]],n=p>i?p:i,this.dispatchBeforeRangeChange(r,h,e),2===o?this._dispatchBeforeOwnPropertyChange(e,1):(s=y.hasOwnPropertyChangeDescriptor(this))&&this._dispatchBeforeOwnPropertyChange(e,n-e),1===o?a.call(this,e):a.call(this,e,t),2===o?this._dispatchOwnPropertyChange(e,1):s&&this._dispatchOwnPropertyChange(e,n-e),this.dispatchRangeChange(r,h,e),1===o&&this.dispatchOwnPropertyChange(l,this.length)},writable:!0,configurable:!0},_setSwapBuffer:{get:function(){return this.__setSwapBuffer||Object.defineProperty(this,"__setSwapBuffer",{value:[],writable:!0,configurable:!0,enumerable:!1}).__setSwapBuffer},enumerable:!1},set:{value:function(e,t){var r,h,a,i,n=void 0!==typeof t,s=n?[]:Array.empty;return e>=this.length?(s[e-this.length]=t,r=e+1-this.length,a=this.length):(s[0]=t,r=0,a=e),h=0===r?[this[e]]:Array.empty,r>0&&y.dispatchBeforeOwnPropertyChange(this,l,this.length),this.dispatchBeforeRangeChange(s,h,a),0===r?this._dispatchBeforeOwnPropertyChange(a,1):(i=y.hasOwnPropertyChangeDescriptor(this))&&this._dispatchBeforeOwnPropertyChange(a,r),this[e]=t,0===r?this._dispatchOwnPropertyChange(a,1):i&&this._dispatchOwnPropertyChange(a,r),this.dispatchRangeChange(s,h,a),r&&this.dispatchOwnPropertyChange(l,this.length),!0},writable:!0,configurable:!0},shift:{value:function(){return this.splice(0,1)[0]},writable:!0,configurable:!0},pop:{value:function(){if(this.length)return this.splice(this.length-1,1)[0]},writable:!0,configurable:!0},push:{value:function(e){var t,r,h=this.length,a=arguments.length;t=1===a?[arguments[0]]:Array.apply(null,arguments),a>0&&(y.dispatchBeforeOwnPropertyChange(this,l,h),this.dispatchBeforeRangeChange(t,Array.empty,h),(r=y.hasOwnPropertyChangeDescriptor(this))&&this._dispatchBeforeOwnPropertyChange(h,a)),p.apply(this,arguments),a>0&&(r&&this._dispatchOwnPropertyChange(h,a),this.dispatchRangeChange(t,Array.empty,h),this.dispatchOwnPropertyChange(l,this.length))},writable:!0,configurable:!0},unshift:{value:function(e){if(1===arguments.length)return this.splice(0,0,e);var t=i.call(arguments);return this.swap(0,0,t)},writable:!0,configurable:!0},clear:{value:function(){return this.splice(0,this.length)},writable:!0,configurable:!0}},g=Object.create(Array.prototype,c);t.observableArrayProperties=c;var y=e("./property-changes"),f=e("./range-changes"),u=e("./map-changes");Object.defineEach(Array.prototype,y.prototype,!1,!0,!1,!0),Object.defineEach(Array.prototype,f.prototype,!1,!0,!1,!0),Object.defineEach(Array.prototype,u.prototype,!1,!0,!1,!0)}});