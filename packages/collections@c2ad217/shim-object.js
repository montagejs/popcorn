"use strict";var WeakMap=require("./weak-map");require("./shim-function"),module.exports=Object,Object.empty=Object.freeze(Object.create(null)),Object.isObject=function(e){return Object(e)===e},Object.getValueOf=function(e){return e&&"function"==typeof e.valueOf&&(e=e.valueOf()),e};var hashMap=new WeakMap;Object.hash=function(e){return e&&"function"==typeof e.hash?""+e.hash():Object(e)===e?(hashMap.has(e)||hashMap.set(e,Math.random().toString(36).slice(2)),hashMap.get(e)):""+e};var owns=Object.prototype.hasOwnProperty;Object.owns=function(e,t){return owns.call(e,t)},Object.has=function(e,t){if("object"!=typeof e)throw new Error("Object.has can't accept non-object: "+typeof e);if(e&&"function"==typeof e.has)return e.has(t);if("string"==typeof t)return t in e&&e[t]!==Object.prototype[t];throw new Error("Key must be a string for Object.has on plain objects")},Object.get=function(e,t,r){if("object"!=typeof e)throw new Error("Object.get can't accept non-object: "+typeof e);return e&&"function"==typeof e.get?e.get(t,r):Object.has(e,t)?e[t]:r},Object.set=function(e,t,r){e&&"function"==typeof e.set?e.set(t,r):e[t]=r},Object.addEach=function(e,t,r){var n=3!==arguments.length||r;if(t)if("function"!=typeof t.forEach||t.hasOwnProperty("forEach"))if("number"==typeof t.length)for(var c=0;c<t.length;c++)e[c]=t[c];else for(var o,f=Object.keys(t),a=0;o=f[a];a++)!n&&Object.owns(e,o)||(e[o]=t[o]);else t.isMap===!0?t.forEach(function(t,r){e[r]=t}):t.forEach(function(t){e[t[0]]=t[1]});else;return e},Object.defineEach=function(e,t,r,n,c,o){var f=3!==arguments.length||r;if(t)if("function"!=typeof t.forEach||t.hasOwnProperty("forEach"))if("number"==typeof t.length)for(var a=0;a<t.length;a++)Object.defineProperty(e,a,{value:t[a],writable:o,configurable:n,enumerable:c});else for(var i,u=Object.keys(t),b=0;i=u[b];b++)!f&&Object.owns(e,i)||Object.defineProperty(e,i,{value:t[i],writable:o,configurable:n,enumerable:c});else t.isMap===!0?t.forEach(function(t,r){Object.defineProperty(e,r,{value:t,writable:o,configurable:n,enumerable:c})}):t.forEach(function(t){Object.defineProperty(e,t[0],{value:t[1],writable:o,configurable:n,enumerable:c})});else;return e},Object.forEach=function(e,t,r){for(var n,c=Object.keys(e),o=0;n=c[o];o++)t.call(r,e[n],n,e)},Object.map=function(e,t,r){for(var n,c=Object.keys(e),o=0,f=[];n=c[o];o++)f.push(t.call(r,e[n],n,e));return f},Object.values=function(e){return Object.map(e,Function.identity)},Object.concat=function(){for(var e={},t=0;t<arguments.length;t++)Object.addEach(e,arguments[t]);return e},Object.from=Object.concat,Object.is=function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t},Object.equals=function(e,t,r,n){if(r=r||Object.equals,e=Object.getValueOf(e),t=Object.getValueOf(t),e===t)return!0;if(Object.isObject(e)){if(n=n||new WeakMap,n.has(e))return!0;n.set(e,!0)}if(Object.isObject(e)&&"function"==typeof e.equals)return e.equals(t,r,n);if(Object.isObject(t)&&"function"==typeof t.equals)return t.equals(e,r,n);if(Object.isObject(e)&&Object.isObject(t)&&Object.getPrototypeOf(e)===Object.prototype&&Object.getPrototypeOf(t)===Object.prototype){for(var c in e)if(!r(e[c],t[c],r,n))return!1;for(var c in t)if(!(c in e&&r(t[c],e[c],r,n)))return!1;return!0}return e!==e&&t!==t||(!e||!t)&&e===t},Object.compare=function(e,t){if(e=Object.getValueOf(e),t=Object.getValueOf(t),e===t)return 0;var r=typeof e,n=typeof t;return"number"===r&&"number"===n?e-t:"string"===r&&"string"===n?e<t?-(1/0):1/0:e&&"function"==typeof e.compare?e.compare(t):t&&"function"==typeof t.compare?-t.compare(e):0},Object.clone=function(e,t,r){if(e=Object.getValueOf(e),r=r||new WeakMap,void 0===t)t=1/0;else if(0===t)return e;if(Object.isObject(e)){if(!r.has(e))if(e&&"function"==typeof e.clone)r.set(e,e.clone(t,r));else{var n=Object.getPrototypeOf(e);if(null!==n&&n!==Object.prototype)throw new Error("Can't clone "+e);var c=Object.create(n);r.set(e,c);for(var o in e)c[o]=Object.clone(e[o],t-1,r)}return r.get(e)}return e},Object.clear=function(e){if(e&&"function"==typeof e.clear)e.clear();else for(var t=Object.keys(e),r=t.length;r;)r--,delete e[t[r]];return e};