"use strict";function List(e,t,s){return _List._init(List,this,e,t,s)}var _List=require("./_list"),PropertyChanges=require("./listen/property-changes"),RangeChanges=require("./listen/range-changes");module.exports=List,List.prototype=new _List,List.prototype.constructor=List,List.List=List,List.from=_List.from,Object.addEach(List.prototype,PropertyChanges.prototype),Object.addEach(List.prototype,RangeChanges.prototype),List.prototype.makeObservable=function(){this.head.index=-1,this.updateIndexes(this.head.next,0),this.dispatchesRangeChanges=!0},Object.defineProperties(List.prototype,{_dispatchEmptyArray:{value:[]}}),List.prototype["delete"]=function(e,t){var s=this.findLast(e,t);if(s){if(this.dispatchesRangeChanges){var i=[],a=[e];this.dispatchBeforeRangeChange(i,a,s.index)}return s["delete"](),this.length--,this.dispatchesRangeChanges&&(this.updateIndexes(s.next,s.index),this.dispatchRangeChange(i,a,s.index)),!0}return!1},Object.defineProperty(List.prototype,"superClear",{value:_List.prototype.clear,enumerable:!1,configurable:!0,writable:!0}),List.prototype.clear=function(){var e,t;this.dispatchesRangeChanges&&(t=this.toArray(),e=[],this.dispatchBeforeRangeChange(e,t,0)),this.superClear(),this.dispatchesRangeChanges&&this.dispatchRangeChange(e,t,0)},List.prototype.add=function(e){var t=new this.Node(e);return this.dispatchesRangeChanges&&(t.index=this.length,this.dispatchBeforeRangeChange([e],[],t.index)),this._addNode(t),this.dispatchesRangeChanges&&this.dispatchRangeChange([e],[],t.index),!0},Object.defineProperty(List.prototype,"superPush",{value:_List.prototype.push,enumerable:!1,configurable:!0,writable:!0}),List.prototype.push=function(){if(this.dispatchesRangeChanges){var e=Array.prototype.slice.call(arguments),t=[],s=this.length;this.dispatchBeforeRangeChange(e,t,s);var i=this.head.prev}1===arguments.length?this.superPush.call(this,arguments[0]):2===arguments.length?this.superPush.call(this,arguments[0],arguments[1]):this.superPush.apply(this,arguments),this.dispatchesRangeChanges&&(this.updateIndexes(i.next,void 0===i.index?0:i.index+1),this.dispatchRangeChange(e,t,s))},Object.defineProperty(List.prototype,"superUnshift",{value:_List.prototype.unshift,enumerable:!1,configurable:!0,writable:!0}),List.prototype.unshift=function(){if(this.dispatchesRangeChanges){var e=Array.prototype.slice.call(arguments),t=[];this.dispatchBeforeRangeChange(e,t,0)}1===arguments.length?this.superUnshift.call(this,arguments[0]):2===arguments.length?this.superUnshift.call(this,arguments[0],arguments[1]):this.superUnshift.apply(this,arguments),this.dispatchesRangeChanges&&(this.updateIndexes(this.head.next,0),this.dispatchRangeChange(e,t,0))},Object.defineProperty(List.prototype,"_beforePop",{value:function(e,t){var s;return this.dispatchesRangeChanges&&(s=[e],this.dispatchBeforeRangeChange(this._dispatchEmptyArray,s,t)),s},enumerable:!1,configurable:!0,writable:!0}),Object.defineProperty(List.prototype,"_afterPop",{value:function(e,t,s){this.dispatchesRangeChanges&&this.dispatchRangeChange(this._dispatchEmptyArray,s,t)},enumerable:!1,configurable:!0,writable:!0}),Object.defineProperty(List.prototype,"superPop",{value:_List.prototype.pop,enumerable:!1,configurable:!0,writable:!0}),List.prototype.pop=function(){return this.superPop(this._beforePop,this._afterPop)},Object.defineProperty(List.prototype,"_beforeShift",{value:function(e,t){var s;return this.dispatchesRangeChanges&&(s=[e],this.dispatchBeforeRangeChange(this._dispatchEmptyArray,s,t)),s},enumerable:!1,configurable:!0,writable:!0}),Object.defineProperty(List.prototype,"_afterShift",{value:function(e,t,s){this.dispatchesRangeChanges&&(this.updateIndexes(this.head.next,t),this.dispatchRangeChange(this._dispatchEmptyArray,s,t))},enumerable:!1,configurable:!0,writable:!0}),Object.defineProperty(List.prototype,"superShift",{value:_List.prototype.shift,enumerable:!1,configurable:!0,writable:!0}),List.prototype.shift=function(){return this.superShift(this._beforeShift,this._afterShift)},Object.defineProperty(List.prototype,"superSwap",{value:_List.prototype.swap,enumerable:!1,configurable:!0,writable:!0}),List.prototype.swap=function(e,t,s){var i,a,r=function(e,t,s){this.dispatchesRangeChanges&&(i=e===this.head?this.length:e.prev===this.head?0:e.index,a=e.prev,this.dispatchBeforeRangeChange(t,s,i))},h=function(e,t,s){this.dispatchesRangeChanges&&(e===this.head?this.updateIndexes(this.head.next,0):this.updateIndexes(a.next,a.index+1),this.dispatchRangeChange(t,s,i))};return this.superSwap(e,t,s,r,h)},Object.defineProperty(List.prototype,"superReverse",{value:_List.prototype.reverse,enumerable:!1,configurable:!0,writable:!0}),List.prototype.reverse=function(){if(this.dispatchesRangeChanges){var e=this.toArray(),t=e.reversed();this.dispatchBeforeRangeChange(t,e,0)}return this.superReverse(),this.dispatchesRangeChanges&&this.dispatchRangeChange(t,e,0),this};