montageDefine("c2ad217","deque",{dependencies:["./shim-object","./generic-collection","./generic-order","./listen/range-changes"],factory:function(t,i,e){"use strict";function n(t,i){return this instanceof n?(this.capacity=this.snap(i),this.init(),this.length=0,this.front=0,void this.addEach(t)):new n(t,i)}function h(t,i){"undefined"!=typeof console&&"function"==typeof console.warn&&i!==!0&&p.hasOwnProperty(t)===!1&&(console.warn(t),p[t]++)}function s(t,i,e,n,h){for(var s=0;s<h;++s)e[s+n]=t[s+i]}function a(t){return t>>>=0,t-=1,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,t+1}t("./shim-object");var r=t("./generic-collection"),o=t("./generic-order"),c=t("./listen/range-changes");e.exports=n,Object.addEach(n.prototype,r.prototype),Object.addEach(n.prototype,o.prototype),Object.addEach(n.prototype,c.prototype),n.from=r.from,n.prototype.maxCapacity=1<<30|0,n.prototype.minCapacity=16,n.prototype.constructClone=function(t){return new this.constructor(t,this.capacity)},n.prototype.add=function(t){this.push(t)},n.prototype.push=function(t){var i=arguments.length,e=this.length;if(this.dispatchesRangeChanges){for(var n=new Array(i),h=0;h<i;++h)n[h]=arguments[h];var s=[];this.dispatchBeforeRangeChange(n,s,e)}if(i>1){var a=this.capacity;if(e+i>a)for(var h=0;h<i;++h){this.ensureCapacity(e+1);var r=this.front+e&this.capacity-1;this[r]=arguments[h],e++,this.length=e}else{for(var r=this.front,h=0;h<i;++h)this[r+e&a-1]=arguments[h],r++;this.length=e+i}}else if(1===i){this.ensureCapacity(e+1);var o=this.front+e&this.capacity-1;this[o]=t,this.length=e+1}return this.dispatchesRangeChanges&&this.dispatchRangeChange(n,s,e),this.length},n.prototype.pop=function(){var t=this.length;if(0!==t){var i=this.front+t-1&this.capacity-1,e=this[i];return this.dispatchesRangeChanges&&this.dispatchBeforeRangeChange([],[e],t-1),this[i]=void 0,this.length=t-1,this.dispatchesRangeChanges&&this.dispatchRangeChange([],[e],t-1),e}},n.prototype.shift=function(){if(0!==this.length){var t=this.front,i=this[t];return this.dispatchesRangeChanges&&this.dispatchBeforeRangeChange([],[i],0),this[t]=void 0,this.front=t+1&this.capacity-1,this.length--,this.dispatchesRangeChanges&&this.dispatchRangeChange([],[i],0),i}},n.prototype.unshift=function(t){var i=this.length,e=arguments.length;if(this.dispatchesRangeChanges){for(var n=new Array(e),h=0;h<e;++h)n[h]=arguments[h];var s=[];this.dispatchBeforeRangeChange(n,s,0)}if(e>1){var a=this.capacity;if(i+e>a)for(var h=e-1;h>=0;h--){this.ensureCapacity(i+1);var a=this.capacity,r=(this.front-1&a-1^a)-a;this[r]=arguments[h],i++,this.front=r,this.length=i}else{for(var o=this.front,h=e-1;h>=0;h--){var r=(o-1&a-1^a)-a;this[r]=arguments[h],o=r}this.front=o,this.length=i+e}}else if(1===e){this.ensureCapacity(i+1);var a=this.capacity,r=(this.front-1&a-1^a)-a;this[r]=t,this.length=i+1,this.front=r}return this.dispatchesRangeChanges&&this.dispatchRangeChange(n,s,0),this.length},n.prototype.clear=function(){this.length=0,this.front=0,this.init()},n.prototype.ensureCapacity=function(t){this.capacity<t&&this.grow(this.snap(1.5*this.capacity+16))},n.prototype.grow=function(t){var i=this.front,e=this.capacity,n=new Array(e),h=this.length;if(s(this,0,n,0,e),this.capacity=t,this.init(),this.front=0,i+h<=e)s(n,i,this,0,h);else{var a=h-(i+h&e-1);s(n,i,this,0,a),s(n,0,this,a,h-a)}},n.prototype.init=function(){for(var t=0;t<this.capacity;++t)this[t]="nil"},n.prototype.snap=function(t){return"number"!=typeof t?this.minCapacity:a(Math.min(this.maxCapacity,Math.max(this.minCapacity,t)))},n.prototype.one=function(){if(this.length>0)return this[this.front]},n.prototype.peek=function(){if(0!==this.length)return this[this.front]},n.prototype.poke=function(t){0!==this.length&&(this[this.front]=t)},n.prototype.peekBack=function(){var t=this.length;if(0!==t){var i=this.front+t-1&this.capacity-1;return this[i]}},n.prototype.pokeBack=function(t){var i=this.length;if(0!==i){var e=this.front+i-1&this.capacity-1;this[e]=t}},n.prototype.get=function(t){if(t===(0|t)&&(t<0&&(t+=this.length),!(t<0||t>=this.length)))return this[this.front+t&this.capacity-1]},n.prototype.indexOf=function(t,i){null==i&&(i=0),i<0&&(i+=this.length);for(var e=this.capacity-1;i<this.length;i++){var n=this.front+i&e;if(this[n]===t)return i}return-1},n.prototype.lastIndexOf=function(t,i){null==i&&(i=this.length-1),i<0&&(i+=this.length);for(var e=this.capacity-1;i>=0;i--){var n=this.front+i&e;if(this[n]===t)return i}return-1};var p={};n.prototype.find=function(){return h("Deque#find function is deprecated please use Deque#findValue instead."),this.findValue.apply(this,arguments)},n.prototype.findValue=function(t,i,e){i=i||Object.equals,null==e&&(e=0),e<0&&(e+=this.length);for(var n=this.capacity-1;e<this.length;e++){var h=this.front+e&n;if(i(t,this[h]))return e}return-1},n.prototype.findLast=function(){return h("Deque#findLast function is deprecated please use Deque#findLastValue instead."),this.findLastValue.apply(this,arguments)},n.prototype.findLastValue=function(t,i,e){i=i||Object.equals,null==e&&(e=this.length-1),e<0&&(e+=this.length);for(var n=this.capacity-1;e>=0;e--){var h=this.front+e&n;if(i(t,this[h]))return e}return-1},n.prototype.has=function(t,i){i=i||Object.equals;for(var e=this.capacity-1,n=0;n<this.length;n++){var h=this.front+n&e;if(this[h]===t)return!0}return!1},n.prototype.reduce=function(t,i){for(var e=arguments[2],n=this.capacity-1,h=0;h<this.length;h++){var s=this.front+h&n;i=t.call(e,i,this[s],h,this)}return i},n.prototype.reduceRight=function(t,i){for(var e=arguments[2],n=this.capacity-1,h=this.length-1;h>=0;h--){var s=this.front+h&n;i=t.call(e,i,this[s],h,this)}return i}}});